/*! jQuery Migrate v1.4.1 | (c) jQuery Foundation and other contributors | jquery.org/license */
"undefined" == typeof jQuery.migrateMute && (jQuery.migrateMute = !0),
    function(a, b, c) {
        function d(c) {
            var d = b.console;
            f[c] || (f[c] = !0, a.migrateWarnings.push(c), d && d.warn && !a.migrateMute && (d.warn("JQMIGRATE: " + c), a.migrateTrace && d.trace && d.trace()))
        }

        function e(b, c, e, f) {
            if (Object.defineProperty) try {
                return void Object.defineProperty(b, c, {
                    configurable: !0,
                    enumerable: !0,
                    get: function() {
                        return d(f), e
                    },
                    set: function(a) {
                        d(f), e = a
                    }
                })
            } catch (g) {}
            a._definePropertyBroken = !0, b[c] = e
        }
        a.migrateVersion = "1.4.1";
        var f = {};
        a.migrateWarnings = [], b.console && b.console.log && b.console.log("JQMIGRATE: Migrate is installed" + (a.migrateMute ? "" : " with logging active") + ", version " + a.migrateVersion), a.migrateTrace === c && (a.migrateTrace = !0), a.migrateReset = function() {
            f = {}, a.migrateWarnings.length = 0
        }, "BackCompat" === document.compatMode && d("jQuery is not compatible with Quirks Mode");
        var g = a("<input/>", {
                size: 1
            }).attr("size") && a.attrFn,
            h = a.attr,
            i = a.attrHooks.value && a.attrHooks.value.get || function() {
                return null
            },
            j = a.attrHooks.value && a.attrHooks.value.set || function() {
                return c
            },
            k = /^(?:input|button)$/i,
            l = /^[238]$/,
            m = /^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,
            n = /^(?:checked|selected)$/i;
        e(a, "attrFn", g || {}, "jQuery.attrFn is deprecated"), a.attr = function(b, e, f, i) {
            var j = e.toLowerCase(),
                o = b && b.nodeType;
            return i && (h.length < 4 && d("jQuery.fn.attr( props, pass ) is deprecated"), b && !l.test(o) && (g ? e in g : a.isFunction(a.fn[e]))) ? a(b)[e](f) : ("type" === e && f !== c && k.test(b.nodeName) && b.parentNode && d("Can't change the 'type' of an input or button in IE 6/7/8"), !a.attrHooks[j] && m.test(j) && (a.attrHooks[j] = {
                get: function(b, d) {
                    var e, f = a.prop(b, d);
                    return f === !0 || "boolean" != typeof f && (e = b.getAttributeNode(d)) && e.nodeValue !== !1 ? d.toLowerCase() : c
                },
                set: function(b, c, d) {
                    var e;
                    return c === !1 ? a.removeAttr(b, d) : (e = a.propFix[d] || d, e in b && (b[e] = !0), b.setAttribute(d, d.toLowerCase())), d
                }
            }, n.test(j) && d("jQuery.fn.attr('" + j + "') might use property instead of attribute")), h.call(a, b, e, f))
        }, a.attrHooks.value = {
            get: function(a, b) {
                var c = (a.nodeName || "").toLowerCase();
                return "button" === c ? i.apply(this, arguments) : ("input" !== c && "option" !== c && d("jQuery.fn.attr('value') no longer gets properties"), b in a ? a.value : null)
            },
            set: function(a, b) {
                var c = (a.nodeName || "").toLowerCase();
                return "button" === c ? j.apply(this, arguments) : ("input" !== c && "option" !== c && d("jQuery.fn.attr('value', val) no longer sets properties"), void(a.value = b))
            }
        };
        var o, p, q = a.fn.init,
            r = a.find,
            s = a.parseJSON,
            t = /^\s*</,
            u = /\[(\s*[-\w]+\s*)([~|^$*]?=)\s*([-\w#]*?#[-\w#]*)\s*\]/,
            v = /\[(\s*[-\w]+\s*)([~|^$*]?=)\s*([-\w#]*?#[-\w#]*)\s*\]/g,
            w = /^([^<]*)(<[\w\W]+>)([^>]*)$/;
        a.fn.init = function(b, e, f) {
            var g, h;
            return b && "string" == typeof b && !a.isPlainObject(e) && (g = w.exec(a.trim(b))) && g[0] && (t.test(b) || d("$(html) HTML strings must start with '<' character"), g[3] && d("$(html) HTML text after last tag is ignored"), "#" === g[0].charAt(0) && (d("HTML string cannot start with a '#' character"), a.error("JQMIGRATE: Invalid selector string (XSS)")), e && e.context && e.context.nodeType && (e = e.context), a.parseHTML) ? q.call(this, a.parseHTML(g[2], e && e.ownerDocument || e || document, !0), e, f) : (h = q.apply(this, arguments), b && b.selector !== c ? (h.selector = b.selector, h.context = b.context) : (h.selector = "string" == typeof b ? b : "", b && (h.context = b.nodeType ? b : e || document)), h)
        }, a.fn.init.prototype = a.fn, a.find = function(a) {
            var b = Array.prototype.slice.call(arguments);
            if ("string" == typeof a && u.test(a)) try {
                document.querySelector(a)
            } catch (c) {
                a = a.replace(v, function(a, b, c, d) {
                    return "[" + b + c + '"' + d + '"]'
                });
                try {
                    document.querySelector(a), d("Attribute selector with '#' must be quoted: " + b[0]), b[0] = a
                } catch (e) {
                    d("Attribute selector with '#' was not fixed: " + b[0])
                }
            }
            return r.apply(this, b)
        };
        var x;
        for (x in r) Object.prototype.hasOwnProperty.call(r, x) && (a.find[x] = r[x]);
        a.parseJSON = function(a) {
            return a ? s.apply(this, arguments) : (d("jQuery.parseJSON requires a valid JSON string"), null)
        }, a.uaMatch = function(a) {
            a = a.toLowerCase();
            var b = /(chrome)[ \/]([\w.]+)/.exec(a) || /(webkit)[ \/]([\w.]+)/.exec(a) || /(opera)(?:.*version|)[ \/]([\w.]+)/.exec(a) || /(msie) ([\w.]+)/.exec(a) || a.indexOf("compatible") < 0 && /(mozilla)(?:.*? rv:([\w.]+)|)/.exec(a) || [];
            return {
                browser: b[1] || "",
                version: b[2] || "0"
            }
        }, a.browser || (o = a.uaMatch(navigator.userAgent), p = {}, o.browser && (p[o.browser] = !0, p.version = o.version), p.chrome ? p.webkit = !0 : p.webkit && (p.safari = !0), a.browser = p), e(a, "browser", a.browser, "jQuery.browser is deprecated"), a.boxModel = a.support.boxModel = "CSS1Compat" === document.compatMode, e(a, "boxModel", a.boxModel, "jQuery.boxModel is deprecated"), e(a.support, "boxModel", a.support.boxModel, "jQuery.support.boxModel is deprecated"), a.sub = function() {
            function b(a, c) {
                return new b.fn.init(a, c)
            }
            a.extend(!0, b, this), b.superclass = this, b.fn = b.prototype = this(), b.fn.constructor = b, b.sub = this.sub, b.fn.init = function(d, e) {
                var f = a.fn.init.call(this, d, e, c);
                return f instanceof b ? f : b(f)
            }, b.fn.init.prototype = b.fn;
            var c = b(document);
            return d("jQuery.sub() is deprecated"), b
        }, a.fn.size = function() {
            return d("jQuery.fn.size() is deprecated; use the .length property"), this.length
        };
        var y = !1;
        a.swap && a.each(["height", "width", "reliableMarginRight"], function(b, c) {
            var d = a.cssHooks[c] && a.cssHooks[c].get;
            d && (a.cssHooks[c].get = function() {
                var a;
                return y = !0, a = d.apply(this, arguments), y = !1, a
            })
        }), a.swap = function(a, b, c, e) {
            var f, g, h = {};
            y || d("jQuery.swap() is undocumented and deprecated");
            for (g in b) h[g] = a.style[g], a.style[g] = b[g];
            f = c.apply(a, e || []);
            for (g in b) a.style[g] = h[g];
            return f
        }, a.ajaxSetup({
            converters: {
                "text json": a.parseJSON
            }
        });
        var z = a.fn.data;
        a.fn.data = function(b) {
            var e, f, g = this[0];
            return !g || "events" !== b || 1 !== arguments.length || (e = a.data(g, b), f = a._data(g, b), e !== c && e !== f || f === c) ? z.apply(this, arguments) : (d("Use of jQuery.fn.data('events') is deprecated"), f)
        };
        var A = /\/(java|ecma)script/i;
        a.clean || (a.clean = function(b, c, e, f) {
            c = c || document, c = !c.nodeType && c[0] || c, c = c.ownerDocument || c, d("jQuery.clean() is deprecated");
            var g, h, i, j, k = [];
            if (a.merge(k, a.buildFragment(b, c).childNodes), e)
                for (i = function(a) {
                        return !a.type || A.test(a.type) ? f ? f.push(a.parentNode ? a.parentNode.removeChild(a) : a) : e.appendChild(a) : void 0
                    }, g = 0; null != (h = k[g]); g++) a.nodeName(h, "script") && i(h) || (e.appendChild(h), "undefined" != typeof h.getElementsByTagName && (j = a.grep(a.merge([], h.getElementsByTagName("script")), i), k.splice.apply(k, [g + 1, 0].concat(j)), g += j.length));
            return k
        });
        var B = a.event.add,
            C = a.event.remove,
            D = a.event.trigger,
            E = a.fn.toggle,
            F = a.fn.live,
            G = a.fn.die,
            H = a.fn.load,
            I = "ajaxStart|ajaxStop|ajaxSend|ajaxComplete|ajaxError|ajaxSuccess",
            J = new RegExp("\\b(?:" + I + ")\\b"),
            K = /(?:^|\s)hover(\.\S+|)\b/,
            L = function(b) {
                return "string" != typeof b || a.event.special.hover ? b : (K.test(b) && d("'hover' pseudo-event is deprecated, use 'mouseenter mouseleave'"), b && b.replace(K, "mouseenter$1 mouseleave$1"))
            };
        a.event.props && "attrChange" !== a.event.props[0] && a.event.props.unshift("attrChange", "attrName", "relatedNode", "srcElement"), a.event.dispatch && e(a.event, "handle", a.event.dispatch, "jQuery.event.handle is undocumented and deprecated"), a.event.add = function(a, b, c, e, f) {
            a !== document && J.test(b) && d("AJAX events should be attached to document: " + b), B.call(this, a, L(b || ""), c, e, f)
        }, a.event.remove = function(a, b, c, d, e) {
            C.call(this, a, L(b) || "", c, d, e)
        }, a.each(["load", "unload", "error"], function(b, c) {
            a.fn[c] = function() {
                var a = Array.prototype.slice.call(arguments, 0);
                return "load" === c && "string" == typeof a[0] ? H.apply(this, a) : (d("jQuery.fn." + c + "() is deprecated"), a.splice(0, 0, c), arguments.length ? this.bind.apply(this, a) : (this.triggerHandler.apply(this, a), this))
            }
        }), a.fn.toggle = function(b, c) {
            if (!a.isFunction(b) || !a.isFunction(c)) return E.apply(this, arguments);
            d("jQuery.fn.toggle(handler, handler...) is deprecated");
            var e = arguments,
                f = b.guid || a.guid++,
                g = 0,
                h = function(c) {
                    var d = (a._data(this, "lastToggle" + b.guid) || 0) % g;
                    return a._data(this, "lastToggle" + b.guid, d + 1), c.preventDefault(), e[d].apply(this, arguments) || !1
                };
            for (h.guid = f; g < e.length;) e[g++].guid = f;
            return this.click(h)
        }, a.fn.live = function(b, c, e) {
            return d("jQuery.fn.live() is deprecated"), F ? F.apply(this, arguments) : (a(this.context).on(b, this.selector, c, e), this)
        }, a.fn.die = function(b, c) {
            return d("jQuery.fn.die() is deprecated"), G ? G.apply(this, arguments) : (a(this.context).off(b, this.selector || "**", c), this)
        }, a.event.trigger = function(a, b, c, e) {
            return c || J.test(a) || d("Global events are undocumented and deprecated"), D.call(this, a, b, c || document, e)
        }, a.each(I.split("|"), function(b, c) {
            a.event.special[c] = {
                setup: function() {
                    var b = this;
                    return b !== document && (a.event.add(document, c + "." + a.guid, function() {
                        a.event.trigger(c, Array.prototype.slice.call(arguments, 1), b, !0)
                    }), a._data(this, c, a.guid++)), !1
                },
                teardown: function() {
                    return this !== document && a.event.remove(document, c + "." + a._data(this, c)), !1
                }
            }
        }), a.event.special.ready = {
            setup: function() {
                this === document && d("'ready' event is deprecated")
            }
        };
        var M = a.fn.andSelf || a.fn.addBack,
            N = a.fn.find;
        if (a.fn.andSelf = function() {
                return d("jQuery.fn.andSelf() replaced by jQuery.fn.addBack()"), M.apply(this, arguments)
            }, a.fn.find = function(a) {
                var b = N.apply(this, arguments);
                return b.context = this.context, b.selector = this.selector ? this.selector + " " + a : a, b
            }, a.Callbacks) {
            var O = a.Deferred,
                P = [
                    ["resolve", "done", a.Callbacks("once memory"), a.Callbacks("once memory"), "resolved"],
                    ["reject", "fail", a.Callbacks("once memory"), a.Callbacks("once memory"), "rejected"],
                    ["notify", "progress", a.Callbacks("memory"), a.Callbacks("memory")]
                ];
            a.Deferred = function(b) {
                var c = O(),
                    e = c.promise();
                return c.pipe = e.pipe = function() {
                    var b = arguments;
                    return d("deferred.pipe() is deprecated"), a.Deferred(function(d) {
                        a.each(P, function(f, g) {
                            var h = a.isFunction(b[f]) && b[f];
                            c[g[1]](function() {
                                var b = h && h.apply(this, arguments);
                                b && a.isFunction(b.promise) ? b.promise().done(d.resolve).fail(d.reject).progress(d.notify) : d[g[0] + "With"](this === e ? d.promise() : this, h ? [b] : arguments)
                            })
                        }), b = null
                    }).promise()
                }, c.isResolved = function() {
                    return d("deferred.isResolved is deprecated"), "resolved" === c.state()
                }, c.isRejected = function() {
                    return d("deferred.isRejected is deprecated"), "rejected" === c.state()
                }, b && b.call(c, c), c
            }
        }
    }(jQuery, window);
jQuery(function($) {
    'use strict';

    function rot13(s) {
        return s.replace(/[a-zA-Z]/g, function(c) {
            return String.fromCharCode((c <= 'Z' ? 90 : 122) >= (c = c.charCodeAt(0) + 13) ? c : c - 26);
        });
    }

    function fetchEmail(el) {
        var email = el.getAttribute('data-enc-email');
        if (!email) {
            return null;
        }
        email = email.replace(/\[at\]/g, '@');
        email = rot13(email);
        return email;
    }

    function parseTitle(el) {
        var title = el.getAttribute('title');
        var email = fetchEmail(el);
        if (title && email) {
            title = title.replace('{{email}}', email);
            el.setAttribute('title', title);
        }
    }

    function setInputValue(el) {
        var email = fetchEmail(el);
        if (email) {
            el.setAttribute('value', email);
        }
    }

    function mailto(el) {
        var email = fetchEmail(el);
        if (email) {
            window.location.href = 'mailto:' + email;
        }
    }

    function revert(el, rtl) {
        var email = fetchEmail(el);
        if (email) {
            rtl.text(email);
            rtl.removeClass('wpml-rtl');
        }
    }
    document.addEventListener('copy', function(e) {
        $('a[data-enc-email]').each(function() {
            var rtl = $(this).find('.wpml-rtl');
            if (rtl.text()) {
                revert(this, rtl);
            }
        });
        console.log('copy');
    });
    $('body').on('click', 'a[data-enc-email]', function() {
        mailto(this);
    });
    $('a[data-enc-email]').each(function() {
        parseTitle(this);
    });
    $('input[data-enc-email]').each(function() {
        setInputValue(this);
    });
});
/*!
 * jQuery UI Core 1.11.4
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/category/ui-core/
 */
! function(a) {
    "function" == typeof define && define.amd ? define(["jquery"], a) : a(jQuery)
}(function(a) {
    function b(b, d) {
        var e, f, g, h = b.nodeName.toLowerCase();
        return "area" === h ? (e = b.parentNode, f = e.name, !(!b.href || !f || "map" !== e.nodeName.toLowerCase()) && (g = a("img[usemap='#" + f + "']")[0], !!g && c(g))) : (/^(input|select|textarea|button|object)$/.test(h) ? !b.disabled : "a" === h ? b.href || d : d) && c(b)
    }

    function c(b) {
        return a.expr.filters.visible(b) && !a(b).parents().addBack().filter(function() {
            return "hidden" === a.css(this, "visibility")
        }).length
    }
    a.ui = a.ui || {}, a.extend(a.ui, {
        version: "1.11.4",
        keyCode: {
            BACKSPACE: 8,
            COMMA: 188,
            DELETE: 46,
            DOWN: 40,
            END: 35,
            ENTER: 13,
            ESCAPE: 27,
            HOME: 36,
            LEFT: 37,
            PAGE_DOWN: 34,
            PAGE_UP: 33,
            PERIOD: 190,
            RIGHT: 39,
            SPACE: 32,
            TAB: 9,
            UP: 38
        }
    }), a.fn.extend({
        scrollParent: function(b) {
            var c = this.css("position"),
                d = "absolute" === c,
                e = b ? /(auto|scroll|hidden)/ : /(auto|scroll)/,
                f = this.parents().filter(function() {
                    var b = a(this);
                    return (!d || "static" !== b.css("position")) && e.test(b.css("overflow") + b.css("overflow-y") + b.css("overflow-x"))
                }).eq(0);
            return "fixed" !== c && f.length ? f : a(this[0].ownerDocument || document)
        },
        uniqueId: function() {
            var a = 0;
            return function() {
                return this.each(function() {
                    this.id || (this.id = "ui-id-" + ++a)
                })
            }
        }(),
        removeUniqueId: function() {
            return this.each(function() {
                /^ui-id-\d+$/.test(this.id) && a(this).removeAttr("id")
            })
        }
    }), a.extend(a.expr[":"], {
        data: a.expr.createPseudo ? a.expr.createPseudo(function(b) {
            return function(c) {
                return !!a.data(c, b)
            }
        }) : function(b, c, d) {
            return !!a.data(b, d[3])
        },
        focusable: function(c) {
            return b(c, !isNaN(a.attr(c, "tabindex")))
        },
        tabbable: function(c) {
            var d = a.attr(c, "tabindex"),
                e = isNaN(d);
            return (e || d >= 0) && b(c, !e)
        }
    }), a("<a>").outerWidth(1).jquery || a.each(["Width", "Height"], function(b, c) {
        function d(b, c, d, f) {
            return a.each(e, function() {
                c -= parseFloat(a.css(b, "padding" + this)) || 0, d && (c -= parseFloat(a.css(b, "border" + this + "Width")) || 0), f && (c -= parseFloat(a.css(b, "margin" + this)) || 0)
            }), c
        }
        var e = "Width" === c ? ["Left", "Right"] : ["Top", "Bottom"],
            f = c.toLowerCase(),
            g = {
                innerWidth: a.fn.innerWidth,
                innerHeight: a.fn.innerHeight,
                outerWidth: a.fn.outerWidth,
                outerHeight: a.fn.outerHeight
            };
        a.fn["inner" + c] = function(b) {
            return void 0 === b ? g["inner" + c].call(this) : this.each(function() {
                a(this).css(f, d(this, b) + "px")
            })
        }, a.fn["outer" + c] = function(b, e) {
            return "number" != typeof b ? g["outer" + c].call(this, b) : this.each(function() {
                a(this).css(f, d(this, b, !0, e) + "px")
            })
        }
    }), a.fn.addBack || (a.fn.addBack = function(a) {
        return this.add(null == a ? this.prevObject : this.prevObject.filter(a))
    }), a("<a>").data("a-b", "a").removeData("a-b").data("a-b") && (a.fn.removeData = function(b) {
        return function(c) {
            return arguments.length ? b.call(this, a.camelCase(c)) : b.call(this)
        }
    }(a.fn.removeData)), a.ui.ie = !!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()), a.fn.extend({
        focus: function(b) {
            return function(c, d) {
                return "number" == typeof c ? this.each(function() {
                    var b = this;
                    setTimeout(function() {
                        a(b).focus(), d && d.call(b)
                    }, c)
                }) : b.apply(this, arguments)
            }
        }(a.fn.focus),
        disableSelection: function() {
            var a = "onselectstart" in document.createElement("div") ? "selectstart" : "mousedown";
            return function() {
                return this.bind(a + ".ui-disableSelection", function(a) {
                    a.preventDefault()
                })
            }
        }(),
        enableSelection: function() {
            return this.unbind(".ui-disableSelection")
        },
        zIndex: function(b) {
            if (void 0 !== b) return this.css("zIndex", b);
            if (this.length)
                for (var c, d, e = a(this[0]); e.length && e[0] !== document;) {
                    if (c = e.css("position"), ("absolute" === c || "relative" === c || "fixed" === c) && (d = parseInt(e.css("zIndex"), 10), !isNaN(d) && 0 !== d)) return d;
                    e = e.parent()
                }
            return 0
        }
    }), a.ui.plugin = {
        add: function(b, c, d) {
            var e, f = a.ui[b].prototype;
            for (e in d) f.plugins[e] = f.plugins[e] || [], f.plugins[e].push([c, d[e]])
        },
        call: function(a, b, c, d) {
            var e, f = a.plugins[b];
            if (f && (d || a.element[0].parentNode && 11 !== a.element[0].parentNode.nodeType))
                for (e = 0; e < f.length; e++) a.options[f[e][0]] && f[e][1].apply(a.element, c)
        }
    }
});
/*!
 * jQuery UI Widget 1.11.4
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/jQuery.widget/
 */
! function(a) {
    "function" == typeof define && define.amd ? define(["jquery"], a) : a(jQuery)
}(function(a) {
    var b = 0,
        c = Array.prototype.slice;
    return a.cleanData = function(b) {
        return function(c) {
            var d, e, f;
            for (f = 0; null != (e = c[f]); f++) try {
                d = a._data(e, "events"), d && d.remove && a(e).triggerHandler("remove")
            } catch (g) {}
            b(c)
        }
    }(a.cleanData), a.widget = function(b, c, d) {
        var e, f, g, h, i = {},
            j = b.split(".")[0];
        return b = b.split(".")[1], e = j + "-" + b, d || (d = c, c = a.Widget), a.expr[":"][e.toLowerCase()] = function(b) {
            return !!a.data(b, e)
        }, a[j] = a[j] || {}, f = a[j][b], g = a[j][b] = function(a, b) {
            return this._createWidget ? void(arguments.length && this._createWidget(a, b)) : new g(a, b)
        }, a.extend(g, f, {
            version: d.version,
            _proto: a.extend({}, d),
            _childConstructors: []
        }), h = new c, h.options = a.widget.extend({}, h.options), a.each(d, function(b, d) {
            return a.isFunction(d) ? void(i[b] = function() {
                var a = function() {
                        return c.prototype[b].apply(this, arguments)
                    },
                    e = function(a) {
                        return c.prototype[b].apply(this, a)
                    };
                return function() {
                    var b, c = this._super,
                        f = this._superApply;
                    return this._super = a, this._superApply = e, b = d.apply(this, arguments), this._super = c, this._superApply = f, b
                }
            }()) : void(i[b] = d)
        }), g.prototype = a.widget.extend(h, {
            widgetEventPrefix: f ? h.widgetEventPrefix || b : b
        }, i, {
            constructor: g,
            namespace: j,
            widgetName: b,
            widgetFullName: e
        }), f ? (a.each(f._childConstructors, function(b, c) {
            var d = c.prototype;
            a.widget(d.namespace + "." + d.widgetName, g, c._proto)
        }), delete f._childConstructors) : c._childConstructors.push(g), a.widget.bridge(b, g), g
    }, a.widget.extend = function(b) {
        for (var d, e, f = c.call(arguments, 1), g = 0, h = f.length; g < h; g++)
            for (d in f[g]) e = f[g][d], f[g].hasOwnProperty(d) && void 0 !== e && (a.isPlainObject(e) ? b[d] = a.isPlainObject(b[d]) ? a.widget.extend({}, b[d], e) : a.widget.extend({}, e) : b[d] = e);
        return b
    }, a.widget.bridge = function(b, d) {
        var e = d.prototype.widgetFullName || b;
        a.fn[b] = function(f) {
            var g = "string" == typeof f,
                h = c.call(arguments, 1),
                i = this;
            return g ? this.each(function() {
                var c, d = a.data(this, e);
                return "instance" === f ? (i = d, !1) : d ? a.isFunction(d[f]) && "_" !== f.charAt(0) ? (c = d[f].apply(d, h), c !== d && void 0 !== c ? (i = c && c.jquery ? i.pushStack(c.get()) : c, !1) : void 0) : a.error("no such method '" + f + "' for " + b + " widget instance") : a.error("cannot call methods on " + b + " prior to initialization; attempted to call method '" + f + "'")
            }) : (h.length && (f = a.widget.extend.apply(null, [f].concat(h))), this.each(function() {
                var b = a.data(this, e);
                b ? (b.option(f || {}), b._init && b._init()) : a.data(this, e, new d(f, this))
            })), i
        }
    }, a.Widget = function() {}, a.Widget._childConstructors = [], a.Widget.prototype = {
        widgetName: "widget",
        widgetEventPrefix: "",
        defaultElement: "<div>",
        options: {
            disabled: !1,
            create: null
        },
        _createWidget: function(c, d) {
            d = a(d || this.defaultElement || this)[0], this.element = a(d), this.uuid = b++, this.eventNamespace = "." + this.widgetName + this.uuid, this.bindings = a(), this.hoverable = a(), this.focusable = a(), d !== this && (a.data(d, this.widgetFullName, this), this._on(!0, this.element, {
                remove: function(a) {
                    a.target === d && this.destroy()
                }
            }), this.document = a(d.style ? d.ownerDocument : d.document || d), this.window = a(this.document[0].defaultView || this.document[0].parentWindow)), this.options = a.widget.extend({}, this.options, this._getCreateOptions(), c), this._create(), this._trigger("create", null, this._getCreateEventData()), this._init()
        },
        _getCreateOptions: a.noop,
        _getCreateEventData: a.noop,
        _create: a.noop,
        _init: a.noop,
        destroy: function() {
            this._destroy(), this.element.unbind(this.eventNamespace).removeData(this.widgetFullName).removeData(a.camelCase(this.widgetFullName)), this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName + "-disabled ui-state-disabled"), this.bindings.unbind(this.eventNamespace), this.hoverable.removeClass("ui-state-hover"), this.focusable.removeClass("ui-state-focus")
        },
        _destroy: a.noop,
        widget: function() {
            return this.element
        },
        option: function(b, c) {
            var d, e, f, g = b;
            if (0 === arguments.length) return a.widget.extend({}, this.options);
            if ("string" == typeof b)
                if (g = {}, d = b.split("."), b = d.shift(), d.length) {
                    for (e = g[b] = a.widget.extend({}, this.options[b]), f = 0; f < d.length - 1; f++) e[d[f]] = e[d[f]] || {}, e = e[d[f]];
                    if (b = d.pop(), 1 === arguments.length) return void 0 === e[b] ? null : e[b];
                    e[b] = c
                } else {
                    if (1 === arguments.length) return void 0 === this.options[b] ? null : this.options[b];
                    g[b] = c
                }
            return this._setOptions(g), this
        },
        _setOptions: function(a) {
            var b;
            for (b in a) this._setOption(b, a[b]);
            return this
        },
        _setOption: function(a, b) {
            return this.options[a] = b, "disabled" === a && (this.widget().toggleClass(this.widgetFullName + "-disabled", !!b), b && (this.hoverable.removeClass("ui-state-hover"), this.focusable.removeClass("ui-state-focus"))), this
        },
        enable: function() {
            return this._setOptions({
                disabled: !1
            })
        },
        disable: function() {
            return this._setOptions({
                disabled: !0
            })
        },
        _on: function(b, c, d) {
            var e, f = this;
            "boolean" != typeof b && (d = c, c = b, b = !1), d ? (c = e = a(c), this.bindings = this.bindings.add(c)) : (d = c, c = this.element, e = this.widget()), a.each(d, function(d, g) {
                function h() {
                    if (b || f.options.disabled !== !0 && !a(this).hasClass("ui-state-disabled")) return ("string" == typeof g ? f[g] : g).apply(f, arguments)
                }
                "string" != typeof g && (h.guid = g.guid = g.guid || h.guid || a.guid++);
                var i = d.match(/^([\w:-]*)\s*(.*)$/),
                    j = i[1] + f.eventNamespace,
                    k = i[2];
                k ? e.delegate(k, j, h) : c.bind(j, h)
            })
        },
        _off: function(b, c) {
            c = (c || "").split(" ").join(this.eventNamespace + " ") + this.eventNamespace, b.unbind(c).undelegate(c), this.bindings = a(this.bindings.not(b).get()), this.focusable = a(this.focusable.not(b).get()), this.hoverable = a(this.hoverable.not(b).get())
        },
        _delay: function(a, b) {
            function c() {
                return ("string" == typeof a ? d[a] : a).apply(d, arguments)
            }
            var d = this;
            return setTimeout(c, b || 0)
        },
        _hoverable: function(b) {
            this.hoverable = this.hoverable.add(b), this._on(b, {
                mouseenter: function(b) {
                    a(b.currentTarget).addClass("ui-state-hover")
                },
                mouseleave: function(b) {
                    a(b.currentTarget).removeClass("ui-state-hover")
                }
            })
        },
        _focusable: function(b) {
            this.focusable = this.focusable.add(b), this._on(b, {
                focusin: function(b) {
                    a(b.currentTarget).addClass("ui-state-focus")
                },
                focusout: function(b) {
                    a(b.currentTarget).removeClass("ui-state-focus")
                }
            })
        },
        _trigger: function(b, c, d) {
            var e, f, g = this.options[b];
            if (d = d || {}, c = a.Event(c), c.type = (b === this.widgetEventPrefix ? b : this.widgetEventPrefix + b).toLowerCase(), c.target = this.element[0], f = c.originalEvent)
                for (e in f) e in c || (c[e] = f[e]);
            return this.element.trigger(c, d), !(a.isFunction(g) && g.apply(this.element[0], [c].concat(d)) === !1 || c.isDefaultPrevented())
        }
    }, a.each({
        show: "fadeIn",
        hide: "fadeOut"
    }, function(b, c) {
        a.Widget.prototype["_" + b] = function(d, e, f) {
            "string" == typeof e && (e = {
                effect: e
            });
            var g, h = e ? e === !0 || "number" == typeof e ? c : e.effect || c : b;
            e = e || {}, "number" == typeof e && (e = {
                duration: e
            }), g = !a.isEmptyObject(e), e.complete = f, e.delay && d.delay(e.delay), g && a.effects && a.effects.effect[h] ? d[b](e) : h !== b && d[h] ? d[h](e.duration, e.easing, f) : d.queue(function(c) {
                a(this)[b](), f && f.call(d[0]), c()
            })
        }
    }), a.widget
});
/*!
 * jQuery UI Position 1.11.4
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/position/
 */
! function(a) {
    "function" == typeof define && define.amd ? define(["jquery"], a) : a(jQuery)
}(function(a) {
    return function() {
        function b(a, b, c) {
            return [parseFloat(a[0]) * (n.test(a[0]) ? b / 100 : 1), parseFloat(a[1]) * (n.test(a[1]) ? c / 100 : 1)]
        }

        function c(b, c) {
            return parseInt(a.css(b, c), 10) || 0
        }

        function d(b) {
            var c = b[0];
            return 9 === c.nodeType ? {
                width: b.width(),
                height: b.height(),
                offset: {
                    top: 0,
                    left: 0
                }
            } : a.isWindow(c) ? {
                width: b.width(),
                height: b.height(),
                offset: {
                    top: b.scrollTop(),
                    left: b.scrollLeft()
                }
            } : c.preventDefault ? {
                width: 0,
                height: 0,
                offset: {
                    top: c.pageY,
                    left: c.pageX
                }
            } : {
                width: b.outerWidth(),
                height: b.outerHeight(),
                offset: b.offset()
            }
        }
        a.ui = a.ui || {};
        var e, f, g = Math.max,
            h = Math.abs,
            i = Math.round,
            j = /left|center|right/,
            k = /top|center|bottom/,
            l = /[\+\-]\d+(\.[\d]+)?%?/,
            m = /^\w+/,
            n = /%$/,
            o = a.fn.position;
        a.position = {
                scrollbarWidth: function() {
                    if (void 0 !== e) return e;
                    var b, c, d = a("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),
                        f = d.children()[0];
                    return a("body").append(d), b = f.offsetWidth, d.css("overflow", "scroll"), c = f.offsetWidth, b === c && (c = d[0].clientWidth), d.remove(), e = b - c
                },
                getScrollInfo: function(b) {
                    var c = b.isWindow || b.isDocument ? "" : b.element.css("overflow-x"),
                        d = b.isWindow || b.isDocument ? "" : b.element.css("overflow-y"),
                        e = "scroll" === c || "auto" === c && b.width < b.element[0].scrollWidth,
                        f = "scroll" === d || "auto" === d && b.height < b.element[0].scrollHeight;
                    return {
                        width: f ? a.position.scrollbarWidth() : 0,
                        height: e ? a.position.scrollbarWidth() : 0
                    }
                },
                getWithinInfo: function(b) {
                    var c = a(b || window),
                        d = a.isWindow(c[0]),
                        e = !!c[0] && 9 === c[0].nodeType;
                    return {
                        element: c,
                        isWindow: d,
                        isDocument: e,
                        offset: c.offset() || {
                            left: 0,
                            top: 0
                        },
                        scrollLeft: c.scrollLeft(),
                        scrollTop: c.scrollTop(),
                        width: d || e ? c.width() : c.outerWidth(),
                        height: d || e ? c.height() : c.outerHeight()
                    }
                }
            }, a.fn.position = function(e) {
                if (!e || !e.of) return o.apply(this, arguments);
                e = a.extend({}, e);
                var n, p, q, r, s, t, u = a(e.of),
                    v = a.position.getWithinInfo(e.within),
                    w = a.position.getScrollInfo(v),
                    x = (e.collision || "flip").split(" "),
                    y = {};
                return t = d(u), u[0].preventDefault && (e.at = "left top"), p = t.width, q = t.height, r = t.offset, s = a.extend({}, r), a.each(["my", "at"], function() {
                    var a, b, c = (e[this] || "").split(" ");
                    1 === c.length && (c = j.test(c[0]) ? c.concat(["center"]) : k.test(c[0]) ? ["center"].concat(c) : ["center", "center"]), c[0] = j.test(c[0]) ? c[0] : "center", c[1] = k.test(c[1]) ? c[1] : "center", a = l.exec(c[0]), b = l.exec(c[1]), y[this] = [a ? a[0] : 0, b ? b[0] : 0], e[this] = [m.exec(c[0])[0], m.exec(c[1])[0]]
                }), 1 === x.length && (x[1] = x[0]), "right" === e.at[0] ? s.left += p : "center" === e.at[0] && (s.left += p / 2), "bottom" === e.at[1] ? s.top += q : "center" === e.at[1] && (s.top += q / 2), n = b(y.at, p, q), s.left += n[0], s.top += n[1], this.each(function() {
                    var d, j, k = a(this),
                        l = k.outerWidth(),
                        m = k.outerHeight(),
                        o = c(this, "marginLeft"),
                        t = c(this, "marginTop"),
                        z = l + o + c(this, "marginRight") + w.width,
                        A = m + t + c(this, "marginBottom") + w.height,
                        B = a.extend({}, s),
                        C = b(y.my, k.outerWidth(), k.outerHeight());
                    "right" === e.my[0] ? B.left -= l : "center" === e.my[0] && (B.left -= l / 2), "bottom" === e.my[1] ? B.top -= m : "center" === e.my[1] && (B.top -= m / 2), B.left += C[0], B.top += C[1], f || (B.left = i(B.left), B.top = i(B.top)), d = {
                        marginLeft: o,
                        marginTop: t
                    }, a.each(["left", "top"], function(b, c) {
                        a.ui.position[x[b]] && a.ui.position[x[b]][c](B, {
                            targetWidth: p,
                            targetHeight: q,
                            elemWidth: l,
                            elemHeight: m,
                            collisionPosition: d,
                            collisionWidth: z,
                            collisionHeight: A,
                            offset: [n[0] + C[0], n[1] + C[1]],
                            my: e.my,
                            at: e.at,
                            within: v,
                            elem: k
                        })
                    }), e.using && (j = function(a) {
                        var b = r.left - B.left,
                            c = b + p - l,
                            d = r.top - B.top,
                            f = d + q - m,
                            i = {
                                target: {
                                    element: u,
                                    left: r.left,
                                    top: r.top,
                                    width: p,
                                    height: q
                                },
                                element: {
                                    element: k,
                                    left: B.left,
                                    top: B.top,
                                    width: l,
                                    height: m
                                },
                                horizontal: c < 0 ? "left" : b > 0 ? "right" : "center",
                                vertical: f < 0 ? "top" : d > 0 ? "bottom" : "middle"
                            };
                        p < l && h(b + c) < p && (i.horizontal = "center"), q < m && h(d + f) < q && (i.vertical = "middle"), g(h(b), h(c)) > g(h(d), h(f)) ? i.important = "horizontal" : i.important = "vertical", e.using.call(this, a, i)
                    }), k.offset(a.extend(B, {
                        using: j
                    }))
                })
            }, a.ui.position = {
                fit: {
                    left: function(a, b) {
                        var c, d = b.within,
                            e = d.isWindow ? d.scrollLeft : d.offset.left,
                            f = d.width,
                            h = a.left - b.collisionPosition.marginLeft,
                            i = e - h,
                            j = h + b.collisionWidth - f - e;
                        b.collisionWidth > f ? i > 0 && j <= 0 ? (c = a.left + i + b.collisionWidth - f - e, a.left += i - c) : j > 0 && i <= 0 ? a.left = e : i > j ? a.left = e + f - b.collisionWidth : a.left = e : i > 0 ? a.left += i : j > 0 ? a.left -= j : a.left = g(a.left - h, a.left)
                    },
                    top: function(a, b) {
                        var c, d = b.within,
                            e = d.isWindow ? d.scrollTop : d.offset.top,
                            f = b.within.height,
                            h = a.top - b.collisionPosition.marginTop,
                            i = e - h,
                            j = h + b.collisionHeight - f - e;
                        b.collisionHeight > f ? i > 0 && j <= 0 ? (c = a.top + i + b.collisionHeight - f - e, a.top += i - c) : j > 0 && i <= 0 ? a.top = e : i > j ? a.top = e + f - b.collisionHeight : a.top = e : i > 0 ? a.top += i : j > 0 ? a.top -= j : a.top = g(a.top - h, a.top)
                    }
                },
                flip: {
                    left: function(a, b) {
                        var c, d, e = b.within,
                            f = e.offset.left + e.scrollLeft,
                            g = e.width,
                            i = e.isWindow ? e.scrollLeft : e.offset.left,
                            j = a.left - b.collisionPosition.marginLeft,
                            k = j - i,
                            l = j + b.collisionWidth - g - i,
                            m = "left" === b.my[0] ? -b.elemWidth : "right" === b.my[0] ? b.elemWidth : 0,
                            n = "left" === b.at[0] ? b.targetWidth : "right" === b.at[0] ? -b.targetWidth : 0,
                            o = -2 * b.offset[0];
                        k < 0 ? (c = a.left + m + n + o + b.collisionWidth - g - f, (c < 0 || c < h(k)) && (a.left += m + n + o)) : l > 0 && (d = a.left - b.collisionPosition.marginLeft + m + n + o - i, (d > 0 || h(d) < l) && (a.left += m + n + o))
                    },
                    top: function(a, b) {
                        var c, d, e = b.within,
                            f = e.offset.top + e.scrollTop,
                            g = e.height,
                            i = e.isWindow ? e.scrollTop : e.offset.top,
                            j = a.top - b.collisionPosition.marginTop,
                            k = j - i,
                            l = j + b.collisionHeight - g - i,
                            m = "top" === b.my[1],
                            n = m ? -b.elemHeight : "bottom" === b.my[1] ? b.elemHeight : 0,
                            o = "top" === b.at[1] ? b.targetHeight : "bottom" === b.at[1] ? -b.targetHeight : 0,
                            p = -2 * b.offset[1];
                        k < 0 ? (d = a.top + n + o + p + b.collisionHeight - g - f, (d < 0 || d < h(k)) && (a.top += n + o + p)) : l > 0 && (c = a.top - b.collisionPosition.marginTop + n + o + p - i, (c > 0 || h(c) < l) && (a.top += n + o + p))
                    }
                },
                flipfit: {
                    left: function() {
                        a.ui.position.flip.left.apply(this, arguments), a.ui.position.fit.left.apply(this, arguments)
                    },
                    top: function() {
                        a.ui.position.flip.top.apply(this, arguments), a.ui.position.fit.top.apply(this, arguments)
                    }
                }
            },
            function() {
                var b, c, d, e, g, h = document.getElementsByTagName("body")[0],
                    i = document.createElement("div");
                b = document.createElement(h ? "div" : "body"), d = {
                    visibility: "hidden",
                    width: 0,
                    height: 0,
                    border: 0,
                    margin: 0,
                    background: "none"
                }, h && a.extend(d, {
                    position: "absolute",
                    left: "-1000px",
                    top: "-1000px"
                });
                for (g in d) b.style[g] = d[g];
                b.appendChild(i), c = h || document.documentElement, c.insertBefore(b, c.firstChild), i.style.cssText = "position: absolute; left: 10.7432222px;", e = a(i).offset().left, f = e > 10 && e < 11, b.innerHTML = "", c.removeChild(b)
            }()
    }(), a.ui.position
});
/*!
 * jQuery UI Menu 1.11.4
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/menu/
 */
! function(a) {
    "function" == typeof define && define.amd ? define(["jquery", "./core", "./widget", "./position"], a) : a(jQuery)
}(function(a) {
    return a.widget("ui.menu", {
        version: "1.11.4",
        defaultElement: "<ul>",
        delay: 300,
        options: {
            icons: {
                submenu: "ui-icon-carat-1-e"
            },
            items: "> *",
            menus: "ul",
            position: {
                my: "left-1 top",
                at: "right top"
            },
            role: "menu",
            blur: null,
            focus: null,
            select: null
        },
        _create: function() {
            this.activeMenu = this.element, this.mouseHandled = !1, this.element.uniqueId().addClass("ui-menu ui-widget ui-widget-content").toggleClass("ui-menu-icons", !!this.element.find(".ui-icon").length).attr({
                role: this.options.role,
                tabIndex: 0
            }), this.options.disabled && this.element.addClass("ui-state-disabled").attr("aria-disabled", "true"), this._on({
                "mousedown .ui-menu-item": function(a) {
                    a.preventDefault()
                },
                "click .ui-menu-item": function(b) {
                    var c = a(b.target);
                    !this.mouseHandled && c.not(".ui-state-disabled").length && (this.select(b), b.isPropagationStopped() || (this.mouseHandled = !0), c.has(".ui-menu").length ? this.expand(b) : !this.element.is(":focus") && a(this.document[0].activeElement).closest(".ui-menu").length && (this.element.trigger("focus", [!0]), this.active && 1 === this.active.parents(".ui-menu").length && clearTimeout(this.timer)))
                },
                "mouseenter .ui-menu-item": function(b) {
                    if (!this.previousFilter) {
                        var c = a(b.currentTarget);
                        c.siblings(".ui-state-active").removeClass("ui-state-active"), this.focus(b, c)
                    }
                },
                mouseleave: "collapseAll",
                "mouseleave .ui-menu": "collapseAll",
                focus: function(a, b) {
                    var c = this.active || this.element.find(this.options.items).eq(0);
                    b || this.focus(a, c)
                },
                blur: function(b) {
                    this._delay(function() {
                        a.contains(this.element[0], this.document[0].activeElement) || this.collapseAll(b)
                    })
                },
                keydown: "_keydown"
            }), this.refresh(), this._on(this.document, {
                click: function(a) {
                    this._closeOnDocumentClick(a) && this.collapseAll(a), this.mouseHandled = !1
                }
            })
        },
        _destroy: function() {
            this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeClass("ui-menu ui-widget ui-widget-content ui-menu-icons ui-front").removeAttr("role").removeAttr("tabIndex").removeAttr("aria-labelledby").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-disabled").removeUniqueId().show(), this.element.find(".ui-menu-item").removeClass("ui-menu-item").removeAttr("role").removeAttr("aria-disabled").removeUniqueId().removeClass("ui-state-hover").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-haspopup").children().each(function() {
                var b = a(this);
                b.data("ui-menu-submenu-carat") && b.remove()
            }), this.element.find(".ui-menu-divider").removeClass("ui-menu-divider ui-widget-content")
        },
        _keydown: function(b) {
            var c, d, e, f, g = !0;
            switch (b.keyCode) {
                case a.ui.keyCode.PAGE_UP:
                    this.previousPage(b);
                    break;
                case a.ui.keyCode.PAGE_DOWN:
                    this.nextPage(b);
                    break;
                case a.ui.keyCode.HOME:
                    this._move("first", "first", b);
                    break;
                case a.ui.keyCode.END:
                    this._move("last", "last", b);
                    break;
                case a.ui.keyCode.UP:
                    this.previous(b);
                    break;
                case a.ui.keyCode.DOWN:
                    this.next(b);
                    break;
                case a.ui.keyCode.LEFT:
                    this.collapse(b);
                    break;
                case a.ui.keyCode.RIGHT:
                    this.active && !this.active.is(".ui-state-disabled") && this.expand(b);
                    break;
                case a.ui.keyCode.ENTER:
                case a.ui.keyCode.SPACE:
                    this._activate(b);
                    break;
                case a.ui.keyCode.ESCAPE:
                    this.collapse(b);
                    break;
                default:
                    g = !1, d = this.previousFilter || "", e = String.fromCharCode(b.keyCode), f = !1, clearTimeout(this.filterTimer), e === d ? f = !0 : e = d + e, c = this._filterMenuItems(e), c = f && c.index(this.active.next()) !== -1 ? this.active.nextAll(".ui-menu-item") : c, c.length || (e = String.fromCharCode(b.keyCode), c = this._filterMenuItems(e)), c.length ? (this.focus(b, c), this.previousFilter = e, this.filterTimer = this._delay(function() {
                        delete this.previousFilter
                    }, 1e3)) : delete this.previousFilter
            }
            g && b.preventDefault()
        },
        _activate: function(a) {
            this.active.is(".ui-state-disabled") || (this.active.is("[aria-haspopup='true']") ? this.expand(a) : this.select(a))
        },
        refresh: function() {
            var b, c, d = this,
                e = this.options.icons.submenu,
                f = this.element.find(this.options.menus);
            this.element.toggleClass("ui-menu-icons", !!this.element.find(".ui-icon").length), f.filter(":not(.ui-menu)").addClass("ui-menu ui-widget ui-widget-content ui-front").hide().attr({
                role: this.options.role,
                "aria-hidden": "true",
                "aria-expanded": "false"
            }).each(function() {
                var b = a(this),
                    c = b.parent(),
                    d = a("<span>").addClass("ui-menu-icon ui-icon " + e).data("ui-menu-submenu-carat", !0);
                c.attr("aria-haspopup", "true").prepend(d), b.attr("aria-labelledby", c.attr("id"))
            }), b = f.add(this.element), c = b.find(this.options.items), c.not(".ui-menu-item").each(function() {
                var b = a(this);
                d._isDivider(b) && b.addClass("ui-widget-content ui-menu-divider")
            }), c.not(".ui-menu-item, .ui-menu-divider").addClass("ui-menu-item").uniqueId().attr({
                tabIndex: -1,
                role: this._itemRole()
            }), c.filter(".ui-state-disabled").attr("aria-disabled", "true"), this.active && !a.contains(this.element[0], this.active[0]) && this.blur()
        },
        _itemRole: function() {
            return {
                menu: "menuitem",
                listbox: "option"
            }[this.options.role]
        },
        _setOption: function(a, b) {
            "icons" === a && this.element.find(".ui-menu-icon").removeClass(this.options.icons.submenu).addClass(b.submenu), "disabled" === a && this.element.toggleClass("ui-state-disabled", !!b).attr("aria-disabled", b), this._super(a, b)
        },
        focus: function(a, b) {
            var c, d;
            this.blur(a, a && "focus" === a.type), this._scrollIntoView(b), this.active = b.first(), d = this.active.addClass("ui-state-focus").removeClass("ui-state-active"), this.options.role && this.element.attr("aria-activedescendant", d.attr("id")), this.active.parent().closest(".ui-menu-item").addClass("ui-state-active"), a && "keydown" === a.type ? this._close() : this.timer = this._delay(function() {
                this._close()
            }, this.delay), c = b.children(".ui-menu"), c.length && a && /^mouse/.test(a.type) && this._startOpening(c), this.activeMenu = b.parent(), this._trigger("focus", a, {
                item: b
            })
        },
        _scrollIntoView: function(b) {
            var c, d, e, f, g, h;
            this._hasScroll() && (c = parseFloat(a.css(this.activeMenu[0], "borderTopWidth")) || 0, d = parseFloat(a.css(this.activeMenu[0], "paddingTop")) || 0, e = b.offset().top - this.activeMenu.offset().top - c - d, f = this.activeMenu.scrollTop(), g = this.activeMenu.height(), h = b.outerHeight(), e < 0 ? this.activeMenu.scrollTop(f + e) : e + h > g && this.activeMenu.scrollTop(f + e - g + h))
        },
        blur: function(a, b) {
            b || clearTimeout(this.timer), this.active && (this.active.removeClass("ui-state-focus"), this.active = null, this._trigger("blur", a, {
                item: this.active
            }))
        },
        _startOpening: function(a) {
            clearTimeout(this.timer), "true" === a.attr("aria-hidden") && (this.timer = this._delay(function() {
                this._close(), this._open(a)
            }, this.delay))
        },
        _open: function(b) {
            var c = a.extend({
                of: this.active
            }, this.options.position);
            clearTimeout(this.timer), this.element.find(".ui-menu").not(b.parents(".ui-menu")).hide().attr("aria-hidden", "true"), b.show().removeAttr("aria-hidden").attr("aria-expanded", "true").position(c)
        },
        collapseAll: function(b, c) {
            clearTimeout(this.timer), this.timer = this._delay(function() {
                var d = c ? this.element : a(b && b.target).closest(this.element.find(".ui-menu"));
                d.length || (d = this.element), this._close(d), this.blur(b), this.activeMenu = d
            }, this.delay)
        },
        _close: function(a) {
            a || (a = this.active ? this.active.parent() : this.element), a.find(".ui-menu").hide().attr("aria-hidden", "true").attr("aria-expanded", "false").end().find(".ui-state-active").not(".ui-state-focus").removeClass("ui-state-active")
        },
        _closeOnDocumentClick: function(b) {
            return !a(b.target).closest(".ui-menu").length
        },
        _isDivider: function(a) {
            return !/[^\-\u2014\u2013\s]/.test(a.text())
        },
        collapse: function(a) {
            var b = this.active && this.active.parent().closest(".ui-menu-item", this.element);
            b && b.length && (this._close(), this.focus(a, b))
        },
        expand: function(a) {
            var b = this.active && this.active.children(".ui-menu ").find(this.options.items).first();
            b && b.length && (this._open(b.parent()), this._delay(function() {
                this.focus(a, b)
            }))
        },
        next: function(a) {
            this._move("next", "first", a)
        },
        previous: function(a) {
            this._move("prev", "last", a)
        },
        isFirstItem: function() {
            return this.active && !this.active.prevAll(".ui-menu-item").length
        },
        isLastItem: function() {
            return this.active && !this.active.nextAll(".ui-menu-item").length
        },
        _move: function(a, b, c) {
            var d;
            this.active && (d = "first" === a || "last" === a ? this.active["first" === a ? "prevAll" : "nextAll"](".ui-menu-item").eq(-1) : this.active[a + "All"](".ui-menu-item").eq(0)), d && d.length && this.active || (d = this.activeMenu.find(this.options.items)[b]()), this.focus(c, d)
        },
        nextPage: function(b) {
            var c, d, e;
            return this.active ? void(this.isLastItem() || (this._hasScroll() ? (d = this.active.offset().top, e = this.element.height(), this.active.nextAll(".ui-menu-item").each(function() {
                return c = a(this), c.offset().top - d - e < 0
            }), this.focus(b, c)) : this.focus(b, this.activeMenu.find(this.options.items)[this.active ? "last" : "first"]()))) : void this.next(b)
        },
        previousPage: function(b) {
            var c, d, e;
            return this.active ? void(this.isFirstItem() || (this._hasScroll() ? (d = this.active.offset().top, e = this.element.height(), this.active.prevAll(".ui-menu-item").each(function() {
                return c = a(this), c.offset().top - d + e > 0
            }), this.focus(b, c)) : this.focus(b, this.activeMenu.find(this.options.items).first()))) : void this.next(b)
        },
        _hasScroll: function() {
            return this.element.outerHeight() < this.element.prop("scrollHeight")
        },
        select: function(b) {
            this.active = this.active || a(b.target).closest(".ui-menu-item");
            var c = {
                item: this.active
            };
            this.active.has(".ui-menu").length || this.collapseAll(b, !0), this._trigger("select", b, c)
        },
        _filterMenuItems: function(b) {
            var c = b.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g, "\\$&"),
                d = new RegExp("^" + c, "i");
            return this.activeMenu.find(this.options.items).filter(".ui-menu-item").filter(function() {
                return d.test(a.trim(a(this).text()))
            })
        }
    })
});
window.wp = window.wp || {},
    function(a, b) {
        "use strict";

        function c(a, c) {
            e(), a = b("<p>").html(a).text(), h === a && (a += "\xa0"), h = a, g && "assertive" === c ? g.text(a) : f && f.text(a)
        }

        function d(a) {
            a = a || "polite";
            var c = b("<div>", {
                id: "wp-a11y-speak-" + a,
                "aria-live": a,
                "aria-relevant": "additions text",
                "aria-atomic": "true",
                "class": "screen-reader-text wp-a11y-speak-region"
            });
            return b(document.body).append(c), c
        }

        function e() {
            b(".wp-a11y-speak-region").text("")
        }
        var f, g, h = "";
        b(document).ready(function() {
            f = b("#wp-a11y-speak-polite"), g = b("#wp-a11y-speak-assertive"), f.length || (f = d("polite")), g.length || (g = d("assertive"))
        }), a.a11y = a.a11y || {}, a.a11y.speak = c
    }(window.wp, window.jQuery);
/*!
 * jQuery UI Autocomplete 1.11.4
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/autocomplete/
 */
! function(a) {
    "function" == typeof define && define.amd ? define(["jquery", "./core", "./widget", "./position", "./menu"], a) : a(jQuery)
}(function(a) {
    return a.widget("ui.autocomplete", {
        version: "1.11.4",
        defaultElement: "<input>",
        options: {
            appendTo: null,
            autoFocus: !1,
            delay: 300,
            minLength: 1,
            position: {
                my: "left top",
                at: "left bottom",
                collision: "none"
            },
            source: null,
            change: null,
            close: null,
            focus: null,
            open: null,
            response: null,
            search: null,
            select: null
        },
        requestIndex: 0,
        pending: 0,
        _create: function() {
            var b, c, d, e = this.element[0].nodeName.toLowerCase(),
                f = "textarea" === e,
                g = "input" === e;
            this.isMultiLine = !!f || !g && this.element.prop("isContentEditable"), this.valueMethod = this.element[f || g ? "val" : "text"], this.isNewMenu = !0, this.element.addClass("ui-autocomplete-input").attr("autocomplete", "off"), this._on(this.element, {
                keydown: function(e) {
                    if (this.element.prop("readOnly")) return b = !0, d = !0, void(c = !0);
                    b = !1, d = !1, c = !1;
                    var f = a.ui.keyCode;
                    switch (e.keyCode) {
                        case f.PAGE_UP:
                            b = !0, this._move("previousPage", e);
                            break;
                        case f.PAGE_DOWN:
                            b = !0, this._move("nextPage", e);
                            break;
                        case f.UP:
                            b = !0, this._keyEvent("previous", e);
                            break;
                        case f.DOWN:
                            b = !0, this._keyEvent("next", e);
                            break;
                        case f.ENTER:
                            this.menu.active && (b = !0, e.preventDefault(), this.menu.select(e));
                            break;
                        case f.TAB:
                            this.menu.active && this.menu.select(e);
                            break;
                        case f.ESCAPE:
                            this.menu.element.is(":visible") && (this.isMultiLine || this._value(this.term), this.close(e), e.preventDefault());
                            break;
                        default:
                            c = !0, this._searchTimeout(e)
                    }
                },
                keypress: function(d) {
                    if (b) return b = !1, void(this.isMultiLine && !this.menu.element.is(":visible") || d.preventDefault());
                    if (!c) {
                        var e = a.ui.keyCode;
                        switch (d.keyCode) {
                            case e.PAGE_UP:
                                this._move("previousPage", d);
                                break;
                            case e.PAGE_DOWN:
                                this._move("nextPage", d);
                                break;
                            case e.UP:
                                this._keyEvent("previous", d);
                                break;
                            case e.DOWN:
                                this._keyEvent("next", d)
                        }
                    }
                },
                input: function(a) {
                    return d ? (d = !1, void a.preventDefault()) : void this._searchTimeout(a)
                },
                focus: function() {
                    this.selectedItem = null, this.previous = this._value()
                },
                blur: function(a) {
                    return this.cancelBlur ? void delete this.cancelBlur : (clearTimeout(this.searching), this.close(a), void this._change(a))
                }
            }), this._initSource(), this.menu = a("<ul>").addClass("ui-autocomplete ui-front").appendTo(this._appendTo()).menu({
                role: null
            }).hide().menu("instance"), this._on(this.menu.element, {
                mousedown: function(b) {
                    b.preventDefault(), this.cancelBlur = !0, this._delay(function() {
                        delete this.cancelBlur
                    });
                    var c = this.menu.element[0];
                    a(b.target).closest(".ui-menu-item").length || this._delay(function() {
                        var b = this;
                        this.document.one("mousedown", function(d) {
                            d.target === b.element[0] || d.target === c || a.contains(c, d.target) || b.close()
                        })
                    })
                },
                menufocus: function(b, c) {
                    var d, e;
                    return this.isNewMenu && (this.isNewMenu = !1, b.originalEvent && /^mouse/.test(b.originalEvent.type)) ? (this.menu.blur(), void this.document.one("mousemove", function() {
                        a(b.target).trigger(b.originalEvent)
                    })) : (e = c.item.data("ui-autocomplete-item"), !1 !== this._trigger("focus", b, {
                        item: e
                    }) && b.originalEvent && /^key/.test(b.originalEvent.type) && this._value(e.value), d = c.item.attr("aria-label") || e.value, void(d && a.trim(d).length && (this.liveRegion.children().hide(), a("<div>").text(d).appendTo(this.liveRegion))))
                },
                menuselect: function(a, b) {
                    var c = b.item.data("ui-autocomplete-item"),
                        d = this.previous;
                    this.element[0] !== this.document[0].activeElement && (this.element.focus(), this.previous = d, this._delay(function() {
                        this.previous = d, this.selectedItem = c
                    })), !1 !== this._trigger("select", a, {
                        item: c
                    }) && this._value(c.value), this.term = this._value(), this.close(a), this.selectedItem = c
                }
            }), this.liveRegion = a("<span>", {
                role: "status",
                "aria-live": "assertive",
                "aria-relevant": "additions"
            }).addClass("ui-helper-hidden-accessible").appendTo(this.document[0].body), this._on(this.window, {
                beforeunload: function() {
                    this.element.removeAttr("autocomplete")
                }
            })
        },
        _destroy: function() {
            clearTimeout(this.searching), this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete"), this.menu.element.remove(), this.liveRegion.remove()
        },
        _setOption: function(a, b) {
            this._super(a, b), "source" === a && this._initSource(), "appendTo" === a && this.menu.element.appendTo(this._appendTo()), "disabled" === a && b && this.xhr && this.xhr.abort()
        },
        _appendTo: function() {
            var b = this.options.appendTo;
            return b && (b = b.jquery || b.nodeType ? a(b) : this.document.find(b).eq(0)), b && b[0] || (b = this.element.closest(".ui-front")), b.length || (b = this.document[0].body), b
        },
        _initSource: function() {
            var b, c, d = this;
            a.isArray(this.options.source) ? (b = this.options.source, this.source = function(c, d) {
                d(a.ui.autocomplete.filter(b, c.term))
            }) : "string" == typeof this.options.source ? (c = this.options.source, this.source = function(b, e) {
                d.xhr && d.xhr.abort(), d.xhr = a.ajax({
                    url: c,
                    data: b,
                    dataType: "json",
                    success: function(a) {
                        e(a)
                    },
                    error: function() {
                        e([])
                    }
                })
            }) : this.source = this.options.source
        },
        _searchTimeout: function(a) {
            clearTimeout(this.searching), this.searching = this._delay(function() {
                var b = this.term === this._value(),
                    c = this.menu.element.is(":visible"),
                    d = a.altKey || a.ctrlKey || a.metaKey || a.shiftKey;
                b && (!b || c || d) || (this.selectedItem = null, this.search(null, a))
            }, this.options.delay)
        },
        search: function(a, b) {
            return a = null != a ? a : this._value(), this.term = this._value(), a.length < this.options.minLength ? this.close(b) : this._trigger("search", b) !== !1 ? this._search(a) : void 0
        },
        _search: function(a) {
            this.pending++, this.element.addClass("ui-autocomplete-loading"), this.cancelSearch = !1, this.source({
                term: a
            }, this._response())
        },
        _response: function() {
            var b = ++this.requestIndex;
            return a.proxy(function(a) {
                b === this.requestIndex && this.__response(a), this.pending--, this.pending || this.element.removeClass("ui-autocomplete-loading")
            }, this)
        },
        __response: function(a) {
            a && (a = this._normalize(a)), this._trigger("response", null, {
                content: a
            }), !this.options.disabled && a && a.length && !this.cancelSearch ? (this._suggest(a), this._trigger("open")) : this._close()
        },
        close: function(a) {
            this.cancelSearch = !0, this._close(a)
        },
        _close: function(a) {
            this.menu.element.is(":visible") && (this.menu.element.hide(), this.menu.blur(), this.isNewMenu = !0, this._trigger("close", a))
        },
        _change: function(a) {
            this.previous !== this._value() && this._trigger("change", a, {
                item: this.selectedItem
            })
        },
        _normalize: function(b) {
            return b.length && b[0].label && b[0].value ? b : a.map(b, function(b) {
                return "string" == typeof b ? {
                    label: b,
                    value: b
                } : a.extend({}, b, {
                    label: b.label || b.value,
                    value: b.value || b.label
                })
            })
        },
        _suggest: function(b) {
            var c = this.menu.element.empty();
            this._renderMenu(c, b), this.isNewMenu = !0, this.menu.refresh(), c.show(), this._resizeMenu(), c.position(a.extend({
                of: this.element
            }, this.options.position)), this.options.autoFocus && this.menu.next()
        },
        _resizeMenu: function() {
            var a = this.menu.element;
            a.outerWidth(Math.max(a.width("").outerWidth() + 1, this.element.outerWidth()))
        },
        _renderMenu: function(b, c) {
            var d = this;
            a.each(c, function(a, c) {
                d._renderItemData(b, c)
            })
        },
        _renderItemData: function(a, b) {
            return this._renderItem(a, b).data("ui-autocomplete-item", b)
        },
        _renderItem: function(b, c) {
            return a("<li>").text(c.label).appendTo(b)
        },
        _move: function(a, b) {
            return this.menu.element.is(":visible") ? this.menu.isFirstItem() && /^previous/.test(a) || this.menu.isLastItem() && /^next/.test(a) ? (this.isMultiLine || this._value(this.term), void this.menu.blur()) : void this.menu[a](b) : void this.search(null, b)
        },
        widget: function() {
            return this.menu.element
        },
        _value: function() {
            return this.valueMethod.apply(this.element, arguments)
        },
        _keyEvent: function(a, b) {
            this.isMultiLine && !this.menu.element.is(":visible") || (this._move(a, b), b.preventDefault())
        }
    }), a.extend(a.ui.autocomplete, {
        escapeRegex: function(a) {
            return a.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g, "\\$&")
        },
        filter: function(b, c) {
            var d = new RegExp(a.ui.autocomplete.escapeRegex(c), "i");
            return a.grep(b, function(a) {
                return d.test(a.label || a.value || a)
            })
        }
    }), a.widget("ui.autocomplete", a.ui.autocomplete, {
        options: {
            messages: {
                noResults: "No search results.",
                results: function(a) {
                    return a + (a > 1 ? " results are" : " result is") + " available, use up and down arrow keys to navigate."
                }
            }
        },
        __response: function(b) {
            var c;
            this._superApply(arguments), this.options.disabled || this.cancelSearch || (c = b && b.length ? this.options.messages.results(b.length) : this.options.messages.noResults, this.liveRegion.children().hide(), a("<div>").text(c).appendTo(this.liveRegion))
        }
    }), a.ui.autocomplete
});
jQuery(document).ready(function($) {
    if ($('#search-outer.nectar').length > 0) {
        var acs_action = 'myprefix_autocompletesearch';
        $("body").on('focus', '#s', function() {
            if (!$(this).hasClass('ui-autocomplete-input')) {
                $(this).autocomplete({
                    delay: 50,
                    position: {
                        of: "#search-outer #search .container"
                    },
                    appendTo: $("#search-box"),
                    source: function(req, response) {
                        $.getJSON(MyAcSearch.url + '?callback=?&action=' + acs_action, req, response);
                    },
                    select: function(event, ui) {
                        window.location.href = ui.item.link;
                    },
                    minLength: 2,
                }).data("ui-autocomplete")._renderItem = function(ul, item) {
                    return $("<li>").append("<a>" + item.image + "<span class='title'>" + item.label + "</span><br/><span class='desc'>" + item.post_type + "</span> </a>").appendTo(ul);
                };
            }
        });
    }
});;
(function($) {
    'use strict';
    if (typeof wpcf7 === 'undefined' || wpcf7 === null) {
        return;
    }
    wpcf7 = $.extend({
        cached: 0,
        inputs: []
    }, wpcf7);
    $(function() {
        wpcf7.supportHtml5 = (function() {
            var features = {};
            var input = document.createElement('input');
            features.placeholder = 'placeholder' in input;
            var inputTypes = ['email', 'url', 'tel', 'number', 'range', 'date'];
            $.each(inputTypes, function(index, value) {
                input.setAttribute('type', value);
                features[value] = input.type !== 'text';
            });
            return features;
        })();
        $('div.wpcf7 > form').each(function() {
            var $form = $(this);
            wpcf7.initForm($form);
            if (wpcf7.cached) {
                wpcf7.refill($form);
            }
        });
    });
    wpcf7.getId = function(form) {
        return parseInt($('input[name="_wpcf7"]', form).val(), 10);
    };
    wpcf7.initForm = function(form) {
        var $form = $(form);
        $form.submit(function(event) {
            if (!wpcf7.supportHtml5.placeholder) {
                $('[placeholder].placeheld', $form).each(function(i, n) {
                    $(n).val('').removeClass('placeheld');
                });
            }
            if (typeof window.FormData === 'function') {
                wpcf7.submit($form);
                event.preventDefault();
            }
        });
        $('.wpcf7-submit', $form).after('<span class="ajax-loader"></span>');
        wpcf7.toggleSubmit($form);
        $form.on('click', '.wpcf7-acceptance', function() {
            wpcf7.toggleSubmit($form);
        });
        $('.wpcf7-exclusive-checkbox', $form).on('click', 'input:checkbox', function() {
            var name = $(this).attr('name');
            $form.find('input:checkbox[name="' + name + '"]').not(this).prop('checked', false);
        });
        $('.wpcf7-list-item.has-free-text', $form).each(function() {
            var $freetext = $(':input.wpcf7-free-text', this);
            var $wrap = $(this).closest('.wpcf7-form-control');
            if ($(':checkbox, :radio', this).is(':checked')) {
                $freetext.prop('disabled', false);
            } else {
                $freetext.prop('disabled', true);
            }
            $wrap.on('change', ':checkbox, :radio', function() {
                var $cb = $('.has-free-text', $wrap).find(':checkbox, :radio');
                if ($cb.is(':checked')) {
                    $freetext.prop('disabled', false).focus();
                } else {
                    $freetext.prop('disabled', true);
                }
            });
        });
        if (!wpcf7.supportHtml5.placeholder) {
            $('[placeholder]', $form).each(function() {
                $(this).val($(this).attr('placeholder'));
                $(this).addClass('placeheld');
                $(this).focus(function() {
                    if ($(this).hasClass('placeheld')) {
                        $(this).val('').removeClass('placeheld');
                    }
                });
                $(this).blur(function() {
                    if ('' === $(this).val()) {
                        $(this).val($(this).attr('placeholder'));
                        $(this).addClass('placeheld');
                    }
                });
            });
        }
        if (wpcf7.jqueryUi && !wpcf7.supportHtml5.date) {
            $form.find('input.wpcf7-date[type="date"]').each(function() {
                $(this).datepicker({
                    dateFormat: 'yy-mm-dd',
                    minDate: new Date($(this).attr('min')),
                    maxDate: new Date($(this).attr('max'))
                });
            });
        }
        if (wpcf7.jqueryUi && !wpcf7.supportHtml5.number) {
            $form.find('input.wpcf7-number[type="number"]').each(function() {
                $(this).spinner({
                    min: $(this).attr('min'),
                    max: $(this).attr('max'),
                    step: $(this).attr('step')
                });
            });
        }
        $('.wpcf7-character-count', $form).each(function() {
            var $count = $(this);
            var name = $count.attr('data-target-name');
            var down = $count.hasClass('down');
            var starting = parseInt($count.attr('data-starting-value'), 10);
            var maximum = parseInt($count.attr('data-maximum-value'), 10);
            var minimum = parseInt($count.attr('data-minimum-value'), 10);
            var updateCount = function(target) {
                var $target = $(target);
                var length = $target.val().length;
                var count = down ? starting - length : length;
                $count.attr('data-current-value', count);
                $count.text(count);
                if (maximum && maximum < length) {
                    $count.addClass('too-long');
                } else {
                    $count.removeClass('too-long');
                }
                if (minimum && length < minimum) {
                    $count.addClass('too-short');
                } else {
                    $count.removeClass('too-short');
                }
            };
            $(':input[name="' + name + '"]', $form).each(function() {
                updateCount(this);
                $(this).keyup(function() {
                    updateCount(this);
                });
            });
        });
        $form.on('change', '.wpcf7-validates-as-url', function() {
            var val = $.trim($(this).val());
            if (val && !val.match(/^[a-z][a-z0-9.+-]*:/i) && -1 !== val.indexOf('.')) {
                val = val.replace(/^\/+/, '');
                val = 'http://' + val;
            }
            $(this).val(val);
        });
    };
    wpcf7.submit = function(form) {
        if (typeof window.FormData !== 'function') {
            return;
        }
        var $form = $(form);
        $('.ajax-loader', $form).addClass('is-active');
        wpcf7.clearResponse($form);
        var formData = new FormData($form.get(0));
        var detail = {
            id: $form.closest('div.wpcf7').attr('id'),
            status: 'init',
            inputs: [],
            formData: formData
        };
        $.each($form.serializeArray(), function(i, field) {
            if ('_wpcf7' == field.name) {
                detail.contactFormId = field.value;
            } else if ('_wpcf7_version' == field.name) {
                detail.pluginVersion = field.value;
            } else if ('_wpcf7_locale' == field.name) {
                detail.contactFormLocale = field.value;
            } else if ('_wpcf7_unit_tag' == field.name) {
                detail.unitTag = field.value;
            } else if ('_wpcf7_container_post' == field.name) {
                detail.containerPostId = field.value;
            } else if (field.name.match(/^_wpcf7_\w+_free_text_/)) {
                var owner = field.name.replace(/^_wpcf7_\w+_free_text_/, '');
                detail.inputs.push({
                    name: owner + '-free-text',
                    value: field.value
                });
            } else if (field.name.match(/^_/)) {} else {
                detail.inputs.push(field);
            }
        });
        wpcf7.triggerEvent($form.closest('div.wpcf7'), 'beforesubmit', detail);
        var ajaxSuccess = function(data, status, xhr, $form) {
            detail.id = $(data.into).attr('id');
            detail.status = data.status;
            detail.apiResponse = data;
            var $message = $('.wpcf7-response-output', $form);
            switch (data.status) {
                case 'validation_failed':
                    $.each(data.invalidFields, function(i, n) {
                        $(n.into, $form).each(function() {
                            wpcf7.notValidTip(this, n.message);
                            $('.wpcf7-form-control', this).addClass('wpcf7-not-valid');
                            $('[aria-invalid]', this).attr('aria-invalid', 'true');
                        });
                    });
                    $message.addClass('wpcf7-validation-errors');
                    $form.addClass('invalid');
                    wpcf7.triggerEvent(data.into, 'invalid', detail);
                    break;
                case 'acceptance_missing':
                    $message.addClass('wpcf7-acceptance-missing');
                    $form.addClass('unaccepted');
                    wpcf7.triggerEvent(data.into, 'unaccepted', detail);
                    break;
                case 'spam':
                    $message.addClass('wpcf7-spam-blocked');
                    $form.addClass('spam');
                    $('[name="g-recaptcha-response"]', $form).each(function() {
                        if ('' === $(this).val()) {
                            var $recaptcha = $(this).closest('.wpcf7-form-control-wrap');
                            wpcf7.notValidTip($recaptcha, wpcf7.recaptcha.messages.empty);
                        }
                    });
                    wpcf7.triggerEvent(data.into, 'spam', detail);
                    break;
                case 'aborted':
                    $message.addClass('wpcf7-aborted');
                    $form.addClass('aborted');
                    wpcf7.triggerEvent(data.into, 'aborted', detail);
                    break;
                case 'mail_sent':
                    $message.addClass('wpcf7-mail-sent-ok');
                    $form.addClass('sent');
                    wpcf7.triggerEvent(data.into, 'mailsent', detail);
                    break;
                case 'mail_failed':
                    $message.addClass('wpcf7-mail-sent-ng');
                    $form.addClass('failed');
                    wpcf7.triggerEvent(data.into, 'mailfailed', detail);
                    break;
                default:
                    var customStatusClass = 'custom-' + data.status.replace(/[^0-9a-z]+/i, '-');
                    $message.addClass('wpcf7-' + customStatusClass);
                    $form.addClass(customStatusClass);
            }
            wpcf7.refill($form, data);
            wpcf7.triggerEvent(data.into, 'submit', detail);
            if ('mail_sent' == data.status) {
                $form.each(function() {
                    this.reset();
                });
                wpcf7.toggleSubmit($form);
            }
            if (!wpcf7.supportHtml5.placeholder) {
                $form.find('[placeholder].placeheld').each(function(i, n) {
                    $(n).val($(n).attr('placeholder'));
                });
            }
            $message.html('').append(data.message).slideDown('fast');
            $message.attr('role', 'alert');
            $('.screen-reader-response', $form.closest('.wpcf7')).each(function() {
                var $response = $(this);
                $response.html('').attr('role', '').append(data.message);
                if (data.invalidFields) {
                    var $invalids = $('<ul></ul>');
                    $.each(data.invalidFields, function(i, n) {
                        if (n.idref) {
                            var $li = $('<li></li>').append($('<a></a>').attr('href', '#' + n.idref).append(n.message));
                        } else {
                            var $li = $('<li></li>').append(n.message);
                        }
                        $invalids.append($li);
                    });
                    $response.append($invalids);
                }
                $response.attr('role', 'alert').focus();
            });
        };
        $.ajax({
            type: 'POST',
            url: wpcf7.apiSettings.getRoute('/contact-forms/' + wpcf7.getId($form) + '/feedback'),
            data: formData,
            dataType: 'json',
            processData: false,
            contentType: false
        }).done(function(data, status, xhr) {
            ajaxSuccess(data, status, xhr, $form);
            $('.ajax-loader', $form).removeClass('is-active');
        }).fail(function(xhr, status, error) {
            var $e = $('<div class="ajax-error"></div>').text(error.message);
            $form.after($e);
        });
    };
    wpcf7.triggerEvent = function(target, name, detail) {
        var $target = $(target);
        var event = new CustomEvent('wpcf7' + name, {
            bubbles: true,
            detail: detail
        });
        $target.get(0).dispatchEvent(event);
        $target.trigger('wpcf7:' + name, detail);
        $target.trigger(name + '.wpcf7', detail);
    };
    wpcf7.toggleSubmit = function(form, state) {
        var $form = $(form);
        var $submit = $('input:submit', $form);
        if (typeof state !== 'undefined') {
            $submit.prop('disabled', !state);
            return;
        }
        if ($form.hasClass('wpcf7-acceptance-as-validation')) {
            return;
        }
        $submit.prop('disabled', false);
        $('.wpcf7-acceptance', $form).each(function() {
            var $span = $(this);
            var $input = $('input:checkbox', $span);
            if (!$span.hasClass('optional')) {
                if ($span.hasClass('invert') && $input.is(':checked') || !$span.hasClass('invert') && !$input.is(':checked')) {
                    $submit.prop('disabled', true);
                    return false;
                }
            }
        });
    };
    wpcf7.notValidTip = function(target, message) {
        var $target = $(target);
        $('.wpcf7-not-valid-tip', $target).remove();
        $('<span role="alert" class="wpcf7-not-valid-tip"></span>').text(message).appendTo($target);
        if ($target.is('.use-floating-validation-tip *')) {
            var fadeOut = function(target) {
                $(target).not(':hidden').animate({
                    opacity: 0
                }, 'fast', function() {
                    $(this).css({
                        'z-index': -100
                    });
                });
            };
            $target.on('mouseover', '.wpcf7-not-valid-tip', function() {
                fadeOut(this);
            });
            $target.on('focus', ':input', function() {
                fadeOut($('.wpcf7-not-valid-tip', $target));
            });
        }
    };
    wpcf7.refill = function(form, data) {
        var $form = $(form);
        var refillCaptcha = function($form, items) {
            $.each(items, function(i, n) {
                $form.find(':input[name="' + i + '"]').val('');
                $form.find('img.wpcf7-captcha-' + i).attr('src', n);
                var match = /([0-9]+)\.(png|gif|jpeg)$/.exec(n);
                $form.find('input:hidden[name="_wpcf7_captcha_challenge_' + i + '"]').attr('value', match[1]);
            });
        };
        var refillQuiz = function($form, items) {
            $.each(items, function(i, n) {
                $form.find(':input[name="' + i + '"]').val('');
                $form.find(':input[name="' + i + '"]').siblings('span.wpcf7-quiz-label').text(n[0]);
                $form.find('input:hidden[name="_wpcf7_quiz_answer_' + i + '"]').attr('value', n[1]);
            });
        };
        if (typeof data === 'undefined') {
            $.ajax({
                type: 'GET',
                url: wpcf7.apiSettings.getRoute('/contact-forms/' + wpcf7.getId($form) + '/refill'),
                beforeSend: function(xhr) {
                    var nonce = $form.find(':input[name="_wpnonce"]').val();
                    if (nonce) {
                        xhr.setRequestHeader('X-WP-Nonce', nonce);
                    }
                },
                dataType: 'json'
            }).done(function(data, status, xhr) {
                if (data.captcha) {
                    refillCaptcha($form, data.captcha);
                }
                if (data.quiz) {
                    refillQuiz($form, data.quiz);
                }
            });
        } else {
            if (data.captcha) {
                refillCaptcha($form, data.captcha);
            }
            if (data.quiz) {
                refillQuiz($form, data.quiz);
            }
        }
    };
    wpcf7.clearResponse = function(form) {
        var $form = $(form);
        $form.removeClass('invalid spam sent failed');
        $form.siblings('.screen-reader-response').html('').attr('role', '');
        $('.wpcf7-not-valid-tip', $form).remove();
        $('[aria-invalid]', $form).attr('aria-invalid', 'false');
        $('.wpcf7-form-control', $form).removeClass('wpcf7-not-valid');
        $('.wpcf7-response-output', $form).hide().empty().removeAttr('role').removeClass('wpcf7-mail-sent-ok wpcf7-mail-sent-ng wpcf7-validation-errors wpcf7-spam-blocked');
    };
    wpcf7.apiSettings.getRoute = function(path) {
        var url = wpcf7.apiSettings.root;
        url = url.replace(wpcf7.apiSettings.namespace, wpcf7.apiSettings.namespace + path);
        return url;
    };
})(jQuery);
(function() {
    if (typeof window.CustomEvent === "function") return false;

    function CustomEvent(event, params) {
        params = params || {
            bubbles: false,
            cancelable: false,
            detail: undefined
        };
        var evt = document.createEvent('CustomEvent');
        evt.initCustomEvent(event, params.bubbles, params.cancelable, params.detail);
        return evt;
    }
    CustomEvent.prototype = window.Event.prototype;
    window.CustomEvent = CustomEvent;
})();
jQuery(function($) {
    var using_mobile_browser = false;
    if (navigator.userAgent.match(/(Android|iPod|iPhone|iPad|BlackBerry|IEMobile|Opera Mini)/)) {
        using_mobile_browser = true;
    }
    var nectarPageHeader;

    function fullscreenHeightCalc() {
        var pageHeaderOffset = nectarPageHeader.offset().top;
        nectarPageHeader.css('height', (parseInt(window.innerHeight) - parseInt(pageHeaderOffset)) + 'px');
    }
    if (using_mobile_browser && $('#page-header-bg.fullscreen-header').length > 0) {
        nectarPageHeader = $('#page-header-bg');
        fullscreenHeightCalc();
        var $windowDOMWidth = window.innerWidth,
            $windowDOMHeight = window.innerHeight;
        $(window).resize(function() {
            if (($(window).width() != $windowDOMWidth && $(window).height != $windowDOMHeight)) {
                fullscreenHeightCalc();
                $windowDOMWidth = window.innerWidth;
                $windowDOMHeight = window.innerHeight;
            }
        });
    }

    function portfolioFullScreenSliderCalcs() {
        var $bodyBorderSize = ($('.body-border-top').length > 0 && $(window).width() > 1000) ? $('.body-border-top').height() : 0;
        $('.nectar_fullscreen_zoom_recent_projects').each(function() {
            if ($(this).parents('.first-section').length > 0) {
                $(this).css('height', $(window).height() - $(this).offset().top - $bodyBorderSize);
            } else {
                $(this).css('height', $(window).height());
            }
        });
    }
    if (using_mobile_browser && $('.nectar_fullscreen_zoom_recent_projects').length > 0) {
        portfolioFullScreenSliderCalcs();
    }

    function centeredNavBottomBarReposition() {
        var $headerOuter = $('#header-outer');
        var $headerSpan9 = $('#header-outer[data-format="centered-menu-bottom-bar"] header#top .span_9');
        var $headerSpan3 = $('#header-outer[data-format="centered-menu-bottom-bar"] header#top .span_3');
        var $secondaryHeader = $('#header-secondary-outer');
        var $logoLinkClone = $headerSpan3.find('#logo').clone();
        if ($logoLinkClone.is('[data-supplied-ml="true"]')) {
            $logoLinkClone.find('img:not(.mobile-only-logo)').remove();
        }
        $logoLinkClone.find('img.starting-logo').remove();

        function centeredNavBottomBarSecondary() {
            if ($('body.mobile').length > 0) {
                $('#header-outer').css('margin-top', '');
            } else {
                if ($('#header-outer .span_9').css('display') == 'none') {
                    $('#header-outer').css('margin-top', '');
                } else if ($('#header-outer .span_9').css('display') != 'none' && parseInt($('#header-outer').css('top')) > 0) {
                    $('#header-outer').css('top', '');
                }
            }
        }
        if ($secondaryHeader.length > 0) {
            if ($('#header-outer[data-remove-fixed="1"]').length == 0 && $('#header-outer[data-condense="true"]').length > 0) {
                setTimeout(function() {
                    centeredNavBottomBarSecondary();
                }, 50);
            }
            $secondaryHeader.addClass('centered-menu-bottom-bar');
        }
        if ($('#header-outer[data-condense="true"]').length > 0) {
            $headerSpan9.prepend($logoLinkClone);
        }
    }
    if ($('#header-outer[data-format="centered-menu-bottom-bar"]').length > 0) {
        centeredNavBottomBarReposition();
    }
    $('#page-header-bg[data-animate-in-effect="zoom-out"]').addClass('loaded');

    function sliderFontOverrides() {
        var $overrideCSS = '';
        $('.nectar-slider-wrap').each(function(i) {
            if ($(this).find('.swiper-container[data-tho]').length > 0) {
                $tho = $(this).find('.swiper-container').attr('data-tho');
                $tco = $(this).find('.swiper-container').attr('data-tco');
                $pho = $(this).find('.swiper-container').attr('data-pho');
                $pco = $(this).find('.swiper-container').attr('data-pco');
                if ($tho != 'auto' || $tco != 'auto') {
                    $overrideCSS += '@media only screen and (max-width: 1000px) and (min-width: 690px) {';
                    if ($tho != 'auto')
                        $overrideCSS += '#' + $(this).attr('id') + '.nectar-slider-wrap[data-full-width="false"] .swiper-slide .content h2, #boxed .nectar-slider-wrap#' + $(this).attr('id') + ' .swiper-slide .content h2, body .nectar-slider-wrap#' + $(this).attr('id') + '[data-full-width="true"] .swiper-slide .content h2, body .nectar-slider-wrap#' + $(this).attr('id') + '[data-full-width="boxed-full-width"] .swiper-slide .content h2, body .full-width-content .vc_span12 .nectar-slider-wrap#' + $(this).attr('id') + ' .swiper-slide .content h2 { font-size:' + $tho + 'px!important; line-height:' + (parseInt($tho) + 10) + 'px!important;  }';
                    if ($pho != 'auto')
                        $overrideCSS += '#' + $(this).attr('id') + '.nectar-slider-wrap[data-full-width="false"] .swiper-slide .content p, #boxed .nectar-slider-wrap#' + $(this).attr('id') + ' .swiper-slide .content p, body .nectar-slider-wrap#' + $(this).attr('id') + '[data-full-width="true"] .swiper-slide .content p, body .nectar-slider-wrap#' + $(this).attr('id') + '[data-full-width="boxed-full-width"] .swiper-slide .content p, body .full-width-content .vc_span12 .nectar-slider-wrap#' + $(this).attr('id') + ' .swiper-slide .content p { font-size:' + $tco + 'px!important; line-height:' + (parseInt($tco) + 10) + 'px!important;  }';
                    $overrideCSS += '}';
                }
                if ($pho != 'auto' || $pco != 'auto') {
                    $overrideCSS += '@media only screen and (max-width: 690px) {';
                    if ($pho != 'auto')
                        $overrideCSS += '#' + $(this).attr('id') + '.nectar-slider-wrap[data-full-width="false"] .swiper-slide .content h2, #boxed .nectar-slider-wrap#' + $(this).attr('id') + ' .swiper-slide .content h2, body .nectar-slider-wrap#' + $(this).attr('id') + '[data-full-width="true"] .swiper-slide .content h2, body .nectar-slider-wrap#' + $(this).attr('id') + '[data-full-width="boxed-full-width"] .swiper-slide .content h2, body .full-width-content .vc_span12 .nectar-slider-wrap#' + $(this).attr('id') + ' .swiper-slide .content h2 { font-size:' + $pho + 'px!important; line-height:' + (parseInt($pho) + 10) + 'px!important;  }';
                    if ($pho != 'auto')
                        $overrideCSS += '#' + $(this).attr('id') + '.nectar-slider-wrap[data-full-width="false"] .swiper-slide .content p, #boxed .nectar-slider-wrap#' + $(this).attr('id') + ' .swiper-slide .content p,  body .nectar-slider-wrap#' + $(this).attr('id') + '[data-full-width="true"] .swiper-slide .content p, body .nectar-slider-wrap#' + $(this).attr('id') + '[data-full-width="boxed-full-width"] .swiper-slide .content p, body .full-width-content .vc_span12 .nectar-slider-wrap#' + $(this).attr('id') + ' .swiper-slide .content p { font-size:' + $pco + 'px!important; line-height:' + (parseInt($pco) + 10) + 'px!important;  }';
                    $overrideCSS += '}';
                }
            }
        });
        if ($overrideCSS.length > 1) {
            var head = document.head || document.getElementsByTagName('head')[0];
            var style = document.createElement('style');
            style.type = 'text/css';
            if (style.styleSheet) {
                style.styleSheet.cssText = $overrideCSS;
            } else {
                style.appendChild(document.createTextNode($overrideCSS));
            }
            head.appendChild(style);
            $('.nectar-slider-wrap .content').css('visibility', 'visible');
        }
    }
    sliderFontOverrides();

    function centeredLogoMargins() {
        if ($('#header-outer[data-format="centered-logo-between-menu"]').length > 0 && $(window).width() > 1000) {
            $midnightSelector = ($('#header-outer .midnightHeader').length > 0) ? '> .midnightHeader:first-child' : '';
            var $navItemLength = $('#header-outer[data-format="centered-logo-between-menu"] ' + $midnightSelector + ' nav > .sf-menu > li').length;
            if ($('#header-outer #social-in-menu').length > 0) {
                $navItemLength--;
            }
            $centerLogoWidth = ($('#header-outer .row .col.span_3 #logo img:visible').length == 0) ? parseInt($('#header-outer .row .col.span_3').width()) : parseInt($('#header-outer .row .col.span_3 img:visible').width());
            $extraMenuSpace = ($('#header-outer[data-lhe="animated_underline"]').length > 0) ? parseInt($('#header-outer header#top nav > ul > li:first-child > a').css('margin-right')) : parseInt($('#header-outer header#top nav > ul > li:first-child > a').css('padding-right'));
            if ($extraMenuSpace > 30) {
                $extraMenuSpace += 45;
            } else if ($extraMenuSpace > 20) {
                $extraMenuSpace += 40;
            } else {
                $extraMenuSpace += 30;
            }
            $('#header-outer[data-format="centered-logo-between-menu"] nav > .sf-menu > li:nth-child(' + Math.floor($navItemLength / 2) + ')').css({
                'margin-right': ($centerLogoWidth + $extraMenuSpace) + 'px'
            }).addClass('menu-item-with-margin');
            $leftMenuWidth = 0;
            $rightMenuWidth = 0;
            $('#header-outer[data-format="centered-logo-between-menu"] ' + $midnightSelector + ' nav > .sf-menu > li:not(#social-in-menu)').each(function(i) {
                if (i + 1 <= Math.floor($navItemLength / 2)) {
                    $leftMenuWidth += $(this).width();
                } else {
                    $rightMenuWidth += $(this).width();
                }
            });
            var $menuDiff = Math.abs($rightMenuWidth - $leftMenuWidth);
            if ($leftMenuWidth > $rightMenuWidth)
                $('#header-outer .row > .col.span_9').css('padding-right', $menuDiff);
            else
                $('#header-outer .row > .col.span_9').css('padding-left', $menuDiff);
            $('#header-outer[data-format="centered-logo-between-menu"] nav').css('visibility', 'visible');
        }
    }
    var usingLogoImage = ($('#header-outer[data-using-logo="1"]').length > 0) ? true : false;
    if (!usingLogoImage) {
        centeredLogoMargins();
    } else if (usingLogoImage && $('#header-outer[data-format="centered-logo-between-menu"]').length > 0 && $('header#top #logo img:first-child[src]').length > 0) {
        var tempLogoImg = new Image();
        tempLogoImg.src = $('header#top #logo img:first-child').attr('src');
        tempLogoImg.onload = function() {
            centeredLogoMargins();
        };
    }

    function nectarFullWidthSections() {
        var $windowInnerWidth = window.innerWidth;
        var $scrollBar = ($('#ascrail2000').length > 0 && $windowInnerWidth > 1000) ? -13 : 0;
        var $bodyBorderWidth = ($('.body-border-right').length > 0 && $windowInnerWidth > 1000) ? parseInt($('.body-border-right').width()) * 2 : 0;
        if ($('#boxed').length == 1) {
            $justOutOfSight = ((parseInt($('.container-wrap').width()) - parseInt($('.main-content').width())) / 2) + 4;
        } else {
            var $extResponsivePadding = ($('body[data-ext-responsive="true"]').length > 0 && $windowInnerWidth >= 1000) ? 180 : 0;
            var $leftHeaderSize = ($('#header-outer[data-format="left-header"]').length > 0 && $windowInnerWidth >= 1000) ? parseInt($('#header-outer[data-format="left-header"]').width()) : 0;
            if ($(window).width() - $leftHeaderSize - $bodyBorderWidth <= parseInt($('.main-content').css('max-width'))) {
                var $windowWidth = parseInt($('.main-content').css('max-width'));
                if ($extResponsivePadding == 180) $windowWidth = $windowWidth - $scrollBar;
            } else {
                var $windowWidth = $(window).width() - $leftHeaderSize - $bodyBorderWidth;
            }
            $contentWidth = parseInt($('.main-content').css('max-width'));
            if ($('body.single-post[data-ext-responsive="true"]').length > 0 && $('.container-wrap.no-sidebar').length > 0) {
                $contentWidth = $('.post-area').width();
                $extResponsivePadding = 0;
            }
            $justOutOfSight = Math.ceil((($windowWidth + $extResponsivePadding + $scrollBar - $contentWidth) / 2))
        }
        $('.carousel-wrap[data-full-width="true"], .portfolio-items[data-col-num="elastic"]:not(.fullwidth-constrained), .full-width-content').each(function() {
            var $leftHeaderSize = ($('#header-outer[data-format="left-header"]').length > 0 && $windowInnerWidth >= 1000) ? parseInt($('#header-outer[data-format="left-header"]').width()) : 0;
            var $bodyBorderWidth = ($('.body-border-right').length > 0 && $windowInnerWidth > 1000) ? parseInt($('.body-border-right').width()) * 2 : 0;
            if ($('#boxed').length == 1) {
                var $mainContentWidth = ($('#nectar_fullscreen_rows').length == 0) ? parseInt($('.main-content').width()) : parseInt($(this).parents('.container').width());
                if ($('body.single-post[data-ext-responsive="true"]').length > 0 && $('.container-wrap.no-sidebar').length > 0 && $(this).parents('.post-area').length > 0) {
                    $contentWidth = $('.post-area').width();
                    $extResponsivePadding = 0;
                    $windowWidth = $(window).width() - $bodyBorderWidth;
                    $justOutOfSight = Math.ceil((($windowWidth + $extResponsivePadding + $scrollBar - $contentWidth) / 2))
                } else {
                    if ($(this).parents('.page-submenu').length > 0)
                        $justOutOfSight = ((parseInt($('.container-wrap').width()) - $mainContentWidth) / 2);
                    else
                        $justOutOfSight = ((parseInt($('.container-wrap').width()) - $mainContentWidth) / 2) + 4;
                }
            } else {
                if ($('body.single-post[data-ext-responsive="true"]').length > 0 && $('.container-wrap.no-sidebar').length > 0 && $(this).parents('.post-area').length > 0) {
                    $contentWidth = $('.post-area').width();
                    $extResponsivePadding = 0;
                    $windowWidth = $(window).width() - $leftHeaderSize - $bodyBorderWidth;
                } else {
                    var $mainContentMaxWidth = ($('#nectar_fullscreen_rows').length == 0) ? parseInt($('.main-content').css('max-width')) : parseInt($(this).parents('.container').css('max-width'));
                    if ($('#boxed').length == 0 && $(this).hasClass('portfolio-items') && $(this).is('[data-gutter*="px"]') && $(this).attr('data-gutter').length > 0 && $(this).attr('data-gutter') != 'none') {
                        $scrollBar = ($('#ascrail2000').length > 0 && $windowInnerWidth > 1000) ? -13 : 0;
                    }
                    if ($(window).width() - $leftHeaderSize - $bodyBorderWidth <= $mainContentMaxWidth) {
                        $windowWidth = $mainContentMaxWidth;
                        if ($extResponsivePadding == 180) $windowWidth = $windowWidth - $scrollBar;
                    }
                    $contentWidth = $mainContentMaxWidth;
                    $extResponsivePadding = ($('body[data-ext-responsive="true"]').length > 0 && window.innerWidth >= 1000) ? 180 : 0;
                    if ($leftHeaderSize > 0) $extResponsivePadding = ($('body[data-ext-responsive="true"]').length > 0 && window.innerWidth >= 1000) ? 120 : 0;
                }
                $justOutOfSight = Math.ceil((($windowWidth + $extResponsivePadding + $scrollBar - $contentWidth) / 2))
            }
            $extraSpace = 0;
            if ($(this).hasClass('carousel-wrap')) $extraSpace = 1;
            if ($(this).hasClass('portfolio-items')) $extraSpace = 5;
            $carouselWidth = ($('#boxed').length == 1) ? $mainContentWidth + parseInt($justOutOfSight * 2) : $(window).width() - $leftHeaderSize - $bodyBorderWidth + $extraSpace + $scrollBar;
            if ($('#boxed').length == 0 && $(this).hasClass('portfolio-items') && $(this).is('[data-gutter*="px"]') && $(this).attr('data-gutter').length > 0 && $(this).attr('data-gutter') != 'none') {
                if ($(window).width() > 1000)
                    $carouselWidth = $(window).width() - $leftHeaderSize - $bodyBorderWidth + $scrollBar + 3
                else
                    $carouselWidth = $(window).width() - $leftHeaderSize - $bodyBorderWidth + $scrollBar
            }
            if ($(this).parent().hasClass('default-style')) {
                var $mainContentWidth = ($('#nectar_fullscreen_rows').length == 0) ? parseInt($('.main-content').width()) : parseInt($(this).parents('.container').width());
                if ($('#boxed').length != 0) {
                    $carouselWidth = ($('#boxed').length == 1) ? $mainContentWidth + parseInt($justOutOfSight * 2) : $(window).width() - $leftHeaderSize + $extraSpace + $scrollBar;
                } else {
                    $carouselWidth = ($('#boxed').length == 1) ? $mainContentWidth + parseInt($justOutOfSight * 2) : ($(window).width() - $leftHeaderSize - $bodyBorderWidth) - (($(window).width() - $leftHeaderSize - $bodyBorderWidth) * .025) + $extraSpace + $scrollBar;
                    $windowWidth = ($(window).width() - $leftHeaderSize - $bodyBorderWidth <= $mainContentWidth) ? $mainContentWidth : ($(window).width() - $leftHeaderSize - $bodyBorderWidth) - (($(window).width() - $leftHeaderSize - $bodyBorderWidth) * .025);
                    $justOutOfSight = Math.ceil((($windowWidth + $scrollBar - $mainContentWidth) / 2))
                }
            } else if ($(this).parent().hasClass('spaced')) {
                var $mainContentWidth = ($('#nectar_fullscreen_rows').length == 0) ? parseInt($('.main-content').width()) : parseInt($(this).parents('.container').width());
                if ($('#boxed').length != 0) {
                    $carouselWidth = ($('#boxed').length == 1) ? $mainContentWidth + parseInt($justOutOfSight * 2) - ($(window).width() * .02) : $(window).width() + $extraSpace + $scrollBar;
                } else {
                    $carouselWidth = ($('#boxed').length == 1) ? $mainContentWidth + parseInt($justOutOfSight * 2) : ($(window).width() - $leftHeaderSize - $bodyBorderWidth) - Math.ceil(($(window).width() - $leftHeaderSize - $bodyBorderWidth) * .02) + $extraSpace + $scrollBar;
                    var $windowWidth2 = ($(window).width() - $leftHeaderSize - $bodyBorderWidth <= $mainContentWidth) ? $mainContentWidth : ($(window).width() - $leftHeaderSize - $bodyBorderWidth) - (($(window).width() - $leftHeaderSize - $bodyBorderWidth) * .02);
                    $justOutOfSight = Math.ceil((($windowWidth2 + $scrollBar - $mainContentWidth) / 2) + 2)
                }
            }
            if (!$(this).parents('.span_9').length > 0 && !$(this).parent().hasClass('span_3') && $(this).parent().attr('id') != 'sidebar-inner' && $(this).parent().attr('id') != 'portfolio-extra' && !$(this).find('.carousel-wrap[data-full-width="true"]').length > 0 && !$(this).find('.nectar-carousel-flickity-fixed-content').length > 0 && !$(this).find('.portfolio-items:not(".carousel")[data-col-num="elastic"]').length > 0) {
                if ($('.single-product').length > 0 && $(this).parents('#tab-description').length > 0 && $(this).parents('.full-width-tabs').length == 0) {
                    $(this).css({
                        'visibility': 'visible'
                    });
                } else {
                    if ($(this).hasClass('portfolio-items')) {
                        $(this).css({
                            'transform': 'translateX(-' + $justOutOfSight + 'px)',
                            'margin-left': 0,
                            'left': 0,
                            'width': $carouselWidth,
                            'visibility': 'visible'
                        });
                    } else {
                        $(this).css({
                            'left': 0,
                            'margin-left': -$justOutOfSight,
                            'width': $carouselWidth,
                            'visibility': 'visible'
                        });
                    }
                }
            } else if ($(this).parent().attr('id') == 'portfolio-extra' && $('#full_width_portfolio').length != 0) {
                $(this).css({
                    'left': 0,
                    'margin-left': -$justOutOfSight,
                    'width': $carouselWidth,
                    'visibility': 'visible'
                });
            } else {
                $(this).css({
                    'margin-left': 0,
                    'width': 'auto',
                    'left': '0',
                    'visibility': 'visible'
                });
            }
        });
    }
    if ($('#nectar_fullscreen_rows').length == 0) {
        nectarFullWidthSections();
    }
});
/*! modernizr 3.3.1 (Custom Build) | MIT *
 * https://modernizr.com/download/?-applicationcache-audio-backgroundsize-borderimage-borderradius-boxshadow-canvas-canvastext-cssanimations-csscolumns-cssgradients-csspositionsticky-cssreflections-csstransforms-csstransforms3d-csstransitions-flexbox-flexboxlegacy-fontface-generatedcontent-geolocation-hashchange-history-hsla-indexeddb-inlinesvg-input-inputtypes-localstorage-multiplebgs-opacity-postmessage-rgba-sessionstorage-smil-svg-svgclippaths-textshadow-video-webgl-websockets-websqldatabase-webworkers-domprefixes-hasevent-prefixed-prefixes-setclasses-shiv-testallprops-testprop-teststyles !*/
! function(e, t, n) {
    function r(e, t) {
        return typeof e === t
    }

    function a() {
        var e, t, n, a, o, i, s;
        for (var c in b)
            if (b.hasOwnProperty(c)) {
                if (e = [], t = b[c], t.name && (e.push(t.name.toLowerCase()), t.options && t.options.aliases && t.options.aliases.length))
                    for (n = 0; n < t.options.aliases.length; n++) e.push(t.options.aliases[n].toLowerCase());
                for (a = r(t.fn, "function") ? t.fn() : t.fn, o = 0; o < e.length; o++) i = e[o], s = i.split("."), 1 === s.length ? Modernizr[s[0]] = a : (!Modernizr[s[0]] || Modernizr[s[0]] instanceof Boolean || (Modernizr[s[0]] = new Boolean(Modernizr[s[0]])), Modernizr[s[0]][s[1]] = a), y.push((a ? "" : "no-") + s.join("-"))
            }
    }

    function o(e) {
        var t = C.className,
            n = Modernizr._config.classPrefix || "";
        if (E && (t = t.baseVal), Modernizr._config.enableJSClass) {
            var r = new RegExp("(^|\\s)" + n + "no-js(\\s|$)");
            t = t.replace(r, "$1" + n + "js$2")
        }
        Modernizr._config.enableClasses && (t += " " + n + e.join(" " + n), E ? C.className.baseVal = t : C.className = t)
    }

    function i() {
        return "function" != typeof t.createElement ? t.createElement(arguments[0]) : E ? t.createElementNS.call(t, "http://www.w3.org/2000/svg", arguments[0]) : t.createElement.apply(t, arguments)
    }

    function s(e) {
        return e.replace(/([a-z])-([a-z])/g, function(e, t, n) {
            return t + n.toUpperCase()
        }).replace(/^-/, "")
    }

    function c(e, t) {
        return !!~("" + e).indexOf(t)
    }

    function d() {
        var e = t.body;
        return e || (e = i(E ? "svg" : "body"), e.fake = !0), e
    }

    function l(e, n, r, a) {
        var o, s, c, l, u = "modernizr",
            f = i("div"),
            p = d();
        if (parseInt(r, 10))
            for (; r--;) c = i("div"), c.id = a ? a[r] : u + (r + 1), f.appendChild(c);
        return o = i("style"), o.type = "text/css", o.id = "s" + u, (p.fake ? p : f).appendChild(o), p.appendChild(f), o.styleSheet ? o.styleSheet.cssText = e : o.appendChild(t.createTextNode(e)), f.id = u, p.fake && (p.style.background = "", p.style.overflow = "hidden", l = C.style.overflow, C.style.overflow = "hidden", C.appendChild(p)), s = n(f, e), p.fake ? (p.parentNode.removeChild(p), C.style.overflow = l, C.offsetHeight) : f.parentNode.removeChild(f), !!s
    }

    function u(e, t) {
        return function() {
            return e.apply(t, arguments)
        }
    }

    function f(e, t, n) {
        var a;
        for (var o in e)
            if (e[o] in t) return n === !1 ? e[o] : (a = t[e[o]], r(a, "function") ? u(a, n || t) : a);
        return !1
    }

    function p(e) {
        return e.replace(/([A-Z])/g, function(e, t) {
            return "-" + t.toLowerCase()
        }).replace(/^ms-/, "-ms-")
    }

    function m(t, r) {
        var a = t.length;
        if ("CSS" in e && "supports" in e.CSS) {
            for (; a--;)
                if (e.CSS.supports(p(t[a]), r)) return !0;
            return !1
        }
        if ("CSSSupportsRule" in e) {
            for (var o = []; a--;) o.push("(" + p(t[a]) + ":" + r + ")");
            return o = o.join(" or "), l("@supports (" + o + ") { #modernizr { position: absolute; } }", function(e) {
                return "absolute" == getComputedStyle(e, null).position
            })
        }
        return n
    }

    function g(e, t, a, o) {
        function d() {
            u && (delete W.style, delete W.modElem)
        }
        if (o = r(o, "undefined") ? !1 : o, !r(a, "undefined")) {
            var l = m(e, a);
            if (!r(l, "undefined")) return l
        }
        for (var u, f, p, g, h, v = ["modernizr", "tspan", "samp"]; !W.style && v.length;) u = !0, W.modElem = i(v.shift()), W.style = W.modElem.style;
        for (p = e.length, f = 0; p > f; f++)
            if (g = e[f], h = W.style[g], c(g, "-") && (g = s(g)), W.style[g] !== n) {
                if (o || r(a, "undefined")) return d(), "pfx" == t ? g : !0;
                try {
                    W.style[g] = a
                } catch (y) {}
                if (W.style[g] != h) return d(), "pfx" == t ? g : !0
            }
        return d(), !1
    }

    function h(e, t, n, a, o) {
        var i = e.charAt(0).toUpperCase() + e.slice(1),
            s = (e + " " + B.join(i + " ") + i).split(" ");
        return r(t, "string") || r(t, "undefined") ? g(s, t, a, o) : (s = (e + " " + P.join(i + " ") + i).split(" "), f(s, t, n))
    }

    function v(e, t, r) {
        return h(e, n, n, t, r)
    }
    var y = [],
        b = [],
        x = {
            _version: "3.3.1",
            _config: {
                classPrefix: "",
                enableClasses: !0,
                enableJSClass: !0,
                usePrefixes: !0
            },
            _q: [],
            on: function(e, t) {
                var n = this;
                setTimeout(function() {
                    t(n[e])
                }, 0)
            },
            addTest: function(e, t, n) {
                b.push({
                    name: e,
                    fn: t,
                    options: n
                })
            },
            addAsyncTest: function(e) {
                b.push({
                    name: null,
                    fn: e
                })
            }
        },
        Modernizr = function() {};
    Modernizr.prototype = x, Modernizr = new Modernizr, Modernizr.addTest("applicationcache", "applicationCache" in e), Modernizr.addTest("geolocation", "geolocation" in navigator), Modernizr.addTest("history", function() {
        var t = navigator.userAgent;
        return -1 === t.indexOf("Android 2.") && -1 === t.indexOf("Android 4.0") || -1 === t.indexOf("Mobile Safari") || -1 !== t.indexOf("Chrome") || -1 !== t.indexOf("Windows Phone") ? e.history && "pushState" in e.history : !1
    }), Modernizr.addTest("postmessage", "postMessage" in e), Modernizr.addTest("svg", !!t.createElementNS && !!t.createElementNS("http://www.w3.org/2000/svg", "svg").createSVGRect);
    var T = !1;
    try {
        T = "WebSocket" in e && 2 === e.WebSocket.CLOSING
    } catch (w) {}
    Modernizr.addTest("websockets", T), Modernizr.addTest("localstorage", function() {
        var e = "modernizr";
        try {
            return localStorage.setItem(e, e), localStorage.removeItem(e), !0
        } catch (t) {
            return !1
        }
    }), Modernizr.addTest("sessionstorage", function() {
        var e = "modernizr";
        try {
            return sessionStorage.setItem(e, e), sessionStorage.removeItem(e), !0
        } catch (t) {
            return !1
        }
    }), Modernizr.addTest("websqldatabase", "openDatabase" in e), Modernizr.addTest("webworkers", "Worker" in e);
    var S = x._config.usePrefixes ? " -webkit- -moz- -o- -ms- ".split(" ") : ["", ""];
    x._prefixes = S;
    var C = t.documentElement,
        E = "svg" === C.nodeName.toLowerCase();
    E || ! function(e, t) {
        function n(e, t) {
            var n = e.createElement("p"),
                r = e.getElementsByTagName("head")[0] || e.documentElement;
            return n.innerHTML = "x<style>" + t + "</style>", r.insertBefore(n.lastChild, r.firstChild)
        }

        function r() {
            var e = b.elements;
            return "string" == typeof e ? e.split(" ") : e
        }

        function a(e, t) {
            var n = b.elements;
            "string" != typeof n && (n = n.join(" ")), "string" != typeof e && (e = e.join(" ")), b.elements = n + " " + e, d(t)
        }

        function o(e) {
            var t = y[e[h]];
            return t || (t = {}, v++, e[h] = v, y[v] = t), t
        }

        function i(e, n, r) {
            if (n || (n = t), u) return n.createElement(e);
            r || (r = o(n));
            var a;
            return a = r.cache[e] ? r.cache[e].cloneNode() : g.test(e) ? (r.cache[e] = r.createElem(e)).cloneNode() : r.createElem(e), !a.canHaveChildren || m.test(e) || a.tagUrn ? a : r.frag.appendChild(a)
        }

        function s(e, n) {
            if (e || (e = t), u) return e.createDocumentFragment();
            n = n || o(e);
            for (var a = n.frag.cloneNode(), i = 0, s = r(), c = s.length; c > i; i++) a.createElement(s[i]);
            return a
        }

        function c(e, t) {
            t.cache || (t.cache = {}, t.createElem = e.createElement, t.createFrag = e.createDocumentFragment, t.frag = t.createFrag()), e.createElement = function(n) {
                return b.shivMethods ? i(n, e, t) : t.createElem(n)
            }, e.createDocumentFragment = Function("h,f", "return function(){var n=f.cloneNode(),c=n.createElement;h.shivMethods&&(" + r().join().replace(/[\w\-:]+/g, function(e) {
                return t.createElem(e), t.frag.createElement(e), 'c("' + e + '")'
            }) + ");return n}")(b, t.frag)
        }

        function d(e) {
            e || (e = t);
            var r = o(e);
            return !b.shivCSS || l || r.hasCSS || (r.hasCSS = !!n(e, "article,aside,dialog,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}mark{background:#FF0;color:#000}template{display:none}")), u || c(e, r), e
        }
        var l, u, f = "3.7.3",
            p = e.html5 || {},
            m = /^<|^(?:button|map|select|textarea|object|iframe|option|optgroup)$/i,
            g = /^(?:a|b|code|div|fieldset|h1|h2|h3|h4|h5|h6|i|label|li|ol|p|q|span|strong|style|table|tbody|td|th|tr|ul)$/i,
            h = "_html5shiv",
            v = 0,
            y = {};
        ! function() {
            try {
                var e = t.createElement("a");
                e.innerHTML = "<xyz></xyz>", l = "hidden" in e, u = 1 == e.childNodes.length || function() {
                    t.createElement("a");
                    var e = t.createDocumentFragment();
                    return "undefined" == typeof e.cloneNode || "undefined" == typeof e.createDocumentFragment || "undefined" == typeof e.createElement
                }()
            } catch (n) {
                l = !0, u = !0
            }
        }();
        var b = {
            elements: p.elements || "abbr article aside audio bdi canvas data datalist details dialog figcaption figure footer header hgroup main mark meter nav output picture progress section summary template time video",
            version: f,
            shivCSS: p.shivCSS !== !1,
            supportsUnknownElements: u,
            shivMethods: p.shivMethods !== !1,
            type: "default",
            shivDocument: d,
            createElement: i,
            createDocumentFragment: s,
            addElements: a
        };
        e.html5 = b, d(t), "object" == typeof module && module.exports && (module.exports = b)
    }("undefined" != typeof e ? e : this, t);
    var k = "Moz O ms Webkit",
        P = x._config.usePrefixes ? k.toLowerCase().split(" ") : [];
    x._domPrefixes = P;
    var _ = function() {
        function e(e, t) {
            var a;
            return e ? (t && "string" != typeof t || (t = i(t || "div")), e = "on" + e, a = e in t, !a && r && (t.setAttribute || (t = i("div")), t.setAttribute(e, ""), a = "function" == typeof t[e], t[e] !== n && (t[e] = n), t.removeAttribute(e)), a) : !1
        }
        var r = !("onblur" in t.documentElement);
        return e
    }();
    x.hasEvent = _, Modernizr.addTest("hashchange", function() {
        return _("hashchange", e) === !1 ? !1 : t.documentMode === n || t.documentMode > 7
    }), Modernizr.addTest("audio", function() {
        var e = i("audio"),
            t = !1;
        try {
            (t = !!e.canPlayType) && (t = new Boolean(t), t.ogg = e.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/, ""), t.mp3 = e.canPlayType('audio/mpeg; codecs="mp3"').replace(/^no$/, ""), t.opus = e.canPlayType('audio/ogg; codecs="opus"') || e.canPlayType('audio/webm; codecs="opus"').replace(/^no$/, ""), t.wav = e.canPlayType('audio/wav; codecs="1"').replace(/^no$/, ""), t.m4a = (e.canPlayType("audio/x-m4a;") || e.canPlayType("audio/aac;")).replace(/^no$/, ""))
        } catch (n) {}
        return t
    }), Modernizr.addTest("canvas", function() {
        var e = i("canvas");
        return !(!e.getContext || !e.getContext("2d"))
    }), Modernizr.addTest("canvastext", function() {
        return Modernizr.canvas === !1 ? !1 : "function" == typeof i("canvas").getContext("2d").fillText
    }), Modernizr.addTest("video", function() {
        var e = i("video"),
            t = !1;
        try {
            (t = !!e.canPlayType) && (t = new Boolean(t), t.ogg = e.canPlayType('video/ogg; codecs="theora"').replace(/^no$/, ""), t.h264 = e.canPlayType('video/mp4; codecs="avc1.42E01E"').replace(/^no$/, ""), t.webm = e.canPlayType('video/webm; codecs="vp8, vorbis"').replace(/^no$/, ""), t.vp9 = e.canPlayType('video/webm; codecs="vp9"').replace(/^no$/, ""), t.hls = e.canPlayType('application/x-mpegURL; codecs="avc1.42E01E"').replace(/^no$/, ""))
        } catch (n) {}
        return t
    }), Modernizr.addTest("webgl", function() {
        var t = i("canvas"),
            n = "probablySupportsContext" in t ? "probablySupportsContext" : "supportsContext";
        return n in t ? t[n]("webgl") || t[n]("experimental-webgl") : "WebGLRenderingContext" in e
    }), Modernizr.addTest("cssgradients", function() {
        for (var e, t = "background-image:", n = "gradient(linear,left top,right bottom,from(#9f9),to(white));", r = "", a = 0, o = S.length - 1; o > a; a++) e = 0 === a ? "to " : "", r += t + S[a] + "linear-gradient(" + e + "left top, #9f9, white);";
        Modernizr._config.usePrefixes && (r += t + "-webkit-" + n);
        var s = i("a"),
            c = s.style;
        return c.cssText = r, ("" + c.backgroundImage).indexOf("gradient") > -1
    }), Modernizr.addTest("multiplebgs", function() {
        var e = i("a").style;
        return e.cssText = "background:url(https://),url(https://),red url(https://)", /(url\s*\(.*?){3}/.test(e.background)
    }), Modernizr.addTest("opacity", function() {
        var e = i("a").style;
        return e.cssText = S.join("opacity:.55;"), /^0.55$/.test(e.opacity)
    }), Modernizr.addTest("rgba", function() {
        var e = i("a").style;
        return e.cssText = "background-color:rgba(150,255,150,.5)", ("" + e.backgroundColor).indexOf("rgba") > -1
    }), Modernizr.addTest("inlinesvg", function() {
        var e = i("div");
        return e.innerHTML = "<svg/>", "http://www.w3.org/2000/svg" == ("undefined" != typeof SVGRect && e.firstChild && e.firstChild.namespaceURI)
    }), Modernizr.addTest("csspositionsticky", function() {
        var e = "position:",
            t = "sticky",
            n = i("a"),
            r = n.style;
        return r.cssText = e + S.join(t + ";" + e).slice(0, -e.length), -1 !== r.position.indexOf(t)
    });
    var N = i("input"),
        R = "autocomplete autofocus list placeholder max min multiple pattern required step".split(" "),
        z = {};
    Modernizr.input = function(t) {
        for (var n = 0, r = t.length; r > n; n++) z[t[n]] = !!(t[n] in N);
        return z.list && (z.list = !(!i("datalist") || !e.HTMLDataListElement)), z
    }(R);
    var $ = "search tel url email datetime date month week time datetime-local number range color".split(" "),
        A = {};
    Modernizr.inputtypes = function(e) {
        for (var r, a, o, i = e.length, s = "1)", c = 0; i > c; c++) N.setAttribute("type", r = e[c]), o = "text" !== N.type && "style" in N, o && (N.value = s, N.style.cssText = "position:absolute;visibility:hidden;", /^range$/.test(r) && N.style.WebkitAppearance !== n ? (C.appendChild(N), a = t.defaultView, o = a.getComputedStyle && "textfield" !== a.getComputedStyle(N, null).WebkitAppearance && 0 !== N.offsetHeight, C.removeChild(N)) : /^(search|tel)$/.test(r) || (o = /^(url|email)$/.test(r) ? N.checkValidity && N.checkValidity() === !1 : N.value != s)), A[e[c]] = !!o;
        return A
    }($), Modernizr.addTest("hsla", function() {
        var e = i("a").style;
        return e.cssText = "background-color:hsla(120,40%,100%,.5)", c(e.backgroundColor, "rgba") || c(e.backgroundColor, "hsla")
    });
    var O = "CSS" in e && "supports" in e.CSS,
        L = "supportsCSS" in e;
    Modernizr.addTest("supports", O || L);
    var j = {}.toString;
    Modernizr.addTest("svgclippaths", function() {
        return !!t.createElementNS && /SVGClipPath/.test(j.call(t.createElementNS("http://www.w3.org/2000/svg", "clipPath")))
    }), Modernizr.addTest("smil", function() {
        return !!t.createElementNS && /SVGAnimate/.test(j.call(t.createElementNS("http://www.w3.org/2000/svg", "animate")))
    });
    var B = x._config.usePrefixes ? k.split(" ") : [];
    x._cssomPrefixes = B;
    var F = function(t) {
        var r, a = S.length,
            o = e.CSSRule;
        if ("undefined" == typeof o) return n;
        if (!t) return !1;
        if (t = t.replace(/^@/, ""), r = t.replace(/-/g, "_").toUpperCase() + "_RULE", r in o) return "@" + t;
        for (var i = 0; a > i; i++) {
            var s = S[i],
                c = s.toUpperCase() + "_" + r;
            if (c in o) return "@-" + s.toLowerCase() + "-" + t
        }
        return !1
    };
    x.atRule = F;
    var M = x.testStyles = l,
        D = function() {
            var e = navigator.userAgent,
                t = e.match(/applewebkit\/([0-9]+)/gi) && parseFloat(RegExp.$1),
                n = e.match(/w(eb)?osbrowser/gi),
                r = e.match(/windows phone/gi) && e.match(/iemobile\/([0-9])+/gi) && parseFloat(RegExp.$1) >= 9,
                a = 533 > t && e.match(/android/gi);
            return n || a || r
        }();
    D ? Modernizr.addTest("fontface", !1) : M('@font-face {font-family:"font";src:url("https://")}', function(e, n) {
        var r = t.getElementById("smodernizr"),
            a = r.sheet || r.styleSheet,
            o = a ? a.cssRules && a.cssRules[0] ? a.cssRules[0].cssText : a.cssText || "" : "",
            i = /src/i.test(o) && 0 === o.indexOf(n.split(" ")[0]);
        Modernizr.addTest("fontface", i)
    }), M('#modernizr{font:0/0 a}#modernizr:after{content:":)";visibility:hidden;font:7px/1 a}', function(e) {
        Modernizr.addTest("generatedcontent", e.offsetHeight >= 7)
    });
    var I = {
        elem: i("modernizr")
    };
    Modernizr._q.push(function() {
        delete I.elem
    });
    var W = {
        style: I.elem.style
    };
    Modernizr._q.unshift(function() {
        delete W.style
    });
    var V = x.testProp = function(e, t, r) {
        return g([e], n, t, r)
    };
    Modernizr.addTest("textshadow", V("textShadow", "1px 1px")), x.testAllProps = h;
    var H, U = x.prefixed = function(e, t, n) {
        return 0 === e.indexOf("@") ? F(e) : (-1 != e.indexOf("-") && (e = s(e)), t ? h(e, t, n) : h(e, "pfx"))
    };
    try {
        H = U("indexedDB", e)
    } catch (w) {}
    Modernizr.addTest("indexeddb", !!H), H && Modernizr.addTest("indexeddb.deletedatabase", "deleteDatabase" in H), x.testAllProps = v, Modernizr.addTest("cssanimations", v("animationName", "a", !0)), Modernizr.addTest("backgroundsize", v("backgroundSize", "100%", !0)), Modernizr.addTest("borderimage", v("borderImage", "url() 1", !0)), Modernizr.addTest("borderradius", v("borderRadius", "0px", !0)), Modernizr.addTest("boxshadow", v("boxShadow", "1px 1px", !0)),
        function() {
            Modernizr.addTest("csscolumns", function() {
                var e = !1,
                    t = v("columnCount");
                try {
                    (e = !!t) && (e = new Boolean(e))
                } catch (n) {}
                return e
            });
            for (var e, t, n = ["Width", "Span", "Fill", "Gap", "Rule", "RuleColor", "RuleStyle", "RuleWidth", "BreakBefore", "BreakAfter", "BreakInside"], r = 0; r < n.length; r++) e = n[r].toLowerCase(), t = v("column" + n[r]), ("breakbefore" === e || "breakafter" === e || "breakinside" == e) && (t = t || v(n[r])), Modernizr.addTest("csscolumns." + e, t)
        }(), Modernizr.addTest("flexbox", v("flexBasis", "1px", !0)), Modernizr.addTest("flexboxlegacy", v("boxDirection", "reverse", !0)), Modernizr.addTest("cssreflections", v("boxReflect", "above", !0)), Modernizr.addTest("csstransforms", function() {
            return -1 === navigator.userAgent.indexOf("Android 2.") && v("transform", "scale(1)", !0)
        }), Modernizr.addTest("csstransforms3d", function() {
            var e = !!v("perspective", "1px", !0),
                t = Modernizr._config.usePrefixes;
            if (e && (!t || "webkitPerspective" in C.style)) {
                var n, r = "#modernizr{width:0;height:0}";
                Modernizr.supports ? n = "@supports (perspective: 1px)" : (n = "@media (transform-3d)", t && (n += ",(-webkit-transform-3d)")), n += "{#modernizr{width:7px;height:18px;margin:0;padding:0;border:0}}", M(r + n, function(t) {
                    e = 7 === t.offsetWidth && 18 === t.offsetHeight
                })
            }
            return e
        }), Modernizr.addTest("csstransitions", v("transition", "all", !0)), a(), o(y), delete x.addTest, delete x.addAsyncTest;
    for (var q = 0; q < Modernizr._q.length; q++) Modernizr._q[q]();
    e.Modernizr = Modernizr
}(window, document);
/*!
 * imagesLoaded PACKAGED v4.1.4
 * JavaScript is all like "You images are done yet or what?"
 * MIT License
 */
! function(e, t) {
    "function" == typeof define && define.amd ? define("ev-emitter/ev-emitter", t) : "object" == typeof module && module.exports ? module.exports = t() : e.EvEmitter = t()
}("undefined" != typeof window ? window : this, function() {
    function e() {}
    var t = e.prototype;
    return t.on = function(e, t) {
        if (e && t) {
            var i = this._events = this._events || {},
                n = i[e] = i[e] || [];
            return n.indexOf(t) == -1 && n.push(t), this
        }
    }, t.once = function(e, t) {
        if (e && t) {
            this.on(e, t);
            var i = this._onceEvents = this._onceEvents || {},
                n = i[e] = i[e] || {};
            return n[t] = !0, this
        }
    }, t.off = function(e, t) {
        var i = this._events && this._events[e];
        if (i && i.length) {
            var n = i.indexOf(t);
            return n != -1 && i.splice(n, 1), this
        }
    }, t.emitEvent = function(e, t) {
        var i = this._events && this._events[e];
        if (i && i.length) {
            i = i.slice(0), t = t || [];
            for (var n = this._onceEvents && this._onceEvents[e], o = 0; o < i.length; o++) {
                var r = i[o],
                    s = n && n[r];
                s && (this.off(e, r), delete n[r]), r.apply(this, t)
            }
            return this
        }
    }, t.allOff = function() {
        delete this._events, delete this._onceEvents
    }, e
}),
function(e, t) {
    "use strict";
    "function" == typeof define && define.amd ? define(["ev-emitter/ev-emitter"], function(i) {
        return t(e, i)
    }) : "object" == typeof module && module.exports ? module.exports = t(e, require("ev-emitter")) : e.imagesLoaded = t(e, e.EvEmitter)
}("undefined" != typeof window ? window : this, function(e, t) {
    function i(e, t) {
        for (var i in t) e[i] = t[i];
        return e
    }

    function n(e) {
        if (Array.isArray(e)) return e;
        var t = "object" == typeof e && "number" == typeof e.length;
        return t ? d.call(e) : [e]
    }

    function o(e, t, r) {
        if (!(this instanceof o)) return new o(e, t, r);
        var s = e;
        return "string" == typeof e && (s = document.querySelectorAll(e)), s ? (this.elements = n(s), this.options = i({}, this.options), "function" == typeof t ? r = t : i(this.options, t), r && this.on("always", r), this.getImages(), h && (this.jqDeferred = new h.Deferred), void setTimeout(this.check.bind(this))) : void a.error("Bad element for imagesLoaded " + (s || e))
    }

    function r(e) {
        this.img = e
    }

    function s(e, t) {
        this.url = e, this.element = t, this.img = new Image
    }
    var h = e.jQuery,
        a = e.console,
        d = Array.prototype.slice;
    o.prototype = Object.create(t.prototype), o.prototype.options = {}, o.prototype.getImages = function() {
        this.images = [], this.elements.forEach(this.addElementImages, this)
    }, o.prototype.addElementImages = function(e) {
        "IMG" == e.nodeName && this.addImage(e), this.options.background === !0 && this.addElementBackgroundImages(e);
        var t = e.nodeType;
        if (t && u[t]) {
            for (var i = e.querySelectorAll("img"), n = 0; n < i.length; n++) {
                var o = i[n];
                this.addImage(o)
            }
            if ("string" == typeof this.options.background) {
                var r = e.querySelectorAll(this.options.background);
                for (n = 0; n < r.length; n++) {
                    var s = r[n];
                    this.addElementBackgroundImages(s)
                }
            }
        }
    };
    var u = {
        1: !0,
        9: !0,
        11: !0
    };
    return o.prototype.addElementBackgroundImages = function(e) {
        var t = getComputedStyle(e);
        if (t)
            for (var i = /url\((['"])?(.*?)\1\)/gi, n = i.exec(t.backgroundImage); null !== n;) {
                var o = n && n[2];
                o && this.addBackground(o, e), n = i.exec(t.backgroundImage)
            }
    }, o.prototype.addImage = function(e) {
        var t = new r(e);
        this.images.push(t)
    }, o.prototype.addBackground = function(e, t) {
        var i = new s(e, t);
        this.images.push(i)
    }, o.prototype.check = function() {
        function e(e, i, n) {
            setTimeout(function() {
                t.progress(e, i, n)
            })
        }
        var t = this;
        return this.progressedCount = 0, this.hasAnyBroken = !1, this.images.length ? void this.images.forEach(function(t) {
            t.once("progress", e), t.check()
        }) : void this.complete()
    }, o.prototype.progress = function(e, t, i) {
        this.progressedCount++, this.hasAnyBroken = this.hasAnyBroken || !e.isLoaded, this.emitEvent("progress", [this, e, t]), this.jqDeferred && this.jqDeferred.notify && this.jqDeferred.notify(this, e), this.progressedCount == this.images.length && this.complete(), this.options.debug && a && a.log("progress: " + i, e, t)
    }, o.prototype.complete = function() {
        var e = this.hasAnyBroken ? "fail" : "done";
        if (this.isComplete = !0, this.emitEvent(e, [this]), this.emitEvent("always", [this]), this.jqDeferred) {
            var t = this.hasAnyBroken ? "reject" : "resolve";
            this.jqDeferred[t](this)
        }
    }, r.prototype = Object.create(t.prototype), r.prototype.check = function() {
        var e = this.getIsImageComplete();
        return e ? void this.confirm(0 !== this.img.naturalWidth, "naturalWidth") : (this.proxyImage = new Image, this.proxyImage.addEventListener("load", this), this.proxyImage.addEventListener("error", this), this.img.addEventListener("load", this), this.img.addEventListener("error", this), void(this.proxyImage.src = this.img.src))
    }, r.prototype.getIsImageComplete = function() {
        return this.img.complete && this.img.naturalWidth
    }, r.prototype.confirm = function(e, t) {
        this.isLoaded = e, this.emitEvent("progress", [this, this.img, t])
    }, r.prototype.handleEvent = function(e) {
        var t = "on" + e.type;
        this[t] && this[t](e)
    }, r.prototype.onload = function() {
        this.confirm(!0, "onload"), this.unbindEvents()
    }, r.prototype.onerror = function() {
        this.confirm(!1, "onerror"), this.unbindEvents()
    }, r.prototype.unbindEvents = function() {
        this.proxyImage.removeEventListener("load", this), this.proxyImage.removeEventListener("error", this), this.img.removeEventListener("load", this), this.img.removeEventListener("error", this)
    }, s.prototype = Object.create(r.prototype), s.prototype.check = function() {
        this.img.addEventListener("load", this), this.img.addEventListener("error", this), this.img.src = this.url;
        var e = this.getIsImageComplete();
        e && (this.confirm(0 !== this.img.naturalWidth, "naturalWidth"), this.unbindEvents())
    }, s.prototype.unbindEvents = function() {
        this.img.removeEventListener("load", this), this.img.removeEventListener("error", this)
    }, s.prototype.confirm = function(e, t) {
        this.isLoaded = e, this.emitEvent("progress", [this, this.element, t])
    }, o.makeJQueryPlugin = function(t) {
        t = t || e.jQuery, t && (h = t, h.fn.imagesLoaded = function(e, t) {
            var i = new o(this, e, t);
            return i.jqDeferred.promise(h(this))
        })
    }, o.makeJQueryPlugin(), o
});

! function(t, e, n, o) {
    "use strict";

    function i(t) {
        var e = n(t.currentTarget),
            o = t.data ? t.data.options : {},
            i = e.attr("data-fancybox") || "",
            a = 0,
            s = [];
        t.isDefaultPrevented() || (t.preventDefault(), i ? (s = o.selector ? n(o.selector) : t.data ? t.data.items : [], s = s.length ? s.filter('[data-fancybox="' + i + '"]') : n('[data-fancybox="' + i + '"]'), a = s.index(e), a < 0 && (a = 0)) : s = [e], n.fancybox.open(s, o, a))
    }
    if (n) {
        if (n.fn.fancybox) return void("console" in t && console.log("fancyBox already initialized"));
        var a = {
                loop: !1,
                margin: [44, 0],
                gutter: 50,
                keyboard: !0,
                arrows: !0,
                infobar: !0,
                toolbar: !0,
                buttons: ["slideShow", "fullScreen", "thumbs", "share", "close"],
                idleTime: 3,
                smallBtn: "auto",
                protect: !1,
                modal: !1,
                image: {
                    preload: "auto"
                },
                ajax: {
                    settings: {
                        data: {
                            fancybox: !0
                        }
                    }
                },
                iframe: {
                    tpl: '<iframe id="fancybox-frame{rnd}" name="fancybox-frame{rnd}" class="fancybox-iframe" frameborder="0" vspace="0" hspace="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen allowtransparency="true" src=""></iframe>',
                    preload: !0,
                    css: {},
                    attr: {
                        scrolling: "auto"
                    }
                },
                defaultType: "image",
                animationEffect: "zoom",
                animationDuration: 500,
                zoomOpacity: "auto",
                transitionEffect: "fade",
                transitionDuration: 366,
                slideClass: "",
                baseClass: "",
                baseTpl: '<div class="fancybox-container" role="dialog" tabindex="-1"><div class="fancybox-bg"></div><div class="fancybox-inner"><div class="fancybox-infobar"><span data-fancybox-index></span>&nbsp;/&nbsp;<span data-fancybox-count></span></div><div class="fancybox-toolbar">{{buttons}}</div><div class="fancybox-navigation">{{arrows}}</div><div class="fancybox-stage"></div><div class="fancybox-caption-wrap"><div class="fancybox-caption"></div></div></div></div>',
                spinnerTpl: '<div class="fancybox-loading"></div>',
                errorTpl: '<div class="fancybox-error"><p>{{ERROR}}<p></div>',
                btnTpl: {
                    download: '<a download data-fancybox-download class="fancybox-button fancybox-button--download" title="{{DOWNLOAD}}"><svg viewBox="0 0 40 40"><path d="M20,23 L20,8 L20,23 L13,16 L20,23 L27,16 L20,23 M26,28 L13,28 L27,28 L14,28" /></svg></a>',
                    zoom: '<button data-fancybox-zoom class="fancybox-button fancybox-button--zoom" title="{{ZOOM}}"><svg viewBox="0 0 40 40"><path d="M 18,17 m-8,0 a 8,8 0 1,0 16,0 a 8,8 0 1,0 -16,0 M25,23 L31,29 L25,23" /></svg></button>',
                    close: '<button data-fancybox-close class="fancybox-button fancybox-button--close" title="{{CLOSE}}"><svg viewBox="0 0 40 40"><path d="M10,10 L30,30 M30,10 L10,30" /></svg></button>',
                    smallBtn: '<button data-fancybox-close class="fancybox-close-small" title="{{CLOSE}}"></button>',
                    arrowLeft: '<button data-fancybox-prev class="fancybox-button fancybox-button--arrow_left" title="{{PREV}}"><svg viewBox="0 0 40 40"><path d="M10,20 L30,20 L10,20 L18,28 L10,20 L18,12 L10,20"></path></svg></button>',
                    arrowRight: '<button data-fancybox-next class="fancybox-button fancybox-button--arrow_right" title="{{NEXT}}"><svg viewBox="0 0 40 40"><path d="M30,20 L10,20 L30,20 L22,28 L30,20 L22,12 L30,20"></path></svg></button>'
                },
                parentEl: "body",
                autoFocus: !1,
                backFocus: !0,
                trapFocus: !0,
                fullScreen: {
                    autoStart: !1
                },
                touch: {
                    vertical: !0,
                    momentum: !0
                },
                hash: null,
                media: {},
                slideShow: {
                    autoStart: !1,
                    speed: 4e3
                },
                thumbs: {
                    autoStart: !1,
                    hideOnClose: !0,
                    parentEl: ".fancybox-container",
                    axis: "y"
                },
                wheel: "auto",
                onInit: n.noop,
                beforeLoad: n.noop,
                afterLoad: n.noop,
                beforeShow: n.noop,
                afterShow: n.noop,
                beforeClose: n.noop,
                afterClose: n.noop,
                onActivate: n.noop,
                onDeactivate: n.noop,
                clickContent: function(t, e) {
                    return "image" === t.type && "zoom"
                },
                clickSlide: "close",
                clickOutside: "close",
                dblclickContent: !1,
                dblclickSlide: !1,
                dblclickOutside: !1,
                mobile: {
                    idleTime: !1,
                    margin: 0,
                    clickContent: function(t, e) {
                        return "image" === t.type && "toggleControls"
                    },
                    clickSlide: function(t, e) {
                        return "image" === t.type ? "toggleControls" : "close"
                    },
                    dblclickContent: function(t, e) {
                        return "image" === t.type && "zoom"
                    },
                    dblclickSlide: function(t, e) {
                        return "image" === t.type && "zoom"
                    }
                },
                lang: "en",
                i18n: {
                    en: {
                        CLOSE: "Close",
                        NEXT: "Next",
                        PREV: "Previous",
                        ERROR: "The requested content cannot be loaded. <br/> Please try again later.",
                        PLAY_START: "Start slideshow",
                        PLAY_STOP: "Pause slideshow",
                        FULL_SCREEN: "Full screen",
                        THUMBS: "Thumbnails",
                        DOWNLOAD: "Download",
                        SHARE: "Share",
                        ZOOM: "Zoom"
                    },
                    de: {
                        CLOSE: "Schliessen",
                        NEXT: "Weiter",
                        PREV: "Zurck",
                        ERROR: "Die angeforderten Daten konnten nicht geladen werden. <br/> Bitte versuchen Sie es spter nochmal.",
                        PLAY_START: "Diaschau starten",
                        PLAY_STOP: "Diaschau beenden",
                        FULL_SCREEN: "Vollbild",
                        THUMBS: "Vorschaubilder",
                        DOWNLOAD: "Herunterladen",
                        SHARE: "Teilen",
                        ZOOM: "Mastab"
                    }
                }
            },
            s = n(t),
            r = n(e),
            c = 0,
            l = function(t) {
                return t && t.hasOwnProperty && t instanceof n
            },
            u = function() {
                return t.requestAnimationFrame || t.webkitRequestAnimationFrame || t.mozRequestAnimationFrame || t.oRequestAnimationFrame || function(e) {
                    return t.setTimeout(e, 1e3 / 60)
                }
            }(),
            d = function() {
                var t, n = e.createElement("fakeelement"),
                    i = {
                        transition: "transitionend",
                        OTransition: "oTransitionEnd",
                        MozTransition: "transitionend",
                        WebkitTransition: "webkitTransitionEnd"
                    };
                for (t in i)
                    if (n.style[t] !== o) return i[t];
                return "transitionend"
            }(),
            f = function(t) {
                return t && t.length && t[0].offsetHeight
            },
            p = function(t, o, i) {
                var a = this;
                a.opts = n.extend(!0, {
                    index: i
                }, n.fancybox.defaults, o || {}), n.fancybox.isMobile && (a.opts = n.extend(!0, {}, a.opts, a.opts.mobile)), o && n.isArray(o.buttons) && (a.opts.buttons = o.buttons), a.id = a.opts.id || ++c, a.group = [], a.currIndex = parseInt(a.opts.index, 10) || 0, a.prevIndex = null, a.prevPos = null, a.currPos = 0, a.firstRun = null, a.createGroup(t), a.group.length && (a.$lastFocus = n(e.activeElement).blur(), a.slides = {}, a.init())
            };
        n.extend(p.prototype, {
            init: function() {
                var i, a, s, c = this,
                    l = c.group[c.currIndex],
                    u = l.opts,
                    d = n.fancybox.scrollbarWidth;
                c.scrollTop = r.scrollTop(), c.scrollLeft = r.scrollLeft(), n.fancybox.getInstance() || (n("body").addClass("fancybox-active"), /iPad|iPhone|iPod/.test(navigator.userAgent) && !t.MSStream ? "image" !== l.type && n("body").css("top", n("body").scrollTop() * -1).addClass("fancybox-iosfix") : !n.fancybox.isMobile && e.body.scrollHeight > t.innerHeight && (d === o && (i = n('<div style="width:50px;height:50px;overflow:scroll;" />').appendTo("body"), d = n.fancybox.scrollbarWidth = i[0].offsetWidth - i[0].clientWidth, i.remove()), n("head").append('<style id="fancybox-style-noscroll" type="text/css">.compensate-for-scrollbar { margin-right: ' + d + "px; }</style>"), n("body,html").addClass("compensate-for-scrollbar"))), s = "", n.each(u.buttons, function(t, e) {
                    s += u.btnTpl[e] || ""
                }), a = n(c.translate(c, u.baseTpl.replace("{{buttons}}", s).replace("{{arrows}}", u.btnTpl.arrowLeft + u.btnTpl.arrowRight))).attr("id", "fancybox-container-" + c.id).addClass("fancybox-is-hidden").addClass(u.baseClass).data("FancyBox", c).appendTo(u.parentEl), c.$refs = {
                    container: a
                }, ["bg", "inner", "infobar", "toolbar", "stage", "caption", "navigation"].forEach(function(t) {
                    c.$refs[t] = a.find(".fancybox-" + t)
                }), c.trigger("onInit"), c.activate(), c.jumpTo(c.currIndex)
            },
            translate: function(t, e) {
                var n = t.opts.i18n[t.opts.lang];
                return e.replace(/\{\{(\w+)\}\}/g, function(t, e) {
                    var i = n[e];
                    return i === o ? t : i
                })
            },
            createGroup: function(t) {
                var e = this,
                    i = n.makeArray(t);
                n.each(i, function(t, i) {
                    var a, s, r, c, l, u = {},
                        d = {};
                    n.isPlainObject(i) ? (u = i, d = i.opts || i) : "object" === n.type(i) && n(i).length ? (a = n(i), d = a.data(), d = n.extend({}, d, d.options || {}), d.$orig = a, u.src = d.src || a.attr("href"), u.type || u.src || (u.type = "inline", u.src = i)) : u = {
                        type: "html",
                        src: i + ""
                    }, u.opts = n.extend(!0, {}, e.opts, d), n.isArray(d.buttons) && (u.opts.buttons = d.buttons), s = u.type || u.opts.type, c = u.src || "", !s && c && (c.match(/(^data:image\/[a-z0-9+\/=]*,)|(\.(jp(e|g|eg)|gif|png|bmp|webp|svg|ico)((\?|#).*)?$)/i) ? s = "image" : c.match(/\.(pdf)((\?|#).*)?$/i) ? s = "pdf" : (r = c.match(/\.(mp4|mov|ogv)((\?|#).*)?$/i)) ? (s = "video", u.opts.videoFormat || (u.opts.videoFormat = "video/" + ("ogv" === r[1] ? "ogg" : r[1]))) : "#" === c.charAt(0) && (s = "inline")), s ? u.type = s : e.trigger("objectNeedsType", u), u.index = e.group.length, u.opts.$orig && !u.opts.$orig.length && delete u.opts.$orig, !u.opts.$thumb && u.opts.$orig && (u.opts.$thumb = u.opts.$orig.find("img:first")), u.opts.$thumb && !u.opts.$thumb.length && delete u.opts.$thumb, "function" === n.type(u.opts.caption) && (u.opts.caption = u.opts.caption.apply(i, [e, u])), "function" === n.type(e.opts.caption) && (u.opts.caption = e.opts.caption.apply(i, [e, u])), u.opts.caption instanceof n || (u.opts.caption = u.opts.caption === o ? "" : u.opts.caption + ""), "ajax" === s && (l = c.split(/\s+/, 2), l.length > 1 && (u.src = l.shift(), u.opts.filter = l.shift())), "auto" == u.opts.smallBtn && (n.inArray(s, ["html", "inline", "ajax"]) > -1 ? (u.opts.toolbar = !1, u.opts.smallBtn = !0) : u.opts.smallBtn = !1), "pdf" === s && (u.type = "iframe", u.opts.iframe.preload = !1), u.opts.modal && (u.opts = n.extend(!0, u.opts, {
                        infobar: 0,
                        toolbar: 0,
                        smallBtn: 0,
                        keyboard: 0,
                        slideShow: 0,
                        fullScreen: 0,
                        thumbs: 0,
                        touch: 0,
                        clickContent: !1,
                        clickSlide: !1,
                        clickOutside: !1,
                        dblclickContent: !1,
                        dblclickSlide: !1,
                        dblclickOutside: !1
                    })), e.group.push(u)
                })
            },
            addEvents: function() {
                var o = this;
                o.removeEvents(), o.$refs.container.on("click.fb-close", "[data-fancybox-close]", function(t) {
                    t.stopPropagation(), t.preventDefault(), o.close(t)
                }).on("click.fb-prev touchend.fb-prev", "[data-fancybox-prev]", function(t) {
                    t.stopPropagation(), t.preventDefault(), o.previous()
                }).on("click.fb-next touchend.fb-next", "[data-fancybox-next]", function(t) {
                    t.stopPropagation(), t.preventDefault(), o.next()
                }).on("click.fb", "[data-fancybox-zoom]", function(t) {
                    o[o.isScaledDown() ? "scaleToActual" : "scaleToFit"]()
                }), s.on("orientationchange.fb resize.fb", function(t) {
                    t && t.originalEvent && "resize" === t.originalEvent.type ? u(function() {
                        o.update()
                    }) : (o.$refs.stage.hide(), setTimeout(function() {
                        o.$refs.stage.show(), o.update()
                    }, 600))
                }), r.on("focusin.fb", function(t) {
                    var i = n.fancybox ? n.fancybox.getInstance() : null;
                    i.isClosing || !i.current || !i.current.opts.trapFocus || n(t.target).hasClass("fancybox-container") || n(t.target).is(e) || i && "fixed" !== n(t.target).css("position") && !i.$refs.container.has(t.target).length && (t.stopPropagation(), i.focus(), s.scrollTop(o.scrollTop).scrollLeft(o.scrollLeft))
                }), r.on("keydown.fb", function(t) {
                    var e = o.current,
                        i = t.keyCode || t.which;
                    if (e && e.opts.keyboard && !n(t.target).is("input") && !n(t.target).is("textarea")) return 8 === i || 27 === i ? (t.preventDefault(), void o.close(t)) : 37 === i || 38 === i ? (t.preventDefault(), void o.previous()) : 39 === i || 40 === i ? (t.preventDefault(), void o.next()) : void o.trigger("afterKeydown", t, i)
                }), o.group[o.currIndex].opts.idleTime && (o.idleSecondsCounter = 0, r.on("mousemove.fb-idle mouseleave.fb-idle mousedown.fb-idle touchstart.fb-idle touchmove.fb-idle scroll.fb-idle keydown.fb-idle", function(t) {
                    o.idleSecondsCounter = 0, o.isIdle && o.showControls(), o.isIdle = !1
                }), o.idleInterval = t.setInterval(function() {
                    o.idleSecondsCounter++, o.idleSecondsCounter >= o.group[o.currIndex].opts.idleTime && !o.isDragging && (o.isIdle = !0, o.idleSecondsCounter = 0, o.hideControls())
                }, 1e3))
            },
            removeEvents: function() {
                var e = this;
                s.off("orientationchange.fb resize.fb"), r.off("focusin.fb keydown.fb .fb-idle"), this.$refs.container.off(".fb-close .fb-prev .fb-next"), e.idleInterval && (t.clearInterval(e.idleInterval), e.idleInterval = null)
            },
            previous: function(t) {
                return this.jumpTo(this.currPos - 1, t)
            },
            next: function(t) {
                return this.jumpTo(this.currPos + 1, t)
            },
            jumpTo: function(t, e, i) {
                var a, s, r, c, l, u, d, p = this,
                    h = p.group.length;
                if (!(p.isDragging || p.isClosing || p.isAnimating && p.firstRun)) {
                    if (t = parseInt(t, 10), s = p.current ? p.current.opts.loop : p.opts.loop, !s && (t < 0 || t >= h)) return !1;
                    if (a = p.firstRun = null === p.firstRun, !(h < 2 && !a && p.isDragging)) {
                        if (c = p.current, p.prevIndex = p.currIndex, p.prevPos = p.currPos, r = p.createSlide(t), h > 1 && ((s || r.index > 0) && p.createSlide(t - 1), (s || r.index < h - 1) && p.createSlide(t + 1)), p.current = r, p.currIndex = r.index, p.currPos = r.pos, p.trigger("beforeShow", a), p.updateControls(), u = n.fancybox.getTranslate(r.$slide), r.isMoved = (0 !== u.left || 0 !== u.top) && !r.$slide.hasClass("fancybox-animated"), r.forcedDuration = o, n.isNumeric(e) ? r.forcedDuration = e : e = r.opts[a ? "animationDuration" : "transitionDuration"], e = parseInt(e, 10), a) return r.opts.animationEffect && e && p.$refs.container.css("transition-duration", e + "ms"), p.$refs.container.removeClass("fancybox-is-hidden"), f(p.$refs.container), p.$refs.container.addClass("fancybox-is-open"), r.$slide.addClass("fancybox-slide--current"), p.loadSlide(r), void p.preload("image");
                        n.each(p.slides, function(t, e) {
                            n.fancybox.stop(e.$slide)
                        }), r.$slide.removeClass("fancybox-slide--next fancybox-slide--previous").addClass("fancybox-slide--current"), r.isMoved ? (l = Math.round(r.$slide.width()), n.each(p.slides, function(t, o) {
                            var i = o.pos - r.pos;
                            n.fancybox.animate(o.$slide, {
                                top: 0,
                                left: i * l + i * o.opts.gutter
                            }, e, function() {
                                o.$slide.removeAttr("style").removeClass("fancybox-slide--next fancybox-slide--previous"), o.pos === p.currPos && (r.isMoved = !1, p.complete())
                            })
                        })) : p.$refs.stage.children().removeAttr("style"), r.isLoaded ? p.revealContent(r) : p.loadSlide(r), p.preload("image"), c.pos !== r.pos && (d = "fancybox-slide--" + (c.pos > r.pos ? "next" : "previous"), c.$slide.removeClass("fancybox-slide--complete fancybox-slide--current fancybox-slide--next fancybox-slide--previous"), c.isComplete = !1, e && (r.isMoved || r.opts.transitionEffect) && (r.isMoved ? c.$slide.addClass(d) : (d = "fancybox-animated " + d + " fancybox-fx-" + r.opts.transitionEffect, n.fancybox.animate(c.$slide, d, e, function() {
                            c.$slide.removeClass(d).removeAttr("style")
                        }))))
                    }
                }
            },
            createSlide: function(t) {
                var e, o, i = this;
                return o = t % i.group.length, o = o < 0 ? i.group.length + o : o, !i.slides[t] && i.group[o] && (e = n('<div class="fancybox-slide"></div>').appendTo(i.$refs.stage), i.slides[t] = n.extend(!0, {}, i.group[o], {
                    pos: t,
                    $slide: e,
                    isLoaded: !1
                }), i.updateSlide(i.slides[t])), i.slides[t]
            },
            scaleToActual: function(t, e, i) {
                var a, s, r, c, l, u = this,
                    d = u.current,
                    f = d.$content,
                    p = parseInt(d.$slide.width(), 10),
                    h = parseInt(d.$slide.height(), 10),
                    g = d.width,
                    b = d.height;
                "image" != d.type || d.hasError || !f || u.isAnimating || (n.fancybox.stop(f), u.isAnimating = !0, t = t === o ? .5 * p : t, e = e === o ? .5 * h : e, a = n.fancybox.getTranslate(f), c = g / a.width, l = b / a.height, s = .5 * p - .5 * g, r = .5 * h - .5 * b, g > p && (s = a.left * c - (t * c - t), s > 0 && (s = 0), s < p - g && (s = p - g)), b > h && (r = a.top * l - (e * l - e), r > 0 && (r = 0), r < h - b && (r = h - b)), u.updateCursor(g, b), n.fancybox.animate(f, {
                    top: r,
                    left: s,
                    scaleX: c,
                    scaleY: l
                }, i || 430, function() {
                    u.isAnimating = !1
                }), u.SlideShow && u.SlideShow.isActive && u.SlideShow.stop())
            },
            scaleToFit: function(t) {
                var e, o = this,
                    i = o.current,
                    a = i.$content;
                "image" != i.type || i.hasError || !a || o.isAnimating || (n.fancybox.stop(a), o.isAnimating = !0, e = o.getFitPos(i), o.updateCursor(e.width, e.height), n.fancybox.animate(a, {
                    top: e.top,
                    left: e.left,
                    scaleX: e.width / a.width(),
                    scaleY: e.height / a.height()
                }, t || 430, function() {
                    o.isAnimating = !1
                }))
            },
            getFitPos: function(t) {
                var e, o, i, a, s, r = this,
                    c = t.$content,
                    l = t.width,
                    u = t.height,
                    d = t.opts.margin;
                return !(!c || !c.length || !l && !u) && ("number" === n.type(d) && (d = [d, d]), 2 == d.length && (d = [d[0], d[1], d[0], d[1]]), e = parseInt(r.$refs.stage.width(), 10) - (d[1] + d[3]), o = parseInt(r.$refs.stage.height(), 10) - (d[0] + d[2]), i = Math.min(1, e / l, o / u), a = Math.floor(i * l), s = Math.floor(i * u), {
                    top: Math.floor(.5 * (o - s)) + d[0],
                    left: Math.floor(.5 * (e - a)) + d[3],
                    width: a,
                    height: s
                })
            },
            update: function() {
                var t = this;
                n.each(t.slides, function(e, n) {
                    t.updateSlide(n)
                })
            },
            updateSlide: function(t, e) {
                var o = this,
                    i = t && t.$content;
                i && (t.width || t.height) && (o.isAnimating = !1, n.fancybox.stop(i), n.fancybox.setTranslate(i, o.getFitPos(t)), t.pos === o.currPos && o.updateCursor()), t.$slide.trigger("refresh"), o.trigger("onUpdate", t)
            },
            centerSlide: function(t, e) {
                var i, a, s = this;
                s.current && (i = Math.round(t.$slide.width()), a = t.pos - s.current.pos, n.fancybox.animate(t.$slide, {
                    top: 0,
                    left: a * i + a * t.opts.gutter,
                    opacity: 1
                }, e === o ? 0 : e, null, !1))
            },
            updateCursor: function(t, e) {
                var n, i = this,
                    a = i.$refs.container.removeClass("fancybox-is-zoomable fancybox-can-zoomIn fancybox-can-drag fancybox-can-zoomOut");
                i.current && !i.isClosing && (i.isZoomable() ? (a.addClass("fancybox-is-zoomable"), n = t !== o && e !== o ? t < i.current.width && e < i.current.height : i.isScaledDown(), n ? a.addClass("fancybox-can-zoomIn") : i.current.opts.touch ? a.addClass("fancybox-can-drag") : a.addClass("fancybox-can-zoomOut")) : i.current.opts.touch && a.addClass("fancybox-can-drag"))
            },
            isZoomable: function() {
                var t, e = this,
                    o = e.current;
                if (o && !e.isClosing) return !!("image" === o.type && o.isLoaded && !o.hasError && ("zoom" === o.opts.clickContent || n.isFunction(o.opts.clickContent) && "zoom" === o.opts.clickContent(o)) && (t = e.getFitPos(o), o.width > t.width || o.height > t.height))
            },
            isScaledDown: function() {
                var t = this,
                    e = t.current,
                    o = e.$content,
                    i = !1;
                return o && (i = n.fancybox.getTranslate(o), i = i.width < e.width || i.height < e.height), i
            },
            canPan: function() {
                var t = this,
                    e = t.current,
                    n = e.$content,
                    o = !1;
                return n && (o = t.getFitPos(e), o = Math.abs(n.width() - o.width) > 1 || Math.abs(n.height() - o.height) > 1), o
            },
            loadSlide: function(t) {
                var e, o, i, a = this;
                if (!t.isLoading && !t.isLoaded) {
                    switch (t.isLoading = !0, a.trigger("beforeLoad", t), e = t.type, o = t.$slide, o.off("refresh").trigger("onReset").addClass("fancybox-slide--" + (e || "unknown")).addClass(t.opts.slideClass), e) {
                        case "image":
                            a.setImage(t);
                            break;
                        case "iframe":
                            a.setIframe(t);
                            break;
                        case "html":
                            a.setContent(t, t.src || t.content);
                            break;
                        case "inline":
                            n(t.src).length ? a.setContent(t, n(t.src)) : a.setError(t);
                            break;
                        case "ajax":
                            a.showLoading(t), i = n.ajax(n.extend({}, t.opts.ajax.settings, {
                                url: t.src,
                                success: function(e, n) {
                                    "success" === n && a.setContent(t, e)
                                },
                                error: function(e, n) {
                                    e && "abort" !== n && a.setError(t)
                                }
                            })), o.one("onReset", function() {
                                i.abort()
                            });
                            break;
                        case "video":
                            a.setContent(t, '<video controls><source src="' + t.src + '" type="' + t.opts.videoFormat + "\">Your browser doesn't support HTML5 video</video>");
                            break;
                        default:
                            a.setError(t)
                    }
                    return !0
                }
            },
            setImage: function(e) {
                var o, i, a, s, r = this,
                    c = e.opts.srcset || e.opts.image.srcset;
                if (c) {
                    a = t.devicePixelRatio || 1, s = t.innerWidth * a, i = c.split(",").map(function(t) {
                        var e = {};
                        return t.trim().split(/\s+/).forEach(function(t, n) {
                            var o = parseInt(t.substring(0, t.length - 1), 10);
                            return 0 === n ? e.url = t : void(o && (e.value = o, e.postfix = t[t.length - 1]))
                        }), e
                    }), i.sort(function(t, e) {
                        return t.value - e.value
                    });
                    for (var l = 0; l < i.length; l++) {
                        var u = i[l];
                        if ("w" === u.postfix && u.value >= s || "x" === u.postfix && u.value >= a) {
                            o = u;
                            break
                        }
                    }!o && i.length && (o = i[i.length - 1]), o && (e.src = o.url, e.width && e.height && "w" == o.postfix && (e.height = e.width / e.height * o.value, e.width = o.value))
                }
                e.$content = n('<div class="fancybox-image-wrap"></div>').addClass("fancybox-is-hidden").appendTo(e.$slide), e.opts.preload !== !1 && e.opts.width && e.opts.height && (e.opts.thumb || e.opts.$thumb) ? (e.width = e.opts.width, e.height = e.opts.height, e.$ghost = n("<img />").one("error", function() {
                    n(this).remove(), e.$ghost = null, r.setBigImage(e)
                }).one("load", function() {
                    r.afterLoad(e), r.setBigImage(e)
                }).addClass("fancybox-image").appendTo(e.$content).attr("src", e.opts.thumb || e.opts.$thumb.attr("src"))) : r.setBigImage(e)
            },
            setBigImage: function(t) {
                var e = this,
                    o = n("<img />");
                t.$image = o.one("error", function() {
                    e.setError(t)
                }).one("load", function() {
                    clearTimeout(t.timouts), t.timouts = null, e.isClosing || (t.width = t.opts.width || this.naturalWidth, t.height = t.opts.height || this.naturalHeight, t.opts.image.srcset && o.attr("sizes", "100vw").attr("srcset", t.opts.image.srcset), e.hideLoading(t), t.$ghost ? t.timouts = setTimeout(function() {
                        t.timouts = null, t.$ghost.hide()
                    }, Math.min(300, Math.max(1e3, t.height / 1600))) : e.afterLoad(t))
                }).addClass("fancybox-image").attr("src", t.src).appendTo(t.$content), (o[0].complete || "complete" == o[0].readyState) && o[0].naturalWidth && o[0].naturalHeight ? o.trigger("load") : o[0].error ? o.trigger("error") : t.timouts = setTimeout(function() {
                    o[0].complete || t.hasError || e.showLoading(t)
                }, 100)
            },
            setIframe: function(t) {
                var e, i = this,
                    a = t.opts.iframe,
                    s = t.$slide;
                t.$content = n('<div class="fancybox-content' + (a.preload ? " fancybox-is-hidden" : "") + '"></div>').css(a.css).appendTo(s), e = n(a.tpl.replace(/\{rnd\}/g, (new Date).getTime())).attr(a.attr).appendTo(t.$content), a.preload ? (i.showLoading(t), e.on("load.fb error.fb", function(e) {
                    this.isReady = 1, t.$slide.trigger("refresh"), i.afterLoad(t)
                }), s.on("refresh.fb", function() {
                    var n, i, s, r = t.$content,
                        c = a.css.width,
                        l = a.css.height;
                    if (1 === e[0].isReady) {
                        try {
                            i = e.contents(), s = i.find("body")
                        } catch (t) {}
                        s && s.length && (c === o && (n = e[0].contentWindow.document.documentElement.scrollWidth, c = Math.ceil(s.outerWidth(!0) + (r.width() - n)), c += r.outerWidth() - r.innerWidth()), l === o && (l = Math.ceil(s.outerHeight(!0)), l += r.outerHeight() - r.innerHeight()), c && r.width(c), l && r.height(l)), r.removeClass("fancybox-is-hidden")
                    }
                })) : this.afterLoad(t), e.attr("src", t.src), t.opts.smallBtn === !0 && t.$content.prepend(i.translate(t, t.opts.btnTpl.smallBtn)), s.one("onReset", function() {
                    try {
                        n(this).find("iframe").hide().attr("src", "//about:blank")
                    } catch (t) {}
                    n(this).empty(), t.isLoaded = !1
                })
            },
            setContent: function(t, e) {
                var o = this;
                o.isClosing || (o.hideLoading(t), t.$slide.empty(), l(e) && e.parent().length ? (e.parent(".fancybox-slide--inline").trigger("onReset"), t.$placeholder = n("<div></div>").hide().insertAfter(e), e.css("display", "inline-block")) : t.hasError || ("string" === n.type(e) && (e = n("<div>").append(n.trim(e)).contents(), 3 === e[0].nodeType && (e = n("<div>").html(e))), t.opts.filter && (e = n("<div>").html(e).find(t.opts.filter))), t.$slide.one("onReset", function() {
                    n(this).find("video,audio").trigger("pause"), t.$placeholder && (t.$placeholder.after(e.hide()).remove(), t.$placeholder = null), t.$smallBtn && (t.$smallBtn.remove(), t.$smallBtn = null), t.hasError || (n(this).empty(), t.isLoaded = !1)
                }), t.$content = n(e).appendTo(t.$slide), this.afterLoad(t))
            },
            setError: function(t) {
                t.hasError = !0, t.$slide.removeClass("fancybox-slide--" + t.type), this.setContent(t, this.translate(t, t.opts.errorTpl))
            },
            showLoading: function(t) {
                var e = this;
                t = t || e.current, t && !t.$spinner && (t.$spinner = n(e.opts.spinnerTpl).appendTo(t.$slide))
            },
            hideLoading: function(t) {
                var e = this;
                t = t || e.current, t && t.$spinner && (t.$spinner.remove(), delete t.$spinner)
            },
            afterLoad: function(t) {
                var e = this;
                e.isClosing || (t.isLoading = !1, t.isLoaded = !0, e.trigger("afterLoad", t), e.hideLoading(t), t.opts.smallBtn && !t.$smallBtn && (t.$smallBtn = n(e.translate(t, t.opts.btnTpl.smallBtn)).appendTo(t.$content.filter("div,form").first())), t.opts.protect && t.$content && !t.hasError && (t.$content.on("contextmenu.fb", function(t) {
                    return 2 == t.button && t.preventDefault(), !0
                }), "image" === t.type && n('<div class="fancybox-spaceball"></div>').appendTo(t.$content)), e.revealContent(t))
            },
            revealContent: function(t) {
                var e, i, a, s, r, c = this,
                    l = t.$slide,
                    u = !1;
                return e = t.opts[c.firstRun ? "animationEffect" : "transitionEffect"], a = t.opts[c.firstRun ? "animationDuration" : "transitionDuration"], a = parseInt(t.forcedDuration === o ? a : t.forcedDuration, 10), !t.isMoved && t.pos === c.currPos && a || (e = !1), "zoom" !== e || t.pos === c.currPos && a && "image" === t.type && !t.hasError && (u = c.getThumbPos(t)) || (e = "fade"), "zoom" === e ? (r = c.getFitPos(t), r.scaleX = r.width / u.width, r.scaleY = r.height / u.height, delete r.width, delete r.height, s = t.opts.zoomOpacity, "auto" == s && (s = Math.abs(t.width / t.height - u.width / u.height) > .1), s && (u.opacity = .1, r.opacity = 1), n.fancybox.setTranslate(t.$content.removeClass("fancybox-is-hidden"), u), f(t.$content), void n.fancybox.animate(t.$content, r, a, function() {
                    c.complete()
                })) : (c.updateSlide(t), e ? (n.fancybox.stop(l), i = "fancybox-animated fancybox-slide--" + (t.pos >= c.prevPos ? "next" : "previous") + " fancybox-fx-" + e, l.removeAttr("style").removeClass("fancybox-slide--current fancybox-slide--next fancybox-slide--previous").addClass(i), t.$content.removeClass("fancybox-is-hidden"), f(l), void n.fancybox.animate(l, "fancybox-slide--current", a, function(e) {
                    l.removeClass(i).removeAttr("style"), t.pos === c.currPos && c.complete()
                }, !0)) : (f(l), t.$content.removeClass("fancybox-is-hidden"), void(t.pos === c.currPos && c.complete())))
            },
            getThumbPos: function(o) {
                var i, a = this,
                    s = !1,
                    r = function(e) {
                        for (var o, i = e[0], a = i.getBoundingClientRect(), s = []; null !== i.parentElement;) "hidden" !== n(i.parentElement).css("overflow") && "auto" !== n(i.parentElement).css("overflow") || s.push(i.parentElement.getBoundingClientRect()), i = i.parentElement;
                        return o = s.every(function(t) {
                            var e = Math.min(a.right, t.right) - Math.max(a.left, t.left),
                                n = Math.min(a.bottom, t.bottom) - Math.max(a.top, t.top);
                            return e > 0 && n > 0
                        }), o && a.bottom > 0 && a.right > 0 && a.left < n(t).width() && a.top < n(t).height()
                    },
                    c = o.opts.$thumb,
                    l = c ? c.offset() : 0;
                return l && c[0].ownerDocument === e && r(c) && (i = a.$refs.stage.offset(), s = {
                    top: l.top - i.top + parseFloat(c.css("border-top-width") || 0),
                    left: l.left - i.left + parseFloat(c.css("border-left-width") || 0),
                    width: c.width(),
                    height: c.height(),
                    scaleX: 1,
                    scaleY: 1
                }), s
            },
            complete: function() {
                var t = this,
                    o = t.current,
                    i = {};
                o.isMoved || !o.isLoaded || o.isComplete || (o.isComplete = !0, o.$slide.siblings().trigger("onReset"), t.preload("inline"), f(o.$slide), o.$slide.addClass("fancybox-slide--complete"), n.each(t.slides, function(e, o) {
                    o.pos >= t.currPos - 1 && o.pos <= t.currPos + 1 ? i[o.pos] = o : o && (n.fancybox.stop(o.$slide), o.$slide.off().remove())
                }), t.slides = i, t.updateCursor(), t.trigger("afterShow"), o.$slide.find("video,audio").first().trigger("play"), (n(e.activeElement).is("[disabled]") || o.opts.autoFocus && "image" != o.type && "iframe" !== o.type) && t.focus())
            },
            preload: function(t) {
                var e = this,
                    n = e.slides[e.currPos + 1],
                    o = e.slides[e.currPos - 1];
                n && n.type === t && e.loadSlide(n), o && o.type === t && e.loadSlide(o)
            },
            focus: function() {
                var t, e = this.current;
                this.isClosing || (e && e.isComplete && (t = e.$slide.find("input[autofocus]:enabled:visible:first"), t.length || (t = e.$slide.find("button,:input,[tabindex],a").filter(":enabled:visible:first"))), t = t && t.length ? t : this.$refs.container, t.focus())
            },
            activate: function() {
                var t = this;
                n(".fancybox-container").each(function() {
                    var e = n(this).data("FancyBox");
                    e && e.id !== t.id && !e.isClosing && (e.trigger("onDeactivate"), e.removeEvents(), e.isVisible = !1)
                }), t.isVisible = !0, (t.current || t.isIdle) && (t.update(), t.updateControls()), t.trigger("onActivate"), t.addEvents()
            },
            close: function(t, e) {
                var o, i, a, s, r, c, l = this,
                    p = l.current,
                    h = function() {
                        l.cleanUp(t)
                    };
                return !l.isClosing && (l.isClosing = !0, l.trigger("beforeClose", t) === !1 ? (l.isClosing = !1, u(function() {
                    l.update()
                }), !1) : (l.removeEvents(), p.timouts && clearTimeout(p.timouts), a = p.$content, o = p.opts.animationEffect, i = n.isNumeric(e) ? e : o ? p.opts.animationDuration : 0, p.$slide.off(d).removeClass("fancybox-slide--complete fancybox-slide--next fancybox-slide--previous fancybox-animated"), p.$slide.siblings().trigger("onReset").remove(), i && l.$refs.container.removeClass("fancybox-is-open").addClass("fancybox-is-closing"), l.hideLoading(p), l.hideControls(), l.updateCursor(), "zoom" !== o || t !== !0 && a && i && "image" === p.type && !p.hasError && (c = l.getThumbPos(p)) || (o = "fade"), "zoom" === o ? (n.fancybox.stop(a), r = n.fancybox.getTranslate(a), r.width = r.width * r.scaleX, r.height = r.height * r.scaleY, s = p.opts.zoomOpacity, "auto" == s && (s = Math.abs(p.width / p.height - c.width / c.height) > .1), s && (c.opacity = 0), r.scaleX = r.width / c.width, r.scaleY = r.height / c.height, r.width = c.width, r.height = c.height, n.fancybox.setTranslate(p.$content, r), f(p.$content), n.fancybox.animate(p.$content, c, i, h), !0) : (o && i ? t === !0 ? setTimeout(h, i) : n.fancybox.animate(p.$slide.removeClass("fancybox-slide--current"), "fancybox-animated fancybox-slide--previous fancybox-fx-" + o, i, h) : h(), !0)))
            },
            cleanUp: function(t) {
                var o, i, a = this,
                    r = n("body");
                a.current.$slide.trigger("onReset"), a.$refs.container.empty().remove(), a.trigger("afterClose", t), a.$lastFocus && a.current.opts.backFocus && a.$lastFocus.focus(), a.current = null, o = n.fancybox.getInstance(), o ? o.activate() : (s.scrollTop(a.scrollTop).scrollLeft(a.scrollLeft), r.removeClass("fancybox-active compensate-for-scrollbar"), n('html').removeClass('compensate-for-scrollbar'), r.hasClass("fancybox-iosfix") && (i = parseInt(e.body.style.top, 10), r.removeClass("fancybox-iosfix").css("top", "").scrollTop(i * -1)), n("#fancybox-style-noscroll").remove())
            },
            trigger: function(t, e) {
                var o, i = Array.prototype.slice.call(arguments, 1),
                    a = this,
                    s = e && e.opts ? e : a.current;
                return s ? i.unshift(s) : s = a, i.unshift(a), n.isFunction(s.opts[t]) && (o = s.opts[t].apply(s, i)), o === !1 ? o : void("afterClose" !== t && a.$refs ? a.$refs.container.trigger(t + ".fb", i) : r.trigger(t + ".fb", i))
            },
            updateControls: function(t) {
                var e = this,
                    n = e.current,
                    o = n.index,
                    i = n.opts.caption,
                    a = e.$refs.container,
                    s = e.$refs.caption;
                n.$slide.trigger("refresh"), e.$caption = i && i.length ? s.html(i) : null, e.isHiddenControls || e.isIdle || e.showControls(), a.find("[data-fancybox-count]").html(e.group.length), a.find("[data-fancybox-index]").html(o + 1), a.find("[data-fancybox-prev]").prop("disabled", !n.opts.loop && o <= 0), a.find("[data-fancybox-next]").prop("disabled", !n.opts.loop && o >= e.group.length - 1), "image" === n.type ? a.find("[data-fancybox-download]").attr("href", n.opts.image.src || n.src).show() : a.find("[data-fancybox-download],[data-fancybox-zoom]").hide()
            },
            hideControls: function() {
                this.isHiddenControls = !0, this.$refs.container.removeClass("fancybox-show-infobar fancybox-show-toolbar fancybox-show-caption fancybox-show-nav")
            },
            showControls: function() {
                var t = this,
                    e = t.current ? t.current.opts : t.opts,
                    n = t.$refs.container;
                t.isHiddenControls = !1, t.idleSecondsCounter = 0, n.toggleClass("fancybox-show-toolbar", !(!e.toolbar || !e.buttons)).toggleClass("fancybox-show-infobar", !!(e.infobar && t.group.length > 1)).toggleClass("fancybox-show-nav", !!(e.arrows && t.group.length > 1)).toggleClass("fancybox-is-modal", !!e.modal), t.$caption ? n.addClass("fancybox-show-caption ") : n.removeClass("fancybox-show-caption")
            },
            toggleControls: function() {
                this.isHiddenControls ? this.showControls() : this.hideControls()
            }
        }), n.fancybox = {
            version: "3.2.10",
            defaults: a,
            getInstance: function(t) {
                var e = n('.fancybox-container:not(".fancybox-is-closing"):last').data("FancyBox"),
                    o = Array.prototype.slice.call(arguments, 1);
                return e instanceof p && ("string" === n.type(t) ? e[t].apply(e, o) : "function" === n.type(t) && t.apply(e, o), e)
            },
            open: function(t, e, n) {
                return new p(t, e, n)
            },
            close: function(t) {
                var e = this.getInstance();
                e && (e.close(), t === !0 && this.close())
            },
            destroy: function() {
                this.close(!0), r.off("click.fb-start")
            },
            isMobile: e.createTouch !== o && /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),
            use3d: function() {
                var n = e.createElement("div");
                return t.getComputedStyle && t.getComputedStyle(n).getPropertyValue("transform") && !(e.documentMode && e.documentMode < 11)
            }(),
            getTranslate: function(t) {
                var e;
                if (!t || !t.length) return !1;
                if (e = t.eq(0).css("transform"), e && e.indexOf("matrix") !== -1 ? (e = e.split("(")[1], e = e.split(")")[0], e = e.split(",")) : e = [], e.length) e = e.length > 10 ? [e[13], e[12], e[0], e[5]] : [e[5], e[4], e[0], e[3]], e = e.map(parseFloat);
                else {
                    e = [0, 0, 1, 1];
                    var n = /\.*translate\((.*)px,(.*)px\)/i,
                        o = n.exec(t.eq(0).attr("style"));
                    o && (e[0] = parseFloat(o[2]), e[1] = parseFloat(o[1]))
                }
                return {
                    top: e[0],
                    left: e[1],
                    scaleX: e[2],
                    scaleY: e[3],
                    opacity: parseFloat(t.css("opacity")),
                    width: t.width(),
                    height: t.height()
                }
            },
            setTranslate: function(t, e) {
                var n = "",
                    i = {};
                if (t && e) return e.left === o && e.top === o || (n = (e.left === o ? t.position().left : e.left) + "px, " + (e.top === o ? t.position().top : e.top) + "px", n = this.use3d ? "translate3d(" + n + ", 0px)" : "translate(" + n + ")"), e.scaleX !== o && e.scaleY !== o && (n = (n.length ? n + " " : "") + "scale(" + e.scaleX + ", " + e.scaleY + ")"), n.length && (i.transform = n), e.opacity !== o && (i.opacity = e.opacity), e.width !== o && (i.width = e.width), e.height !== o && (i.height = e.height), t.css(i)
            },
            animate: function(t, e, i, a, s) {
                n.isFunction(i) && (a = i, i = null), n.isPlainObject(e) || t.removeAttr("style"), t.on(d, function(i) {
                    (!i || !i.originalEvent || t.is(i.originalEvent.target) && "z-index" != i.originalEvent.propertyName) && (n.fancybox.stop(t), n.isPlainObject(e) ? (e.scaleX !== o && e.scaleY !== o && (t.css("transition-duration", ""), e.width = Math.round(t.width() * e.scaleX), e.height = Math.round(t.height() * e.scaleY), e.scaleX = 1, e.scaleY = 1, n.fancybox.setTranslate(t, e)), s === !1 && t.removeAttr("style")) : s !== !0 && t.removeClass(e), n.isFunction(a) && a(i))
                }), n.isNumeric(i) && t.css("transition-duration", i + "ms"), n.isPlainObject(e) ? n.fancybox.setTranslate(t, e) : t.addClass(e), e.scaleX && t.hasClass("fancybox-image-wrap") && t.parent().addClass("fancybox-is-scaling"), t.data("timer", setTimeout(function() {
                    t.trigger("transitionend")
                }, i + 16))
            },
            stop: function(t) {
                clearTimeout(t.data("timer")), t.off("transitionend").css("transition-duration", ""), t.hasClass("fancybox-image-wrap") && t.parent().removeClass("fancybox-is-scaling")
            }
        }, n.fn.fancybox = function(t) {
            var e;
            return t = t || {}, e = t.selector || !1, e ? n("body").off("click.fb-start", e).on("click.fb-start", e, {
                options: t
            }, i) : this.off("click.fb-start").on("click.fb-start", {
                items: this,
                options: t
            }, i), this
        }, r.on("click.fb-start", "[data-fancybox]", i)
    }
}(window, document, window.jQuery || jQuery),
function(t) {
    "use strict";
    var e = function(e, n, o) {
            if (e) return o = o || "", "object" === t.type(o) && (o = t.param(o, !0)), t.each(n, function(t, n) {
                e = e.replace("$" + t, n || "")
            }), o.length && (e += (e.indexOf("?") > 0 ? "&" : "?") + o), e
        },
        n = {
            youtube: {
                matcher: /(youtube\.com|youtu\.be|youtube\-nocookie\.com)\/(watch\?(.*&)?v=|v\/|u\/|embed\/?)?(videoseries\?list=(.*)|[\w-]{11}|\?listType=(.*)&list=(.*))(.*)/i,
                params: {
                    autoplay: 1,
                    autohide: 1,
                    fs: 1,
                    rel: 0,
                    hd: 1,
                    wmode: "transparent",
                    enablejsapi: 1,
                    html5: 1
                },
                paramPlace: 8,
                type: "iframe",
                url: "//www.youtube.com/embed/$4",
                thumb: "//img.youtube.com/vi/$4/hqdefault.jpg"
            },
            vimeo: {
                matcher: /^.+vimeo.com\/(.*\/)?([\d]+)(.*)?/,
                params: {
                    autoplay: 1,
                    hd: 1,
                    show_title: 1,
                    show_byline: 1,
                    show_portrait: 0,
                    fullscreen: 1,
                    api: 1
                },
                paramPlace: 3,
                type: "iframe",
                url: "//player.vimeo.com/video/$2"
            },
            metacafe: {
                matcher: /metacafe.com\/watch\/(\d+)\/(.*)?/,
                type: "iframe",
                url: "//www.metacafe.com/embed/$1/?ap=1"
            },
            dailymotion: {
                matcher: /dailymotion.com\/video\/(.*)\/?(.*)/,
                params: {
                    additionalInfos: 0,
                    autoStart: 1
                },
                type: "iframe",
                url: "//www.dailymotion.com/embed/video/$1"
            },
            vine: {
                matcher: /vine.co\/v\/([a-zA-Z0-9\?\=\-]+)/,
                type: "iframe",
                url: "//vine.co/v/$1/embed/simple"
            },
            instagram: {
                matcher: /(instagr\.am|instagram\.com)\/p\/([a-zA-Z0-9_\-]+)\/?/i,
                type: "image",
                url: "//$1/p/$2/media/?size=l"
            },
            gmap_place: {
                matcher: /(maps\.)?google\.([a-z]{2,3}(\.[a-z]{2})?)\/(((maps\/(place\/(.*)\/)?\@(.*),(\d+.?\d+?)z))|(\?ll=))(.*)?/i,
                type: "iframe",
                url: function(t) {
                    return "//maps.google." + t[2] + "/?ll=" + (t[9] ? t[9] + "&z=" + Math.floor(t[10]) + (t[12] ? t[12].replace(/^\//, "&") : "") : t[12]) + "&output=" + (t[12] && t[12].indexOf("layer=c") > 0 ? "svembed" : "embed")
                }
            },
            gmap_search: {
                matcher: /(maps\.)?google\.([a-z]{2,3}(\.[a-z]{2})?)\/(maps\/search\/)(.*)/i,
                type: "iframe",
                url: function(t) {
                    return "//maps.google." + t[2] + "/maps?q=" + t[5].replace("query=", "q=").replace("api=1", "") + "&output=embed"
                }
            }
        };
    t(document).on("objectNeedsType.fb", function(o, i, a) {
        var s, r, c, l, u, d, f, p = a.src || "",
            h = !1;
        s = t.extend(!0, {}, n, a.opts.media), t.each(s, function(n, o) {
            if (c = p.match(o.matcher)) {
                if (h = o.type, d = {}, o.paramPlace && c[o.paramPlace]) {
                    u = c[o.paramPlace], "?" == u[0] && (u = u.substring(1)), u = u.split("&");
                    for (var i = 0; i < u.length; ++i) {
                        var s = u[i].split("=", 2);
                        2 == s.length && (d[s[0]] = decodeURIComponent(s[1].replace(/\+/g, " ")))
                    }
                }
                return l = t.extend(!0, {}, o.params, a.opts[n], d), p = "function" === t.type(o.url) ? o.url.call(this, c, l, a) : e(o.url, c, l), r = "function" === t.type(o.thumb) ? o.thumb.call(this, c, l, a) : e(o.thumb, c), "vimeo" === n && (p = p.replace("&%23", "#")), !1
            }
        }), h ? (a.src = p, a.type = h, a.opts.thumb || a.opts.$thumb && a.opts.$thumb.length || (a.opts.thumb = r), "iframe" === h && (t.extend(!0, a.opts, {
            iframe: {
                preload: !1,
                attr: {
                    scrolling: "no"
                }
            }
        }), a.contentProvider = f, a.opts.slideClass += " fancybox-slide--" + ("gmap_place" == f || "gmap_search" == f ? "map" : "video"))) : p && (a.type = a.opts.defaultType)
    })
}(window.jQuery || jQuery),
function(t, e, n) {
    "use strict";
    var o = function() {
            return t.requestAnimationFrame || t.webkitRequestAnimationFrame || t.mozRequestAnimationFrame || t.oRequestAnimationFrame || function(e) {
                return t.setTimeout(e, 1e3 / 60)
            }
        }(),
        i = function() {
            return t.cancelAnimationFrame || t.webkitCancelAnimationFrame || t.mozCancelAnimationFrame || t.oCancelAnimationFrame || function(e) {
                t.clearTimeout(e)
            }
        }(),
        a = function(e) {
            var n = [];
            e = e.originalEvent || e || t.e, e = e.touches && e.touches.length ? e.touches : e.changedTouches && e.changedTouches.length ? e.changedTouches : [e];
            for (var o in e) e[o].pageX ? n.push({
                x: e[o].pageX,
                y: e[o].pageY
            }) : e[o].clientX && n.push({
                x: e[o].clientX,
                y: e[o].clientY
            });
            return n
        },
        s = function(t, e, n) {
            return e && t ? "x" === n ? t.x - e.x : "y" === n ? t.y - e.y : Math.sqrt(Math.pow(t.x - e.x, 2) + Math.pow(t.y - e.y, 2)) : 0
        },
        r = function(t) {
            if (t.is('a,area,button,[role="button"],input,label,select,summary,textarea') || n.isFunction(t.get(0).onclick) || t.data("selectable")) return !0;
            for (var e = 0, o = t[0].attributes, i = o.length; e < i; e++)
                if ("data-fancybox-" === o[e].nodeName.substr(0, 14)) return !0;
            return !1
        },
        c = function(e) {
            var n = t.getComputedStyle(e)["overflow-y"],
                o = t.getComputedStyle(e)["overflow-x"],
                i = ("scroll" === n || "auto" === n) && e.scrollHeight > e.clientHeight,
                a = ("scroll" === o || "auto" === o) && e.scrollWidth > e.clientWidth;
            return i || a
        },
        l = function(t) {
            for (var e = !1;;) {
                if (e = c(t.get(0))) break;
                if (t = t.parent(), !t.length || t.hasClass("fancybox-stage") || t.is("body")) break
            }
            return e
        },
        u = function(t) {
            var e = this;
            e.instance = t, e.$bg = t.$refs.bg, e.$stage = t.$refs.stage, e.$container = t.$refs.container, e.destroy(), e.$container.on("touchstart.fb.touch mousedown.fb.touch", n.proxy(e, "ontouchstart"))
        };
    u.prototype.destroy = function() {
        this.$container.off(".fb.touch")
    }, u.prototype.ontouchstart = function(o) {
        var i = this,
            c = n(o.target),
            u = i.instance,
            d = u.current,
            f = d.$content,
            p = "touchstart" == o.type;
        if (p && i.$container.off("mousedown.fb.touch"), (!o.originalEvent || 2 != o.originalEvent.button) && c.length && !r(c) && !r(c.parent()) && (c.is("img") || !(o.originalEvent.clientX > c[0].clientWidth + c.offset().left))) {
            if (!d || i.instance.isAnimating || i.instance.isClosing) return o.stopPropagation(), void o.preventDefault();
            if (i.realPoints = i.startPoints = a(o), i.startPoints) {
                if (o.stopPropagation(), i.startEvent = o, i.canTap = !0, i.$target = c, i.$content = f, i.opts = d.opts.touch, i.isPanning = !1, i.isSwiping = !1, i.isZooming = !1, i.isScrolling = !1, i.sliderStartPos = i.sliderLastPos || {
                        top: 0,
                        left: 0
                    }, i.contentStartPos = n.fancybox.getTranslate(i.$content), i.contentLastPos = null, i.startTime = (new Date).getTime(), i.distanceX = i.distanceY = i.distance = 0, i.canvasWidth = Math.round(d.$slide[0].clientWidth), i.canvasHeight = Math.round(d.$slide[0].clientHeight), n(e).off(".fb.touch").on(p ? "touchend.fb.touch touchcancel.fb.touch" : "mouseup.fb.touch mouseleave.fb.touch", n.proxy(i, "ontouchend")).on(p ? "touchmove.fb.touch" : "mousemove.fb.touch", n.proxy(i, "ontouchmove")), n.fancybox.isMobile && e.addEventListener("scroll", i.onscroll, !0), !i.opts && !u.canPan() || !c.is(i.$stage) && !i.$stage.find(c).length) return void(c.is("img") && o.preventDefault());
                n.fancybox.isMobile && (l(c) || l(c.parent())) || o.preventDefault(), 1 === i.startPoints.length && ("image" === d.type && (i.contentStartPos.width > i.canvasWidth + 1 || i.contentStartPos.height > i.canvasHeight + 1) ? (n.fancybox.stop(i.$content), i.$content.css("transition-duration", ""), i.isPanning = !0) : i.isSwiping = !0, i.$container.addClass("fancybox-controls--isGrabbing")), 2 !== i.startPoints.length || u.isAnimating || d.hasError || "image" !== d.type || !d.isLoaded && !d.$ghost || (i.canTap = !1, i.isSwiping = !1, i.isPanning = !1, i.isZooming = !0, n.fancybox.stop(i.$content), i.$content.css("transition-duration", ""), i.centerPointStartX = .5 * (i.startPoints[0].x + i.startPoints[1].x) - n(t).scrollLeft(), i.centerPointStartY = .5 * (i.startPoints[0].y + i.startPoints[1].y) - n(t).scrollTop(), i.percentageOfImageAtPinchPointX = (i.centerPointStartX - i.contentStartPos.left) / i.contentStartPos.width, i.percentageOfImageAtPinchPointY = (i.centerPointStartY - i.contentStartPos.top) / i.contentStartPos.height, i.startDistanceBetweenFingers = s(i.startPoints[0], i.startPoints[1]))
            }
        }
    }, u.prototype.onscroll = function(t) {
        self.isScrolling = !0
    }, u.prototype.ontouchmove = function(t) {
        var e = this,
            o = n(t.target);
        return e.isScrolling || !o.is(e.$stage) && !e.$stage.find(o).length ? void(e.canTap = !1) : (e.newPoints = a(t), void((e.opts || e.instance.canPan()) && e.newPoints && e.newPoints.length && (e.isSwiping && e.isSwiping === !0 || t.preventDefault(), e.distanceX = s(e.newPoints[0], e.startPoints[0], "x"), e.distanceY = s(e.newPoints[0], e.startPoints[0], "y"), e.distance = s(e.newPoints[0], e.startPoints[0]), e.distance > 0 && (e.isSwiping ? e.onSwipe(t) : e.isPanning ? e.onPan() : e.isZooming && e.onZoom()))))
    }, u.prototype.onSwipe = function(e) {
        var a, s = this,
            r = s.isSwiping,
            c = s.sliderStartPos.left || 0;
        if (r !== !0) "x" == r && (s.distanceX > 0 && (s.instance.group.length < 2 || 0 === s.instance.current.index && !s.instance.current.opts.loop) ? c += Math.pow(s.distanceX, .8) : s.distanceX < 0 && (s.instance.group.length < 2 || s.instance.current.index === s.instance.group.length - 1 && !s.instance.current.opts.loop) ? c -= Math.pow(-s.distanceX, .8) : c += s.distanceX), s.sliderLastPos = {
            top: "x" == r ? 0 : s.sliderStartPos.top + s.distanceY,
            left: c
        }, s.requestId && (i(s.requestId), s.requestId = null), s.requestId = o(function() {
            s.sliderLastPos && (n.each(s.instance.slides, function(t, e) {
                var o = e.pos - s.instance.currPos;
                n.fancybox.setTranslate(e.$slide, {
                    top: s.sliderLastPos.top,
                    left: s.sliderLastPos.left + o * s.canvasWidth + o * e.opts.gutter
                })
            }), s.$container.addClass("fancybox-is-sliding"))
        });
        else if (Math.abs(s.distance) > 10) {
            if (s.canTap = !1, s.instance.group.length < 2 && s.opts.vertical ? s.isSwiping = "y" : s.instance.isDragging || s.opts.vertical === !1 || "auto" === s.opts.vertical && n(t).width() > 800 ? s.isSwiping = "x" : (a = Math.abs(180 * Math.atan2(s.distanceY, s.distanceX) / Math.PI), s.isSwiping = a > 45 && a < 135 ? "y" : "x"), s.canTap = !1, "y" === s.isSwiping && n.fancybox.isMobile && (l(s.$target) || l(s.$target.parent()))) return void(s.isScrolling = !0);
            s.instance.isDragging = s.isSwiping, s.startPoints = s.newPoints, n.each(s.instance.slides, function(t, e) {
                n.fancybox.stop(e.$slide), e.$slide.css("transition-duration", ""), e.inTransition = !1, e.pos === s.instance.current.pos && (s.sliderStartPos.left = n.fancybox.getTranslate(e.$slide).left)
            }), s.instance.SlideShow && s.instance.SlideShow.isActive && s.instance.SlideShow.stop()
        }
    }, u.prototype.onPan = function() {
        var t = this;
        return s(t.newPoints[0], t.realPoints[0]) < (n.fancybox.isMobile ? 10 : 5) ? void(t.startPoints = t.newPoints) : (t.canTap = !1, t.contentLastPos = t.limitMovement(), t.requestId && (i(t.requestId), t.requestId = null), void(t.requestId = o(function() {
            n.fancybox.setTranslate(t.$content, t.contentLastPos)
        })))
    }, u.prototype.limitMovement = function() {
        var t, e, n, o, i, a, s = this,
            r = s.canvasWidth,
            c = s.canvasHeight,
            l = s.distanceX,
            u = s.distanceY,
            d = s.contentStartPos,
            f = d.left,
            p = d.top,
            h = d.width,
            g = d.height;
        return i = h > r ? f + l : f, a = p + u, t = Math.max(0, .5 * r - .5 * h), e = Math.max(0, .5 * c - .5 * g), n = Math.min(r - h, .5 * r - .5 * h), o = Math.min(c - g, .5 * c - .5 * g), h > r && (l > 0 && i > t && (i = t - 1 + Math.pow(-t + f + l, .8) || 0), l < 0 && i < n && (i = n + 1 - Math.pow(n - f - l, .8) || 0)), g > c && (u > 0 && a > e && (a = e - 1 + Math.pow(-e + p + u, .8) || 0), u < 0 && a < o && (a = o + 1 - Math.pow(o - p - u, .8) || 0)), {
            top: a,
            left: i,
            scaleX: d.scaleX,
            scaleY: d.scaleY
        }
    }, u.prototype.limitPosition = function(t, e, n, o) {
        var i = this,
            a = i.canvasWidth,
            s = i.canvasHeight;
        return n > a ? (t = t > 0 ? 0 : t, t = t < a - n ? a - n : t) : t = Math.max(0, a / 2 - n / 2), o > s ? (e = e > 0 ? 0 : e, e = e < s - o ? s - o : e) : e = Math.max(0, s / 2 - o / 2), {
            top: e,
            left: t
        }
    }, u.prototype.onZoom = function() {
        var e = this,
            a = e.contentStartPos.width,
            r = e.contentStartPos.height,
            c = e.contentStartPos.left,
            l = e.contentStartPos.top,
            u = s(e.newPoints[0], e.newPoints[1]),
            d = u / e.startDistanceBetweenFingers,
            f = Math.floor(a * d),
            p = Math.floor(r * d),
            h = (a - f) * e.percentageOfImageAtPinchPointX,
            g = (r - p) * e.percentageOfImageAtPinchPointY,
            b = (e.newPoints[0].x + e.newPoints[1].x) / 2 - n(t).scrollLeft(),
            m = (e.newPoints[0].y + e.newPoints[1].y) / 2 - n(t).scrollTop(),
            y = b - e.centerPointStartX,
            v = m - e.centerPointStartY,
            x = c + (h + y),
            w = l + (g + v),
            $ = {
                top: w,
                left: x,
                scaleX: e.contentStartPos.scaleX * d,
                scaleY: e.contentStartPos.scaleY * d
            };
        e.canTap = !1, e.newWidth = f, e.newHeight = p, e.contentLastPos = $, e.requestId && (i(e.requestId), e.requestId = null), e.requestId = o(function() {
            n.fancybox.setTranslate(e.$content, e.contentLastPos)
        })
    }, u.prototype.ontouchend = function(t) {
        var o = this,
            s = Math.max((new Date).getTime() - o.startTime, 1),
            r = o.isSwiping,
            c = o.isPanning,
            l = o.isZooming,
            u = o.isScrolling;
        return o.endPoints = a(t), o.$container.removeClass("fancybox-controls--isGrabbing"), n(e).off(".fb.touch"), e.removeEventListener("scroll", o.onscroll, !0), o.requestId && (i(o.requestId), o.requestId = null), o.isSwiping = !1, o.isPanning = !1, o.isZooming = !1, o.isScrolling = !1, o.instance.isDragging = !1, o.canTap ? o.onTap(t) : (o.speed = 366, o.velocityX = o.distanceX / s * .5, o.velocityY = o.distanceY / s * .5, o.speedX = Math.max(.5 * o.speed, Math.min(1.5 * o.speed, 1 / Math.abs(o.velocityX) * o.speed)), void(c ? o.endPanning() : l ? o.endZooming() : o.endSwiping(r, u)))
    }, u.prototype.endSwiping = function(t, e) {
        var o = this,
            i = !1,
            a = o.instance.group.length;
        o.sliderLastPos = null, "y" == t && !e && Math.abs(o.distanceY) > 50 ? (n.fancybox.animate(o.instance.current.$slide, {
            top: o.sliderStartPos.top + o.distanceY + 150 * o.velocityY,
            opacity: 0
        }, 150), i = o.instance.close(!0, 300)) : "x" == t && o.distanceX > 50 && a > 1 ? i = o.instance.previous(o.speedX) : "x" == t && o.distanceX < -50 && a > 1 && (i = o.instance.next(o.speedX)), i !== !1 || "x" != t && "y" != t || (e || a < 2 ? o.instance.centerSlide(o.instance.current, 150) : o.instance.jumpTo(o.instance.current.index)), o.$container.removeClass("fancybox-is-sliding")
    }, u.prototype.endPanning = function() {
        var t, e, o, i = this;
        i.contentLastPos && (i.opts.momentum === !1 ? (t = i.contentLastPos.left, e = i.contentLastPos.top) : (t = i.contentLastPos.left + i.velocityX * i.speed, e = i.contentLastPos.top + i.velocityY * i.speed), o = i.limitPosition(t, e, i.contentStartPos.width, i.contentStartPos.height), o.width = i.contentStartPos.width, o.height = i.contentStartPos.height, n.fancybox.animate(i.$content, o, 430))
    }, u.prototype.endZooming = function() {
        var t, e, o, i, a = this,
            s = a.instance.current,
            r = a.newWidth,
            c = a.newHeight;
        a.contentLastPos && (t = a.contentLastPos.left, e = a.contentLastPos.top, i = {
            top: e,
            left: t,
            width: r,
            height: c,
            scaleX: 1,
            scaleY: 1
        }, n.fancybox.setTranslate(a.$content, i), r < a.canvasWidth && c < a.canvasHeight ? a.instance.scaleToFit(150) : r > s.width || c > s.height ? a.instance.scaleToActual(a.centerPointStartX, a.centerPointStartY, 150) : (o = a.limitPosition(t, e, r, c), n.fancybox.setTranslate(a.content, n.fancybox.getTranslate(a.$content)), n.fancybox.animate(a.$content, o, 150)))
    }, u.prototype.onTap = function(t) {
        var e, o = this,
            i = n(t.target),
            s = o.instance,
            r = s.current,
            c = t && a(t) || o.startPoints,
            l = c[0] ? c[0].x - o.$stage.offset().left : 0,
            u = c[0] ? c[0].y - o.$stage.offset().top : 0,
            d = function(e) {
                var i = r.opts[e];
                if (n.isFunction(i) && (i = i.apply(s, [r, t])), i) switch (i) {
                    case "close":
                        s.close(o.startEvent);
                        break;
                    case "toggleControls":
                        s.toggleControls(!0);
                        break;
                    case "next":
                        s.next();
                        break;
                    case "nextOrClose":
                        s.group.length > 1 ? s.next() : s.close(o.startEvent);
                        break;
                    case "zoom":
                        "image" == r.type && (r.isLoaded || r.$ghost) && (s.canPan() ? s.scaleToFit() : s.isScaledDown() ? s.scaleToActual(l, u) : s.group.length < 2 && s.close(o.startEvent))
                }
            };
        if ((!t.originalEvent || 2 != t.originalEvent.button) && (i.is("img") || !(l > i[0].clientWidth + i.offset().left))) {
            if (i.is(".fancybox-bg,.fancybox-inner,.fancybox-outer,.fancybox-container")) e = "Outside";
            else if (i.is(".fancybox-slide")) e = "Slide";
            else {
                if (!s.current.$content || !s.current.$content.find(i).addBack().filter(i).length) return;
                e = "Content"
            }
            if (o.tapped) {
                if (clearTimeout(o.tapped), o.tapped = null, Math.abs(l - o.tapX) > 50 || Math.abs(u - o.tapY) > 50) return this;
                d("dblclick" + e)
            } else o.tapX = l, o.tapY = u, r.opts["dblclick" + e] && r.opts["dblclick" + e] !== r.opts["click" + e] ? o.tapped = setTimeout(function() {
                o.tapped = null, d("click" + e)
            }, 500) : d("click" + e);
            return this
        }
    }, n(e).on("onActivate.fb", function(t, e) {
        e && !e.Guestures && (e.Guestures = new u(e))
    })
}(window, document, window.jQuery || jQuery),
function(t, e) {
    "use strict";
    e.extend(!0, e.fancybox.defaults, {
        btnTpl: {
            slideShow: '<button data-fancybox-play class="fancybox-button fancybox-button--play" title="{{PLAY_START}}"><svg viewBox="0 0 40 40"><path d="M13,12 L27,20 L13,27 Z" /><path d="M15,10 v19 M23,10 v19" /></svg></button>'
        },
        slideShow: {
            autoStart: !1,
            speed: 3e3
        }
    });
    var n = function(t) {
        this.instance = t, this.init()
    };
    e.extend(n.prototype, {
        timer: null,
        isActive: !1,
        $button: null,
        init: function() {
            var t = this;
            t.$button = t.instance.$refs.toolbar.find("[data-fancybox-play]").on("click", function() {
                t.toggle()
            }), (t.instance.group.length < 2 || !t.instance.group[t.instance.currIndex].opts.slideShow) && t.$button.hide()
        },
        set: function(t) {
            var e = this;
            e.instance && e.instance.current && (t === !0 || e.instance.current.opts.loop || e.instance.currIndex < e.instance.group.length - 1) ? e.timer = setTimeout(function() {
                e.isActive && e.instance.jumpTo((e.instance.currIndex + 1) % e.instance.group.length)
            }, e.instance.current.opts.slideShow.speed) : (e.stop(), e.instance.idleSecondsCounter = 0, e.instance.showControls())
        },
        clear: function() {
            var t = this;
            clearTimeout(t.timer), t.timer = null
        },
        start: function() {
            var t = this,
                e = t.instance.current;
            e && (t.isActive = !0, t.$button.attr("title", e.opts.i18n[e.opts.lang].PLAY_STOP).removeClass("fancybox-button--play").addClass("fancybox-button--pause"), t.set(!0))
        },
        stop: function() {
            var t = this,
                e = t.instance.current;
            t.clear(), t.$button.attr("title", e.opts.i18n[e.opts.lang].PLAY_START).removeClass("fancybox-button--pause").addClass("fancybox-button--play"), t.isActive = !1
        },
        toggle: function() {
            var t = this;
            t.isActive ? t.stop() : t.start()
        }
    }), e(t).on({
        "onInit.fb": function(t, e) {
            e && !e.SlideShow && (e.SlideShow = new n(e))
        },
        "beforeShow.fb": function(t, e, n, o) {
            var i = e && e.SlideShow;
            o ? i && n.opts.slideShow.autoStart && i.start() : i && i.isActive && i.clear()
        },
        "afterShow.fb": function(t, e, n) {
            var o = e && e.SlideShow;
            o && o.isActive && o.set()
        },
        "afterKeydown.fb": function(n, o, i, a, s) {
            var r = o && o.SlideShow;
            !r || !i.opts.slideShow || 80 !== s && 32 !== s || e(t.activeElement).is("button,a,input") || (a.preventDefault(), r.toggle())
        },
        "beforeClose.fb onDeactivate.fb": function(t, e) {
            var n = e && e.SlideShow;
            n && n.stop()
        }
    }), e(t).on("visibilitychange", function() {
        var n = e.fancybox.getInstance(),
            o = n && n.SlideShow;
        o && o.isActive && (t.hidden ? o.clear() : o.set())
    })
}(document, window.jQuery || jQuery),
function(t, e) {
    "use strict";
    var n = function() {
        var e, n, o, i = [
                ["requestFullscreen", "exitFullscreen", "fullscreenElement", "fullscreenEnabled", "fullscreenchange", "fullscreenerror"],
                ["webkitRequestFullscreen", "webkitExitFullscreen", "webkitFullscreenElement", "webkitFullscreenEnabled", "webkitfullscreenchange", "webkitfullscreenerror"],
                ["webkitRequestFullScreen", "webkitCancelFullScreen", "webkitCurrentFullScreenElement", "webkitCancelFullScreen", "webkitfullscreenchange", "webkitfullscreenerror"],
                ["mozRequestFullScreen", "mozCancelFullScreen", "mozFullScreenElement", "mozFullScreenEnabled", "mozfullscreenchange", "mozfullscreenerror"],
                ["msRequestFullscreen", "msExitFullscreen", "msFullscreenElement", "msFullscreenEnabled", "MSFullscreenChange", "MSFullscreenError"]
            ],
            a = {};
        for (n = 0; n < i.length; n++)
            if (e = i[n], e && e[1] in t) {
                for (o = 0; o < e.length; o++) a[i[0][o]] = e[o];
                return a
            }
        return !1
    }();
    if (!n) return void(e && e.fancybox && (e.fancybox.defaults.btnTpl.fullScreen = !1));
    var o = {
        request: function(e) {
            e = e || t.documentElement, e[n.requestFullscreen](e.ALLOW_KEYBOARD_INPUT)
        },
        exit: function() {
            t[n.exitFullscreen]()
        },
        toggle: function(e) {
            e = e || t.documentElement, this.isFullscreen() ? this.exit() : this.request(e)
        },
        isFullscreen: function() {
            return Boolean(t[n.fullscreenElement])
        },
        enabled: function() {
            return Boolean(t[n.fullscreenEnabled])
        }
    };
    e.extend(!0, e.fancybox.defaults, {
        btnTpl: {
            fullScreen: '<button data-fancybox-fullscreen class="fancybox-button fancybox-button--fullscreen" title="{{FULL_SCREEN}}"><svg viewBox="0 0 40 40"><path d="M9,12 h22 v16 h-22 v-16 v16 h22 v-16 Z" /></svg></button>'
        },
        fullScreen: {
            autoStart: !1
        }
    }), e(t).on({
        "onInit.fb": function(t, e) {
            var n;
            e && e.group[e.currIndex].opts.fullScreen ? (n = e.$refs.container, n.on("click.fb-fullscreen", "[data-fancybox-fullscreen]", function(t) {
                t.stopPropagation(), t.preventDefault(), o.toggle(n[0])
            }), e.opts.fullScreen && e.opts.fullScreen.autoStart === !0 && o.request(n[0]), e.FullScreen = o) : e && e.$refs.toolbar.find("[data-fancybox-fullscreen]").hide()
        },
        "afterKeydown.fb": function(t, e, n, o, i) {
            e && e.FullScreen && 70 === i && (o.preventDefault(), e.FullScreen.toggle(e.$refs.container[0]))
        },
        "beforeClose.fb": function(t) {
            t && t.FullScreen && o.exit()
        }
    }), e(t).on(n.fullscreenchange, function() {
        var t = o.isFullscreen(),
            n = e.fancybox.getInstance();
        n && (n.current && "image" === n.current.type && n.isAnimating && (n.current.$content.css("transition", "none"), n.isAnimating = !1, n.update(!0, !0, 0)), n.trigger("onFullscreenChange", t), n.$refs.container.toggleClass("fancybox-is-fullscreen", t))
    })
}(document, window.jQuery || jQuery),
function(t, e) {
    "use strict";
    e.fancybox.defaults = e.extend(!0, {
        btnTpl: {
            thumbs: '<button data-fancybox-thumbs class="fancybox-button fancybox-button--thumbs" title="{{THUMBS}}"><svg viewBox="0 0 120 120"><path d="M30,30 h14 v14 h-14 Z M50,30 h14 v14 h-14 Z M70,30 h14 v14 h-14 Z M30,50 h14 v14 h-14 Z M50,50 h14 v14 h-14 Z M70,50 h14 v14 h-14 Z M30,70 h14 v14 h-14 Z M50,70 h14 v14 h-14 Z M70,70 h14 v14 h-14 Z" /></svg></button>'
        },
        thumbs: {
            autoStart: !1,
            hideOnClose: !0,
            parentEl: ".fancybox-container",
            axis: "y"
        }
    }, e.fancybox.defaults);
    var n = function(t) {
        this.init(t)
    };
    e.extend(n.prototype, {
        $button: null,
        $grid: null,
        $list: null,
        isVisible: !1,
        isActive: !1,
        init: function(t) {
            var e = this;
            e.instance = t, t.Thumbs = e;
            var n = t.group[0],
                o = t.group[1];
            e.opts = t.group[t.currIndex].opts.thumbs, e.$button = t.$refs.toolbar.find("[data-fancybox-thumbs]"), e.opts && n && o && ("image" == n.type || n.opts.thumb || n.opts.$thumb) && ("image" == o.type || o.opts.thumb || o.opts.$thumb) ? (e.$button.show().on("click", function() {
                e.toggle()
            }), e.isActive = !0) : e.$button.hide()
        },
        create: function() {
            var t, n, o = this,
                i = o.instance,
                a = o.opts.parentEl;
            o.$grid = e('<div class="fancybox-thumbs fancybox-thumbs-' + o.opts.axis + '"></div>').appendTo(i.$refs.container.find(a).addBack().filter(a)), t = "<ul>", e.each(i.group, function(e, o) {
                n = o.opts.thumb || (o.opts.$thumb ? o.opts.$thumb.attr("src") : null), n || "image" !== o.type || (n = o.src), n && n.length && (t += '<li data-index="' + e + '"  tabindex="0" class="fancybox-thumbs-loading"><img data-src="' + n + '" /></li>')
            }), t += "</ul>", o.$list = e(t).appendTo(o.$grid).on("click", "li", function() {
                i.jumpTo(e(this).data("index"))
            }), o.$list.find("img").hide().one("load", function() {
                var t, n, o, i, a = e(this).parent().removeClass("fancybox-thumbs-loading"),
                    s = a.outerWidth(),
                    r = a.outerHeight();
                t = this.naturalWidth || this.width, n = this.naturalHeight || this.height, o = t / s, i = n / r, o >= 1 && i >= 1 && (o > i ? (t /= i, n = r) : (t = s, n /= o)), e(this).css({
                    width: Math.floor(t),
                    height: Math.floor(n),
                    "margin-top": n > r ? Math.floor(.3 * r - .3 * n) : Math.floor(.5 * r - .5 * n),
                    "margin-left": Math.floor(.5 * s - .5 * t)
                }).show()
            }).each(function() {
                this.src = e(this).data("src")
            }), "x" === o.opts.axis && o.$list.width(parseInt(o.$grid.css("padding-right")) + i.group.length * o.$list.children().eq(0).outerWidth(!0) + "px")
        },
        focus: function(t) {
            var e, n, o = this,
                i = o.$list;
            o.instance.current && (e = i.children().removeClass("fancybox-thumbs-active").filter('[data-index="' + o.instance.current.index + '"]').addClass("fancybox-thumbs-active"), n = e.position(), "y" === o.opts.axis && (n.top < 0 || n.top > i.height() - e.outerHeight()) ? i.stop().animate({
                scrollTop: i.scrollTop() + n.top
            }, t) : "x" === o.opts.axis && (n.left < i.parent().scrollLeft() || n.left > i.parent().scrollLeft() + (i.parent().width() - e.outerWidth())) && i.parent().stop().animate({
                scrollLeft: n.left
            }, t))
        },
        update: function() {
            this.instance.$refs.container.toggleClass("fancybox-show-thumbs", this.isVisible), this.isVisible ? (this.$grid || this.create(), this.instance.trigger("onThumbsShow"), this.focus(0)) : this.$grid && this.instance.trigger("onThumbsHide"), this.instance.update()
        },
        hide: function() {
            this.isVisible = !1, this.update()
        },
        show: function() {
            this.isVisible = !0, this.update()
        },
        toggle: function() {
            this.isVisible = !this.isVisible, this.update()
        }
    }), e(t).on({
        "onInit.fb": function(t, e) {
            var o;
            e && !e.Thumbs && (o = new n(e), o.isActive && o.opts.autoStart === !0 && o.show())
        },
        "beforeShow.fb": function(t, e, n, o) {
            var i = e && e.Thumbs;
            i && i.isVisible && i.focus(o ? 0 : 250)
        },
        "afterKeydown.fb": function(t, e, n, o, i) {
            var a = e && e.Thumbs;
            a && a.isActive && 71 === i && (o.preventDefault(), a.toggle())
        },
        "beforeClose.fb": function(t, e) {
            var n = e && e.Thumbs;
            n && n.isVisible && n.opts.hideOnClose !== !1 && n.$grid.hide()
        }
    })
}(document, window.jQuery),
function(t, e) {
    "use strict";

    function n(t) {
        var e = {
            "&": "&amp;",
            "<": "&lt;",
            ">": "&gt;",
            '"': "&quot;",
            "'": "&#39;",
            "/": "&#x2F;",
            "`": "&#x60;",
            "=": "&#x3D;"
        };
        return String(t).replace(/[&<>"'`=\/]/g, function(t) {
            return e[t]
        })
    }
    e.extend(!0, e.fancybox.defaults, {
        btnTpl: {
            share: '<button data-fancybox-share class="fancybox-button fancybox-button--share" title="{{SHARE}}"><svg viewBox="0 0 40 40"><path d="M6,30 C8,18 19,16 23,16 L23,16 L23,10 L33,20 L23,29 L23,24 C19,24 8,27 6,30 Z"></svg></button>'
        },
        share: {
            tpl: '<div class="fancybox-share"><h1>{{SHARE}}</h1><p class="fancybox-share__links"><a class="fancybox-share__button fancybox-share__button--fb" href="https://www.facebook.com/sharer/sharer.php?u={{url}}"><svg viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg"><path d="m287 456v-299c0-21 6-35 35-35h38v-63c-7-1-29-3-55-3-54 0-91 33-91 94v306m143-254h-205v72h196" /></svg><span>Facebook</span></a><a class="fancybox-share__button fancybox-share__button--pt" href="https://www.pinterest.com/pin/create/button/?url={{url}}&description={{descr}}&media={{media}}"><svg viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg"><path d="m265 56c-109 0-164 78-164 144 0 39 15 74 47 87 5 2 10 0 12-5l4-19c2-6 1-8-3-13-9-11-15-25-15-45 0-58 43-110 113-110 62 0 96 38 96 88 0 67-30 122-73 122-24 0-42-19-36-44 6-29 20-60 20-81 0-19-10-35-31-35-25 0-44 26-44 60 0 21 7 36 7 36l-30 125c-8 37-1 83 0 87 0 3 4 4 5 2 2-3 32-39 42-75l16-64c8 16 31 29 56 29 74 0 124-67 124-157 0-69-58-132-146-132z" fill="#fff"/></svg><span>Pinterest</span></a><a class="fancybox-share__button fancybox-share__button--tw" href="https://twitter.com/intent/tweet?url={{url}}&text={{descr}}"><svg viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg"><path d="m456 133c-14 7-31 11-47 13 17-10 30-27 37-46-15 10-34 16-52 20-61-62-157-7-141 75-68-3-129-35-169-85-22 37-11 86 26 109-13 0-26-4-37-9 0 39 28 72 65 80-12 3-25 4-37 2 10 33 41 57 77 57-42 30-77 38-122 34 170 111 378-32 359-208 16-11 30-25 41-42z" /></svg><span>Twitter</span></a></p><p><input class="fancybox-share__input" type="text" value="{{url_raw}}" /></p></div>'
        }
    }), e(t).on("click", "[data-fancybox-share]", function() {
        var t, o, i = e.fancybox.getInstance();
        i && (t = i.current.opts.hash === !1 ? i.current.src : window.location, o = i.current.opts.share.tpl.replace(/\{\{media\}\}/g, "image" === i.current.type ? encodeURIComponent(i.current.src) : "").replace(/\{\{url\}\}/g, encodeURIComponent(t)).replace(/\{\{url_raw\}\}/g, n(t)).replace(/\{\{descr\}\}/g, i.$caption ? encodeURIComponent(i.$caption.text()) : ""), e.fancybox.open({
            src: i.translate(i, o),
            type: "html",
            opts: {
                animationEffect: "fade",
                animationDuration: 250,
                afterLoad: function(t, e) {
                    e.$content.find(".fancybox-share__links a").click(function() {
                        return window.open(this.href, "Share", "width=550, height=450"), !1
                    })
                }
            }
        }))
    })
}(document, window.jQuery || jQuery),
function(t, e, n) {
    "use strict";

    function o() {
        var t = e.location.hash.substr(1),
            n = t.split("-"),
            o = n.length > 1 && /^\+?\d+$/.test(n[n.length - 1]) ? parseInt(n.pop(-1), 10) || 1 : 1,
            i = n.join("-");
        return o < 1 && (o = 1), {
            hash: t,
            index: o,
            gallery: i
        }
    }

    function i(t) {
        var e;
        "" !== t.gallery && (e = n("[data-fancybox='" + n.escapeSelector(t.gallery) + "']").eq(t.index - 1), e.length || (e = n("#" + n.escapeSelector(t.gallery))), e.length && (s = !1, e.trigger("click")))
    }

    function a(t) {
        var e;
        return !!t && (e = t.current ? t.current.opts : t.opts, e.hash || (e.$orig ? e.$orig.data("fancybox") : ""))
    }
    n.escapeSelector || (n.escapeSelector = function(t) {
        var e = /([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g,
            n = function(t, e) {
                return e ? "\0" === t ? "" : t.slice(0, -1) + "\\" + t.charCodeAt(t.length - 1).toString(16) + " " : "\\" + t
            };
        return (t + "").replace(e, n)
    });
    var s = !0,
        r = null,
        c = null;
    n(function() {
        n.fancybox.defaults.hash !== !1 && (n(t).on({
            "onInit.fb": function(t, e) {
                var n, i;
                e.group[e.currIndex].opts.hash !== !1 && (n = o(), i = a(e), i && n.gallery && i == n.gallery && (e.currIndex = n.index - 1))
            },
            "beforeShow.fb": function(n, o, i) {
                var l;
                i && i.opts.hash !== !1 && (l = a(o), l && "" !== l && (e.location.hash.indexOf(l) < 0 && (o.opts.origHash = e.location.hash), r = l + (o.group.length > 1 ? "-" + (i.index + 1) : ""), "replaceState" in e.history ? (c && clearTimeout(c), c = setTimeout(function() {
                    e.history[s ? "pushState" : "replaceState"]({}, t.title, e.location.pathname + e.location.search + "#" + r), c = null, s = !1
                }, 300)) : e.location.hash = r))
            },
            "beforeClose.fb": function(o, i, s) {
                var l, u;
                c && clearTimeout(c), s.opts.hash !== !1 && (l = a(i), u = i && i.opts.origHash ? i.opts.origHash : "", l && "" !== l && ("replaceState" in history ? e.history.replaceState({}, t.title, e.location.pathname + e.location.search + u) : (e.location.hash = u, n(e).scrollTop(i.scrollTop).scrollLeft(i.scrollLeft))), r = null)
            }
        }), n(e).on("hashchange.fb", function() {
            var t = o();
            n.fancybox.getInstance() ? !r || r === t.gallery + "-" + t.index || 1 === t.index && r == t.gallery || (r = null, n.fancybox.close()) : "" !== t.gallery && i(t)
        }), setTimeout(function() {
            i(o())
        }, 50))
    })
}(document, window, window.jQuery || jQuery),
function(t, e) {
    "use strict";
    var n = (new Date).getTime();
    e(t).on({
        "onInit.fb": function(t, e, o) {
            e.$refs.stage.on("mousewheel DOMMouseScroll wheel MozMousePixelScroll", function(t) {
                var o = e.current,
                    i = (new Date).getTime();
                e.group.length < 1 || o.opts.wheel === !1 || "auto" === o.opts.wheel && "image" !== o.type || (t.preventDefault(), t.stopPropagation(), o.$slide.hasClass("fancybox-animated") || (t = t.originalEvent || t, i - n < 250 || (n = i, e[(-t.deltaY || -t.deltaX || t.wheelDelta || -t.detail) < 0 ? "next" : "previous"]())))
            })
        }
    })
}(document, window.jQuery || jQuery);

(function(d) {
    var m = "left",
        l = "right",
        c = "up",
        s = "down",
        b = "in",
        t = "out",
        j = "none",
        o = "auto",
        i = "swipe",
        p = "pinch",
        u = "tap",
        x = "horizontal",
        q = "vertical",
        g = "all",
        e = "start",
        h = "move",
        f = "end",
        n = "cancel",
        a = "ontouchstart" in window,
        v = "TouchSwipe";
    var k = {
        fingers: 1,
        threshold: 75,
        cancelThreshold: 25,
        pinchThreshold: 20,
        maxTimeThreshold: null,
        fingerReleaseThreshold: 250,
        swipe: null,
        swipeLeft: null,
        swipeRight: null,
        swipeUp: null,
        swipeDown: null,
        swipeStatus: null,
        pinchIn: null,
        pinchOut: null,
        pinchStatus: null,
        click: null,
        tap: null,
        triggerOnTouchEnd: true,
        triggerOnTouchLeave: false,
        allowPageScroll: "auto",
        fallbackToMouseEvents: true,
        excludedElements: "button, input, select, textarea, a, .noSwipe"
    };
    d.fn.swipe = function(A) {
        var z = d(this),
            y = z.data(v);
        if (y && typeof A === "string") {
            if (y[A]) {
                return y[A].apply(this, Array.prototype.slice.call(arguments, 1))
            } else {
                d.error("Method " + A + " does not exist on jQuery.swipe")
            }
        } else {
            if (!y && (typeof A === "object" || !A)) {
                return r.apply(this, arguments)
            }
        }
        return z
    };
    d.fn.swipe.defaults = k;
    d.fn.swipe.phases = {
        PHASE_START: e,
        PHASE_MOVE: h,
        PHASE_END: f,
        PHASE_CANCEL: n
    };
    d.fn.swipe.directions = {
        LEFT: m,
        RIGHT: l,
        UP: c,
        DOWN: s,
        IN: b,
        OUT: t
    };
    d.fn.swipe.pageScroll = {
        NONE: j,
        HORIZONTAL: x,
        VERTICAL: q,
        AUTO: o
    };
    d.fn.swipe.fingers = {
        ONE: 1,
        TWO: 2,
        THREE: 3,
        ALL: g
    };

    function r(y) {
        if (y && (y.allowPageScroll === undefined && (y.swipe !== undefined || y.swipeStatus !== undefined))) {
            y.allowPageScroll = j
        }
        if (y.click !== undefined && y.tap === undefined) {
            y.tap = y.click
        }
        if (!y) {
            y = {}
        }
        y = d.extend({}, d.fn.swipe.defaults, y);
        return this.each(function() {
            var A = d(this);
            var z = A.data(v);
            if (!z) {
                z = new w(this, y);
                A.data(v, z)
            }
        })
    }

    function w(S, ag) {
        var aJ = (a || !ag.fallbackToMouseEvents),
            az = aJ ? "touchstart" : "mousedown",
            U = aJ ? "touchmove" : "mousemove",
            av = aJ ? "touchend" : "mouseup",
            D = aJ ? null : "mouseleave",
            R = "touchcancel";
        var ad = 0,
            N = null,
            ah = 0,
            aF = 0,
            A = 0,
            aj = 1,
            aA = 0,
            aN = 0,
            Z = null;
        var H = d(S);
        var O = "start";
        var aI = 0;
        var ai = null;
        var I = 0,
            Y = 0,
            aD = 0,
            aP = 0;
        try {
            H.bind(az, at);
            H.bind(R, L)
        } catch (aG) {
            d.error("events not supported " + az + "," + R + " on jQuery.swipe")
        }
        this.enable = function() {
            H.bind(az, at);
            H.bind(R, L);
            return H
        };
        this.disable = function() {
            Q();
            return H
        };
        this.destroy = function() {
            Q();
            H.data(v, null);
            return H
        };
        this.option = function(aR, aQ) {
            if (ag[aR] !== undefined) {
                if (aQ === undefined) {
                    return ag[aR]
                } else {
                    ag[aR] = aQ
                }
            } else {
                d.error("Option " + aR + " does not exist on jQuery.swipe.options")
            }
        };

        function at(aS) {
            if (X()) {
                return
            }
            if (d(aS.target).closest(ag.excludedElements, H).length > 0) {
                return
            }
            var aT = aS.originalEvent ? aS.originalEvent : aS;
            var aR, aQ = a ? aT.touches[0] : aT;
            O = e;
            if (a) {
                aI = aT.touches.length
            } else {
                aS.preventDefault()
            }
            ad = 0;
            N = null;
            aN = null;
            ah = 0;
            aF = 0;
            A = 0;
            aj = 1;
            aA = 0;
            ai = T();
            Z = aE();
            z();
            if (!a || (aI === ag.fingers || ag.fingers === g) || ap()) {
                aO(0, aQ);
                I = B();
                if (aI == 2) {
                    aO(1, aT.touches[1]);
                    aF = A = aa(ai[0].start, ai[1].start)
                }
                if (ag.swipeStatus || ag.pinchStatus) {
                    aR = aH(aT, O)
                }
            } else {
                aR = false
            }
            if (aR === false) {
                O = n;
                aH(aT, O);
                return aR
            } else {
                ak(true)
            }
        }

        function P(aT) {
            var aW = aT.originalEvent ? aT.originalEvent : aT;
            if (O === f || O === n || af()) {
                return
            }
            var aS, aR = a ? aW.touches[0] : aW;
            var aU = V(aR);
            Y = B();
            if (a) {
                aI = aW.touches.length
            }
            O = h;
            if (aI == 2) {
                if (aF == 0) {
                    aO(1, aW.touches[1]);
                    aF = A = aa(ai[0].start, ai[1].start)
                } else {
                    V(aW.touches[1]);
                    A = aa(ai[0].end, ai[1].end);
                    aN = ao(ai[0].end, ai[1].end)
                }
                aj = y(aF, A);
                aA = Math.abs(aF - A)
            }
            if ((aI === ag.fingers || ag.fingers === g) || !a || ap()) {
                N = ar(aU.start, aU.end);
                C(aT, N);
                ad = G(aU.start, aU.end);
                ah = K();
                aK(N, ad);
                if (ag.swipeStatus || ag.pinchStatus) {
                    aS = aH(aW, O)
                }
                if (!ag.triggerOnTouchEnd || ag.triggerOnTouchLeave) {
                    var aQ = true;
                    if (ag.triggerOnTouchLeave) {
                        var aV = au(this);
                        aQ = aC(aU.end, aV)
                    }
                    if (!ag.triggerOnTouchEnd && aQ) {
                        O = aM(h)
                    } else {
                        if (ag.triggerOnTouchLeave && !aQ) {
                            O = aM(f)
                        }
                    }
                    if (O == n || O == f) {
                        aH(aW, O)
                    }
                }
            } else {
                O = n;
                aH(aW, O)
            }
            if (aS === false) {
                O = n;
                aH(aW, O)
            }
        }

        function ab(aS) {
            var aU = aS.originalEvent;
            if (a) {
                if (aU.touches.length > 0) {
                    aw();
                    return true
                }
            }
            if (af()) {
                aI = aP
            }
            aS.preventDefault();
            Y = B();
            if (ag.triggerOnTouchEnd || (ag.triggerOnTouchEnd == false && O === h)) {
                O = f;
                var aR = ((aI === ag.fingers || ag.fingers === g) || !a);
                var aQ = ai[0].end.x !== 0;
                var aT = aR && aQ && (an() || aB());
                if (aT) {
                    aH(aU, O)
                } else {
                    O = n;
                    aH(aU, O)
                }
            } else {
                if (!ag.triggerOnTouchEnd && ay()) {
                    O = f;
                    am(aU, O, u)
                } else {
                    if (O === h) {
                        O = n;
                        aH(aU, O)
                    }
                }
            }
            ak(false)
        }

        function L() {
            aI = 0;
            Y = 0;
            I = 0;
            aF = 0;
            A = 0;
            aj = 1;
            z();
            ak(false)
        }

        function W(aQ) {
            var aR = aQ.originalEvent;
            if (ag.triggerOnTouchLeave) {
                O = aM(f);
                aH(aR, O)
            }
        }

        function Q() {
            H.unbind(az, at);
            H.unbind(R, L);
            H.unbind(U, P);
            H.unbind(av, ab);
            if (D) {
                H.unbind(D, W)
            }
            ak(false)
        }

        function aM(aT) {
            var aS = aT;
            var aR = aq();
            var aQ = ae();
            if (!aR) {
                aS = n
            } else {
                if (aQ && aT == h && (!ag.triggerOnTouchEnd || ag.triggerOnTouchLeave)) {
                    aS = f
                } else {
                    if (!aQ && aT == f && ag.triggerOnTouchLeave) {
                        aS = n
                    }
                }
            }
            return aS
        }

        function aH(aS, aQ) {
            var aR = undefined;
            if (ac()) {
                aR = am(aS, aQ, i)
            }
            if (ap() && aR !== false) {
                aR = am(aS, aQ, p)
            }
            if (ay() && aR !== false) {
                aR = am(aS, aQ, u)
            }
            if (aQ === n) {
                L(aS)
            }
            if (aQ === f) {
                if (a) {
                    if (aS.touches.length == 0) {
                        L(aS)
                    }
                } else {
                    L(aS)
                }
            }
            return aR
        }

        function am(aT, aQ, aS) {
            var aR = undefined;
            if (aS == i) {
                H.trigger("swipeStatus", [aQ, N || null, ad || 0, ah || 0, aI]);
                if (ag.swipeStatus) {
                    aR = ag.swipeStatus.call(H, aT, aQ, N || null, ad || 0, ah || 0, aI);
                    if (aR === false) {
                        return false
                    }
                }
                if (aQ == f && aB()) {
                    H.trigger("swipe", [N, ad, ah, aI]);
                    if (ag.swipe) {
                        aR = ag.swipe.call(H, aT, N, ad, ah, aI);
                        if (aR === false) {
                            return false
                        }
                    }
                    switch (N) {
                        case m:
                            H.trigger("swipeLeft", [N, ad, ah, aI]);
                            if (ag.swipeLeft) {
                                aR = ag.swipeLeft.call(H, aT, N, ad, ah, aI)
                            }
                            break;
                        case l:
                            H.trigger("swipeRight", [N, ad, ah, aI]);
                            if (ag.swipeRight) {
                                aR = ag.swipeRight.call(H, aT, N, ad, ah, aI)
                            }
                            break;
                        case c:
                            H.trigger("swipeUp", [N, ad, ah, aI]);
                            if (ag.swipeUp) {
                                aR = ag.swipeUp.call(H, aT, N, ad, ah, aI)
                            }
                            break;
                        case s:
                            H.trigger("swipeDown", [N, ad, ah, aI]);
                            if (ag.swipeDown) {
                                aR = ag.swipeDown.call(H, aT, N, ad, ah, aI)
                            }
                            break
                    }
                }
            }
            if (aS == p) {
                H.trigger("pinchStatus", [aQ, aN || null, aA || 0, ah || 0, aI, aj]);
                if (ag.pinchStatus) {
                    aR = ag.pinchStatus.call(H, aT, aQ, aN || null, aA || 0, ah || 0, aI, aj);
                    if (aR === false) {
                        return false
                    }
                }
                if (aQ == f && an()) {
                    switch (aN) {
                        case b:
                            H.trigger("pinchIn", [aN || null, aA || 0, ah || 0, aI, aj]);
                            if (ag.pinchIn) {
                                aR = ag.pinchIn.call(H, aT, aN || null, aA || 0, ah || 0, aI, aj)
                            }
                            break;
                        case t:
                            H.trigger("pinchOut", [aN || null, aA || 0, ah || 0, aI, aj]);
                            if (ag.pinchOut) {
                                aR = ag.pinchOut.call(H, aT, aN || null, aA || 0, ah || 0, aI, aj)
                            }
                            break
                    }
                }
            }
            if (aS == u) {
                if (aQ === n || aQ === f) {
                    if ((aI === 1 || !a) && (isNaN(ad) || ad === 0)) {
                        H.trigger("tap", [aT.target]);
                        if (ag.tap) {
                            aR = ag.tap.call(H, aT, aT.target)
                        }
                    }
                }
            }
            return aR
        }

        function ae() {
            var aQ = true;
            if (ag.threshold !== null) {
                aQ = ad >= ag.threshold
            }
            if (aQ && ag.cancelThreshold !== null) {
                aQ = (M(N) - ad) < ag.cancelThreshold
            }
            return aQ
        }

        function al() {
            if (ag.pinchThreshold !== null) {
                return aA >= ag.pinchThreshold
            }
            return true
        }

        function aq() {
            var aQ;
            if (ag.maxTimeThreshold) {
                if (ah >= ag.maxTimeThreshold) {
                    aQ = false
                } else {
                    aQ = true
                }
            } else {
                aQ = true
            }
            return aQ
        }

        function C(aQ, aR) {
            if (ag.allowPageScroll === j || ap()) {
                aQ.preventDefault()
            } else {
                var aS = ag.allowPageScroll === o;
                switch (aR) {
                    case m:
                        if ((ag.swipeLeft && aS) || (!aS && ag.allowPageScroll != x)) {
                            aQ.preventDefault()
                        }
                        break;
                    case l:
                        if ((ag.swipeRight && aS) || (!aS && ag.allowPageScroll != x)) {
                            aQ.preventDefault()
                        }
                        break;
                    case c:
                        if ((ag.swipeUp && aS) || (!aS && ag.allowPageScroll != q)) {
                            aQ.preventDefault()
                        }
                        break;
                    case s:
                        if ((ag.swipeDown && aS) || (!aS && ag.allowPageScroll != q)) {
                            aQ.preventDefault()
                        }
                        break
                }
            }
        }

        function an() {
            return al()
        }

        function ap() {
            return !!(ag.pinchStatus || ag.pinchIn || ag.pinchOut)
        }

        function ax() {
            return !!(an() && ap())
        }

        function aB() {
            var aQ = aq();
            var aS = ae();
            var aR = aS && aQ;
            return aR
        }

        function ac() {
            return !!(ag.swipe || ag.swipeStatus || ag.swipeLeft || ag.swipeRight || ag.swipeUp || ag.swipeDown)
        }

        function E() {
            return !!(aB() && ac())
        }

        function ay() {
            return !!(ag.tap)
        }

        function aw() {
            aD = B();
            aP = event.touches.length + 1
        }

        function z() {
            aD = 0;
            aP = 0
        }

        function af() {
            var aQ = false;
            if (aD) {
                var aR = B() - aD;
                if (aR <= ag.fingerReleaseThreshold) {
                    aQ = true
                }
            }
            return aQ
        }

        function X() {
            return !!(H.data(v + "_intouch") === true)
        }

        function ak(aQ) {
            if (aQ === true) {
                H.bind(U, P);
                H.bind(av, ab);
                if (D) {
                    H.bind(D, W)
                }
            } else {
                H.unbind(U, P, false);
                H.unbind(av, ab, false);
                if (D) {
                    H.unbind(D, W, false)
                }
            }
            H.data(v + "_intouch", aQ === true)
        }

        function aO(aR, aQ) {
            var aS = aQ.identifier !== undefined ? aQ.identifier : 0;
            ai[aR].identifier = aS;
            ai[aR].start.x = ai[aR].end.x = aQ.pageX || aQ.clientX;
            ai[aR].start.y = ai[aR].end.y = aQ.pageY || aQ.clientY;
            return ai[aR]
        }

        function V(aQ) {
            var aS = aQ.identifier !== undefined ? aQ.identifier : 0;
            var aR = J(aS);
            aR.end.x = aQ.pageX || aQ.clientX;
            aR.end.y = aQ.pageY || aQ.clientY;
            return aR
        }

        function J(aR) {
            for (var aQ = 0; aQ < ai.length; aQ++) {
                if (ai[aQ].identifier == aR) {
                    return ai[aQ]
                }
            }
        }

        function T() {
            var aQ = [];
            for (var aR = 0; aR <= 5; aR++) {
                aQ.push({
                    start: {
                        x: 0,
                        y: 0
                    },
                    end: {
                        x: 0,
                        y: 0
                    },
                    identifier: 0
                })
            }
            return aQ
        }

        function aK(aQ, aR) {
            aR = Math.max(aR, M(aQ));
            Z[aQ].distance = aR
        }

        function M(aQ) {
            return Z[aQ].distance
        }

        function aE() {
            var aQ = {};
            aQ[m] = aL(m);
            aQ[l] = aL(l);
            aQ[c] = aL(c);
            aQ[s] = aL(s);
            return aQ
        }

        function aL(aQ) {
            return {
                direction: aQ,
                distance: 0
            }
        }

        function K() {
            return Y - I
        }

        function aa(aT, aS) {
            var aR = Math.abs(aT.x - aS.x);
            var aQ = Math.abs(aT.y - aS.y);
            return Math.round(Math.sqrt(aR * aR + aQ * aQ))
        }

        function y(aQ, aR) {
            var aS = (aR / aQ) * 1;
            return aS.toFixed(2)
        }

        function ao() {
            if (aj < 1) {
                return t
            } else {
                return b
            }
        }

        function G(aR, aQ) {
            return Math.round(Math.sqrt(Math.pow(aQ.x - aR.x, 2) + Math.pow(aQ.y - aR.y, 2)))
        }

        function F(aT, aR) {
            var aQ = aT.x - aR.x;
            var aV = aR.y - aT.y;
            var aS = Math.atan2(aV, aQ);
            var aU = Math.round(aS * 180 / Math.PI);
            if (aU < 0) {
                aU = 360 - Math.abs(aU)
            }
            return aU
        }

        function ar(aR, aQ) {
            var aS = F(aR, aQ);
            if ((aS <= 45) && (aS >= 0)) {
                return m
            } else {
                if ((aS <= 360) && (aS >= 315)) {
                    return m
                } else {
                    if ((aS >= 135) && (aS <= 225)) {
                        return l
                    } else {
                        if ((aS > 45) && (aS < 135)) {
                            return s
                        } else {
                            return c
                        }
                    }
                }
            }
        }

        function B() {
            var aQ = new Date();
            return aQ.getTime()
        }

        function au(aQ) {
            aQ = d(aQ);
            var aS = aQ.offset();
            var aR = {
                left: aS.left,
                right: aS.left + aQ.outerWidth(),
                top: aS.top,
                bottom: aS.top + aQ.outerHeight()
            };
            return aR
        }

        function aC(aQ, aR) {
            return (aQ.x > aR.left && aQ.x < aR.right && aQ.y > aR.top && aQ.y < aR.bottom)
        }
    }
})(jQuery);

(function($) {
    function sc_setScroll(a, b, c) {
        return "transition" == c.transition && "swing" == b && (b = "ease"), {
            anims: [],
            duration: a,
            orgDuration: a,
            easing: b,
            startTime: getTime()
        }
    }

    function sc_startScroll(a, b) {
        for (var c = 0, d = a.anims.length; d > c; c++) {
            var e = a.anims[c];
            e && e[0][b.transition](e[1], a.duration, a.easing, e[2])
        }
    }

    function sc_stopScroll(a, b) {
        is_boolean(b) || (b = !0), is_object(a.pre) && sc_stopScroll(a.pre, b);
        for (var c = 0, d = a.anims.length; d > c; c++) {
            var e = a.anims[c];
            e[0].stop(!0), b && (e[0].css(e[1]), is_function(e[2]) && e[2]())
        }
        is_object(a.post) && sc_stopScroll(a.post, b)
    }

    function sc_afterScroll(a, b, c) {
        switch (b && b.remove(), c.fx) {
            case "fade":
            case "crossfade":
            case "cover-fade":
            case "uncover-fade":
                a.css("opacity", 1), a.css("filter", "")
        }
    }

    function sc_fireCallbacks(a, b, c, d, e) {
        if (b[c] && b[c].call(a, d), e[c].length)
            for (var f = 0, g = e[c].length; g > f; f++) e[c][f].call(a, d);
        return []
    }

    function sc_fireQueue(a, b, c) {
        return b.length && (a.trigger(cf_e(b[0][0], c), b[0][1]), b.shift()), b
    }

    function sc_hideHiddenItems(a) {
        a.each(function() {
            var a = $(this);
            a.data("_cfs_isHidden", a.is(":hidden")).hide()
        })
    }

    function sc_showHiddenItems(a) {
        a && a.each(function() {
            var a = $(this);
            a.data("_cfs_isHidden") || a.show()
        })
    }

    function sc_clearTimers(a) {
        return a.auto && clearTimeout(a.auto), a.progress && clearInterval(a.progress), a
    }

    function sc_mapCallbackArguments(a, b, c, d, e, f, g) {
        return {
            width: g.width,
            height: g.height,
            items: {
                old: a,
                skipped: b,
                visible: c
            },
            scroll: {
                items: d,
                direction: e,
                duration: f
            }
        }
    }

    function sc_getDuration(a, b, c, d) {
        var e = a.duration;
        return "none" == a.fx ? 0 : ("auto" == e ? e = b.scroll.duration / b.scroll.items * c : 10 > e && (e = d / e), 1 > e ? 0 : ("fade" == a.fx && (e /= 2), Math.round(e)))
    }

    function nv_showNavi(a, b, c) {
        var d = is_number(a.items.minimum) ? a.items.minimum : a.items.visible + 1;
        if ("show" == b || "hide" == b) var e = b;
        else if (d > b) {
            debug(c, "Not enough items (" + b + " total, " + d + " needed): Hiding navigation.");
            var e = "hide"
        } else var e = "show";
        var f = "show" == e ? "removeClass" : "addClass",
            g = cf_c("hidden", c);
        a.auto.button && a.auto.button[e]()[f](g), a.prev.button && a.prev.button[e]()[f](g), a.next.button && a.next.button[e]()[f](g), a.pagination.container && a.pagination.container[e]()[f](g)
    }

    function nv_enableNavi(a, b, c) {
        if (!a.circular && !a.infinite) {
            var d = "removeClass" == b || "addClass" == b ? b : !1,
                e = cf_c("disabled", c);
            if (a.auto.button && d && a.auto.button[d](e), a.prev.button) {
                var f = d || 0 == b ? "addClass" : "removeClass";
                a.prev.button[f](e)
            }
            if (a.next.button) {
                var f = d || b == a.items.visible ? "addClass" : "removeClass";
                a.next.button[f](e)
            }
        }
    }

    function go_getObject(a, b) {
        return is_function(b) ? b = b.call(a) : is_undefined(b) && (b = {}), b
    }

    function go_getItemsObject(a, b) {
        return b = go_getObject(a, b), is_number(b) ? b = {
            visible: b
        } : "variable" == b ? b = {
            visible: b,
            width: b,
            height: b
        } : is_object(b) || (b = {}), b
    }

    function go_getScrollObject(a, b) {
        return b = go_getObject(a, b), is_number(b) ? b = 50 >= b ? {
            items: b
        } : {
            duration: b
        } : is_string(b) ? b = {
            easing: b
        } : is_object(b) || (b = {}), b
    }

    function go_getNaviObject(a, b) {
        if (b = go_getObject(a, b), is_string(b)) {
            var c = cf_getKeyCode(b);
            b = -1 == c ? $(b) : c
        }
        return b
    }

    function go_getAutoObject(a, b) {
        return b = go_getNaviObject(a, b), is_jquery(b) ? b = {
            button: b
        } : is_boolean(b) ? b = {
            play: b
        } : is_number(b) && (b = {
            timeoutDuration: b
        }), b.progress && (is_string(b.progress) || is_jquery(b.progress)) && (b.progress = {
            bar: b.progress
        }), b
    }

    function go_complementAutoObject(a, b) {
        return is_function(b.button) && (b.button = b.button.call(a)), is_string(b.button) && (b.button = $(b.button)), is_boolean(b.play) || (b.play = !0), is_number(b.delay) || (b.delay = 0), is_undefined(b.pauseOnEvent) && (b.pauseOnEvent = !0), is_boolean(b.pauseOnResize) || (b.pauseOnResize = !0), is_number(b.timeoutDuration) || (b.timeoutDuration = 10 > b.duration ? 2500 : 5 * b.duration), b.progress && (is_function(b.progress.bar) && (b.progress.bar = b.progress.bar.call(a)), is_string(b.progress.bar) && (b.progress.bar = $(b.progress.bar)), b.progress.bar ? (is_function(b.progress.updater) || (b.progress.updater = $.fn.carouFredSel.progressbarUpdater), is_number(b.progress.interval) || (b.progress.interval = 50)) : b.progress = !1), b
    }

    function go_getPrevNextObject(a, b) {
        return b = go_getNaviObject(a, b), is_jquery(b) ? b = {
            button: b
        } : is_number(b) && (b = {
            key: b
        }), b
    }

    function go_complementPrevNextObject(a, b) {
        return is_function(b.button) && (b.button = b.button.call(a)), is_string(b.button) && (b.button = $(b.button)), is_string(b.key) && (b.key = cf_getKeyCode(b.key)), b
    }

    function go_getPaginationObject(a, b) {
        return b = go_getNaviObject(a, b), is_jquery(b) ? b = {
            container: b
        } : is_boolean(b) && (b = {
            keys: b
        }), b
    }

    function go_complementPaginationObject(a, b) {
        return is_function(b.container) && (b.container = b.container.call(a)), is_string(b.container) && (b.container = $(b.container)), is_number(b.items) || (b.items = !1), is_boolean(b.keys) || (b.keys = !1), is_function(b.anchorBuilder) || is_false(b.anchorBuilder) || (b.anchorBuilder = $.fn.carouFredSel.pageAnchorBuilder), is_number(b.deviation) || (b.deviation = 0), b
    }

    function go_getSwipeObject(a, b) {
        return is_function(b) && (b = b.call(a)), is_undefined(b) && (b = {
            onTouch: !1
        }), is_true(b) ? b = {
            onTouch: b
        } : is_number(b) && (b = {
            items: b
        }), b
    }

    function go_complementSwipeObject(a, b) {
        return is_boolean(b.onTouch) || (b.onTouch = !0), is_boolean(b.onMouse) || (b.onMouse = !1), is_object(b.options) || (b.options = {}), is_boolean(b.options.triggerOnTouchEnd) || (b.options.triggerOnTouchEnd = !1), b
    }

    function go_getMousewheelObject(a, b) {
        return is_function(b) && (b = b.call(a)), is_true(b) ? b = {} : is_number(b) ? b = {
            items: b
        } : is_undefined(b) && (b = !1), b
    }

    function go_complementMousewheelObject(a, b) {
        return b
    }

    function gn_getItemIndex(a, b, c, d, e) {
        if (is_string(a) && (a = $(a, e)), is_object(a) && (a = $(a, e)), is_jquery(a) ? (a = e.children().index(a), is_boolean(c) || (c = !1)) : is_boolean(c) || (c = !0), is_number(a) || (a = 0), is_number(b) || (b = 0), c && (a += d.first), a += b, d.total > 0) {
            for (; a >= d.total;) a -= d.total;
            for (; 0 > a;) a += d.total
        }
        return a
    }

    function gn_getVisibleItemsPrev(a, b, c) {
        for (var d = 0, e = 0, f = c; f >= 0; f--) {
            var g = a.eq(f);
            if (d += g.is(":visible") ? g[b.d.outerWidth](!0) : 0, d > b.maxDimension) return e;
            0 == f && (f = a.length), e++
        }
    }

    function gn_getVisibleItemsPrevFilter(a, b, c) {
        return gn_getItemsPrevFilter(a, b.items.filter, b.items.visibleConf.org, c)
    }

    function gn_getScrollItemsPrevFilter(a, b, c, d) {
        return gn_getItemsPrevFilter(a, b.items.filter, d, c)
    }

    function gn_getItemsPrevFilter(a, b, c, d) {
        for (var e = 0, f = 0, g = d, h = a.length; g >= 0; g--) {
            if (f++, f == h) return f;
            var i = a.eq(g);
            if (i.is(b) && (e++, e == c)) return f;
            0 == g && (g = h)
        }
    }

    function gn_getVisibleOrg(a, b) {
        return b.items.visibleConf.org || a.children().slice(0, b.items.visible).filter(b.items.filter).length
    }

    function gn_getVisibleItemsNext(a, b, c) {
        for (var d = 0, e = 0, f = c, g = a.length - 1; g >= f; f++) {
            var h = a.eq(f);
            if (d += h.is(":visible") ? h[b.d.outerWidth](!0) : 0, d > b.maxDimension) return e;
            if (e++, e == g + 1) return e;
            f == g && (f = -1)
        }
    }

    function gn_getVisibleItemsNextTestCircular(a, b, c, d) {
        var e = gn_getVisibleItemsNext(a, b, c);
        return b.circular || c + e > d && (e = d - c), e
    }

    function gn_getVisibleItemsNextFilter(a, b, c) {
        return gn_getItemsNextFilter(a, b.items.filter, b.items.visibleConf.org, c, b.circular)
    }

    function gn_getScrollItemsNextFilter(a, b, c, d) {
        return gn_getItemsNextFilter(a, b.items.filter, d + 1, c, b.circular) - 1
    }

    function gn_getItemsNextFilter(a, b, c, d) {
        for (var f = 0, g = 0, h = d, i = a.length - 1; i >= h; h++) {
            if (g++, g >= i) return g;
            var j = a.eq(h);
            if (j.is(b) && (f++, f == c)) return g;
            h == i && (h = -1)
        }
    }

    function gi_getCurrentItems(a, b) {
        return a.slice(0, b.items.visible)
    }

    function gi_getOldItemsPrev(a, b, c) {
        return a.slice(c, b.items.visibleConf.old + c)
    }

    function gi_getNewItemsPrev(a, b) {
        return a.slice(0, b.items.visible)
    }

    function gi_getOldItemsNext(a, b) {
        return a.slice(0, b.items.visibleConf.old)
    }

    function gi_getNewItemsNext(a, b, c) {
        return a.slice(c, b.items.visible + c)
    }

    function sz_storeMargin(a, b, c) {
        b.usePadding && (is_string(c) || (c = "_cfs_origCssMargin"), a.each(function() {
            var a = $(this),
                d = parseInt(a.css(b.d.marginRight), 10);
            is_number(d) || (d = 0), a.data(c, d)
        }))
    }

    function sz_resetMargin(a, b, c) {
        if (b.usePadding) {
            var d = is_boolean(c) ? c : !1;
            is_number(c) || (c = 0), sz_storeMargin(a, b, "_cfs_tempCssMargin"), a.each(function() {
                var a = $(this);
                a.css(b.d.marginRight, d ? a.data("_cfs_tempCssMargin") : c + a.data("_cfs_origCssMargin"))
            })
        }
    }

    function sz_storeOrigCss(a) {
        a.each(function() {
            var a = $(this);
            a.data("_cfs_origCss", a.attr("style") || "")
        })
    }

    function sz_restoreOrigCss(a) {
        a.each(function() {
            var a = $(this);
            a.attr("style", a.data("_cfs_origCss") || "")
        })
    }

    function sz_setResponsiveSizes(a, b) {
        var d = (a.items.visible, a.items[a.d.width]),
            e = a[a.d.height],
            f = is_percentage(e);
        b.each(function() {
            var b = $(this),
                c = d - ms_getPaddingBorderMargin(b, a, "Width");
            b[a.d.width](c), f && b[a.d.height](ms_getPercentage(c, e))
        })
    }

    function sz_setSizes(a, b) {
        var c = a.parent(),
            d = a.children(),
            e = gi_getCurrentItems(d, b),
            f = cf_mapWrapperSizes(ms_getSizes(e, b, !0), b, !1);
        if (c.css(f), b.usePadding) {
            var g = b.padding,
                h = g[b.d[1]];
            b.align && 0 > h && (h = 0);
            var i = e.last();
            i.css(b.d.marginRight, i.data("_cfs_origCssMargin") + h), a.css(b.d.top, g[b.d[0]]), a.css(b.d.left, g[b.d[3]])
        }
        return a.css(b.d.width, f[b.d.width] + 2 * ms_getTotalSize(d, b, "width")), a.css(b.d.height, ms_getLargestSize(d, b, "height")), f
    }

    function ms_getSizes(a, b, c) {
        return [ms_getTotalSize(a, b, "width", c), ms_getLargestSize(a, b, "height", c)]
    }

    function ms_getLargestSize(a, b, c, d) {
        return is_boolean(d) || (d = !1), is_number(b[b.d[c]]) && d ? b[b.d[c]] : is_number(b.items[b.d[c]]) ? b.items[b.d[c]] : (c = c.toLowerCase().indexOf("width") > -1 ? "outerWidth" : "outerHeight", ms_getTrueLargestSize(a, b, c))
    }

    function ms_getTrueLargestSize(a, b, c) {
        for (var d = 0, e = 0, f = a.length; f > e; e++) {
            var g = a.eq(e),
                h = g.is(":visible") ? g[b.d[c]](!0) : 0;
            h > d && (d = h)
        }
        return d
    }

    function ms_getTotalSize(a, b, c, d) {
        if (is_boolean(d) || (d = !1), is_number(b[b.d[c]]) && d) return b[b.d[c]];
        if (is_number(b.items[b.d[c]])) return b.items[b.d[c]] * a.length;
        for (var e = c.toLowerCase().indexOf("width") > -1 ? "outerWidth" : "outerHeight", f = 0, g = 0, h = a.length; h > g; g++) {
            var i = a.eq(g);
            f += i.is(":visible") ? i[b.d[e]](!0) : 0
        }
        return f
    }

    function ms_getParentSize(a, b, c) {
        var d = a.is(":visible");
        d && a.hide();
        var e = a.parent()[b.d[c]]();
        return d && a.show(), e
    }

    function ms_getMaxDimension(a, b) {
        return is_number(a[a.d.width]) ? a[a.d.width] : b
    }

    function ms_hasVariableSizes(a, b, c) {
        for (var d = !1, e = !1, f = 0, g = a.length; g > f; f++) {
            var h = a.eq(f),
                i = h.is(":visible") ? h[b.d[c]](!0) : 0;
            d === !1 ? d = i : d != i && (e = !0), 0 == d && (e = !0)
        }
        return e
    }

    function ms_getPaddingBorderMargin(a, b, c) {
        return a[b.d["outer" + c]](!0) - a[b.d[c.toLowerCase()]]()
    }

    function ms_getPercentage(a, b) {
        if (is_percentage(b)) {
            if (b = parseInt(b.slice(0, -1), 10), !is_number(b)) return a;
            a *= b / 100
        }
        return a
    }

    function cf_e(a, b, c, d, e) {
        return is_boolean(c) || (c = !0), is_boolean(d) || (d = !0), is_boolean(e) || (e = !1), c && (a = b.events.prefix + a), d && (a = a + "." + b.events.namespace), d && e && (a += b.serialNumber), a
    }

    function cf_c(a, b) {
        return is_string(b.classnames[a]) ? b.classnames[a] : a
    }

    function cf_mapWrapperSizes(a, b, c) {
        is_boolean(c) || (c = !0);
        var d = b.usePadding && c ? b.padding : [0, 0, 0, 0],
            e = {};
        return e[b.d.width] = a[0] + d[1] + d[3], e[b.d.height] = a[1] + d[0] + d[2], e
    }

    function cf_sortParams(a, b) {
        for (var c = [], d = 0, e = a.length; e > d; d++)
            for (var f = 0, g = b.length; g > f; f++)
                if (b[f].indexOf(typeof a[d]) > -1 && is_undefined(c[f])) {
                    c[f] = a[d];
                    break
                }
        return c
    }

    function cf_getPadding(a) {
        if (is_undefined(a)) return [0, 0, 0, 0];
        if (is_number(a)) return [a, a, a, a];
        if (is_string(a) && (a = a.split("px").join("").split("em").join("").split(" ")), !is_array(a)) return [0, 0, 0, 0];
        for (var b = 0; 4 > b; b++) a[b] = parseInt(a[b], 10);
        switch (a.length) {
            case 0:
                return [0, 0, 0, 0];
            case 1:
                return [a[0], a[0], a[0], a[0]];
            case 2:
                return [a[0], a[1], a[0], a[1]];
            case 3:
                return [a[0], a[1], a[2], a[1]];
            default:
                return [a[0], a[1], a[2], a[3]]
        }
    }

    function cf_getAlignPadding(a, b) {
        var c = is_number(b[b.d.width]) ? Math.ceil(b[b.d.width] - ms_getTotalSize(a, b, "width")) : 0;
        switch (b.align) {
            case "left":
                return [0, c];
            case "right":
                return [c, 0];
            case "center":
            default:
                return [Math.ceil(c / 2), Math.floor(c / 2)]
        }
    }

    function cf_getDimensions(a) {
        for (var b = [
                ["width", "innerWidth", "outerWidth", "height", "innerHeight", "outerHeight", "left", "top", "marginRight", 0, 1, 2, 3],
                ["height", "innerHeight", "outerHeight", "width", "innerWidth", "outerWidth", "top", "left", "marginBottom", 3, 2, 1, 0]
            ], c = b[0].length, d = "right" == a.direction || "left" == a.direction ? 0 : 1, e = {}, f = 0; c > f; f++) e[b[0][f]] = b[d][f];
        return e
    }

    function cf_getAdjust(a, b, c, d) {
        var e = a;
        if (is_function(c)) e = c.call(d, e);
        else if (is_string(c)) {
            var f = c.split("+"),
                g = c.split("-");
            if (g.length > f.length) var h = !0,
                i = g[0],
                j = g[1];
            else var h = !1,
                i = f[0],
                j = f[1];
            switch (i) {
                case "even":
                    e = 1 == a % 2 ? a - 1 : a;
                    break;
                case "odd":
                    e = 0 == a % 2 ? a - 1 : a;
                    break;
                default:
                    e = a
            }
            j = parseInt(j, 10), is_number(j) && (h && (j = -j), e += j)
        }
        return (!is_number(e) || 1 > e) && (e = 1), e
    }

    function cf_getItemsAdjust(a, b, c, d) {
        return cf_getItemAdjustMinMax(cf_getAdjust(a, b, c, d), b.items.visibleConf)
    }

    function cf_getItemAdjustMinMax(a, b) {
        return is_number(b.min) && b.min > a && (a = b.min), is_number(b.max) && a > b.max && (a = b.max), 1 > a && (a = 1), a
    }

    function cf_getSynchArr(a) {
        is_array(a) || (a = [
            [a]
        ]), is_array(a[0]) || (a = [a]);
        for (var b = 0, c = a.length; c > b; b++) is_string(a[b][0]) && (a[b][0] = $(a[b][0])), is_boolean(a[b][1]) || (a[b][1] = !0), is_boolean(a[b][2]) || (a[b][2] = !0), is_number(a[b][3]) || (a[b][3] = 0);
        return a
    }

    function cf_getKeyCode(a) {
        return "right" == a ? 39 : "left" == a ? 37 : "up" == a ? 38 : "down" == a ? 40 : -1
    }

    function cf_setCookie(a, b, c) {
        if (a) {
            var d = b.triggerHandler(cf_e("currentPosition", c));
            $.fn.carouFredSel.cookie.set(a, d)
        }
    }

    function cf_getCookie(a) {
        var b = $.fn.carouFredSel.cookie.get(a);
        return "" == b ? 0 : b
    }

    function in_mapCss(a, b) {
        for (var c = {}, d = 0, e = b.length; e > d; d++) c[b[d]] = a.css(b[d]);
        return c
    }

    function in_complementItems(a, b, c, d) {
        return is_object(a.visibleConf) || (a.visibleConf = {}), is_object(a.sizesConf) || (a.sizesConf = {}), 0 == a.start && is_number(d) && (a.start = d), is_object(a.visible) ? (a.visibleConf.min = a.visible.min, a.visibleConf.max = a.visible.max, a.visible = !1) : is_string(a.visible) ? ("variable" == a.visible ? a.visibleConf.variable = !0 : a.visibleConf.adjust = a.visible, a.visible = !1) : is_function(a.visible) && (a.visibleConf.adjust = a.visible, a.visible = !1), is_string(a.filter) || (a.filter = c.filter(":hidden").length > 0 ? ":visible" : "*"), a[b.d.width] || (b.responsive ? (debug(!0, "Set a " + b.d.width + " for the items!"), a[b.d.width] = ms_getTrueLargestSize(c, b, "outerWidth")) : a[b.d.width] = ms_hasVariableSizes(c, b, "outerWidth") ? "variable" : c[b.d.outerWidth](!0)), a[b.d.height] || (a[b.d.height] = ms_hasVariableSizes(c, b, "outerHeight") ? "variable" : c[b.d.outerHeight](!0)), a.sizesConf.width = a.width, a.sizesConf.height = a.height, a
    }

    function in_complementVisibleItems(a, b) {
        return "variable" == a.items[a.d.width] && (a.items.visibleConf.variable = !0), a.items.visibleConf.variable || (is_number(a[a.d.width]) ? a.items.visible = Math.floor(a[a.d.width] / a.items[a.d.width]) : (a.items.visible = Math.floor(b / a.items[a.d.width]), a[a.d.width] = a.items.visible * a.items[a.d.width], a.items.visibleConf.adjust || (a.align = !1)), ("Infinity" == a.items.visible || 1 > a.items.visible) && (debug(!0, 'Not a valid number of visible items: Set to "variable".'), a.items.visibleConf.variable = !0)), a
    }

    function in_complementPrimarySize(a, b, c) {
        return "auto" == a && (a = ms_getTrueLargestSize(c, b, "outerWidth")), a
    }

    function in_complementSecondarySize(a, b, c) {
        return "auto" == a && (a = ms_getTrueLargestSize(c, b, "outerHeight")), a || (a = b.items[b.d.height]), a
    }

    function in_getAlignPadding(a, b) {
        var c = cf_getAlignPadding(gi_getCurrentItems(b, a), a);
        return a.padding[a.d[1]] = c[1], a.padding[a.d[3]] = c[0], a
    }

    function in_getResponsiveValues(a, b) {
        var d = cf_getItemAdjustMinMax(Math.ceil(a[a.d.width] / a.items[a.d.width]), a.items.visibleConf);
        d > b.length && (d = b.length);
        var e = Math.floor(a[a.d.width] / d);
        return a.items.visible = d, a.items[a.d.width] = e, a[a.d.width] = d * e, a
    }

    function bt_pauseOnHoverConfig(a) {
        if (is_string(a)) var b = a.indexOf("immediate") > -1 ? !0 : !1,
            c = a.indexOf("resume") > -1 ? !0 : !1;
        else var b = c = !1;
        return [b, c]
    }

    function bt_mousesheelNumber(a) {
        return is_number(a) ? a : null
    }

    function is_null(a) {
        return null === a
    }

    function is_undefined(a) {
        return is_null(a) || a === void 0 || "" === a || "undefined" === a
    }

    function is_array(a) {
        return a instanceof Array
    }

    function is_jquery(a) {
        return a instanceof jQuery
    }

    function is_object(a) {
        return (a instanceof Object || "object" == typeof a) && !is_null(a) && !is_jquery(a) && !is_array(a) && !is_function(a)
    }

    function is_number(a) {
        return (a instanceof Number || "number" == typeof a) && !isNaN(a)
    }

    function is_string(a) {
        return (a instanceof String || "string" == typeof a) && !is_undefined(a) && !is_true(a) && !is_false(a)
    }

    function is_function(a) {
        return a instanceof Function || "function" == typeof a
    }

    function is_boolean(a) {
        return a instanceof Boolean || "boolean" == typeof a || is_true(a) || is_false(a)
    }

    function is_true(a) {
        return a === !0 || "true" === a
    }

    function is_false(a) {
        return a === !1 || "false" === a
    }

    function is_percentage(a) {
        return is_string(a) && "%" == a.slice(-1)
    }

    function getTime() {
        return (new Date).getTime()
    }

    function deprecated(a, b) {
        debug(!0, a + " is DEPRECATED, support for it will be removed. Use " + b + " instead.")
    }

    function debug(a, b) {
        if (!is_undefined(window.console) && !is_undefined(window.console.log)) {
            if (is_object(a)) {
                var c = " (" + a.selector + ")";
                a = a.debug
            } else var c = "";
            if (!a) return !1;
            b = is_string(b) ? "carouFredSel" + c + ": " + b : ["carouFredSel" + c + ":", b], window.console.log(b)
        }
        return !1
    }
    $.fn.carouFredSel || ($.fn.caroufredsel = $.fn.carouFredSel = function(options, configs) {
        if (0 == this.length) return debug(!0, 'No element found for "' + this.selector + '".'), this;
        if (this.length > 1) return this.each(function() {
            $(this).carouFredSel(options, configs)
        });
        var $cfs = this,
            $tt0 = this[0],
            starting_position = !1;
        $cfs.data("_cfs_isCarousel") && (starting_position = $cfs.triggerHandler("_cfs_triggerEvent", "currentPosition"), $cfs.trigger("_cfs_triggerEvent", ["destroy", !0]));
        var FN = {};
        FN._init = function(a, b, c) {
            a = go_getObject($tt0, a), a.items = go_getItemsObject($tt0, a.items), a.scroll = go_getScrollObject($tt0, a.scroll), a.auto = go_getAutoObject($tt0, a.auto), a.prev = go_getPrevNextObject($tt0, a.prev), a.next = go_getPrevNextObject($tt0, a.next), a.pagination = go_getPaginationObject($tt0, a.pagination), a.swipe = go_getSwipeObject($tt0, a.swipe), a.mousewheel = go_getMousewheelObject($tt0, a.mousewheel), b && (opts_orig = $.extend(!0, {}, $.fn.carouFredSel.defaults, a)), opts = $.extend(!0, {}, $.fn.carouFredSel.defaults, a), opts.d = cf_getDimensions(opts), crsl.direction = "up" == opts.direction || "left" == opts.direction ? "next" : "prev";
            var d = $cfs.children(),
                e = ms_getParentSize($wrp, opts, "width");
            if (is_true(opts.cookie) && (opts.cookie = "caroufredsel_cookie_" + conf.serialNumber), opts.maxDimension = ms_getMaxDimension(opts, e), opts.items = in_complementItems(opts.items, opts, d, c), opts[opts.d.width] = in_complementPrimarySize(opts[opts.d.width], opts, d), opts[opts.d.height] = in_complementSecondarySize(opts[opts.d.height], opts, d), opts.responsive && (is_percentage(opts[opts.d.width]) || (opts[opts.d.width] = "100%")), is_percentage(opts[opts.d.width]) && (crsl.upDateOnWindowResize = !0, crsl.primarySizePercentage = opts[opts.d.width], opts[opts.d.width] = ms_getPercentage(e, crsl.primarySizePercentage), opts.items.visible || (opts.items.visibleConf.variable = !0)), opts.responsive ? (opts.usePadding = !1, opts.padding = [0, 0, 0, 0], opts.align = !1, opts.items.visibleConf.variable = !1) : (opts.items.visible || (opts = in_complementVisibleItems(opts, e)), opts[opts.d.width] || (!opts.items.visibleConf.variable && is_number(opts.items[opts.d.width]) && "*" == opts.items.filter ? (opts[opts.d.width] = opts.items.visible * opts.items[opts.d.width], opts.align = !1) : opts[opts.d.width] = "variable"), is_undefined(opts.align) && (opts.align = is_number(opts[opts.d.width]) ? "center" : !1), opts.items.visibleConf.variable && (opts.items.visible = gn_getVisibleItemsNext(d, opts, 0))), "*" == opts.items.filter || opts.items.visibleConf.variable || (opts.items.visibleConf.org = opts.items.visible, opts.items.visible = gn_getVisibleItemsNextFilter(d, opts, 0)), opts.items.visible = cf_getItemsAdjust(opts.items.visible, opts, opts.items.visibleConf.adjust, $tt0), opts.items.visibleConf.old = opts.items.visible, opts.responsive) opts.items.visibleConf.min || (opts.items.visibleConf.min = opts.items.visible), opts.items.visibleConf.max || (opts.items.visibleConf.max = opts.items.visible), opts = in_getResponsiveValues(opts, d, e);
            else switch (opts.padding = cf_getPadding(opts.padding), "top" == opts.align ? opts.align = "left" : "bottom" == opts.align && (opts.align = "right"), opts.align) {
                case "center":
                case "left":
                case "right":
                    "variable" != opts[opts.d.width] && (opts = in_getAlignPadding(opts, d), opts.usePadding = !0);
                    break;
                default:
                    opts.align = !1, opts.usePadding = 0 == opts.padding[0] && 0 == opts.padding[1] && 0 == opts.padding[2] && 0 == opts.padding[3] ? !1 : !0
            }
            is_number(opts.scroll.duration) || (opts.scroll.duration = 500), is_undefined(opts.scroll.items) && (opts.scroll.items = opts.responsive || opts.items.visibleConf.variable || "*" != opts.items.filter ? "visible" : opts.items.visible), opts.auto = $.extend(!0, {}, opts.scroll, opts.auto), opts.prev = $.extend(!0, {}, opts.scroll, opts.prev), opts.next = $.extend(!0, {}, opts.scroll, opts.next), opts.pagination = $.extend(!0, {}, opts.scroll, opts.pagination), opts.auto = go_complementAutoObject($tt0, opts.auto), opts.prev = go_complementPrevNextObject($tt0, opts.prev), opts.next = go_complementPrevNextObject($tt0, opts.next), opts.pagination = go_complementPaginationObject($tt0, opts.pagination), opts.swipe = go_complementSwipeObject($tt0, opts.swipe), opts.mousewheel = go_complementMousewheelObject($tt0, opts.mousewheel), opts.synchronise && (opts.synchronise = cf_getSynchArr(opts.synchronise)), opts.auto.onPauseStart && (opts.auto.onTimeoutStart = opts.auto.onPauseStart, deprecated("auto.onPauseStart", "auto.onTimeoutStart")), opts.auto.onPausePause && (opts.auto.onTimeoutPause = opts.auto.onPausePause, deprecated("auto.onPausePause", "auto.onTimeoutPause")), opts.auto.onPauseEnd && (opts.auto.onTimeoutEnd = opts.auto.onPauseEnd, deprecated("auto.onPauseEnd", "auto.onTimeoutEnd")), opts.auto.pauseDuration && (opts.auto.timeoutDuration = opts.auto.pauseDuration, deprecated("auto.pauseDuration", "auto.timeoutDuration"))
        }, FN._build = function() {
            $cfs.data("_cfs_isCarousel", !0);
            var a = $cfs.children(),
                b = in_mapCss($cfs, ["textAlign", "float", "position", "top", "right", "bottom", "left", "zIndex", "width", "height", "marginTop", "marginRight", "marginBottom", "marginLeft"]),
                c = "relative";
            switch (b.position) {
                case "absolute":
                case "fixed":
                    c = b.position
            }
            "parent" == conf.wrapper ? sz_storeOrigCss($wrp) : $wrp.css(b), $wrp.css({
                overflow: "hidden",
                position: c
            }), sz_storeOrigCss($cfs), $cfs.data("_cfs_origCssZindex", b.zIndex), $cfs.css({
                textAlign: "left",
                "float": "none",
                position: "absolute",
                top: 0,
                right: "auto",
                bottom: "auto",
                left: 0,
                marginTop: 0,
                marginRight: 0,
                marginBottom: 0,
                marginLeft: 0
            }), sz_storeMargin(a, opts), sz_storeOrigCss(a), opts.responsive && sz_setResponsiveSizes(opts, a)
        }, FN._bind_events = function() {
            FN._unbind_events(), $cfs.bind(cf_e("stop", conf), function(a, b) {
                return a.stopPropagation(), crsl.isStopped || opts.auto.button && opts.auto.button.addClass(cf_c("stopped", conf)), crsl.isStopped = !0, opts.auto.play && (opts.auto.play = !1, $cfs.trigger(cf_e("pause", conf), b)), !0
            }), $cfs.bind(cf_e("finish", conf), function(a) {
                return a.stopPropagation(), crsl.isScrolling && sc_stopScroll(scrl), !0
            }), $cfs.bind(cf_e("pause", conf), function(a, b, c) {
                if (a.stopPropagation(), tmrs = sc_clearTimers(tmrs), b && crsl.isScrolling) {
                    scrl.isStopped = !0;
                    var d = getTime() - scrl.startTime;
                    scrl.duration -= d, scrl.pre && (scrl.pre.duration -= d), scrl.post && (scrl.post.duration -= d), sc_stopScroll(scrl, !1)
                }
                if (crsl.isPaused || crsl.isScrolling || c && (tmrs.timePassed += getTime() - tmrs.startTime), crsl.isPaused || opts.auto.button && opts.auto.button.addClass(cf_c("paused", conf)), crsl.isPaused = !0, opts.auto.onTimeoutPause) {
                    var e = opts.auto.timeoutDuration - tmrs.timePassed,
                        f = 100 - Math.ceil(100 * e / opts.auto.timeoutDuration);
                    opts.auto.onTimeoutPause.call($tt0, f, e)
                }
                return !0
            }), $cfs.bind(cf_e("play", conf), function(a, b, c, d) {
                a.stopPropagation(), tmrs = sc_clearTimers(tmrs);
                var e = [b, c, d],
                    f = ["string", "number", "boolean"],
                    g = cf_sortParams(e, f);
                if (b = g[0], c = g[1], d = g[2], "prev" != b && "next" != b && (b = crsl.direction), is_number(c) || (c = 0), is_boolean(d) || (d = !1), d && (crsl.isStopped = !1, opts.auto.play = !0), !opts.auto.play) return a.stopImmediatePropagation(), debug(conf, "Carousel stopped: Not scrolling.");
                crsl.isPaused && opts.auto.button && (opts.auto.button.removeClass(cf_c("stopped", conf)), opts.auto.button.removeClass(cf_c("paused", conf))), crsl.isPaused = !1, tmrs.startTime = getTime();
                var h = opts.auto.timeoutDuration + c;
                return dur2 = h - tmrs.timePassed, perc = 100 - Math.ceil(100 * dur2 / h), opts.auto.progress && (tmrs.progress = setInterval(function() {
                    var a = getTime() - tmrs.startTime + tmrs.timePassed,
                        b = Math.ceil(100 * a / h);
                    opts.auto.progress.updater.call(opts.auto.progress.bar[0], b)
                }, opts.auto.progress.interval)), tmrs.auto = setTimeout(function() {
                    opts.auto.progress && opts.auto.progress.updater.call(opts.auto.progress.bar[0], 100), opts.auto.onTimeoutEnd && opts.auto.onTimeoutEnd.call($tt0, perc, dur2), crsl.isScrolling ? $cfs.trigger(cf_e("play", conf), b) : $cfs.trigger(cf_e(b, conf), opts.auto)
                }, dur2), opts.auto.onTimeoutStart && opts.auto.onTimeoutStart.call($tt0, perc, dur2), !0
            }), $cfs.bind(cf_e("resume", conf), function(a) {
                return a.stopPropagation(), scrl.isStopped ? (scrl.isStopped = !1, crsl.isPaused = !1, crsl.isScrolling = !0, scrl.startTime = getTime(), sc_startScroll(scrl, conf)) : $cfs.trigger(cf_e("play", conf)), !0
            }), $cfs.bind(cf_e("prev", conf) + " " + cf_e("next", conf), function(a, b, c, d, e) {
                if (a.stopPropagation(), crsl.isStopped || $cfs.is(":hidden")) return a.stopImmediatePropagation(), debug(conf, "Carousel stopped or hidden: Not scrolling.");
                var f = is_number(opts.items.minimum) ? opts.items.minimum : opts.items.visible + 1;
                if (f > itms.total) return a.stopImmediatePropagation(), debug(conf, "Not enough items (" + itms.total + " total, " + f + " needed): Not scrolling.");
                var g = [b, c, d, e],
                    h = ["object", "number/string", "function", "boolean"],
                    i = cf_sortParams(g, h);
                b = i[0], c = i[1], d = i[2], e = i[3];
                var j = a.type.slice(conf.events.prefix.length);
                if (is_object(b) || (b = {}), is_function(d) && (b.onAfter = d), is_boolean(e) && (b.queue = e), b = $.extend(!0, {}, opts[j], b), b.conditions && !b.conditions.call($tt0, j)) return a.stopImmediatePropagation(), debug(conf, 'Callback "conditions" returned false.');
                if (!is_number(c)) {
                    if ("*" != opts.items.filter) c = "visible";
                    else
                        for (var k = [c, b.items, opts[j].items], i = 0, l = k.length; l > i; i++)
                            if (is_number(k[i]) || "page" == k[i] || "visible" == k[i]) {
                                c = k[i];
                                break
                            } switch (c) {
                        case "page":
                            return a.stopImmediatePropagation(), $cfs.triggerHandler(cf_e(j + "Page", conf), [b, d]);
                        case "visible":
                            opts.items.visibleConf.variable || "*" != opts.items.filter || (c = opts.items.visible)
                    }
                }
                if (scrl.isStopped) return $cfs.trigger(cf_e("resume", conf)), $cfs.trigger(cf_e("queue", conf), [j, [b, c, d]]), a.stopImmediatePropagation(), debug(conf, "Carousel resumed scrolling.");
                if (b.duration > 0 && crsl.isScrolling) return b.queue && ("last" == b.queue && (queu = []), ("first" != b.queue || 0 == queu.length) && $cfs.trigger(cf_e("queue", conf), [j, [b, c, d]])), a.stopImmediatePropagation(), debug(conf, "Carousel currently scrolling.");
                if (tmrs.timePassed = 0, $cfs.trigger(cf_e("slide_" + j, conf), [b, c]), opts.synchronise)
                    for (var m = opts.synchronise, n = [b, c], o = 0, l = m.length; l > o; o++) {
                        var p = j;
                        m[o][2] || (p = "prev" == p ? "next" : "prev"), m[o][1] || (n[0] = m[o][0].triggerHandler("_cfs_triggerEvent", ["configuration", p])), n[1] = c + m[o][3], m[o][0].trigger("_cfs_triggerEvent", ["slide_" + p, n])
                    }
                return !0
            }), $cfs.bind(cf_e("slide_prev", conf), function(a, b, c) {
                a.stopPropagation();
                var d = $cfs.children();
                if (!opts.circular && 0 == itms.first) return opts.infinite && $cfs.trigger(cf_e("next", conf), itms.total - 1), a.stopImmediatePropagation();
                if (sz_resetMargin(d, opts), !is_number(c)) {
                    if (opts.items.visibleConf.variable) c = gn_getVisibleItemsPrev(d, opts, itms.total - 1);
                    else if ("*" != opts.items.filter) {
                        var e = is_number(b.items) ? b.items : gn_getVisibleOrg($cfs, opts);
                        c = gn_getScrollItemsPrevFilter(d, opts, itms.total - 1, e)
                    } else c = opts.items.visible;
                    c = cf_getAdjust(c, opts, b.items, $tt0)
                }
                if (opts.circular || itms.total - c < itms.first && (c = itms.total - itms.first), opts.items.visibleConf.old = opts.items.visible, opts.items.visibleConf.variable) {
                    var f = cf_getItemsAdjust(gn_getVisibleItemsNext(d, opts, itms.total - c), opts, opts.items.visibleConf.adjust, $tt0);
                    f >= opts.items.visible + c && itms.total > c && (c++, f = cf_getItemsAdjust(gn_getVisibleItemsNext(d, opts, itms.total - c), opts, opts.items.visibleConf.adjust, $tt0)), opts.items.visible = f
                } else if ("*" != opts.items.filter) {
                    var f = gn_getVisibleItemsNextFilter(d, opts, itms.total - c);
                    opts.items.visible = cf_getItemsAdjust(f, opts, opts.items.visibleConf.adjust, $tt0)
                }
                if (sz_resetMargin(d, opts, !0), 0 == c) return a.stopImmediatePropagation(), debug(conf, "0 items to scroll: Not scrolling.");
                for (debug(conf, "Scrolling " + c + " items backward."), itms.first += c; itms.first >= itms.total;) itms.first -= itms.total;
                opts.circular || (0 == itms.first && b.onEnd && b.onEnd.call($tt0, "prev"), opts.infinite || nv_enableNavi(opts, itms.first, conf)), $cfs.children().slice(itms.total - c, itms.total).prependTo($cfs), itms.total < opts.items.visible + c && $cfs.children().slice(0, opts.items.visible + c - itms.total).clone(!0).appendTo($cfs);
                var d = $cfs.children(),
                    g = gi_getOldItemsPrev(d, opts, c),
                    h = gi_getNewItemsPrev(d, opts),
                    i = d.eq(c - 1),
                    j = g.last(),
                    k = h.last();
                sz_resetMargin(d, opts);
                var l = 0,
                    m = 0;
                if (opts.align) {
                    var n = cf_getAlignPadding(h, opts);
                    l = n[0], m = n[1]
                }
                var o = 0 > l ? opts.padding[opts.d[3]] : 0,
                    p = !1,
                    q = $();
                if (c > opts.items.visible && (q = d.slice(opts.items.visibleConf.old, c), "directscroll" == b.fx)) {
                    var r = opts.items[opts.d.width];
                    p = q, i = k, sc_hideHiddenItems(p), opts.items[opts.d.width] = "variable"
                }
                var s = !1,
                    t = ms_getTotalSize(d.slice(0, c), opts, "width"),
                    u = cf_mapWrapperSizes(ms_getSizes(h, opts, !0), opts, !opts.usePadding),
                    v = 0,
                    w = {},
                    x = {},
                    y = {},
                    z = {},
                    A = {},
                    B = {},
                    C = {},
                    D = sc_getDuration(b, opts, c, t);
                switch (b.fx) {
                    case "cover":
                    case "cover-fade":
                        v = ms_getTotalSize(d.slice(0, opts.items.visible), opts, "width")
                }
                p && (opts.items[opts.d.width] = r), sz_resetMargin(d, opts, !0), m >= 0 && sz_resetMargin(j, opts, opts.padding[opts.d[1]]), l >= 0 && sz_resetMargin(i, opts, opts.padding[opts.d[3]]), opts.align && (opts.padding[opts.d[1]] = m, opts.padding[opts.d[3]] = l), B[opts.d.left] = -(t - o), C[opts.d.left] = -(v - o), x[opts.d.left] = u[opts.d.width];
                var E = function() {},
                    F = function() {},
                    G = function() {},
                    H = function() {},
                    I = function() {},
                    J = function() {},
                    K = function() {},
                    L = function() {},
                    M = function() {},
                    N = function() {},
                    O = function() {};
                switch (b.fx) {
                    case "crossfade":
                    case "cover":
                    case "cover-fade":
                    case "uncover":
                    case "uncover-fade":
                        s = $cfs.clone(!0).appendTo($wrp)
                }
                switch (b.fx) {
                    case "crossfade":
                    case "uncover":
                    case "uncover-fade":
                        s.children().slice(0, c).remove(), s.children().slice(opts.items.visibleConf.old).remove();
                        break;
                    case "cover":
                    case "cover-fade":
                        s.children().slice(opts.items.visible).remove(), s.css(C)
                }
                if ($cfs.css(B), scrl = sc_setScroll(D, b.easing, conf), w[opts.d.left] = opts.usePadding ? opts.padding[opts.d[3]] : 0, ("variable" == opts[opts.d.width] || "variable" == opts[opts.d.height]) && (E = function() {
                        $wrp.css(u)
                    }, F = function() {
                        scrl.anims.push([$wrp, u])
                    }), opts.usePadding) {
                    switch (k.not(i).length && (y[opts.d.marginRight] = i.data("_cfs_origCssMargin"), 0 > l ? i.css(y) : (K = function() {
                        i.css(y)
                    }, L = function() {
                        scrl.anims.push([i, y])
                    })), b.fx) {
                        case "cover":
                        case "cover-fade":
                            s.children().eq(c - 1).css(y)
                    }
                    k.not(j).length && (z[opts.d.marginRight] = j.data("_cfs_origCssMargin"), G = function() {
                        j.css(z)
                    }, H = function() {
                        scrl.anims.push([j, z])
                    }), m >= 0 && (A[opts.d.marginRight] = k.data("_cfs_origCssMargin") + opts.padding[opts.d[1]], I = function() {
                        k.css(A)
                    }, J = function() {
                        scrl.anims.push([k, A])
                    })
                }
                O = function() {
                    $cfs.css(w)
                };
                var P = opts.items.visible + c - itms.total;
                N = function() {
                    if (P > 0 && ($cfs.children().slice(itms.total).remove(), g = $($cfs.children().slice(itms.total - (opts.items.visible - P)).get().concat($cfs.children().slice(0, P).get()))), sc_showHiddenItems(p), opts.usePadding) {
                        var a = $cfs.children().eq(opts.items.visible + c - 1);
                        a.css(opts.d.marginRight, a.data("_cfs_origCssMargin"))
                    }
                };
                var Q = sc_mapCallbackArguments(g, q, h, c, "prev", D, u);
                switch (M = function() {
                    sc_afterScroll($cfs, s, b), crsl.isScrolling = !1, clbk.onAfter = sc_fireCallbacks($tt0, b, "onAfter", Q, clbk), queu = sc_fireQueue($cfs, queu, conf), crsl.isPaused || $cfs.trigger(cf_e("play", conf))
                }, crsl.isScrolling = !0, tmrs = sc_clearTimers(tmrs), clbk.onBefore = sc_fireCallbacks($tt0, b, "onBefore", Q, clbk), b.fx) {
                    case "none":
                        $cfs.css(w), E(), G(), I(), K(), O(), N(), M();
                        break;
                    case "fade":
                        scrl.anims.push([$cfs, {
                            opacity: 0
                        }, function() {
                            E(), G(), I(), K(), O(), N(), scrl = sc_setScroll(D, b.easing, conf), scrl.anims.push([$cfs, {
                                opacity: 1
                            }, M]), sc_startScroll(scrl, conf)
                        }]);
                        break;
                    case "crossfade":
                        $cfs.css({
                            opacity: 0
                        }), scrl.anims.push([s, {
                            opacity: 0
                        }]), scrl.anims.push([$cfs, {
                            opacity: 1
                        }, M]), F(), G(), I(), K(), O(), N();
                        break;
                    case "cover":
                        scrl.anims.push([s, w, function() {
                            G(), I(), K(), O(), N(), M()
                        }]), F();
                        break;
                    case "cover-fade":
                        scrl.anims.push([$cfs, {
                            opacity: 0
                        }]), scrl.anims.push([s, w, function() {
                            G(), I(), K(), O(), N(), M()
                        }]), F();
                        break;
                    case "uncover":
                        scrl.anims.push([s, x, M]), F(), G(), I(), K(), O(), N();
                        break;
                    case "uncover-fade":
                        $cfs.css({
                            opacity: 0
                        }), scrl.anims.push([$cfs, {
                            opacity: 1
                        }]), scrl.anims.push([s, x, M]), F(), G(), I(), K(), O(), N();
                        break;
                    default:
                        scrl.anims.push([$cfs, w, function() {
                            N(), M()
                        }]), F(), H(), J(), L()
                }
                return sc_startScroll(scrl, conf), cf_setCookie(opts.cookie, $cfs, conf), $cfs.trigger(cf_e("updatePageStatus", conf), [!1, u]), !0
            }), $cfs.bind(cf_e("slide_next", conf), function(a, b, c) {
                a.stopPropagation();
                var d = $cfs.children();
                if (!opts.circular && itms.first == opts.items.visible) return opts.infinite && $cfs.trigger(cf_e("prev", conf), itms.total - 1), a.stopImmediatePropagation();
                if (sz_resetMargin(d, opts), !is_number(c)) {
                    if ("*" != opts.items.filter) {
                        var e = is_number(b.items) ? b.items : gn_getVisibleOrg($cfs, opts);
                        c = gn_getScrollItemsNextFilter(d, opts, 0, e)
                    } else c = opts.items.visible;
                    c = cf_getAdjust(c, opts, b.items, $tt0)
                }
                var f = 0 == itms.first ? itms.total : itms.first;
                if (!opts.circular) {
                    if (opts.items.visibleConf.variable) var g = gn_getVisibleItemsNext(d, opts, c),
                        e = gn_getVisibleItemsPrev(d, opts, f - 1);
                    else var g = opts.items.visible,
                        e = opts.items.visible;
                    c + g > f && (c = f - e)
                }
                if (opts.items.visibleConf.old = opts.items.visible, opts.items.visibleConf.variable) {
                    for (var g = cf_getItemsAdjust(gn_getVisibleItemsNextTestCircular(d, opts, c, f), opts, opts.items.visibleConf.adjust, $tt0); opts.items.visible - c >= g && itms.total > c;) c++, g = cf_getItemsAdjust(gn_getVisibleItemsNextTestCircular(d, opts, c, f), opts, opts.items.visibleConf.adjust, $tt0);
                    opts.items.visible = g
                } else if ("*" != opts.items.filter) {
                    var g = gn_getVisibleItemsNextFilter(d, opts, c);
                    opts.items.visible = cf_getItemsAdjust(g, opts, opts.items.visibleConf.adjust, $tt0)
                }
                if (sz_resetMargin(d, opts, !0), 0 == c) return a.stopImmediatePropagation(), debug(conf, "0 items to scroll: Not scrolling.");
                for (debug(conf, "Scrolling " + c + " items forward."), itms.first -= c; 0 > itms.first;) itms.first += itms.total;
                opts.circular || (itms.first == opts.items.visible && b.onEnd && b.onEnd.call($tt0, "next"), opts.infinite || nv_enableNavi(opts, itms.first, conf)), itms.total < opts.items.visible + c && $cfs.children().slice(0, opts.items.visible + c - itms.total).clone(!0).appendTo($cfs);
                var d = $cfs.children(),
                    h = gi_getOldItemsNext(d, opts),
                    i = gi_getNewItemsNext(d, opts, c),
                    j = d.eq(c - 1),
                    k = h.last(),
                    l = i.last();
                sz_resetMargin(d, opts);
                var m = 0,
                    n = 0;
                if (opts.align) {
                    var o = cf_getAlignPadding(i, opts);
                    m = o[0], n = o[1]
                }
                var p = !1,
                    q = $();
                if (c > opts.items.visibleConf.old && (q = d.slice(opts.items.visibleConf.old, c), "directscroll" == b.fx)) {
                    var r = opts.items[opts.d.width];
                    p = q, j = k, sc_hideHiddenItems(p), opts.items[opts.d.width] = "variable"
                }
                var s = !1,
                    t = ms_getTotalSize(d.slice(0, c), opts, "width"),
                    u = cf_mapWrapperSizes(ms_getSizes(i, opts, !0), opts, !opts.usePadding),
                    v = 0,
                    w = {},
                    x = {},
                    y = {},
                    z = {},
                    A = {},
                    B = sc_getDuration(b, opts, c, t);
                switch (b.fx) {
                    case "uncover":
                    case "uncover-fade":
                        v = ms_getTotalSize(d.slice(0, opts.items.visibleConf.old), opts, "width")
                }
                p && (opts.items[opts.d.width] = r), opts.align && 0 > opts.padding[opts.d[1]] && (opts.padding[opts.d[1]] = 0), sz_resetMargin(d, opts, !0), sz_resetMargin(k, opts, opts.padding[opts.d[1]]), opts.align && (opts.padding[opts.d[1]] = n, opts.padding[opts.d[3]] = m), A[opts.d.left] = opts.usePadding ? opts.padding[opts.d[3]] : 0;
                var C = function() {},
                    D = function() {},
                    E = function() {},
                    F = function() {},
                    G = function() {},
                    H = function() {},
                    I = function() {},
                    J = function() {},
                    K = function() {};
                switch (b.fx) {
                    case "crossfade":
                    case "cover":
                    case "cover-fade":
                    case "uncover":
                    case "uncover-fade":
                        s = $cfs.clone(!0).appendTo($wrp), s.children().slice(opts.items.visibleConf.old).remove()
                }
                switch (b.fx) {
                    case "crossfade":
                    case "cover":
                    case "cover-fade":
                        $cfs.css("zIndex", 1), s.css("zIndex", 0)
                }
                if (scrl = sc_setScroll(B, b.easing, conf), w[opts.d.left] = -t, x[opts.d.left] = -v, 0 > m && (w[opts.d.left] += m), ("variable" == opts[opts.d.width] || "variable" == opts[opts.d.height]) && (C = function() {
                        $wrp.css(u)
                    }, D = function() {
                        scrl.anims.push([$wrp, u])
                    }), opts.usePadding) {
                    var L = l.data("_cfs_origCssMargin");
                    n >= 0 && (L += opts.padding[opts.d[1]]), l.css(opts.d.marginRight, L), j.not(k).length && (z[opts.d.marginRight] = k.data("_cfs_origCssMargin")), E = function() {
                        k.css(z)
                    }, F = function() {
                        scrl.anims.push([k, z])
                    };
                    var M = j.data("_cfs_origCssMargin");
                    m > 0 && (M += opts.padding[opts.d[3]]), y[opts.d.marginRight] = M, G = function() {
                        j.css(y)
                    }, H = function() {
                        scrl.anims.push([j, y])
                    }
                }
                K = function() {
                    $cfs.css(A)
                };
                var N = opts.items.visible + c - itms.total;
                J = function() {
                    N > 0 && $cfs.children().slice(itms.total).remove();
                    var a = $cfs.children().slice(0, c).appendTo($cfs).last();
                    if (N > 0 && (i = gi_getCurrentItems(d, opts)), sc_showHiddenItems(p), opts.usePadding) {
                        if (itms.total < opts.items.visible + c) {
                            var b = $cfs.children().eq(opts.items.visible - 1);
                            b.css(opts.d.marginRight, b.data("_cfs_origCssMargin") + opts.padding[opts.d[1]])
                        }
                        a.css(opts.d.marginRight, a.data("_cfs_origCssMargin"))
                    }
                };
                var O = sc_mapCallbackArguments(h, q, i, c, "next", B, u);
                switch (I = function() {
                    $cfs.css("zIndex", $cfs.data("_cfs_origCssZindex")), sc_afterScroll($cfs, s, b), crsl.isScrolling = !1, clbk.onAfter = sc_fireCallbacks($tt0, b, "onAfter", O, clbk), queu = sc_fireQueue($cfs, queu, conf), crsl.isPaused || $cfs.trigger(cf_e("play", conf))
                }, crsl.isScrolling = !0, tmrs = sc_clearTimers(tmrs), clbk.onBefore = sc_fireCallbacks($tt0, b, "onBefore", O, clbk), b.fx) {
                    case "none":
                        $cfs.css(w), C(), E(), G(), K(), J(), I();
                        break;
                    case "fade":
                        scrl.anims.push([$cfs, {
                            opacity: 0
                        }, function() {
                            C(), E(), G(), K(), J(), scrl = sc_setScroll(B, b.easing, conf), scrl.anims.push([$cfs, {
                                opacity: 1
                            }, I]), sc_startScroll(scrl, conf)
                        }]);
                        break;
                    case "crossfade":
                        $cfs.css({
                            opacity: 0
                        }), scrl.anims.push([s, {
                            opacity: 0
                        }]), scrl.anims.push([$cfs, {
                            opacity: 1
                        }, I]), D(), E(), G(), K(), J();
                        break;
                    case "cover":
                        $cfs.css(opts.d.left, $wrp[opts.d.width]()), scrl.anims.push([$cfs, A, I]), D(), E(), G(), J();
                        break;
                    case "cover-fade":
                        $cfs.css(opts.d.left, $wrp[opts.d.width]()), scrl.anims.push([s, {
                            opacity: 0
                        }]), scrl.anims.push([$cfs, A, I]), D(), E(), G(), J();
                        break;
                    case "uncover":
                        scrl.anims.push([s, x, I]), D(), E(), G(), K(), J();
                        break;
                    case "uncover-fade":
                        $cfs.css({
                            opacity: 0
                        }), scrl.anims.push([$cfs, {
                            opacity: 1
                        }]), scrl.anims.push([s, x, I]), D(), E(), G(), K(), J();
                        break;
                    default:
                        scrl.anims.push([$cfs, w, function() {
                            K(), J(), I()
                        }]), D(), F(), H()
                }
                return sc_startScroll(scrl, conf), cf_setCookie(opts.cookie, $cfs, conf), $cfs.trigger(cf_e("updatePageStatus", conf), [!1, u]), !0
            }), $cfs.bind(cf_e("slideTo", conf), function(a, b, c, d, e, f, g) {
                a.stopPropagation();
                var h = [b, c, d, e, f, g],
                    i = ["string/number/object", "number", "boolean", "object", "string", "function"],
                    j = cf_sortParams(h, i);
                return e = j[3], f = j[4], g = j[5], b = gn_getItemIndex(j[0], j[1], j[2], itms, $cfs), 0 == b ? !1 : (is_object(e) || (e = !1), "prev" != f && "next" != f && (f = opts.circular ? itms.total / 2 >= b ? "next" : "prev" : 0 == itms.first || itms.first > b ? "next" : "prev"), "prev" == f && (b = itms.total - b), $cfs.trigger(cf_e(f, conf), [e, b, g]), !0)
            }), $cfs.bind(cf_e("prevPage", conf), function(a, b, c) {
                a.stopPropagation();
                var d = $cfs.triggerHandler(cf_e("currentPage", conf));
                return $cfs.triggerHandler(cf_e("slideToPage", conf), [d - 1, b, "prev", c])
            }), $cfs.bind(cf_e("nextPage", conf), function(a, b, c) {
                a.stopPropagation();
                var d = $cfs.triggerHandler(cf_e("currentPage", conf));
                return $cfs.triggerHandler(cf_e("slideToPage", conf), [d + 1, b, "next", c])
            }), $cfs.bind(cf_e("slideToPage", conf), function(a, b, c, d, e) {
                a.stopPropagation(), is_number(b) || (b = $cfs.triggerHandler(cf_e("currentPage", conf)));
                var f = opts.pagination.items || opts.items.visible,
                    g = Math.ceil(itms.total / f) - 1;
                return 0 > b && (b = g), b > g && (b = 0), $cfs.triggerHandler(cf_e("slideTo", conf), [b * f, 0, !0, c, d, e])
            }), $cfs.bind(cf_e("jumpToStart", conf), function(a, b) {
                if (a.stopPropagation(), b = b ? gn_getItemIndex(b, 0, !0, itms, $cfs) : 0, b += itms.first, 0 != b) {
                    if (itms.total > 0)
                        for (; b > itms.total;) b -= itms.total;
                    $cfs.prepend($cfs.children().slice(b, itms.total))
                }
                return !0
            }), $cfs.bind(cf_e("synchronise", conf), function(a, b) {
                if (a.stopPropagation(), b) b = cf_getSynchArr(b);
                else {
                    if (!opts.synchronise) return debug(conf, "No carousel to synchronise.");
                    b = opts.synchronise
                }
                for (var c = $cfs.triggerHandler(cf_e("currentPosition", conf)), d = !0, e = 0, f = b.length; f > e; e++) b[e][0].triggerHandler(cf_e("slideTo", conf), [c, b[e][3], !0]) || (d = !1);
                return d
            }), $cfs.bind(cf_e("queue", conf), function(a, b, c) {
                return a.stopPropagation(), is_function(b) ? b.call($tt0, queu) : is_array(b) ? queu = b : is_undefined(b) || queu.push([b, c]), queu
            }), $cfs.bind(cf_e("insertItem", conf), function(a, b, c, d, e) {
                a.stopPropagation();
                var f = [b, c, d, e],
                    g = ["string/object", "string/number/object", "boolean", "number"],
                    h = cf_sortParams(f, g);
                if (b = h[0], c = h[1], d = h[2], e = h[3], is_object(b) && !is_jquery(b) ? b = $(b) : is_string(b) && (b = $(b)), !is_jquery(b) || 0 == b.length) return debug(conf, "Not a valid object.");
                is_undefined(c) && (c = "end"), sz_storeMargin(b, opts), sz_storeOrigCss(b);
                var i = c,
                    j = "before";
                "end" == c ? d ? (0 == itms.first ? (c = itms.total - 1, j = "after") : (c = itms.first, itms.first += b.length), 0 > c && (c = 0)) : (c = itms.total - 1, j = "after") : c = gn_getItemIndex(c, e, d, itms, $cfs);
                var k = $cfs.children().eq(c);
                return k.length ? k[j](b) : (debug(conf, "Correct insert-position not found! Appending item to the end."), $cfs.append(b)), "end" == i || d || itms.first > c && (itms.first += b.length), itms.total = $cfs.children().length, itms.first >= itms.total && (itms.first -= itms.total), $cfs.trigger(cf_e("updateSizes", conf)), $cfs.trigger(cf_e("linkAnchors", conf)), !0
            }), $cfs.bind(cf_e("removeItem", conf), function(a, b, c, d) {
                a.stopPropagation();
                var e = [b, c, d],
                    f = ["string/number/object", "boolean", "number"],
                    g = cf_sortParams(e, f);
                if (b = g[0], c = g[1], d = g[2], b instanceof $ && b.length > 1) return i = $(), b.each(function() {
                    var e = $cfs.trigger(cf_e("removeItem", conf), [$(this), c, d]);
                    e && (i = i.add(e))
                }), i;
                if (is_undefined(b) || "end" == b) i = $cfs.children().last();
                else {
                    b = gn_getItemIndex(b, d, c, itms, $cfs);
                    var i = $cfs.children().eq(b);
                    i.length && itms.first > b && (itms.first -= i.length)
                }
                return i && i.length && (i.detach(), itms.total = $cfs.children().length, $cfs.trigger(cf_e("updateSizes", conf))), i
            }), $cfs.bind(cf_e("onBefore", conf) + " " + cf_e("onAfter", conf), function(a, b) {
                a.stopPropagation();
                var c = a.type.slice(conf.events.prefix.length);
                return is_array(b) && (clbk[c] = b), is_function(b) && clbk[c].push(b), clbk[c]
            }), $cfs.bind(cf_e("currentPosition", conf), function(a, b) {
                if (a.stopPropagation(), 0 == itms.first) var c = 0;
                else var c = itms.total - itms.first;
                return is_function(b) && b.call($tt0, c), c
            }), $cfs.bind(cf_e("currentPage", conf), function(a, b) {
                a.stopPropagation();
                var e, c = opts.pagination.items || opts.items.visible,
                    d = Math.ceil(itms.total / c - 1);
                return e = 0 == itms.first ? 0 : itms.first < itms.total % c ? 0 : itms.first != c || opts.circular ? Math.round((itms.total - itms.first) / c) : d, 0 > e && (e = 0), e > d && (e = d), is_function(b) && b.call($tt0, e), e
            }), $cfs.bind(cf_e("currentVisible", conf), function(a, b) {
                a.stopPropagation();
                var c = gi_getCurrentItems($cfs.children(), opts);
                return is_function(b) && b.call($tt0, c), c
            }), $cfs.bind(cf_e("slice", conf), function(a, b, c, d) {
                if (a.stopPropagation(), 0 == itms.total) return !1;
                var e = [b, c, d],
                    f = ["number", "number", "function"],
                    g = cf_sortParams(e, f);
                if (b = is_number(g[0]) ? g[0] : 0, c = is_number(g[1]) ? g[1] : itms.total, d = g[2], b += itms.first, c += itms.first, items.total > 0) {
                    for (; b > itms.total;) b -= itms.total;
                    for (; c > itms.total;) c -= itms.total;
                    for (; 0 > b;) b += itms.total;
                    for (; 0 > c;) c += itms.total
                }
                var i, h = $cfs.children();
                return i = c > b ? h.slice(b, c) : $(h.slice(b, itms.total).get().concat(h.slice(0, c).get())), is_function(d) && d.call($tt0, i), i
            }), $cfs.bind(cf_e("isPaused", conf) + " " + cf_e("isStopped", conf) + " " + cf_e("isScrolling", conf), function(a, b) {
                a.stopPropagation();
                var c = a.type.slice(conf.events.prefix.length),
                    d = crsl[c];
                return is_function(b) && b.call($tt0, d), d
            }), $cfs.bind(cf_e("configuration", conf), function(e, a, b, c) {
                e.stopPropagation();
                var reInit = !1;
                if (is_function(a)) a.call($tt0, opts);
                else if (is_object(a)) opts_orig = $.extend(!0, {}, opts_orig, a), b !== !1 ? reInit = !0 : opts = $.extend(!0, {}, opts, a);
                else if (!is_undefined(a))
                    if (is_function(b)) {
                        var val = eval("opts." + a);
                        is_undefined(val) && (val = ""), b.call($tt0, val)
                    } else {
                        if (is_undefined(b)) return eval("opts." + a);
                        "boolean" != typeof c && (c = !0), eval("opts_orig." + a + " = b"), c !== !1 ? reInit = !0 : eval("opts." + a + " = b")
                    }
                if (reInit) {
                    sz_resetMargin($cfs.children(), opts), FN._init(opts_orig), FN._bind_buttons();
                    var sz = sz_setSizes($cfs, opts);
                    $cfs.trigger(cf_e("updatePageStatus", conf), [!0, sz])
                }
                return opts
            }), $cfs.bind(cf_e("linkAnchors", conf), function(a, b, c) {
                return a.stopPropagation(), is_undefined(b) ? b = $("body") : is_string(b) && (b = $(b)), is_jquery(b) && 0 != b.length ? (is_string(c) || (c = "a.caroufredsel"), b.find(c).each(function() {
                    var a = this.hash || "";
                    a.length > 0 && -1 != $cfs.children().index($(a)) && $(this).unbind("click").click(function(b) {
                        b.preventDefault(), $cfs.trigger(cf_e("slideTo", conf), a)
                    })
                }), !0) : debug(conf, "Not a valid object.")
            }), $cfs.bind(cf_e("updatePageStatus", conf), function(a, b) {
                if (a.stopPropagation(), opts.pagination.container) {
                    var d = opts.pagination.items || opts.items.visible,
                        e = Math.ceil(itms.total / d);
                    b && (opts.pagination.anchorBuilder && (opts.pagination.container.children().remove(), opts.pagination.container.each(function() {
                        for (var a = 0; e > a; a++) {
                            var b = $cfs.children().eq(gn_getItemIndex(a * d, 0, !0, itms, $cfs));
                            $(this).append(opts.pagination.anchorBuilder.call(b[0], a + 1))
                        }
                    })), opts.pagination.container.each(function() {
                        $(this).children().unbind(opts.pagination.event).each(function(a) {
                            $(this).bind(opts.pagination.event, function(b) {
                                b.preventDefault(), $cfs.trigger(cf_e("slideTo", conf), [a * d, -opts.pagination.deviation, !0, opts.pagination])
                            })
                        })
                    }));
                    var f = $cfs.triggerHandler(cf_e("currentPage", conf)) + opts.pagination.deviation;
                    return f >= e && (f = 0), 0 > f && (f = e - 1), opts.pagination.container.each(function() {
                        $(this).children().removeClass(cf_c("selected", conf)).eq(f).addClass(cf_c("selected", conf))
                    }), !0
                }
            }), $cfs.bind(cf_e("updateSizes", conf), function() {
                var b = opts.items.visible,
                    c = $cfs.children(),
                    d = ms_getParentSize($wrp, opts, "width");
                if (itms.total = c.length, crsl.primarySizePercentage ? (opts.maxDimension = d, opts[opts.d.width] = ms_getPercentage(d, crsl.primarySizePercentage)) : opts.maxDimension = ms_getMaxDimension(opts, d), opts.responsive ? (opts.items.width = opts.items.sizesConf.width, opts.items.height = opts.items.sizesConf.height, opts = in_getResponsiveValues(opts, c, d), b = opts.items.visible, sz_setResponsiveSizes(opts, c)) : opts.items.visibleConf.variable ? b = gn_getVisibleItemsNext(c, opts, 0) : "*" != opts.items.filter && (b = gn_getVisibleItemsNextFilter(c, opts, 0)), !opts.circular && 0 != itms.first && b > itms.first) {
                    if (opts.items.visibleConf.variable) var e = gn_getVisibleItemsPrev(c, opts, itms.first) - itms.first;
                    else if ("*" != opts.items.filter) var e = gn_getVisibleItemsPrevFilter(c, opts, itms.first) - itms.first;
                    else var e = opts.items.visible - itms.first;
                    debug(conf, "Preventing non-circular: sliding " + e + " items backward."), $cfs.trigger(cf_e("prev", conf), e)
                }
                opts.items.visible = cf_getItemsAdjust(b, opts, opts.items.visibleConf.adjust, $tt0), opts.items.visibleConf.old = opts.items.visible, opts = in_getAlignPadding(opts, c);
                var f = sz_setSizes($cfs, opts);
                return $cfs.trigger(cf_e("updatePageStatus", conf), [!0, f]), nv_showNavi(opts, itms.total, conf), nv_enableNavi(opts, itms.first, conf), f
            }), $cfs.bind(cf_e("destroy", conf), function(a, b) {
                return a.stopPropagation(), tmrs = sc_clearTimers(tmrs), $cfs.data("_cfs_isCarousel", !1), $cfs.trigger(cf_e("finish", conf)), b && $cfs.trigger(cf_e("jumpToStart", conf)), sz_restoreOrigCss($cfs.children()), sz_restoreOrigCss($cfs), FN._unbind_events(), FN._unbind_buttons(), "parent" == conf.wrapper ? sz_restoreOrigCss($wrp) : $wrp.replaceWith($cfs), !0
            }), $cfs.bind(cf_e("debug", conf), function() {
                return debug(conf, "Carousel width: " + opts.width), debug(conf, "Carousel height: " + opts.height), debug(conf, "Item widths: " + opts.items.width), debug(conf, "Item heights: " + opts.items.height), debug(conf, "Number of items visible: " + opts.items.visible), opts.auto.play && debug(conf, "Number of items scrolled automatically: " + opts.auto.items), opts.prev.button && debug(conf, "Number of items scrolled backward: " + opts.prev.items), opts.next.button && debug(conf, "Number of items scrolled forward: " + opts.next.items), conf.debug
            }), $cfs.bind("_cfs_triggerEvent", function(a, b, c) {
                return a.stopPropagation(), $cfs.triggerHandler(cf_e(b, conf), c)
            })
        }, FN._unbind_events = function() {
            $cfs.unbind(cf_e("", conf)), $cfs.unbind(cf_e("", conf, !1)), $cfs.unbind("_cfs_triggerEvent")
        }, FN._bind_buttons = function() {
            if (FN._unbind_buttons(), nv_showNavi(opts, itms.total, conf), nv_enableNavi(opts, itms.first, conf), opts.auto.pauseOnHover) {
                var a = bt_pauseOnHoverConfig(opts.auto.pauseOnHover);
                $wrp.bind(cf_e("mouseenter", conf, !1), function() {
                    $cfs.trigger(cf_e("pause", conf), a)
                }).bind(cf_e("mouseleave", conf, !1), function() {
                    $cfs.trigger(cf_e("resume", conf))
                })
            }
            if (opts.auto.button && opts.auto.button.bind(cf_e(opts.auto.event, conf, !1), function(a) {
                    a.preventDefault();
                    var b = !1,
                        c = null;
                    crsl.isPaused ? b = "play" : opts.auto.pauseOnEvent && (b = "pause", c = bt_pauseOnHoverConfig(opts.auto.pauseOnEvent)), b && $cfs.trigger(cf_e(b, conf), c)
                }), opts.prev.button && (opts.prev.button.bind(cf_e(opts.prev.event, conf, !1), function(a) {
                    a.preventDefault(), $cfs.trigger(cf_e("prev", conf))
                }), opts.prev.pauseOnHover)) {
                var a = bt_pauseOnHoverConfig(opts.prev.pauseOnHover);
                opts.prev.button.bind(cf_e("mouseenter", conf, !1), function() {
                    $cfs.trigger(cf_e("pause", conf), a)
                }).bind(cf_e("mouseleave", conf, !1), function() {
                    $cfs.trigger(cf_e("resume", conf))
                })
            }
            if (opts.next.button && (opts.next.button.bind(cf_e(opts.next.event, conf, !1), function(a) {
                    a.preventDefault(), $cfs.trigger(cf_e("next", conf))
                }), opts.next.pauseOnHover)) {
                var a = bt_pauseOnHoverConfig(opts.next.pauseOnHover);
                opts.next.button.bind(cf_e("mouseenter", conf, !1), function() {
                    $cfs.trigger(cf_e("pause", conf), a)
                }).bind(cf_e("mouseleave", conf, !1), function() {
                    $cfs.trigger(cf_e("resume", conf))
                })
            }
            if (opts.pagination.container && opts.pagination.pauseOnHover) {
                var a = bt_pauseOnHoverConfig(opts.pagination.pauseOnHover);
                opts.pagination.container.bind(cf_e("mouseenter", conf, !1), function() {
                    $cfs.trigger(cf_e("pause", conf), a)
                }).bind(cf_e("mouseleave", conf, !1), function() {
                    $cfs.trigger(cf_e("resume", conf))
                })
            }
            if ((opts.prev.key || opts.next.key) && $(document).bind(cf_e("keyup", conf, !1, !0, !0), function(a) {
                    var b = a.keyCode;
                    b == opts.next.key && (a.preventDefault(), $cfs.trigger(cf_e("next", conf))), b == opts.prev.key && (a.preventDefault(), $cfs.trigger(cf_e("prev", conf)))
                }), opts.pagination.keys && $(document).bind(cf_e("keyup", conf, !1, !0, !0), function(a) {
                    var b = a.keyCode;
                    b >= 49 && 58 > b && (b = (b - 49) * opts.items.visible, itms.total >= b && (a.preventDefault(), $cfs.trigger(cf_e("slideTo", conf), [b, 0, !0, opts.pagination])))
                }), $.fn.swipe) {
                var b = "ontouchstart" in window;
                if (b && opts.swipe.onTouch || !b && opts.swipe.onMouse) {
                    var c = $.extend(!0, {}, opts.prev, opts.swipe),
                        d = $.extend(!0, {}, opts.next, opts.swipe),
                        e = function() {
                            $cfs.trigger(cf_e("prev", conf), [c])
                        },
                        f = function() {
                            $cfs.trigger(cf_e("next", conf), [d])
                        };
                    switch (opts.direction) {
                        case "up":
                        case "down":
                            opts.swipe.options.swipeUp = f, opts.swipe.options.swipeDown = e;
                            break;
                        default:
                            opts.swipe.options.swipeLeft = f, opts.swipe.options.swipeRight = e
                    }
                    crsl.swipe && $cfs.swipe("destroy"), $wrp.swipe(opts.swipe.options), $wrp.css("cursor", "move"), crsl.swipe = !0
                }
            }
            if ($.fn.mousewheel && opts.mousewheel) {
                var g = $.extend(!0, {}, opts.prev, opts.mousewheel),
                    h = $.extend(!0, {}, opts.next, opts.mousewheel);
                crsl.mousewheel && $wrp.unbind(cf_e("mousewheel", conf, !1)), $wrp.bind(cf_e("mousewheel", conf, !1), function(a, b) {
                    a.preventDefault(), b > 0 ? $cfs.trigger(cf_e("prev", conf), [g]) : $cfs.trigger(cf_e("next", conf), [h])
                }), crsl.mousewheel = !0
            }
            if (opts.auto.play && $cfs.trigger(cf_e("play", conf), opts.auto.delay), crsl.upDateOnWindowResize) {
                var i = function() {
                        $cfs.trigger(cf_e("finish", conf)), opts.auto.pauseOnResize && !crsl.isPaused && $cfs.trigger(cf_e("play", conf)), sz_resetMargin($cfs.children(), opts), $cfs.trigger(cf_e("updateSizes", conf))
                    },
                    j = $(window),
                    k = null;
                if ($.debounce && "debounce" == conf.onWindowResize) k = $.debounce(200, i);
                else if ($.throttle && "throttle" == conf.onWindowResize) k = $.throttle(300, i);
                else {
                    var l = 0,
                        m = 0;
                    k = function() {
                        var a = j.width(),
                            b = j.height();
                        (a != l || b != m) && (i(), l = a, m = b)
                    }
                }
                j.bind(cf_e("resize", conf, !1, !0, !0), k)
            }
        }, FN._unbind_buttons = function() {
            var b = (cf_e("", conf), cf_e("", conf, !1));
            ns3 = cf_e("", conf, !1, !0, !0), $(document).unbind(ns3), $(window).unbind(ns3), $wrp.unbind(b), opts.auto.button && opts.auto.button.unbind(b), opts.prev.button && opts.prev.button.unbind(b), opts.next.button && opts.next.button.unbind(b), opts.pagination.container && (opts.pagination.container.unbind(b), opts.pagination.anchorBuilder && opts.pagination.container.children().remove()), crsl.swipe && ($cfs.swipe("destroy"), $wrp.css("cursor", "default"), crsl.swipe = !1), crsl.mousewheel && (crsl.mousewheel = !1), nv_showNavi(opts, "hide", conf), nv_enableNavi(opts, "removeClass", conf)
        }, is_boolean(configs) && (configs = {
            debug: configs
        });
        var crsl = {
                direction: "next",
                isPaused: !0,
                isScrolling: !1,
                isStopped: !1,
                mousewheel: !1,
                swipe: !1
            },
            itms = {
                total: $cfs.children().length,
                first: 0
            },
            tmrs = {
                auto: null,
                progress: null,
                startTime: getTime(),
                timePassed: 0
            },
            scrl = {
                isStopped: !1,
                duration: 0,
                startTime: 0,
                easing: "",
                anims: []
            },
            clbk = {
                onBefore: [],
                onAfter: []
            },
            queu = [],
            conf = $.extend(!0, {}, $.fn.carouFredSel.configs, configs),
            opts = {},
            opts_orig = $.extend(!0, {}, options),
            $wrp = "parent" == conf.wrapper ? $cfs.parent() : $cfs.wrap("<" + conf.wrapper.element + ' class="' + conf.wrapper.classname + '" />').parent();
        if (conf.selector = $cfs.selector, conf.serialNumber = $.fn.carouFredSel.serialNumber++, conf.transition = conf.transition && $.fn.transition ? "transition" : "animate", FN._init(opts_orig, !0, starting_position), FN._build(), FN._bind_events(), FN._bind_buttons(), is_array(opts.items.start)) var start_arr = opts.items.start;
        else {
            var start_arr = [];
            0 != opts.items.start && start_arr.push(opts.items.start)
        }
        if (opts.cookie && start_arr.unshift(parseInt(cf_getCookie(opts.cookie), 10)), start_arr.length > 0)
            for (var a = 0, l = start_arr.length; l > a; a++) {
                var s = start_arr[a];
                if (0 != s) {
                    if (s === !0) {
                        if (s = window.location.hash, 1 > s.length) continue
                    } else "random" === s && (s = Math.floor(Math.random() * itms.total));
                    if ($cfs.triggerHandler(cf_e("slideTo", conf), [s, 0, !0, {
                            fx: "none"
                        }])) break
                }
            }
        var siz = sz_setSizes($cfs, opts),
            itm = gi_getCurrentItems($cfs.children(), opts);
        return opts.onCreate && opts.onCreate.call($tt0, {
            width: siz.width,
            height: siz.height,
            items: itm
        }), $cfs.trigger(cf_e("updatePageStatus", conf), [!0, siz]), $cfs.trigger(cf_e("linkAnchors", conf)), conf.debug && $cfs.trigger(cf_e("debug", conf)), $cfs
    }, $.fn.carouFredSel.serialNumber = 1, $.fn.carouFredSel.defaults = {
        synchronise: !1,
        infinite: !0,
        circular: !0,
        responsive: !1,
        direction: "left",
        items: {
            start: 0
        },
        scroll: {
            easing: "swing",
            duration: 500,
            pauseOnHover: !1,
            event: "click",
            queue: !1
        }
    }, $.fn.carouFredSel.configs = {
        debug: !1,
        transition: !1,
        onWindowResize: "throttle",
        events: {
            prefix: "",
            namespace: "cfs"
        },
        wrapper: {
            element: "div",
            classname: "caroufredsel_wrapper"
        },
        classnames: {}
    }, $.fn.carouFredSel.pageAnchorBuilder = function(a) {
        return '<a href="#"><span>' + a + "</span></a>"
    }, $.fn.carouFredSel.progressbarUpdater = function(a) {
        $(this).css("width", a + "%")
    }, $.fn.carouFredSel.cookie = {
        get: function(a) {
            a += "=";
            for (var b = document.cookie.split(";"), c = 0, d = b.length; d > c; c++) {
                for (var e = b[c];
                    " " == e.charAt(0);) e = e.slice(1);
                if (0 == e.indexOf(a)) return e.slice(a.length)
            }
            return 0
        },
        set: function(a, b, c) {
            var d = "";
            if (c) {
                var e = new Date;
                e.setTime(e.getTime() + 1e3 * 60 * 60 * 24 * c), d = "; expires=" + e.toGMTString()
            }
            document.cookie = a + "=" + b + d + "; path=/"
        },
        remove: function(a) {
            $.fn.carouFredSel.cookie.set(a, "", -1)
        }
    }, $.extend($.easing, {
        quadratic: function(a) {
            var b = a * a;
            return a * (-b * a + 4 * b - 6 * a + 4)
        },
        cubic: function(a) {
            return a * (4 * a * a - 9 * a + 6)
        },
        elastic: function(a) {
            var b = a * a;
            return a * (33 * b * b - 106 * b * a + 126 * b - 67 * a + 15)
        }
    }))
})(jQuery);;
(function($) {
    "use strict";
    var methods = (function() {
        var c = {
                bcClass: 'sf-breadcrumb',
                menuClass: 'sf-js-enabled',
                anchorClass: 'sf-with-ul',
                menuArrowClass: 'sf-arrows'
            },
            ios = (function() {
                var ios = /iPhone|iPad|iPod/i.test(navigator.userAgent);
                if (ios) {
                    $(window).load(function() {
                        $('body').children().on('click', $.noop);
                    });
                }
                return ios;
            })(),
            wp7 = (function() {
                var style = document.documentElement.style;
                return ('behavior' in style && 'fill' in style && /iemobile/i.test(navigator.userAgent));
            })(),
            toggleMenuClasses = function($menu, o) {
                var classes = c.menuClass;
                if (o.cssArrows) {
                    classes += ' ' + c.menuArrowClass;
                }
                $menu.toggleClass(classes);
            },
            setPathToCurrent = function($menu, o) {
                return $menu.find('li.' + o.pathClass).slice(0, o.pathLevels).addClass(o.hoverClass + ' ' + c.bcClass).filter(function() {
                    return ($(this).children(o.popUpSelector).hide().show().length);
                }).removeClass(o.pathClass);
            },
            toggleAnchorClass = function($li) {
                $li.children('a').toggleClass(c.anchorClass);
            },
            toggleTouchAction = function($menu) {
                var touchAction = $menu.css('ms-touch-action');
                touchAction = (touchAction === 'pan-y') ? 'auto' : 'pan-y';
                $menu.css('ms-touch-action', touchAction);
            },
            applyHandlers = function($menu, o) {
                var targets = 'li:has(' + o.popUpSelector + ')';
                if ($.fn.hoverIntent && !o.disableHI) {
                    $menu.hoverIntent(over, out, targets);
                } else {
                    $menu.on('mouseenter.superfish', targets, over).on('mouseleave.superfish', targets, out);
                }
                var touchevent = 'MSPointerDown.superfish';
                if (!ios) {
                    touchevent += ' touchend.superfish';
                }
                if (wp7) {
                    touchevent += ' mousedown.superfish';
                }
                $menu.on('focusin.superfish', 'li', over).on('focusout.superfish', 'li', out).on(touchevent, 'a', o, touchHandler);
            },
            touchHandler = function(e) {
                var $this = $(this),
                    $ul = $this.siblings(e.data.popUpSelector);
                if ($ul.length > 0 && $ul.is(':hidden')) {
                    $this.one('click.superfish', false);
                    if (e.type === 'MSPointerDown') {
                        $this.trigger('focus');
                    } else {
                        $.proxy(over, $this.parent('li'))();
                    }
                }
            },
            over = function() {
                var $this = $(this),
                    o = getOptions($this);
                if ($(this).parents('.megamenu').length > 0) return;
                clearTimeout(o.sfTimer);
                $this.siblings().superfish('hide').end().superfish('show');
            },
            out = function() {
                var $this = $(this),
                    o = getOptions($this);
                if (ios) {
                    $.proxy(close, $this, o)();
                } else {
                    clearTimeout(o.sfTimer);
                    o.sfTimer = setTimeout($.proxy(close, $this, o), o.delay);
                }
            },
            close = function(o) {
                o.retainPath = ($.inArray(this[0], o.$path) > -1);
                this.superfish('hide');
                if (!this.parents('.' + o.hoverClass).length) {
                    o.onIdle.call(getMenu(this));
                    if (o.$path.length) {
                        $.proxy(over, o.$path)();
                    }
                }
            },
            getMenu = function($el) {
                return $el.closest('.' + c.menuClass);
            },
            getOptions = function($el) {
                return getMenu($el).data('sf-options');
            };
        return {
            hide: function(instant) {
                if (this.length) {
                    var $this = this,
                        o = getOptions($this);
                    if (!o) {
                        return this;
                    }
                    if ($(this).hasClass('menu-item-over') && $(this).hasClass('megamenu')) {
                        return true;
                    }
                    var not = (o.retainPath === true) ? o.$path : '',
                        $ul = $this.find('li.' + o.hoverClass).add(this).not(not).removeClass(o.hoverClass).children(o.popUpSelector),
                        speed = o.speedOut;
                    if (instant) {
                        $ul.show();
                        speed = 0;
                    }
                    o.retainPath = false;
                    o.onBeforeHide.call($ul);
                    if (o.dropdownStyle == 'minimal') {
                        var $this = $(this);
                        o.onHide.call($this);
                    } else {
                        $ul.stop(true, true).animate(o.animationOut, speed, function() {
                            var $this = $(this);
                            o.onHide.call($this);
                        });
                    }
                    if ($(this).parents('.megamenu').length > 0) return;
                    if ($('#header-outer[data-megamenu-rt="1"]').length > 0 && $('#header-outer[data-transparent-header="true"]').length > 0) {
                        if ($('#header-outer.scrolled-down').length == 0 && $('#header-outer.small-nav').length == 0 && $('#header-outer.detached').length == 0 && $('#header-outer.fixed-menu').length == 0) {
                            $('#header-outer').addClass('transparent');
                        }
                    }
                }
                return this;
            },
            show: function() {
                if ($(this).parents('.megamenu').length > 0) return;
                var o = getOptions(this);
                if (!o) {
                    return this;
                }
                var $this = this.addClass(o.hoverClass),
                    $ul = $this.children(o.popUpSelector);
                if ($('#header-outer[data-megamenu-rt="1"]').length > 0 && $(this).hasClass('megamenu')) {
                    $('#header-outer').addClass('no-transition');
                    $('#header-outer').removeClass('transparent');
                }
                o.onBeforeShow.call($ul);
                if (!$($ul).parents('li').hasClass('megamenu') && !$($ul).parents('ul').hasClass('sub-menu') && $ul.offset()) {
                    $ul.addClass('temp-hidden-display');
                    var docW = $("#top .container").width();
                    var elm = $ul;
                    var off = elm.offset();
                    var l = off.left - ($(window).width() - docW) / 2;
                    var w = elm.width();
                    var isEntirelyVisible = (l + w <= $(window).width() - 100);
                    if (!isEntirelyVisible) {
                        $ul.parents('li').addClass('edge');
                    } else {
                        $ul.parents('li').removeClass('edge');
                    }
                    $ul.removeClass('temp-hidden-display');
                }
                if (o.dropdownStyle == 'minimal') {
                    o.onShow.call($ul);
                } else {
                    $ul.stop(true, true).animate(o.animation, o.speed, function() {
                        o.onShow.call($ul);
                    });
                }
                if ($ul.length > 0 && $ul.parents('.sub-menu').length > 0 && $ul.parent().parent().parent().parent().hasClass('sf-menu')) {
                    if ($ul.offset().left + $ul.outerWidth() > $(window).width()) {
                        $ul.addClass('on-left-side');
                        $ul.find('ul').addClass('on-left-side');
                    }
                }
                return this;
            },
            destroy: function() {
                return this.each(function() {
                    var $this = $(this),
                        o = $this.data('sf-options'),
                        $hasPopUp;
                    if (!o) {
                        return false;
                    }
                    $hasPopUp = $this.find(o.popUpSelector).parent('li');
                    clearTimeout(o.sfTimer);
                    toggleMenuClasses($this, o);
                    toggleAnchorClass($hasPopUp);
                    toggleTouchAction($this);
                    $this.off('.superfish').off('.hoverIntent');
                    $hasPopUp.children(o.popUpSelector).attr('style', function(i, style) {
                        return style.replace(/display[^;]+;?/g, '');
                    });
                    o.$path.removeClass(o.hoverClass + ' ' + c.bcClass).addClass(o.pathClass);
                    $this.find('.' + o.hoverClass).removeClass(o.hoverClass);
                    o.onDestroy.call($this);
                    $this.removeData('sf-options');
                });
            },
            init: function(op) {
                return this.each(function() {
                    var $this = $(this);
                    if ($this.data('sf-options')) {
                        return false;
                    }
                    var o = $.extend({}, $.fn.superfish.defaults, op),
                        $hasPopUp = $this.find(o.popUpSelector).parent('li');
                    o.$path = setPathToCurrent($this, o);
                    $this.data('sf-options', o);
                    toggleMenuClasses($this, o);
                    toggleAnchorClass($hasPopUp);
                    toggleTouchAction($this);
                    applyHandlers($this, o);
                    $hasPopUp.not('.' + c.bcClass).superfish('hide', true);
                    o.onInit.call(this);
                });
            }
        };
    })();
    $.fn.superfish = function(method, args) {
        if (methods[method]) {
            return methods[method].apply(this, Array.prototype.slice.call(arguments, 1));
        } else if (typeof method === 'object' || !method) {
            return methods.init.apply(this, arguments);
        } else {
            return $.error('Method ' + method + ' does not exist on jQuery.fn.superfish');
        }
    };
    $.fn.superfish.defaults = {
        popUpSelector: 'ul,.sf-mega',
        hoverClass: 'sfHover',
        pathClass: 'overrideThisToUse',
        pathLevels: 1,
        delay: 800,
        animation: {
            opacity: 'show'
        },
        animationOut: {
            opacity: 'hide'
        },
        speed: 'normal',
        speedOut: 'fast',
        cssArrows: true,
        disableHI: false,
        onInit: $.noop,
        onBeforeShow: $.noop,
        onShow: $.noop,
        onBeforeHide: $.noop,
        onHide: $.noop,
        onIdle: $.noop,
        onDestroy: $.noop,
        dropdownStyle: ($('body[data-dropdown-style="minimal"]').length > 0) ? 'minimal' : 'classic'
    };
    $.fn.extend({
        hideSuperfishUl: methods.hide,
        showSuperfishUl: methods.show
    });
})(jQuery);
/*!
Waypoints - 4.0.1
*/
! function() {
    "use strict";

    function t(o) {
        if (!o) throw new Error("No options passed to Waypoint constructor");
        if (!o.element) throw new Error("No element option passed to Waypoint constructor");
        if (!o.handler) throw new Error("No handler option passed to Waypoint constructor");
        this.key = "waypoint-" + e, this.options = t.Adapter.extend({}, t.defaults, o), this.element = this.options.element, this.adapter = new t.Adapter(this.element), this.callback = o.handler, this.axis = this.options.horizontal ? "horizontal" : "vertical", this.enabled = this.options.enabled, this.triggerPoint = null, this.group = t.Group.findOrCreate({
            name: this.options.group,
            axis: this.axis
        }), this.context = t.Context.findOrCreateByElement(this.options.context), t.offsetAliases[this.options.offset] && (this.options.offset = t.offsetAliases[this.options.offset]), this.group.add(this), this.context.add(this), i[this.key] = this, e += 1
    }
    var e = 0,
        i = {};
    t.prototype.queueTrigger = function(t) {
        this.group.queueTrigger(this, t)
    }, t.prototype.trigger = function(t) {
        this.enabled && this.callback && this.callback.apply(this, t)
    }, t.prototype.destroy = function() {
        this.context.remove(this), this.group.remove(this), delete i[this.key]
    }, t.prototype.disable = function() {
        return this.enabled = !1, this
    }, t.prototype.enable = function() {
        return this.context.refresh(), this.enabled = !0, this
    }, t.prototype.next = function() {
        return this.group.next(this)
    }, t.prototype.previous = function() {
        return this.group.previous(this)
    }, t.invokeAll = function(t) {
        var e = [];
        for (var o in i) e.push(i[o]);
        for (var n = 0, r = e.length; r > n; n++) e[n][t]()
    }, t.destroyAll = function() {
        t.invokeAll("destroy")
    }, t.disableAll = function() {
        t.invokeAll("disable")
    }, t.enableAll = function() {
        t.Context.refreshAll();
        for (var e in i) i[e].enabled = !0;
        return this
    }, t.refreshAll = function() {
        t.Context.refreshAll()
    }, t.viewportHeight = function() {
        return window.innerHeight || document.documentElement.clientHeight
    }, t.viewportWidth = function() {
        return document.documentElement.clientWidth
    }, t.adapters = [], t.defaults = {
        context: window,
        continuous: !0,
        enabled: !0,
        group: "default",
        horizontal: !1,
        offset: 0
    }, t.offsetAliases = {
        "bottom-in-view": function() {
            return this.context.innerHeight() - this.adapter.outerHeight()
        },
        "right-in-view": function() {
            return this.context.innerWidth() - this.adapter.outerWidth()
        }
    }, window.Waypoint = t
}(),
function() {
    "use strict";

    function t(t) {
        window.setTimeout(t, 1e3 / 60)
    }

    function e(t) {
        this.element = t, this.Adapter = n.Adapter, this.adapter = new this.Adapter(t), this.key = "waypoint-context-" + i, this.didScroll = !1, this.didResize = !1, this.oldScroll = {
            x: this.adapter.scrollLeft(),
            y: this.adapter.scrollTop()
        }, this.waypoints = {
            vertical: {},
            horizontal: {}
        }, t.waypointContextKey = this.key, o[t.waypointContextKey] = this, i += 1, n.windowContext || (n.windowContext = !0, n.windowContext = new e(window)), this.createThrottledScrollHandler(), this.createThrottledResizeHandler()
    }
    var i = 0,
        o = {},
        n = window.Waypoint,
        r = window.onload;
    e.prototype.add = function(t) {
        var e = t.options.horizontal ? "horizontal" : "vertical";
        this.waypoints[e][t.key] = t, this.refresh()
    }, e.prototype.checkEmpty = function() {
        var t = this.Adapter.isEmptyObject(this.waypoints.horizontal),
            e = this.Adapter.isEmptyObject(this.waypoints.vertical),
            i = this.element == this.element.window;
        t && e && !i && (this.adapter.off(".waypoints"), delete o[this.key])
    }, e.prototype.createThrottledResizeHandler = function() {
        function t() {
            e.handleResize(), e.didResize = !1
        }
        var e = this;
        this.adapter.on("resize.waypoints", function() {
            e.didResize || (e.didResize = !0, n.requestAnimationFrame(t))
        })
    }, e.prototype.createThrottledScrollHandler = function() {
        function t() {
            e.handleScroll(), e.didScroll = !1
        }
        var e = this;
        this.adapter.on("scroll.waypoints", function() {
            (!e.didScroll || n.isTouch) && (e.didScroll = !0, n.requestAnimationFrame(t))
        })
    }, e.prototype.handleResize = function() {
        n.Context.refreshAll()
    }, e.prototype.handleScroll = function() {
        var t = {},
            e = {
                horizontal: {
                    newScroll: this.adapter.scrollLeft(),
                    oldScroll: this.oldScroll.x,
                    forward: "right",
                    backward: "left"
                },
                vertical: {
                    newScroll: this.adapter.scrollTop(),
                    oldScroll: this.oldScroll.y,
                    forward: "down",
                    backward: "up"
                }
            };
        for (var i in e) {
            var o = e[i],
                n = o.newScroll > o.oldScroll,
                r = n ? o.forward : o.backward;
            for (var s in this.waypoints[i]) {
                var a = this.waypoints[i][s];
                if (null !== a.triggerPoint) {
                    var l = o.oldScroll < a.triggerPoint,
                        h = o.newScroll >= a.triggerPoint,
                        p = l && h,
                        u = !l && !h;
                    (p || u) && (a.queueTrigger(r), t[a.group.id] = a.group)
                }
            }
        }
        for (var c in t) t[c].flushTriggers();
        this.oldScroll = {
            x: e.horizontal.newScroll,
            y: e.vertical.newScroll
        }
    }, e.prototype.innerHeight = function() {
        return this.element == this.element.window ? n.viewportHeight() : this.adapter.innerHeight()
    }, e.prototype.remove = function(t) {
        delete this.waypoints[t.axis][t.key], this.checkEmpty()
    }, e.prototype.innerWidth = function() {
        return this.element == this.element.window ? n.viewportWidth() : this.adapter.innerWidth()
    }, e.prototype.destroy = function() {
        var t = [];
        for (var e in this.waypoints)
            for (var i in this.waypoints[e]) t.push(this.waypoints[e][i]);
        for (var o = 0, n = t.length; n > o; o++) t[o].destroy()
    }, e.prototype.refresh = function() {
        var t, e = this.element == this.element.window,
            i = e ? void 0 : this.adapter.offset(),
            o = {};
        this.handleScroll(), t = {
            horizontal: {
                contextOffset: e ? 0 : i.left,
                contextScroll: e ? 0 : this.oldScroll.x,
                contextDimension: this.innerWidth(),
                oldScroll: this.oldScroll.x,
                forward: "right",
                backward: "left",
                offsetProp: "left"
            },
            vertical: {
                contextOffset: e ? 0 : i.top,
                contextScroll: e ? 0 : this.oldScroll.y,
                contextDimension: this.innerHeight(),
                oldScroll: this.oldScroll.y,
                forward: "down",
                backward: "up",
                offsetProp: "top"
            }
        };
        for (var r in t) {
            var s = t[r];
            for (var a in this.waypoints[r]) {
                var l, h, p, u, c, d = this.waypoints[r][a],
                    f = d.options.offset,
                    w = d.triggerPoint,
                    y = 0,
                    g = null == w;
                d.element !== d.element.window && (y = d.adapter.offset()[s.offsetProp]), "function" == typeof f ? f = f.apply(d) : "string" == typeof f && (f = parseFloat(f), d.options.offset.indexOf("%") > -1 && (f = Math.ceil(s.contextDimension * f / 100))), l = s.contextScroll - s.contextOffset, d.triggerPoint = Math.floor(y + l - f), h = w < s.oldScroll, p = d.triggerPoint >= s.oldScroll, u = h && p, c = !h && !p, !g && u ? (d.queueTrigger(s.backward), o[d.group.id] = d.group) : !g && c ? (d.queueTrigger(s.forward), o[d.group.id] = d.group) : g && s.oldScroll >= d.triggerPoint && (d.queueTrigger(s.forward), o[d.group.id] = d.group)
            }
        }
        return n.requestAnimationFrame(function() {
            for (var t in o) o[t].flushTriggers()
        }), this
    }, e.findOrCreateByElement = function(t) {
        return e.findByElement(t) || new e(t)
    }, e.refreshAll = function() {
        for (var t in o) o[t].refresh()
    }, e.findByElement = function(t) {
        return o[t.waypointContextKey]
    }, window.onload = function() {
        r && r(), e.refreshAll()
    }, n.requestAnimationFrame = function(e) {
        var i = window.requestAnimationFrame || window.mozRequestAnimationFrame || window.webkitRequestAnimationFrame || t;
        i.call(window, e)
    }, n.Context = e
}(),
function() {
    "use strict";

    function t(t, e) {
        return t.triggerPoint - e.triggerPoint
    }

    function e(t, e) {
        return e.triggerPoint - t.triggerPoint
    }

    function i(t) {
        this.name = t.name, this.axis = t.axis, this.id = this.name + "-" + this.axis, this.waypoints = [], this.clearTriggerQueues(), o[this.axis][this.name] = this
    }
    var o = {
            vertical: {},
            horizontal: {}
        },
        n = window.Waypoint;
    i.prototype.add = function(t) {
        this.waypoints.push(t)
    }, i.prototype.clearTriggerQueues = function() {
        this.triggerQueues = {
            up: [],
            down: [],
            left: [],
            right: []
        }
    }, i.prototype.flushTriggers = function() {
        for (var i in this.triggerQueues) {
            var o = this.triggerQueues[i],
                n = "up" === i || "left" === i;
            o.sort(n ? e : t);
            for (var r = 0, s = o.length; s > r; r += 1) {
                var a = o[r];
                (a.options.continuous || r === o.length - 1) && a.trigger([i])
            }
        }
        this.clearTriggerQueues()
    }, i.prototype.next = function(e) {
        this.waypoints.sort(t);
        var i = n.Adapter.inArray(e, this.waypoints),
            o = i === this.waypoints.length - 1;
        return o ? null : this.waypoints[i + 1]
    }, i.prototype.previous = function(e) {
        this.waypoints.sort(t);
        var i = n.Adapter.inArray(e, this.waypoints);
        return i ? this.waypoints[i - 1] : null
    }, i.prototype.queueTrigger = function(t, e) {
        this.triggerQueues[e].push(t)
    }, i.prototype.remove = function(t) {
        var e = n.Adapter.inArray(t, this.waypoints);
        e > -1 && this.waypoints.splice(e, 1)
    }, i.prototype.first = function() {
        return this.waypoints[0]
    }, i.prototype.last = function() {
        return this.waypoints[this.waypoints.length - 1]
    }, i.findOrCreate = function(t) {
        return o[t.axis][t.name] || new i(t)
    }, n.Group = i
}(),
function() {
    "use strict";

    function t(t) {
        this.$element = e(t)
    }
    var e = window.jQuery,
        i = window.Waypoint;
    e.each(["innerHeight", "innerWidth", "off", "offset", "on", "outerHeight", "outerWidth", "scrollLeft", "scrollTop"], function(e, i) {
        t.prototype[i] = function() {
            var t = Array.prototype.slice.call(arguments);
            return this.$element[i].apply(this.$element, t)
        }
    }), e.each(["extend", "inArray", "isEmptyObject"], function(i, o) {
        t[o] = e[o]
    }), i.adapters.push({
        name: "jquery",
        Adapter: t
    }), i.Adapter = t
}(),
function() {
    "use strict";

    function t(t) {
        return function() {
            var i = [],
                o = arguments[0];
            return t.isFunction(arguments[0]) && (o = t.extend({}, arguments[1]), o.handler = arguments[0]), this.each(function() {
                var n = t.extend({}, o, {
                    element: this
                });
                "string" == typeof n.context && (n.context = t(this).closest(n.context)[0]), i.push(new e(n))
            }), i
        }
    }
    var e = window.Waypoint;
    window.jQuery && (window.jQuery.fn.waypoint = t(window.jQuery)), window.Zepto && (window.Zepto.fn.waypoint = t(window.Zepto))
}();
! function(t) {
    var i = t(window);
    t.fn.visible = function(t, e, o) {
        if (!(this.length < 1)) {
            var r = this.length > 1 ? this.eq(0) : this,
                n = r.get(0),
                f = i.width(),
                h = i.height(),
                o = o ? o : "both",
                l = e === !0 ? n.offsetWidth * n.offsetHeight : !0;
            if ("function" == typeof n.getBoundingClientRect) {
                var g = n.getBoundingClientRect(),
                    u = g.top >= 0 && g.top < h,
                    s = g.bottom > 0 && g.bottom <= h,
                    c = g.left >= 0 && g.left < f,
                    a = g.right > 0 && g.right <= f,
                    v = t ? u || s : u && s,
                    b = t ? c || a : c && a;
                if ("both" === o) return l && v && b;
                if ("vertical" === o) return l && v;
                if ("horizontal" === o) return l && b
            } else {
                var d = i.scrollTop(),
                    p = d + h,
                    w = i.scrollLeft(),
                    m = w + f,
                    y = r.offset(),
                    z = y.top,
                    B = z + r.height(),
                    C = y.left,
                    R = C + r.width(),
                    j = t === !0 ? B : z,
                    q = t === !0 ? z : B,
                    H = t === !0 ? R : C,
                    L = t === !0 ? C : R;
                if ("both" === o) return !!l && p >= q && j >= d && m >= L && H >= w;
                if ("vertical" === o) return !!l && p >= q && j >= d;
                if ("horizontal" === o) return !!l && m >= L && H >= w
            }
        }
    }
}(jQuery);
jQuery.easing["jswing"] = jQuery.easing["swing"];
jQuery.extend(jQuery.easing, {
        def: "easeOutQuad",
        swing: function(a, b, c, d, e) {
            return jQuery.easing[jQuery.easing.def](a, b, c, d, e)
        },
        easeInQuad: function(a, b, c, d, e) {
            return d * (b /= e) * b + c
        },
        easeOutQuad: function(a, b, c, d, e) {
            return -d * (b /= e) * (b - 2) + c
        },
        easeInOutQuad: function(a, b, c, d, e) {
            if ((b /= e / 2) < 1) return d / 2 * b * b + c;
            return -d / 2 * (--b * (b - 2) - 1) + c
        },
        easeInCubic: function(a, b, c, d, e) {
            return d * (b /= e) * b * b + c
        },
        easeOutCubic: function(a, b, c, d, e) {
            return d * ((b = b / e - 1) * b * b + 1) + c
        },
        easeInOutCubic: function(a, b, c, d, e) {
            if ((b /= e / 2) < 1) return d / 2 * b * b * b + c;
            return d / 2 * ((b -= 2) * b * b + 2) + c
        },
        easeInQuart: function(a, b, c, d, e) {
            return d * (b /= e) * b * b * b + c
        },
        easeOutQuart: function(a, b, c, d, e) {
            return -d * ((b = b / e - 1) * b * b * b - 1) + c
        },
        easeInOutQuart: function(a, b, c, d, e) {
            if ((b /= e / 2) < 1) return d / 2 * b * b * b * b + c;
            return -d / 2 * ((b -= 2) * b * b * b - 2) + c
        },
        easeInQuint: function(a, b, c, d, e) {
            return d * (b /= e) * b * b * b * b + c
        },
        easeOutQuint: function(a, b, c, d, e) {
            return d * ((b = b / e - 1) * b * b * b * b + 1) + c
        },
        easeInOutQuint: function(a, b, c, d, e) {
            if ((b /= e / 2) < 1) return d / 2 * b * b * b * b * b + c;
            return d / 2 * ((b -= 2) * b * b * b * b + 2) + c
        },
        easeInSine: function(a, b, c, d, e) {
            return -d * Math.cos(b / e * (Math.PI / 2)) + d + c
        },
        easeOutSine: function(a, b, c, d, e) {
            return d * Math.sin(b / e * (Math.PI / 2)) + c
        },
        easeInOutSine: function(a, b, c, d, e) {
            return -d / 2 * (Math.cos(Math.PI * b / e) - 1) + c
        },
        easeInExpo: function(a, b, c, d, e) {
            return b == 0 ? c : d * Math.pow(2, 10 * (b / e - 1)) + c
        },
        easeOutExpo: function(a, b, c, d, e) {
            return b == e ? c + d : d * (-Math.pow(2, -10 * b / e) + 1) + c
        },
        easeInOutExpo: function(a, b, c, d, e) {
            if (b == 0) return c;
            if (b == e) return c + d;
            if ((b /= e / 2) < 1) return d / 2 * Math.pow(2, 10 * (b - 1)) + c;
            return d / 2 * (-Math.pow(2, -10 * --b) + 2) + c
        },
        easeInCirc: function(a, b, c, d, e) {
            return -d * (Math.sqrt(1 - (b /= e) * b) - 1) + c
        },
        easeOutCirc: function(a, b, c, d, e) {
            return d * Math.sqrt(1 - (b = b / e - 1) * b) + c
        },
        easeInOutCirc: function(a, b, c, d, e) {
            if ((b /= e / 2) < 1) return -d / 2 * (Math.sqrt(1 - b * b) - 1) + c;
            return d / 2 * (Math.sqrt(1 - (b -= 2) * b) + 1) + c
        },
        easeInElastic: function(a, b, c, d, e) {
            var f = 1.70158;
            var g = 0;
            var h = d;
            if (b == 0) return c;
            if ((b /= e) == 1) return c + d;
            if (!g) g = e * .3;
            if (h < Math.abs(d)) {
                h = d;
                var f = g / 4
            } else var f = g / (2 * Math.PI) * Math.asin(d / h);
            return -(h * Math.pow(2, 10 * (b -= 1)) * Math.sin((b * e - f) * 2 * Math.PI / g)) + c
        },
        easeOutElastic: function(a, b, c, d, e) {
            var f = 1.70158;
            var g = 0;
            var h = d;
            if (b == 0) return c;
            if ((b /= e) == 1) return c + d;
            if (!g) g = e * .3;
            if (h < Math.abs(d)) {
                h = d;
                var f = g / 4
            } else var f = g / (2 * Math.PI) * Math.asin(d / h);
            return h * Math.pow(2, -10 * b) * Math.sin((b * e - f) * 2 * Math.PI / g) + d + c
        },
        easeInOutElastic: function(a, b, c, d, e) {
            var f = 1.70158;
            var g = 0;
            var h = d;
            if (b == 0) return c;
            if ((b /= e / 2) == 2) return c + d;
            if (!g) g = e * .3 * 1.5;
            if (h < Math.abs(d)) {
                h = d;
                var f = g / 4
            } else var f = g / (2 * Math.PI) * Math.asin(d / h);
            if (b < 1) return -.5 * h * Math.pow(2, 10 * (b -= 1)) * Math.sin((b * e - f) * 2 * Math.PI / g) + c;
            return h * Math.pow(2, -10 * (b -= 1)) * Math.sin((b * e - f) * 2 * Math.PI / g) * .5 + d + c
        },
        easeInBack: function(a, b, c, d, e, f) {
            if (f == undefined) f = 1.70158;
            return d * (b /= e) * b * ((f + 1) * b - f) + c
        },
        easeOutBack: function(a, b, c, d, e, f) {
            if (f == undefined) f = 1.70158;
            return d * ((b = b / e - 1) * b * ((f + 1) * b + f) + 1) + c
        },
        easeInOutBack: function(a, b, c, d, e, f) {
            if (f == undefined) f = 1.70158;
            if ((b /= e / 2) < 1) return d / 2 * b * b * (((f *= 1.525) + 1) * b - f) + c;
            return d / 2 * ((b -= 2) * b * (((f *= 1.525) + 1) * b + f) + 2) + c
        },
        easeInBounce: function(a, b, c, d, e) {
            return d - jQuery.easing.easeOutBounce(a, e - b, 0, d, e) + c
        },
        easeOutBounce: function(a, b, c, d, e) {
            if ((b /= e) < 1 / 2.75) {
                return d * 7.5625 * b * b + c
            } else if (b < 2 / 2.75) {
                return d * (7.5625 * (b -= 1.5 / 2.75) * b + .75) + c
            } else if (b < 2.5 / 2.75) {
                return d * (7.5625 * (b -= 2.25 / 2.75) * b + .9375) + c
            } else {
                return d * (7.5625 * (b -= 2.625 / 2.75) * b + .984375) + c
            }
        },
        easeInOutBounce: function(a, b, c, d, e) {
            if (b < e / 2) return jQuery.easing.easeInBounce(a, b * 2, 0, d, e) * .5 + c;
            return jQuery.easing.easeOutBounce(a, b * 2 - e, 0, d, e) * .5 + d * .5 + c
        }
    })
    /*! Mousewheel by Brandon Aaron (http://brandon.aaron.sh) */
    ! function(a) {
        "function" == typeof define && define.amd ? define(["jquery"], a) : "object" == typeof exports ? module.exports = a : a(jQuery)
    }(function(a) {
        function b(b) {
            var g = b || window.event,
                h = i.call(arguments, 1),
                j = 0,
                l = 0,
                m = 0,
                n = 0,
                o = 0,
                p = 0;
            if (b = a.event.fix(g), b.type = "mousewheel", "detail" in g && (m = -1 * g.detail), "wheelDelta" in g && (m = g.wheelDelta), "wheelDeltaY" in g && (m = g.wheelDeltaY), "wheelDeltaX" in g && (l = -1 * g.wheelDeltaX), "axis" in g && g.axis === g.HORIZONTAL_AXIS && (l = -1 * m, m = 0), j = 0 === m ? l : m, "deltaY" in g && (m = -1 * g.deltaY, j = m), "deltaX" in g && (l = g.deltaX, 0 === m && (j = -1 * l)), 0 !== m || 0 !== l) {
                if (1 === g.deltaMode) {
                    var q = a.data(this, "mousewheel-line-height");
                    j *= q, m *= q, l *= q
                } else if (2 === g.deltaMode) {
                    var r = a.data(this, "mousewheel-page-height");
                    j *= r, m *= r, l *= r
                }
                if (n = Math.max(Math.abs(m), Math.abs(l)), (!f || f > n) && (f = n, d(g, n) && (f /= 40)), d(g, n) && (j /= 40, l /= 40, m /= 40), j = Math[j >= 1 ? "floor" : "ceil"](j / f), l = Math[l >= 1 ? "floor" : "ceil"](l / f), m = Math[m >= 1 ? "floor" : "ceil"](m / f), k.settings.normalizeOffset && this.getBoundingClientRect) {
                    var s = this.getBoundingClientRect();
                    o = b.clientX - s.left, p = b.clientY - s.top
                }
                return b.deltaX = l, b.deltaY = m, b.deltaFactor = f, b.offsetX = o, b.offsetY = p, b.deltaMode = 0, h.unshift(b, j, l, m), e && clearTimeout(e), e = setTimeout(c, 200), (a.event.dispatch || a.event.handle).apply(this, h)
            }
        }

        function c() {
            f = null
        }

        function d(a, b) {
            return k.settings.adjustOldDeltas && "mousewheel" === a.type && b % 120 === 0
        }
        var e, f, g = ["wheel", "mousewheel", "DOMMouseScroll", "MozMousePixelScroll"],
            h = "onwheel" in document || document.documentMode >= 9 ? ["wheel"] : ["mousewheel", "DomMouseScroll", "MozMousePixelScroll"],
            i = Array.prototype.slice;
        if (a.event.fixHooks)
            for (var j = g.length; j;) a.event.fixHooks[g[--j]] = a.event.mouseHooks;
        var k = a.event.special.mousewheel = {
            version: "3.1.12",
            setup: function() {
                if (this.addEventListener)
                    for (var c = h.length; c;) this.addEventListener(h[--c], b, !1);
                else this.onmousewheel = b;
                a.data(this, "mousewheel-line-height", k.getLineHeight(this)), a.data(this, "mousewheel-page-height", k.getPageHeight(this))
            },
            teardown: function() {
                if (this.removeEventListener)
                    for (var c = h.length; c;) this.removeEventListener(h[--c], b, !1);
                else this.onmousewheel = null;
                a.removeData(this, "mousewheel-line-height"), a.removeData(this, "mousewheel-page-height")
            },
            getLineHeight: function(b) {
                var c = a(b),
                    d = c["offsetParent" in a.fn ? "offsetParent" : "parent"]();
                return d.length || (d = a("body")), parseInt(d.css("fontSize"), 10) || parseInt(c.css("fontSize"), 10) || 16
            },
            getPageHeight: function(b) {
                return a(b).height()
            },
            settings: {
                adjustOldDeltas: !0,
                normalizeOffset: !0
            }
        };
        a.fn.extend({
            mousewheel: function(a) {
                return a ? this.bind("mousewheel", a) : this.trigger("mousewheel")
            },
            unmousewheel: function(a) {
                return this.unbind("mousewheel", a)
            }
        })
    });
(function($, window, document) {
    jQuery(document).ready(function($) {
        window.requestAnimationFrame = window.requestAnimationFrame || window.mozRequestAnimationFrame || window.webkitRequestAnimationFrame || window.msRequestAnimationFrame || function(f) {
            setTimeout(f, 1000 / 60)
        }
        var nectarDOMInfo = {
            usingMobileBrowser: (navigator.userAgent.match(/(Android|iPod|iPhone|iPad|BlackBerry|IEMobile|Opera Mini)/)) ? true : false,
            getWindowSize: function() {
                nectarDOMInfo.windowHeight = window.innerHeight;
                nectarDOMInfo.windowWidth = window.innerWidth;
                nectarDOMInfo.adminBarHeight = ($('#wpadminbar').length > 0) ? $('#wpadminbar').height() : 0;
                nectarDOMInfo.secondaryHeaderHeight = ($('#header-secondary-outer').length > 0) ? $('#header-secondary-outer').height() : 0;
            },
            scrollPosMouse: function() {
                return $(window).scrollTop();
            },
            scrollPosRAF: function() {
                nectarDOMInfo.scrollTop = $(window).scrollTop();
                requestAnimationFrame(nectarDOMInfo.scrollPosRAF);
            },
            bindEvents: function() {
                if (!nectarDOMInfo.usingMobileBrowser) {
                    $(window).on('scroll', function() {
                        nectarDOMInfo.scrollTop = nectarDOMInfo.scrollPosMouse();
                    });
                }
                $(window).on('resize', nectarDOMInfo.getWindowSize);
            }
        }
        nectarDOMInfo.getWindowSize();
        nectarDOMInfo.scrollTop = nectarDOMInfo.scrollPosMouse();
        if (nectarDOMInfo.usingMobileBrowser) {
            requestAnimationFrame(nectarDOMInfo.scrollPosRAF);
        }
        nectarDOMInfo.bindEvents();
        fwsClasses();

        function fancyBoxInit() {
            $('a.pp').removeClass('pp').attr('data-fancybox', '');
            $("a[rel^='prettyPhoto']:not([rel*='_gal']):not([rel*='product-gallery']):not([rel*='prettyPhoto['])").removeAttr('rel').attr('data-fancybox', '');
            $('.wpb_gallery .wpb_gallery_slidesnectarslider_style').each(function() {
                var $unique_id = Math.floor(Math.random() * 10000);
                $(this).find('.swiper-slide a:not(.ext-url-link)').attr('data-fancybox', 'group_' + $unique_id);
            });
            $('.wpb_gallery_slides.wpb_flexslider').each(function() {
                var $unique_id = Math.floor(Math.random() * 10000);
                $(this).find('.slides > li > a').attr('data-fancybox', 'group_' + $unique_id);
            });
            $('.wpb_gallery_slidesflickity_style').each(function() {
                var $unique_id = Math.floor(Math.random() * 10000);
                $(this).find('.cell > a:not(.ext-url-link)').attr('data-fancybox', 'group_' + $unique_id);
            });
            $('.portfolio-items, .wpb_gallery .parallax-grid-item').each(function() {
                var $unique_id = Math.floor(Math.random() * 10000);
                if ($(this).find('.pretty_photo').length > 0) {
                    $(this).find('.pretty_photo').removeClass('pretty_photo').attr('data-fancybox', 'group_' + $unique_id);
                } else if ($(this).find('a[rel*="prettyPhoto["]').length > 0) {
                    $(this).find('a[rel*="prettyPhoto["]').removeAttr('rel').attr('data-fancybox', 'group_' + $unique_id);
                }
            });
            if ($('body').hasClass('nectar-auto-lightbox')) {
                $('.gallery').each(function() {
                    if ($(this).find('.gallery-icon a[rel^="prettyPhoto"]').length == 0) {
                        var $unique_id = Math.floor(Math.random() * 10000);
                        $(this).find('.gallery-item .gallery-icon a[href*=".jpg"], .gallery-item .gallery-icon a[href*=".png"], .gallery-item .gallery-icon a[href*=".gif"], .gallery-item .gallery-icon a[href*=".jpeg"]').attr('data-fancybox', 'group_' + $unique_id).removeClass('pretty_photo');
                    }
                });
                $('.main-content img').each(function() {
                    if ($(this).parent().is("[href]") && !$(this).parent().is(".magnific-popup") && $(this).parents('.tiled-gallery').length == 0 && $(this).parents('.product-image').length == 0 && $(this).parents('.iosSlider.product-slider').length == 0) {
                        var match = $(this).parent().attr('href').match(/\.(jpg|png|gif)\b/);
                        if (match) $(this).parent().attr('data-fancybox', '');
                    }
                });
            }
            fbMarginArr = ($('body.admin-bar').length > 0) ? [60, 100] : [60, 100];
            if (window.innerWidth < 1000) {
                fbMarginArr = [0, 0];
            }
            $("[data-fancybox]").fancybox({
                animationEffect: "zoom-in-out",
                animationDuration: 350,
                buttons: ['fullScreen', 'zoom', 'close'],
                margin: fbMarginArr,
                loop: true,
                caption: function(instance, item) {
                    return $(this).attr('title');
                },
                beforeLoad: function(instance, current) {
                    if (typeof instance.current.src !== 'string') {
                        $.fancybox.close(true);
                    }
                },
                mobile: {
                    margin: 0
                }
            });
        }

        function magnificInit() {
            $('a.pp').removeClass('pp').addClass('magnific-popup');
            $("a[rel^='prettyPhoto']:not([rel*='_gal']):not([rel*='product-gallery']):not([rel*='prettyPhoto['])").removeAttr('rel').addClass('magnific-popup');
            $('.wpb_gallery .wpb_gallery_slidesnectarslider_style').each(function() {
                var $unique_id = Math.floor(Math.random() * 10000);
                $(this).find('.swiper-slide a:not(.ext-url-link)').addClass('pretty_photo');
            });
            $('.wpb_gallery_slides.wpb_flexslider').each(function() {
                var $unique_id = Math.floor(Math.random() * 10000);
                $(this).find('.slides > li > a').addClass('pretty_photo');
            });
            $('.wpb_gallery_slidesflickity_style').each(function() {
                var $unique_id = Math.floor(Math.random() * 10000);
                $(this).find('.cell > a:not(.ext-url-link)').addClass('pretty_photo');
            });
            $('.portfolio-items, .wpb_gallery .swiper-slide, .wpb_gallery_slidesflickity_style .cell, .wpb_gallery_slides.wpb_flexslider ul > li,  .wpb_gallery .parallax-grid-item').each(function() {
                if ($(this).find('.pretty_photo').length > 0) {
                    $(this).find('.pretty_photo').removeClass('pretty_photo').addClass('gallery').addClass('magnific');
                } else if ($(this).find('a[rel*="prettyPhoto["]').length > 0) {
                    $(this).find('a[rel*="prettyPhoto["]').removeAttr('rel').addClass('gallery').addClass('magnific');
                }
            });
            $("a[data-rel='prettyPhoto[product-gallery]']").each(function() {
                $(this).removeAttr('data-rel').addClass('magnific').addClass('gallery');
            });
            if ($('body').hasClass('nectar-auto-lightbox')) {
                $('.gallery').each(function() {
                    if ($(this).find('.gallery-icon a[rel^="prettyPhoto"]').length == 0) {
                        var $unique_id = Math.floor(Math.random() * 10000);
                        $(this).find('.gallery-item .gallery-icon a[href*=".jpg"], .gallery-item .gallery-icon a[href*=".png"], .gallery-item .gallery-icon a[href*=".gif"], .gallery-item .gallery-icon a[href*=".jpeg"]').addClass('magnific').addClass('gallery').removeClass('pretty_photo');
                    }
                });
                $('.main-content img').each(function() {
                    if ($(this).parent().is("[href]") && !$(this).parent().is(".magnific-popup") && $(this).parents('.tiled-gallery').length == 0 && $(this).parents('.product-image').length == 0 && $(this).parents('.iosSlider.product-slider').length == 0) {
                        var match = $(this).parent().attr('href').match(/\.(jpg|png|gif)\b/);
                        if (match) $(this).parent().addClass('magnific-popup').addClass('image-link');
                    }
                });
            }
            $('a.magnific-popup:not(.gallery):not(.nectar_video_lightbox)').magnificPopup({
                type: 'image',
                callbacks: {
                    imageLoadComplete: function() {
                        var $that = this;
                        setTimeout(function() {
                            $that.wrap.addClass('mfp-image-loaded');
                        }, 10);
                    },
                    beforeOpen: function() {
                        this.st.image.markup = this.st.image.markup.replace('mfp-figure', 'mfp-figure mfp-with-anim');
                    },
                    open: function() {
                        $.magnificPopup.instance.next = function() {
                            var $that = this;
                            this.wrap.removeClass('mfp-image-loaded');
                            setTimeout(function() {
                                $.magnificPopup.proto.next.call($that);
                            }, 100);
                        }
                        $.magnificPopup.instance.prev = function() {
                            var $that = this;
                            this.wrap.removeClass('mfp-image-loaded');
                            setTimeout(function() {
                                $.magnificPopup.proto.prev.call($that);
                            }, 100);
                        }
                    }
                },
                fixedContentPos: false,
                mainClass: 'mfp-zoom-in',
                removalDelay: 400
            });
            $('a.magnific-popup.nectar_video_lightbox, .magnific_nectar_video_lightbox a.link_text, .swiper-slide a[href*=youtube], .swiper-slide a[href*=vimeo], .nectar-video-box a.full-link.magnific-popup').magnificPopup({
                type: 'iframe',
                fixedContentPos: false,
                mainClass: 'mfp-zoom-in',
                removalDelay: 400
            });
            $('a.magnific.gallery').each(function() {
                var $parentRow = ($(this).closest('.wpb_column').length > 0) ? $(this).closest('.wpb_column') : $(this).parents('.row');
                if ($parentRow.length > 0 && !$parentRow.hasClass('lightbox-col')) {
                    $parentRow.magnificPopup({
                        type: 'image',
                        delegate: 'a.magnific',
                        mainClass: 'mfp-zoom-in',
                        fixedContentPos: false,
                        callbacks: {
                            elementParse: function(item) {
                                if ($(item.el.context).is('[href]') && $(item.el.context).attr('href').indexOf('iframe=true') != -1 || $(item.el.context).is('[href]') && $(item.el.context).attr('href').indexOf('https://www.youtube.com/watch') != -1) {
                                    item.type = 'iframe';
                                } else if ($(item.el.context).is('[href]') && $(item.el.context).attr('href').indexOf('video-popup-') != -1) {
                                    item.type = 'inline';
                                } else {
                                    item.type = 'image';
                                }
                            },
                            imageLoadComplete: function() {
                                var $that = this;
                                setTimeout(function() {
                                    $that.wrap.addClass('mfp-image-loaded');
                                }, 10);
                            },
                            beforeOpen: function() {
                                this.st.image.markup = this.st.image.markup.replace('mfp-figure', 'mfp-figure mfp-with-anim');
                            },
                            open: function() {
                                if ($(this.content).find('.mejs-video video').length > 0 && $().mediaelementplayer) {
                                    $(this.content).find('.mejs-video video')[0].player.remove();
                                    var $that = this;
                                    setTimeout(function() {
                                        $($that.content).find('video').mediaelementplayer();
                                        $($that.content).find('.mejs-video video')[0].player.play();
                                    }, 50);
                                }
                                $.magnificPopup.instance.next = function() {
                                    var $that = this;
                                    this.wrap.removeClass('mfp-image-loaded');
                                    setTimeout(function() {
                                        $.magnificPopup.proto.next.call($that);
                                        if ($($that.content).find('.mejs-video video').length > 0) {
                                            $($that.content).find('.mejs-video video')[0].play();
                                        }
                                    }, 100);
                                }
                                $.magnificPopup.instance.prev = function() {
                                    var $that = this;
                                    this.wrap.removeClass('mfp-image-loaded');
                                    setTimeout(function() {
                                        $.magnificPopup.proto.prev.call($that);
                                        if ($($that.content).find('.mejs-video video').length > 0) {
                                            $($that.content).find('.mejs-video video')[0].play();
                                        }
                                    }, 100);
                                }
                            },
                            close: function() {
                                if ($(this.content).find('.mejs-video video').length > 0) {
                                    $(this.content).find('.mejs-video video')[0].load();
                                }
                            }
                        },
                        removalDelay: 400,
                        gallery: {
                            enabled: true
                        }
                    });
                    $parentRow.addClass('lightbox-col');
                }
            });
        }

        function lightBoxInit() {
            if ($('body[data-ls="magnific"]').length > 0 || $('body[data-ls="pretty_photo"]').length > 0) {
                magnificInit();
            } else if ($('body[data-ls="fancybox"]').length > 0) {
                fancyBoxInit();
            }
        }
        lightBoxInit();
        setTimeout(lightBoxInit, 500);
        /*!
         * jQuery Transit - CSS3 transitions and transformations
         * (c) 2011-2012 Rico Sta. Cruz <rico@ricostacruz.com>
         * MIT Licensed.
         *
         * http://ricostacruz.com/jquery.transit
         * http://github.com/rstacruz/jquery.transit
         */
        (function(k) {
            k.transit = {
                version: "0.9.9",
                propertyMap: {
                    marginLeft: "margin",
                    marginRight: "margin",
                    marginBottom: "margin",
                    marginTop: "margin",
                    paddingLeft: "padding",
                    paddingRight: "padding",
                    paddingBottom: "padding",
                    paddingTop: "padding"
                },
                enabled: true,
                useTransitionEnd: false
            };
            var d = document.createElement("div");
            var q = {};

            function b(v) {
                if (v in d.style) {
                    return v
                }
                var u = ["Moz", "Webkit", "O", "ms"];
                var r = v.charAt(0).toUpperCase() + v.substr(1);
                if (v in d.style) {
                    return v
                }
                for (var t = 0; t < u.length; ++t) {
                    var s = u[t] + r;
                    if (s in d.style) {
                        return s
                    }
                }
            }

            function e() {
                d.style[q.transform] = "";
                d.style[q.transform] = "rotateY(90deg)";
                return d.style[q.transform] !== ""
            }
            var a = navigator.userAgent.toLowerCase().indexOf("chrome") > -1;
            q.transition = b("transition");
            q.transitionDelay = b("transitionDelay");
            q.transform = b("transform");
            q.transformOrigin = b("transformOrigin");
            q.transform3d = e();
            var i = {
                transition: "transitionEnd",
                MozTransition: "transitionend",
                OTransition: "oTransitionEnd",
                WebkitTransition: "webkitTransitionEnd",
                msTransition: "MSTransitionEnd"
            };
            var f = q.transitionEnd = i[q.transition] || null;
            for (var p in q) {
                if (q.hasOwnProperty(p) && typeof k.support[p] === "undefined") {
                    k.support[p] = q[p]
                }
            }
            d = null;
            k.cssEase = {
                _default: "ease",
                "in": "ease-in",
                out: "ease-out",
                "in-out": "ease-in-out",
                snap: "cubic-bezier(0,1,.5,1)",
                easeOutCubic: "cubic-bezier(.215,.61,.355,1)",
                easeInOutCubic: "cubic-bezier(.645,.045,.355,1)",
                easeInCirc: "cubic-bezier(.6,.04,.98,.335)",
                easeOutCirc: "cubic-bezier(.075,.82,.165,1)",
                easeInOutCirc: "cubic-bezier(.785,.135,.15,.86)",
                easeInExpo: "cubic-bezier(.95,.05,.795,.035)",
                easeOutExpo: "cubic-bezier(.19,1,.22,1)",
                easeInOutExpo: "cubic-bezier(1,0,0,1)",
                easeInQuad: "cubic-bezier(.55,.085,.68,.53)",
                easeOutQuad: "cubic-bezier(.25,.46,.45,.94)",
                easeInOutQuad: "cubic-bezier(.455,.03,.515,.955)",
                easeInQuart: "cubic-bezier(.895,.03,.685,.22)",
                easeOutQuart: "cubic-bezier(.165,.84,.44,1)",
                easeInOutQuart: "cubic-bezier(.77,0,.175,1)",
                easeInQuint: "cubic-bezier(.755,.05,.855,.06)",
                easeOutQuint: "cubic-bezier(.23,1,.32,1)",
                easeInOutQuint: "cubic-bezier(.86,0,.07,1)",
                easeInSine: "cubic-bezier(.47,0,.745,.715)",
                easeOutSine: "cubic-bezier(.39,.575,.565,1)",
                easeInOutSine: "cubic-bezier(.445,.05,.55,.95)",
                easeInBack: "cubic-bezier(.6,-.28,.735,.045)",
                easeOutBack: "cubic-bezier(.175, .885,.32,1.275)",
                easeInOutBack: "cubic-bezier(.68,-.55,.265,1.55)"
            };
            k.cssHooks["transit:transform"] = {
                get: function(r) {
                    return k(r).data("transform") || new j()
                },
                set: function(s, r) {
                    var t = r;
                    if (!(t instanceof j)) {
                        t = new j(t)
                    }
                    if (q.transform === "WebkitTransform" && !a) {
                        s.style[q.transform] = t.toString(true)
                    } else {
                        s.style[q.transform] = t.toString()
                    }
                    k(s).data("transform", t)
                }
            };
            k.cssHooks.transform = {
                set: k.cssHooks["transit:transform"].set
            };
            if (k.fn.jquery < "1.8") {
                k.cssHooks.transformOrigin = {
                    get: function(r) {
                        return r.style[q.transformOrigin]
                    },
                    set: function(r, s) {
                        r.style[q.transformOrigin] = s
                    }
                };
                k.cssHooks.transition = {
                    get: function(r) {
                        return r.style[q.transition]
                    },
                    set: function(r, s) {
                        r.style[q.transition] = s
                    }
                }
            }
            n("scale");
            n("translate");
            n("rotate");
            n("rotateX");
            n("rotateY");
            n("rotate3d");
            n("perspective");
            n("skewX");
            n("skewY");
            n("x", true);
            n("y", true);

            function j(r) {
                if (typeof r === "string") {
                    this.parse(r)
                }
                return this
            }
            j.prototype = {
                setFromString: function(t, s) {
                    var r = (typeof s === "string") ? s.split(",") : (s.constructor === Array) ? s : [s];
                    r.unshift(t);
                    j.prototype.set.apply(this, r)
                },
                set: function(s) {
                    var r = Array.prototype.slice.apply(arguments, [1]);
                    if (this.setter[s]) {
                        this.setter[s].apply(this, r)
                    } else {
                        this[s] = r.join(",")
                    }
                },
                get: function(r) {
                    if (this.getter[r]) {
                        return this.getter[r].apply(this)
                    } else {
                        return this[r] || 0
                    }
                },
                setter: {
                    rotate: function(r) {
                        this.rotate = o(r, "deg")
                    },
                    rotateX: function(r) {
                        this.rotateX = o(r, "deg")
                    },
                    rotateY: function(r) {
                        this.rotateY = o(r, "deg")
                    },
                    scale: function(r, s) {
                        if (s === undefined) {
                            s = r
                        }
                        this.scale = r + "," + s
                    },
                    skewX: function(r) {
                        this.skewX = o(r, "deg")
                    },
                    skewY: function(r) {
                        this.skewY = o(r, "deg")
                    },
                    perspective: function(r) {
                        this.perspective = o(r, "px")
                    },
                    x: function(r) {
                        this.set("translate", r, null)
                    },
                    y: function(r) {
                        this.set("translate", null, r)
                    },
                    translate: function(r, s) {
                        if (this._translateX === undefined) {
                            this._translateX = 0
                        }
                        if (this._translateY === undefined) {
                            this._translateY = 0
                        }
                        if (r !== null && r !== undefined) {
                            this._translateX = o(r, "px")
                        }
                        if (s !== null && s !== undefined) {
                            this._translateY = o(s, "px")
                        }
                        this.translate = this._translateX + "," + this._translateY
                    }
                },
                getter: {
                    x: function() {
                        return this._translateX || 0
                    },
                    y: function() {
                        return this._translateY || 0
                    },
                    scale: function() {
                        var r = (this.scale || "1,1").split(",");
                        if (r[0]) {
                            r[0] = parseFloat(r[0])
                        }
                        if (r[1]) {
                            r[1] = parseFloat(r[1])
                        }
                        return (r[0] === r[1]) ? r[0] : r
                    },
                    rotate3d: function() {
                        var t = (this.rotate3d || "0,0,0,0deg").split(",");
                        for (var r = 0; r <= 3; ++r) {
                            if (t[r]) {
                                t[r] = parseFloat(t[r])
                            }
                        }
                        if (t[3]) {
                            t[3] = o(t[3], "deg")
                        }
                        return t
                    }
                },
                parse: function(s) {
                    var r = this;
                    s.replace(/([a-zA-Z0-9]+)\((.*?)\)/g, function(t, v, u) {
                        r.setFromString(v, u)
                    })
                },
                toString: function(t) {
                    var s = [];
                    for (var r in this) {
                        if (this.hasOwnProperty(r)) {
                            if ((!q.transform3d) && ((r === "rotateX") || (r === "rotateY") || (r === "perspective") || (r === "transformOrigin"))) {
                                continue
                            }
                            if (r[0] !== "_") {
                                if (t && (r === "scale")) {
                                    s.push(r + "3d(" + this[r] + ",1)")
                                } else {
                                    if (t && (r === "translate")) {
                                        s.push(r + "3d(" + this[r] + ",0)")
                                    } else {
                                        s.push(r + "(" + this[r] + ")")
                                    }
                                }
                            }
                        }
                    }
                    return s.join(" ")
                }
            };

            function m(s, r, t) {
                if (r === true) {
                    s.queue(t)
                } else {
                    if (r) {
                        s.queue(r, t)
                    } else {
                        t()
                    }
                }
            }

            function h(s) {
                var r = [];
                k.each(s, function(t) {
                    t = k.camelCase(t);
                    t = k.transit.propertyMap[t] || k.cssProps[t] || t;
                    t = c(t);
                    if (k.inArray(t, r) === -1) {
                        r.push(t)
                    }
                });
                return r
            }

            function g(s, v, x, r) {
                var t = h(s);
                if (k.cssEase[x]) {
                    x = k.cssEase[x]
                }
                var w = "" + l(v) + " " + x;
                if (parseInt(r, 10) > 0) {
                    w += " " + l(r)
                }
                var u = [];
                k.each(t, function(z, y) {
                    u.push(y + " " + w)
                });
                return u.join(", ")
            }
            k.fn.transition = k.fn.transit = function(z, s, y, C) {
                var D = this;
                var u = 0;
                var w = true;
                if (typeof s === "function") {
                    C = s;
                    s = undefined
                }
                if (typeof y === "function") {
                    C = y;
                    y = undefined
                }
                if (typeof z.easing !== "undefined") {
                    y = z.easing;
                    delete z.easing
                }
                if (typeof z.duration !== "undefined") {
                    s = z.duration;
                    delete z.duration
                }
                if (typeof z.complete !== "undefined") {
                    C = z.complete;
                    delete z.complete
                }
                if (typeof z.queue !== "undefined") {
                    w = z.queue;
                    delete z.queue
                }
                if (typeof z.delay !== "undefined") {
                    u = z.delay;
                    delete z.delay
                }
                if (typeof s === "undefined") {
                    s = k.fx.speeds._default
                }
                if (typeof y === "undefined") {
                    y = k.cssEase._default
                }
                s = l(s);
                var E = g(z, s, y, u);
                var B = k.transit.enabled && q.transition;
                var t = B ? (parseInt(s, 10) + parseInt(u, 10)) : 0;
                if (t === 0) {
                    var A = function(F) {
                        D.css(z);
                        if (C) {
                            C.apply(D)
                        }
                        if (F) {
                            F()
                        }
                    };
                    m(D, w, A);
                    return D
                }
                var x = {};
                var r = function(H) {
                    var G = false;
                    var F = function() {
                        if (G) {
                            D.unbind(f, F)
                        }
                        if (t > 0) {
                            D.each(function() {
                                this.style[q.transition] = (x[this] || null)
                            })
                        }
                        if (typeof C === "function") {
                            C.apply(D)
                        }
                        if (typeof H === "function") {
                            H()
                        }
                    };
                    if ((t > 0) && (f) && (k.transit.useTransitionEnd)) {
                        G = true;
                        D.bind(f, F)
                    } else {
                        window.setTimeout(F, t)
                    }
                    D.each(function() {
                        if (t > 0) {
                            this.style[q.transition] = E
                        }
                        k(this).css(z)
                    })
                };
                var v = function(F) {
                    this.offsetWidth;
                    r(F)
                };
                m(D, w, v);
                return this
            };

            function n(s, r) {
                if (!r) {
                    k.cssNumber[s] = true
                }
                k.transit.propertyMap[s] = q.transform;
                k.cssHooks[s] = {
                    get: function(v) {
                        var u = k(v).css("transit:transform");
                        return u.get(s)
                    },
                    set: function(v, w) {
                        var u = k(v).css("transit:transform");
                        u.setFromString(s, w);
                        k(v).css({
                            "transit:transform": u
                        })
                    }
                }
            }

            function c(r) {
                return r.replace(/([A-Z])/g, function(s) {
                    return "-" + s.toLowerCase()
                })
            }

            function o(s, r) {
                if ((typeof s === "string") && (!s.match(/^[\-0-9\.]+$/))) {
                    return s
                } else {
                    return "" + s + r
                }
            }

            function l(s) {
                var r = s;
                if (k.fx.speeds[r]) {
                    r = k.fx.speeds[r]
                }
                return o(r, "ms")
            }
            k.transit.getTransitionValue = g
        })(jQuery);
        var $event = $.event,
            dispatchMethod = $.event.handle ? 'handle' : 'dispatch',
            resizeTimeout;
        $event.special.smartresize = {
            setup: function() {
                $(this).bind("resize", $event.special.smartresize.handler);
            },
            teardown: function() {
                $(this).unbind("resize", $event.special.smartresize.handler);
            },
            handler: function(event, execAsap) {
                var context = this,
                    args = arguments;
                event.type = "smartresize";
                if (resizeTimeout) {
                    clearTimeout(resizeTimeout);
                }
                resizeTimeout = setTimeout(function() {
                    $event[dispatchMethod].apply(context, args);
                }, execAsap === "execAsap" ? 0 : 100);
            }
        };
        $.fn.smartresize = function(fn) {
            return fn ? this.bind("smartresize", fn) : this.trigger("smartresize", ["execAsap"]);
        };
        var $standAnimatedColTimeout = [];
        var $animatedSVGIconTimeout = [];
        var $svg_icons = [];
        var $nectarCustomSliderRotate;

        function niceScrollInit() {
            if (!$().niceScroll) {
                return;
            }
            $("html").niceScroll({
                scrollspeed: 60,
                mousescrollstep: 40,
                cursorwidth: 15,
                cursorborder: 0,
                cursorcolor: '#303030',
                cursorborderradius: 6,
                autohidemode: false,
                horizrailenabled: false
            });
            if ($('#boxed').length == 0) {
                $('body, body #header-outer, body #header-secondary-outer, body #search-outer').css('padding-right', '16px');
            } else if ($('body[data-ext-responsive="true"]').length == 0) {
                $('body').css('padding-right', '16px');
            }
            $('html').addClass('no-overflow-y');
        }
        var $smoothActive = $('body').attr('data-smooth-scrolling');
        var $smoothCache = ($smoothActive == 1) ? true : false;
        if ($smoothActive == 1 && $(window).width() > 690 && $('body').outerHeight(true) > $(window).height() && Modernizr.csstransforms3d && !navigator.userAgent.match(/(Android|iPod|iPhone|iPad|IEMobile|Opera Mini)/)) {
            niceScrollInit();
        } else {
            $('body').attr('data-smooth-scrolling', '0');
        }
        if ($smoothCache == false && $('body.material').length == 0 && navigator.platform.toUpperCase().indexOf('MAC') === -1 && !navigator.userAgent.match(/(Android|iPod|iPhone|iPad|IEMobile|Opera Mini)/) && $(window).width() > 690 && $('#nectar_fullscreen_rows').length == 0) {
            ! function() {
                function e() {
                    var e = !1;
                    e && c("keydown", r), v.keyboardSupport && !e && u("keydown", r)
                }

                function t() {
                    if (document.body) {
                        var t = document.body,
                            n = document.documentElement,
                            o = window.innerHeight,
                            r = t.scrollHeight;
                        if (S = document.compatMode.indexOf("CSS") >= 0 ? n : t, w = t, e(), x = !0, top != self) y = !0;
                        else if (r > o && (t.offsetHeight <= o || n.offsetHeight <= o)) {
                            var a = !1,
                                i = function() {
                                    a || n.scrollHeight == document.height || (a = !0, setTimeout(function() {
                                        n.style.height = document.height + "px", a = !1
                                    }, 500))
                                };
                            if (n.style.height = "auto", setTimeout(i, 10), S.offsetHeight <= o) {
                                var l = document.createElement("div");
                                l.style.clear = "both", t.appendChild(l)
                            }
                        }
                        v.fixedBackground || b || (t.style.backgroundAttachment = "scroll", n.style.backgroundAttachment = "scroll")
                    }
                }

                function n(e, t, n, o) {
                    if (o || (o = 1e3), d(t, n), 1 != v.accelerationMax) {
                        var r = +new Date,
                            a = r - C;
                        if (a < v.accelerationDelta) {
                            var i = (1 + 30 / a) / 2;
                            i > 1 && (i = Math.min(i, v.accelerationMax), t *= i, n *= i)
                        }
                        C = +new Date
                    }
                    if (M.push({
                            x: t,
                            y: n,
                            lastX: 0 > t ? .99 : -.99,
                            lastY: 0 > n ? .99 : -.99,
                            start: +new Date
                        }), !T) {
                        var l = e === document.body,
                            u = function() {
                                for (var r = +new Date, a = 0, i = 0, c = 0; c < M.length; c++) {
                                    var s = M[c],
                                        d = r - s.start,
                                        f = d >= v.animationTime,
                                        h = f ? 1 : d / v.animationTime;
                                    v.pulseAlgorithm && (h = p(h));
                                    var m = s.x * h - s.lastX >> 0,
                                        w = s.y * h - s.lastY >> 0;
                                    a += m, i += w, s.lastX += m, s.lastY += w, f && (M.splice(c, 1), c--)
                                }
                                l ? window.scrollBy(a, i) : (a && (e.scrollLeft += a), i && (e.scrollTop += i)), t || n || (M = []), M.length ? N(u, e, o / v.frameRate + 1) : T = !1
                            };
                        N(u, e, 0), T = !0
                    }
                }

                function o(e) {
                    x || t();
                    var o = e.target,
                        r = l(o);
                    if (!r || e.defaultPrevented || s(w, "embed") || s(o, "embed") && /\.pdf/i.test(o.src)) return !0;
                    var a = e.wheelDeltaX || 0,
                        i = e.wheelDeltaY || 0;
                    return a || i || (i = e.wheelDelta || 0), !v.touchpadSupport && f(i) ? !0 : (Math.abs(a) > 1.2 && (a *= v.stepSize / 120), Math.abs(i) > 1.2 && (i *= v.stepSize / 120), n(r, -a, -i), void e.preventDefault())
                }

                function r(e) {
                    var t = e.target,
                        o = e.ctrlKey || e.altKey || e.metaKey || e.shiftKey && e.keyCode !== H.spacebar;
                    if (/input|textarea|select|embed/i.test(t.nodeName) || t.isContentEditable || e.defaultPrevented || o) return !0;
                    if (s(t, "button") && e.keyCode === H.spacebar) return !0;
                    var r, a = 0,
                        i = 0,
                        u = l(w),
                        c = u.clientHeight;
                    switch (u == document.body && (c = window.innerHeight), e.keyCode) {
                        case H.up:
                            i = -v.arrowScroll;
                            break;
                        case H.down:
                            i = v.arrowScroll;
                            break;
                        case H.spacebar:
                            r = e.shiftKey ? 1 : -1, i = -r * c * .9;
                            break;
                        case H.pageup:
                            i = .9 * -c;
                            break;
                        case H.pagedown:
                            i = .9 * c;
                            break;
                        case H.home:
                            i = -u.scrollTop;
                            break;
                        case H.end:
                            var d = u.scrollHeight - u.scrollTop - c;
                            i = d > 0 ? d + 10 : 0;
                            break;
                        case H.left:
                            a = -v.arrowScroll;
                            break;
                        case H.right:
                            a = v.arrowScroll;
                            break;
                        default:
                            return !0
                    }
                    n(u, a, i), e.preventDefault()
                }

                function a(e) {
                    w = e.target
                }

                function i(e, t) {
                    for (var n = e.length; n--;) E[A(e[n])] = t;
                    return t
                }

                function l(e) {
                    var t = [],
                        n = S.scrollHeight;
                    do {
                        var o = E[A(e)];
                        if (o) return i(t, o);
                        if (t.push(e), n === e.scrollHeight) {
                            if (!y || S.clientHeight + 10 < n) return i(t, document.body)
                        } else if (e.clientHeight + 10 < e.scrollHeight && (overflow = getComputedStyle(e, "").getPropertyValue("overflow-y"), "scroll" === overflow || "auto" === overflow)) return i(t, e)
                    } while (e = e.parentNode)
                }

                function u(e, t, n) {
                    window.addEventListener(e, t, n || !1)
                }

                function c(e, t, n) {
                    window.removeEventListener(e, t, n || !1)
                }

                function s(e, t) {
                    return (e.nodeName || "").toLowerCase() === t.toLowerCase()
                }

                function d(e, t) {
                    e = e > 0 ? 1 : -1, t = t > 0 ? 1 : -1, (k.x !== e || k.y !== t) && (k.x = e, k.y = t, M = [], C = 0)
                }

                function f(e) {
                    if (e) {
                        e = Math.abs(e), D.push(e), D.shift(), clearTimeout(z);
                        var t = h(D[0], 120) && h(D[1], 120) && h(D[2], 120);
                        return !t
                    }
                }

                function h(e, t) {
                    return Math.floor(e / t) == e / t
                }

                function m(e) {
                    var t, n, o;
                    return e *= v.pulseScale, 1 > e ? t = e - (1 - Math.exp(-e)) : (n = Math.exp(-1), e -= 1, o = 1 - Math.exp(-e), t = n + o * (1 - n)), t * v.pulseNormalize
                }

                function p(e) {
                    return e >= 1 ? 1 : 0 >= e ? 0 : (1 == v.pulseNormalize && (v.pulseNormalize /= m(1)), m(e))
                }
                var w, g = {
                        frameRate: 150,
                        animationTime: 500,
                        stepSize: 120,
                        pulseAlgorithm: !0,
                        pulseScale: 8,
                        pulseNormalize: 1,
                        accelerationDelta: 20,
                        accelerationMax: 1,
                        keyboardSupport: !0,
                        arrowScroll: 50,
                        touchpadSupport: !0,
                        fixedBackground: !0,
                        excluded: ""
                    },
                    v = g,
                    b = !1,
                    y = !1,
                    k = {
                        x: 0,
                        y: 0
                    },
                    x = !1,
                    S = document.documentElement,
                    D = [120, 120, 120],
                    H = {
                        left: 37,
                        up: 38,
                        right: 39,
                        down: 40,
                        spacebar: 32,
                        pageup: 33,
                        pagedown: 34,
                        end: 35,
                        home: 36
                    },
                    v = g,
                    M = [],
                    T = !1,
                    C = +new Date,
                    E = {};
                setInterval(function() {
                    E = {}
                }, 1e4);
                var z, A = function() {
                        var e = 0;
                        return function(t) {
                            return t.uniqueID || (t.uniqueID = e++)
                        }
                    }(),
                    N = function() {
                        return window.requestAnimationFrame || window.webkitRequestAnimationFrame || function(e, t, n) {
                            window.setTimeout(e, n || 1e3 / 60)
                        }
                    }(),
                    K = /chrome/i.test(window.navigator.userAgent),
                    L = null;
                "onwheel" in document.createElement("div") ? L = "wheel" : "onmousewheel" in document.createElement("div") && (L = "mousewheel"), L && K && (u(L, o), u("mousedown", a), u("load", t))
            }();
        }

        function flexsliderInit() {
            $('.flex-gallery').each(function() {
                var $that = $(this);
                imagesLoaded($(this), function(instance) {
                    $that.flexslider({
                        animation: 'fade',
                        smoothHeight: false,
                        animationSpeed: 500,
                        useCSS: false,
                        touch: true
                    });
                    $('.flex-gallery .flex-direction-nav li a.flex-next').html('<i class="fa fa-angle-right"></i>');
                    $('.flex-gallery .flex-direction-nav li a.flex-prev').html('<i class="fa fa-angle-left"></i>');
                });
            });
        }
        flexsliderInit();

        function flickityInit() {
            if ($('.nectar-flickity:not(.masonry)').length == 0) return false;
            var $flickitySliders = [];
            $('.nectar-flickity:not(.masonry)').each(function(i) {
                $(this).addClass('instance-' + i);
                var $freeScrollBool = ($(this).is('[data-free-scroll]') && $(this).attr('data-free-scroll') == 'true') ? true : false;
                var $groupCellsBool = true;
                var $flickContainBool = true;
                var $flcikAttr = 0.025;
                var $flickCellAlign = 'center';
                if ($(this).is('[data-format="fixed_text_content_fullwidth"]')) {
                    $flickCellAlign = 'left';
                    $groupCellsBool = false;
                    $flickContainBool = false;
                    $flcikAttr = 0.02;
                }
                if ($freeScrollBool == true) {
                    $groupCellsBool = false;
                }
                if ($(this).attr('data-controls').length > 0 && $(this).attr('data-controls') == 'next_prev_arrows') {
                    var $paginationBool = false;
                    var $nextPrevArrowBool = true;
                } else {
                    var $paginationBool = true;
                    var $nextPrevArrowBool = false;
                }
                if ($(this).attr('data-controls').length > 0 && $(this).attr('data-controls') == 'none') {
                    var $paginationBool = false;
                    var $nextPrevArrowBool = false;
                }
                var $flickity_autoplay = false;
                var $selectedAttraction = 0.025;
                if ($(this).is('[data-autoplay]') && $(this).attr('data-autoplay') == 'true') {
                    $flickity_autoplay = true;
                    $selectedAttraction = 0.019;
                    if ($(this).is('[data-autoplay-dur]') && $(this).attr('data-autoplay-dur').length > 0) {
                        if (parseInt($(this).attr('data-autoplay-dur')) > 100 && parseInt($(this).attr('data-autoplay-dur')) < 30000) {
                            $flickity_autoplay = parseInt($(this).attr('data-autoplay-dur'));
                        }
                    }
                }
                var $that = $(this);
                $flickitySliders[i] = new Flickity('.nectar-flickity.instance-' + i, {
                    contain: $flickContainBool,
                    draggable: true,
                    lazyLoad: false,
                    imagesLoaded: true,
                    percentPosition: true,
                    cellAlign: $flickCellAlign,
                    selectedAttraction: $selectedAttraction,
                    groupCells: $groupCellsBool,
                    prevNextButtons: $nextPrevArrowBool,
                    freeScroll: $freeScrollBool,
                    pageDots: $paginationBool,
                    resize: true,
                    selectedAttraction: $flcikAttr,
                    autoPlay: $flickity_autoplay,
                    pauseAutoPlayOnHover: false,
                    setGallerySize: true,
                    wrapAround: true,
                    accessibility: false,
                    arrowShape: {
                        x0: 20,
                        x1: 70,
                        y1: 30,
                        x2: 70,
                        y2: 25,
                        x3: 70
                    }
                });
                if ($(this).is('[data-format="fixed_text_content_fullwidth"]')) {
                    var $onMobileBrowser = navigator.userAgent.match(/(Android|iPod|iPhone|iPad|BlackBerry|IEMobile|Opera Mini)/);
                    $flickitySliders[i].on('scroll', function() {
                        if ($onMobileBrowser) {
                            return;
                        }
                        var $curFlkSlid = $flickitySliders[i];
                        var $flkSlideWidth = $that.find('.cell').outerWidth() + 25;
                        var $leftHeaderSize = ($('body[data-header-format="left-header"]').length > 0 && $(window).width() > 1000) ? 275 : 0;
                        var $extraWindowSpace = (($(window).width() + $leftHeaderSize) - $that.parents('.main-content').width()) / 2;
                        $extraWindowSpace += parseInt($that.css('margin-left')) + 2;
                        $flickitySliders[i].slides.forEach(function(slide, j) {
                            var $scaleAmt = 1;
                            var $translateXAmt = 0;
                            var $rotateAmt = 0;
                            var $slideZIndex = 10;
                            var $opacityAmt = 1;
                            var $slideOffset = $(slide.cells[0].element).offset().left;
                            var flkInstanceSlide = $('.nectar-flickity.instance-' + i + ' .cell:nth-child(' + (j + 1) + ')');
                            if ($slideOffset - $extraWindowSpace < 0 && $slideOffset - $extraWindowSpace > $flkSlideWidth * -1) {
                                $scaleAmt = 1 + (($slideOffset - $extraWindowSpace) / 1500);
                                $opacityAmt = 1 + (($slideOffset - $extraWindowSpace + 70) / 550);
                                $translateXAmt = (($slideOffset - $extraWindowSpace)) * -1;
                                $rotateAmt = (($slideOffset - $extraWindowSpace) / 25) * -1;
                            } else {
                                $scaleAmt = 1;
                                $opacityAmt = 1;
                                $translateXAmt = 0;
                                $rotateAmt = 0;
                            }
                            if ($slideOffset + 5 - $extraWindowSpace < 0 && $slideOffset - $extraWindowSpace > $flkSlideWidth * -1) {
                                $slideZIndex = 5;
                            } else {
                                $slideZIndex = 10;
                            }
                            flkInstanceSlide.css({
                                'z-index': $slideZIndex
                            });
                            flkInstanceSlide.find('.inner-wrap-outer').css({
                                'transform': 'perspective(800px) translateX(' + $translateXAmt + 'px) rotateY(' + $rotateAmt + 'deg) translateZ(0)',
                                'opacity': $opacityAmt
                            });
                            flkInstanceSlide.find('.inner-wrap').css({
                                'transform': 'scale(' + $scaleAmt + ') translateZ(0)'
                            });
                        });
                    });
                }
                var $removeHiddenTimeout;
                $flickitySliders[i].on('dragStart', function() {
                    clearTimeout($removeHiddenTimeout);
                    $that.addClass('is-dragging');
                    $that.find('.flickity-prev-next-button').addClass('hidden');
                });
                $flickitySliders[i].on('dragEnd', function() {
                    $that.removeClass('is-dragging');
                    $removeHiddenTimeout = setTimeout(function() {
                        $that.find('.flickity-prev-next-button').removeClass('hidden');
                    }, 600);
                });
                $('.flickity-prev-next-button').on('click', function() {
                    clearTimeout($removeHiddenTimeout);
                    $(this).parents('.nectar-flickity').find('.flickity-prev-next-button').addClass('hidden');
                    $removeHiddenTimeout = setTimeout(function() {
                        $that.find('.flickity-prev-next-button').removeClass('hidden');
                    }, 600);
                });
                if ($that.hasClass('nectar-carousel')) {
                    imagesLoaded($that, function(instance) {
                        nectarCarouselFlkEH($that);
                    });
                }
            });
        }
        setTimeout(flickityInit, 100);

        function setNectarCarouselFlkEH() {
            $('.nectar-carousel.nectar-flickity:not(.masonry)').each(function() {
                nectarCarouselFlkEH($(this));
            });
        }

        function nectarCarouselFlkEH($slider_instance) {
            var $tallestSlideCol = 0;
            $slider_instance.find('.flickity-slider > .cell').css('height', 'auto');
            $slider_instance.find('.flickity-slider > .cell').each(function() {
                ($(this).height() > $tallestSlideCol) ? $tallestSlideCol = $(this).height(): $tallestSlideCol = $tallestSlideCol;
            });
            if ($tallestSlideCol < 10) $tallestSlideCol = 'auto';
            $slider_instance.find('.flickity-slider > .cell').css('height', $tallestSlideCol + 'px');
        }

        function flickityBlogInit() {
            if ($('.nectar-flickity.masonry.not-initialized').length == 0) return false;
            $('.nectar-flickity.masonry.not-initialized').each(function() {
                if ($(this).parents('article').hasClass('large_featured'))
                    $(this).insertBefore($(this).parents('article').find('.content-inner'));
            });
            $('.nectar-flickity.masonry.not-initialized').flickity({
                contain: true,
                draggable: false,
                lazyLoad: false,
                imagesLoaded: true,
                percentPosition: true,
                prevNextButtons: true,
                pageDots: false,
                resize: true,
                setGallerySize: true,
                wrapAround: true,
                accessibility: false
            });
            $('.nectar-flickity.masonry').removeClass('not-initialized');
            $('.nectar-flickity.masonry:not(.not-initialized)').each(function() {
                if ($(this).find('.item-count').length == 0) {
                    $('<div class="item-count"/>').insertBefore($(this).find('.flickity-prev-next-button.next'));
                    $(this).find('.item-count').html('<span class="current">1</span>/<span class="total">' + $(this).find('.flickity-slider .cell').length + '</span>');
                    $(this).find('.flickity-prev-next-button, .item-count').wrapAll('<div class="control-wrap" />');
                    if ($(this).parents('article').hasClass('wide_tall') && $(this).parents('.masonry.material').length == 0)
                        $(this).find('.control-wrap').insertBefore($(this));
                }
            });
            $('.masonry .flickity-prev-next-button.previous,  .masonry .flickity-prev-next-button.next').click(function() {
                if ($(this).parents('.wide_tall').length > 0)
                    $(this).parent().find('.item-count .current').html($(this).parents('article').find('.nectar-flickity .cell.is-selected').index() + 1);
                else
                    $(this).parent().find('.item-count .current').html($(this).parents('.nectar-flickity').find('.cell.is-selected').index() + 1);
            });
            $('body').on('mouseover', '.flickity-prev-next-button.next', function() {
                $(this).parent().find('.flickity-prev-next-button.previous, .item-count').addClass('next-hovered');
            });
            $('body').on('mouseleave', '.flickity-prev-next-button.next', function() {
                $(this).parent().find('.flickity-prev-next-button.previous, .item-count').removeClass('next-hovered');
            });
        }
        $('.twentytwenty-container').each(function() {
            var $that = $(this);
            $(this).imagesLoaded(function() {
                $that.twentytwenty();
            });
        });
        if ($('.nectar-recent-posts-single_featured.multiple_featured').length > 0) {
            splitLineText();
        }
        var $usingFullScreenRows = false;
        var $fullscreenSelector = '';
        var $disableFPonMobile = ($('#nectar_fullscreen_rows[data-mobile-disable]').length > 0) ? $('#nectar_fullscreen_rows').attr('data-mobile-disable') : 'off';
        var $onMobileBrowser = navigator.userAgent.match(/(Android|iPod|iPhone|iPad|BlackBerry|IEMobile|Opera Mini)/);
        if (!$onMobileBrowser) {
            $disableFPonMobile = 'off';
        }
        if ($disableFPonMobile == 'on' && $('#nectar_fullscreen_rows').length > 0) {
            $('#nectar_fullscreen_rows > .wpb_row[data-fullscreen-anchor-id]').each(function() {
                if ($(this).attr('data-fullscreen-anchor-id').length > 0)
                    $(this).attr('id', $(this).attr('data-fullscreen-anchor-id'));
            });
            $('.container-wrap .main-content > .row').css({
                'padding-bottom': '0'
            });
            if ($('#nectar_fullscreen_rows > .wpb_row:nth-child(1)').length > 0 && $('#header-outer[data-transparent-header="true"]').length > 0 && !$('#nectar_fullscreen_rows > .wpb_row:nth-child(1)').hasClass('full-width-content')) {
                $('#nectar_fullscreen_rows > .wpb_row:nth-child(1)').addClass('extra-top-padding');
            }
        }
        if ($('#nectar_fullscreen_rows').length > 0 && $disableFPonMobile != 'on' || $().fullpage && $disableFPonMobile != 'on') {
            function setFPNavColoring(index, direction) {
                if ($('#boxed').length > 0 && overallWidth > 750) return;
                if ($('#nectar_fullscreen_rows > .wpb_row:nth-child(' + index + ')').find('.span_12.light').length > 0) {
                    $('#fp-nav').addClass('light-controls');
                    if (direction == 'up')
                        $('#header-outer.dark-slide').removeClass('dark-slide');
                    else
                        setTimeout(function() {
                            $('#header-outer.dark-slide').removeClass('dark-slide');
                        }, 520);
                } else {
                    $('#fp-nav.light-controls').removeClass('light-controls');
                    if (direction == 'up')
                        $('#header-outer').addClass('dark-slide');
                    else
                        setTimeout(function() {
                            $('#header-outer').addClass('dark-slide');
                        }, 520);
                }
                if ($('#nectar_fullscreen_rows > .wpb_row:nth-child(' + index + ')').find('.nectar-slider-wrap[data-fullscreen="true"]').length > 0) {
                    var $currentSlider = $('#nectar_fullscreen_rows > .wpb_row:nth-child(' + index + ')').find('.nectar-slider-wrap[data-fullscreen="true"]');
                    if ($currentSlider.is('[data-overall_style="directional"]') && $('#header-outer #logo span.dark').length > 0) {
                        $('#header-outer').addClass('directional-nav-effect').removeClass('dne-disabled');
                    }
                    if ($currentSlider.find('.swiper-slide-active[data-color-scheme="light"]').length > 0) {
                        $('#header-outer').removeClass('dark-slide');
                    } else if ($currentSlider.find('.swiper-slide-active[data-color-scheme="dark"]').length > 0) {
                        $('#header-outer').addClass('dark-slide');
                    }
                } else {
                    $('#header-outer').removeClass('directional-nav-effect').addClass('dne-disabled');
                }
            }
            var $anchors = [];
            var $names = [];

            function setFPNames() {
                $anchors = [];
                $names = [];
                $('#nectar_fullscreen_rows > .wpb_row').each(function(i) {
                    $id = ($(this).is('[data-fullscreen-anchor-id]')) ? $(this).attr('data-fullscreen-anchor-id') : '';
                    if ($('#nectar_fullscreen_rows[data-anchors="on"]').length > 0) {
                        if ($id.indexOf('fws_') == -1) $anchors.push($id);
                        else $anchors.push('section-' + (i + 1));
                    }
                    if ($(this).find('.full-page-inner-wrap[data-name]').length > 0)
                        $names.push($(this).find('.full-page-inner-wrap').attr('data-name'));
                    else
                        $names.push(' ');
                });
            }
            setFPNames();

            function initFullPageFooter() {
                var $footerPos = $('#nectar_fullscreen_rows').attr('data-footer');
                if ($footerPos == 'default') {
                    $('#footer-outer').appendTo('#nectar_fullscreen_rows').addClass('fp-auto-height').addClass('fp-section').addClass('wpb_row').attr('data-anchor', ' ').wrapInner('<div class="span_12" />').wrapInner('<div class="container" />').wrapInner('<div class="full-page-inner" />').wrapInner('<div class="full-page-inner-wrap" />').wrapInner('<div class="full-page-inner-wrap-outer" />');
                } else if ($footerPos == 'last_row') {
                    $('#footer-outer').remove();
                    $('#nectar_fullscreen_rows > .wpb_row:last-child').attr('id', 'footer-outer').addClass('fp-auto-height');
                } else {
                    $('#footer-outer').remove();
                }
            }
            if ($('#nectar_fullscreen_rows').length > 0)
                initFullPageFooter();

            function fullscreenRowLogic() {
                $('.full-page-inner-wrap .full-page-inner > .span_12 > .wpb_column').each(function() {
                    if ($(this).find('> .vc_column-inner > .wpb_wrapper').find('> .wpb_row').length > 0) {
                        $(this).find('> .vc_column-inner > .wpb_wrapper').addClass('only_rows');
                        $rowNum = $(this).find('> .vc_column-inner > .wpb_wrapper').find('> .wpb_row').length;
                        $(this).find('> .vc_column-inner > .wpb_wrapper').attr('data-inner-row-num', $rowNum);
                    } else if ($(this).find('> .column-inner-wrap > .column-inner > .wpb_wrapper').find('> .wpb_row').length > 0) {
                        $(this).find('> .column-inner-wrap > .column-inner > .wpb_wrapper').addClass('only_rows');
                        $rowNum = $(this).find('> .column-inner-wrap > .column-inner > .wpb_wrapper').find('> .wpb_row').length;
                        $(this).find('> .column-inner-wrap > .column-inner > .wpb_wrapper').attr('data-inner-row-num', $rowNum);
                    }
                });
            }
            fullscreenRowLogic();

            function fullHeightRowOverflow() {
                if ($(window).width() >= 1000) {
                    $('#nectar_fullscreen_rows > .wpb_row .full-page-inner-wrap[data-content-pos="full_height"]').each(function() {
                        $(this).find('> .full-page-inner').css('height', '100%');
                        var maxHeight = overallHeight;
                        var columnPaddingTop = 0;
                        var columnPaddingBottom = 0;
                        if ($('#nectar_fullscreen_rows').attr('data-animation') == 'none')
                            $(this).find('> .full-page-inner > .span_12 ').css('height', '100%');
                        else
                            $(this).find('> .full-page-inner > .span_12 ').css('height', overallHeight);
                        $(this).find('> .full-page-inner > .span_12 > .wpb_column > .vc_column-inner > .wpb_wrapper').each(function() {
                            columnPaddingTop = parseInt($(this).parents('.wpb_column').css('padding-top'));
                            columnPaddingBottom = parseInt($(this).parents('.wpb_column').css('padding-bottom'));
                            maxHeight = maxHeight > $(this).height() + columnPaddingTop + columnPaddingBottom ? maxHeight : $(this).height() + columnPaddingTop + columnPaddingBottom;
                        });
                        if (maxHeight > overallHeight)
                            $(this).find('> .full-page-inner > .span_12').height(maxHeight).css('float', 'none');
                    });
                } else {
                    $('#nectar_fullscreen_rows > .wpb_row').each(function() {
                        $totalColHeight = 0;
                        $(this).find('.fp-scrollable > .fp-scroller > .full-page-inner-wrap-outer > .full-page-inner-wrap[data-content-pos="full_height"] > .full-page-inner > .span_12 > .wpb_column').each(function() {
                            $totalColHeight += $(this).outerHeight(true);
                        });
                        $(this).find('.fp-scrollable > .fp-scroller > .full-page-inner-wrap-outer > .full-page-inner-wrap > .full-page-inner').css('height', '100%');
                        if ($totalColHeight > $(this).find('.fp-scrollable > .fp-scroller > .full-page-inner-wrap-outer > .full-page-inner-wrap > .full-page-inner').height())
                            $(this).find('.fp-scrollable  > .fp-scroller > .full-page-inner-wrap-outer > .full-page-inner-wrap > .full-page-inner').height($totalColHeight);
                    });
                }
            }

            function fullscreenElementSizing() {
                $nsSelector = '.nectar-slider-wrap[data-fullscreen="true"][data-full-width="true"], .nectar-slider-wrap[data-fullscreen="true"][data-full-width="boxed-full-width"]';
                if ($('.nectar-slider-wrap[data-fullscreen="true"][data-full-width="true"]').length > 0 || $('.nectar-slider-wrap[data-fullscreen="true"][data-full-width="boxed-full-width"]').length > 0) {
                    if ($('#nectar_fullscreen_rows .wpb_row').length > 0)
                        $($nsSelector).find('.swiper-container').attr('data-height', $('#nectar_fullscreen_rows .wpb_row').height() + 1);
                    $(window).trigger('resize.nsSliderContent');
                    $($nsSelector).parents('.full-page-inner').addClass('only-nectar-slider');
                }
            }
            $('#nectar_fullscreen_rows[data-row-bg-animation="ken_burns"] > .wpb_row:first-child .row-bg.using-image').addClass('kenburns');
            setTimeout(function() {
                $('#nectar_fullscreen_rows[data-row-bg-animation="ken_burns"] > .wpb_row:first-child .row-bg.using-image').removeClass('kenburns');
            }, 500);
            if (navigator.userAgent.indexOf('Safari') != -1 && navigator.userAgent.indexOf('Chrome') == -1) $('#nectar_fullscreen_rows[data-row-bg-animation="ken_burns"]').attr('data-row-bg-animation', 'none');
            var overallHeight = $(window).height();
            var overallWidth = $(window).width();
            var $fpAnimation = $('#nectar_fullscreen_rows').attr('data-animation');
            var $fpAnimationSpeed;
            var $svgResizeTimeout;
            switch ($('#nectar_fullscreen_rows').attr('data-animation-speed')) {
                case 'slow':
                    $fpAnimationSpeed = 1150;
                    break;
                case 'medium':
                    $fpAnimationSpeed = 850;
                    break;
                case 'fast':
                    $fpAnimationSpeed = 650;
                    break;
                default:
                    $fpAnimationSpeed = 850;
            }

            function heyFirefoxDrawTheEl() {
                var $drawTheEl = $('#nectar_fullscreen_rows > div:first-child').height();
                if ($('#nectar_fullscreen_rows.trans-animation-active').length > 0) {
                    requestAnimationFrame(heyFirefoxDrawTheEl);
                }
            }

            function initNectarFP() {
                $usingFullScreenRows = true;
                $fullscreenSelector = '.wpb_row.active ';
                $('.container-wrap, .container-wrap .main-content > .row').css({
                    'padding-bottom': '0',
                    'margin-bottom': '0'
                });
                $('#nectar_fullscreen_rows').fullpage({
                    sectionSelector: '#nectar_fullscreen_rows > .wpb_row',
                    navigation: true,
                    css3: true,
                    scrollingSpeed: $fpAnimationSpeed,
                    anchors: $anchors,
                    scrollOverflow: true,
                    navigationPosition: 'right',
                    navigationTooltips: $names,
                    afterLoad: function(anchorLink, index, slideAnchor, slideIndex) {
                        if ($('#nectar_fullscreen_rows').hasClass('afterLoaded')) {
                            if (nectarDOMInfo.scrollTop != 0) {
                                window.scrollTo(0, 0);
                            }
                            $('.wpb_row:not(.last-before-footer):not(:nth-child(' + index + ')) .fp-scrollable').each(function() {
                                $scrollable = $(this).data('iscrollInstance');
                                $scrollable.scrollTo(0, 0);
                            });
                            $('.wpb_row:not(:nth-child(' + index + ')) .owl-carousel').trigger('to.owl.carousel', [0]);
                            var $row_id = $('#nectar_fullscreen_rows > .wpb_row:nth-child(' + index + ')').attr('id');
                            $('#nectar_fullscreen_rows > .wpb_row').removeClass('transition-out').removeClass('trans');
                            $('#nectar_fullscreen_rows > .wpb_row:nth-child(' + index + ')').removeClass('next-current');
                            $('#nectar_fullscreen_rows > .wpb_row:nth-child(' + index + ') .full-page-inner-wrap-outer').css({
                                'height': '100%'
                            });
                            $('#nectar_fullscreen_rows > .wpb_row .full-page-inner-wrap-outer').css({
                                'transform': 'none'
                            });
                            if ($row_id != 'footer-outer' && $('#nectar_fullscreen_rows > .wpb_row:nth-child(' + index + ').last-before-footer').length == 0) {
                                waypoints();
                                if (!navigator.userAgent.match(/(Android|iPod|iPhone|iPad|BlackBerry|IEMobile|Opera Mini)/)) {
                                    resetWaypoints();
                                    Waypoint.destroyAll();
                                    startMouseParallax();
                                }
                                responsiveTooltips();
                            }
                            if ($row_id != 'footer-outer') {
                                $('#nectar_fullscreen_rows > .wpb_row').removeClass('last-before-footer').css('transform', 'initial');
                                $('#nectar_fullscreen_rows > .wpb_row:not(.active):not(#footer-outer)').css({
                                    'transform': 'translateY(0)',
                                    'left': '-9999px',
                                    'transition': 'none',
                                    'opacity': '1',
                                    'will-change': 'auto'
                                });
                                $('#nectar_fullscreen_rows > .wpb_row:not(#footer-outer)').find('.full-page-inner-wrap-outer').css({
                                    'transition': 'none',
                                    'transform': 'none',
                                    'will-change': 'auto'
                                });
                                $('#nectar_fullscreen_rows > .wpb_row:not(#footer-outer)').find('.fp-tableCell').css({
                                    'transition': 'none',
                                    'transform': 'none',
                                    'will-change': 'auto'
                                });
                                $('#nectar_fullscreen_rows > .wpb_row:not(#footer-outer)').find('.full-page-inner-wrap-outer > .full-page-inner-wrap > .full-page-inner > .container').css({
                                    'backface-visibility': 'visible',
                                    'z-index': 'auto'
                                });
                            }
                        } else {
                            fullHeightRowOverflow();
                            overallHeight = $('#nectar_fullscreen_rows').height();
                            $('#nectar_fullscreen_rows').addClass('afterLoaded');
                            setTimeout(function() {
                                window.scrollTo(0, 0);
                            }, 1800);
                            $('#nectar_fullscreen_rows[data-row-bg-animation="ken_burns"] > .wpb_row:first-child .row-bg.using-image').removeClass('kenburns');
                            fullscreenElementSizing();
                        }
                        $('#nectar_fullscreen_rows').removeClass('nextSectionAllowed');
                    },
                    onLeave: function(index, nextIndex, direction) {
                        $('#nectar_fullscreen_rows').addClass('trans-animation-active');
                        var $row_id = $('#nectar_fullscreen_rows > .wpb_row:nth-child(' + nextIndex + ')').attr('id');
                        var $indexRow = $('#nectar_fullscreen_rows > .wpb_row:nth-child(' + index + ')');
                        var $nextIndexRow = $('#nectar_fullscreen_rows > .wpb_row:nth-child(' + nextIndex + ')');
                        var $nextIndexRowInner = $nextIndexRow.find('.full-page-inner-wrap-outer');
                        var $nextIndexRowFpTable = $nextIndexRow.find('.fp-tableCell');
                        var $transformProp = (!navigator.userAgent.match(/(Android|iPod|iPhone|iPad|BlackBerry|IEMobile|Opera Mini)/)) ? 'transform' : 'all';
                        if ($row_id == 'footer-outer') {
                            $indexRow.addClass('last-before-footer');
                            $('#footer-outer').css('opacity', '1');
                        } else {
                            $('#nectar_fullscreen_rows > .wpb_row.last-before-footer').css('transform', 'translateY(0px)');
                            $('#footer-outer').css('opacity', '0');
                        }
                        if ($indexRow.attr('id') == 'footer-outer') {
                            $('#footer-outer').css({
                                'transition': $transformProp + ' 460ms cubic-bezier(0.60, 0.23, 0.2, 0.93)',
                                'backface-visibility': 'hidden'
                            });
                            $('#footer-outer').css({
                                'transform': 'translateY(45%) translateZ(0)'
                            });
                        }
                        if ($nextIndexRow.attr('id') != 'footer-outer') {
                            $nextIndexRowFpTable.find('.full-page-inner-wrap-outer > .full-page-inner-wrap > .full-page-inner > .container').css({
                                'backface-visibility': 'hidden',
                                'z-index': '110'
                            });
                        }
                        if ($nextIndexRow.attr('id') != 'footer-outer' && $indexRow.attr('id') != 'footer-outer' && $('#nectar_fullscreen_rows[data-animation="none"]').length == 0) {
                            if (direction == 'down') {
                                if ($fpAnimation == 'parallax') {
                                    $indexRow.css({
                                        'transition': $transformProp + ' ' + $fpAnimationSpeed + 'ms cubic-bezier(.29,.23,.13,1)',
                                        'will-change': 'transform',
                                        'transform': 'translateZ(0)',
                                        'z-index': '100'
                                    });
                                    setTimeout(function() {
                                        $indexRow.css({
                                            'transform': 'translateY(-50%) translateZ(0)'
                                        });
                                    }, 60);
                                    $nextIndexRow.css({
                                        'z-index': '1000',
                                        'top': '0',
                                        'left': '0'
                                    });
                                    $nextIndexRowFpTable.css({
                                        'transform': 'translateY(100%) translateZ(0)',
                                        'will-change': 'transform'
                                    });
                                    $nextIndexRowInner.css({
                                        'transform': 'translateY(-50%) translateZ(0)',
                                        'will-change': 'transform'
                                    });
                                } else if ($fpAnimation == 'zoom-out-parallax') {
                                    $indexRow.css({
                                        'transition': 'opacity ' + $fpAnimationSpeed + 'ms cubic-bezier(0.37, 0.31, 0.2, 0.85), transform ' + $fpAnimationSpeed + 'ms cubic-bezier(0.37, 0.31, 0.2, 0.85)',
                                        'z-index': '100',
                                        'will-change': 'transform'
                                    });
                                    setTimeout(function() {
                                        $indexRow.css({
                                            'transform': 'scale(0.77) translateZ(0)',
                                            'opacity': '0'
                                        });
                                    }, 60);
                                    $nextIndexRow.css({
                                        'z-index': '1000',
                                        'top': '0',
                                        'left': '0'
                                    });
                                    $nextIndexRowFpTable.css({
                                        'transform': 'translateY(100%) translateZ(0)',
                                        'will-change': 'transform'
                                    });
                                    $nextIndexRowInner.css({
                                        'transform': 'translateY(-50%) translateZ(0)',
                                        'will-change': 'transform'
                                    });
                                }
                            } else {
                                if ($fpAnimation == 'parallax') {
                                    $indexRow.css({
                                        'transition': $transformProp + ' ' + $fpAnimationSpeed + 'ms cubic-bezier(.29,.23,.13,1)',
                                        'z-index': '100',
                                        'will-change': 'transform'
                                    });
                                    setTimeout(function() {
                                        $indexRow.css({
                                            'transform': 'translateY(50%) translateZ(0)'
                                        });
                                    }, 60);
                                    $nextIndexRow.css({
                                        'z-index': '1000',
                                        'top': '0',
                                        'left': '0'
                                    });
                                    $nextIndexRowFpTable.css({
                                        'transform': 'translateY(-100%) translateZ(0)',
                                        'will-change': 'transform'
                                    });
                                    $nextIndexRowInner.css({
                                        'transform': 'translateY(50%) translateZ(0)',
                                        'will-change': 'transform'
                                    });
                                } else if ($fpAnimation == 'zoom-out-parallax') {
                                    $indexRow.css({
                                        'transition': 'opacity ' + $fpAnimationSpeed + 'ms cubic-bezier(0.37, 0.31, 0.2, 0.85), transform ' + $fpAnimationSpeed + 'ms cubic-bezier(0.37, 0.31, 0.2, 0.85)',
                                        'z-index': '100',
                                        'will-change': 'transform'
                                    });
                                    setTimeout(function() {
                                        $indexRow.css({
                                            'transform': 'scale(0.77) translateZ(0)',
                                            'opacity': '0'
                                        });
                                    }, 60);
                                    $nextIndexRow.css({
                                        'z-index': '1000',
                                        'top': '0',
                                        'left': '0'
                                    });
                                    $nextIndexRowFpTable.css({
                                        'transform': 'translateY(-100%) translateZ(0)',
                                        'will-change': 'transform'
                                    });
                                    $nextIndexRowInner.css({
                                        'transform': 'translateY(50%) translateZ(0)',
                                        'will-change': 'transform'
                                    });
                                }
                            }
                            setTimeout(function() {
                                $nextIndexRowFpTable.css({
                                    'transition': $transformProp + ' ' + $fpAnimationSpeed + 'ms cubic-bezier(.29,.23,.13,1) 0ms',
                                    'transform': 'translateY(0%) translateZ(0)'
                                });
                                if ($fpAnimation != 'none') {
                                    $nextIndexRowInner.css({
                                        'transition': $transformProp + ' ' + $fpAnimationSpeed + 'ms cubic-bezier(.29,.23,.13,1) 0ms',
                                        'transform': 'translateY(0%) translateZ(0)'
                                    });
                                    if (navigator.userAgent.indexOf('Firefox') != -1) {
                                        requestAnimationFrame(heyFirefoxDrawTheEl);
                                    }
                                }
                            }, 60);
                        }
                        if ($('#nectar_fullscreen_rows[data-animation="none"]').length == 0 && $nextIndexRow.find('.fp-scrollable').length > 0) {
                            $nextIndexRow.find('.full-page-inner-wrap-outer').css('height', overallHeight);
                        }
                        setTimeout(function() {
                            if ($row_id == 'footer-outer') {
                                $indexRow.css('transform', 'translateY(-' + ($('#footer-outer').height() - 1) + 'px)');
                                $('#footer-outer').css({
                                    'transform': 'translateY(45%) translateZ(0)'
                                });
                                $('#footer-outer').css({
                                    'transition-duration': '0s',
                                    'backface-visibility': 'hidden'
                                });
                                setTimeout(function() {
                                    $('#footer-outer').css({
                                        'transition': $transformProp + ' 500ms cubic-bezier(0.60, 0.23, 0.2, 0.93)',
                                        'backface-visibility': 'hidden'
                                    });
                                    $('#footer-outer').css({
                                        'transform': 'translateY(0%) translateZ(0)'
                                    });
                                }, 30);
                            }
                        }, 30);
                        if ($row_id != 'footer-outer') {
                            stopMouseParallax();
                            setFPNavColoring(nextIndex, direction);
                            setTimeout(function() {
                                FPActiveMenuItems(nextIndex);
                            }, 50);
                        }
                    },
                    afterResize: function() {
                        overallHeight = $('#nectar_fullscreen_rows').height();
                        overallWidth = $(window).width();
                        fullHeightRowOverflow();
                        fullscreenElementSizing();
                        fullscreenFooterCalcs();
                        if ($('#footer-outer.active').length > 0) {
                            setTimeout(function() {
                                $('.last-before-footer').css('transform', 'translateY(-' + $('#footer-outer').height() + 'px)');
                            }, 200);
                        }
                        clearTimeout($svgResizeTimeout);
                        $svgResizeTimeout = setTimeout(function() {
                            if ($svg_icons.length > 0) {
                                $('.svg-icon-holder.animated-in').each(function(i) {
                                    $(this).css('opacity', '1');
                                    $svg_icons[$(this).find('svg').attr('id').slice(-1)].finish();
                                });
                            }
                        }, 300);
                    }
                });
            }
            if ($('#nectar_fullscreen_rows').length > 0) {
                initNectarFP();
            }
            $(window).smartresize(function() {
                if ($('#nectar_fullscreen_rows').length > 0) {
                    setTimeout(function() {
                        $('.wpb_row:not(.last-before-footer) .fp-scrollable').each(function() {
                            $scrollable = $(this).data('iscrollInstance');
                            $scrollable.refresh();
                        });
                    }, 200);
                    fullHeightRowOverflow();
                }
            });

            function fullscreenFooterCalcs() {
                if ($('#footer-outer.active').length > 0) {
                    $('.last-before-footer').addClass('fp-notransition').css('transform', 'translateY(-' + $('#footer-outer').height() + 'px)');
                    setTimeout(function() {
                        $('.last-before-footer').removeClass('fp-notransition');
                    }, 10);
                }
            }

            function stopMouseParallax() {
                $.each($mouseParallaxScenes, function(k, v) {
                    v.parallax('disable');
                });
            }

            function startMouseParallax() {
                if ($('#nectar_fullscreen_rows > .wpb_row.active .nectar-parallax-scene').length > 0) {
                    $.each($mouseParallaxScenes, function(k, v) {
                        v.parallax('enable');
                    });
                }
            }
            if ($('#nectar_fullscreen_rows').length > 0) {
                setFPNavColoring(1, 'na');
                fullscreenElementSizing();
                if ($('body[data-slide-out-widget-area-style="slide-out-from-right"].material').length > 0) {
                    $('#slide-out-widget-area .off-canvas-menu-container').find("a[href*='#']").click(function(e) {
                        var $link_hash = $(this).prop("hash");
                        if ($link_hash != '#' && $link_hash.indexOf("#") != -1 && $('div[data-fullscreen-anchor-id="' + $link_hash.substr($link_hash.indexOf("#") + 1) + '"]').length > 0) {
                            if ($('body.material-ocm-open').length > 0) {
                                $('body > .slide_out_area_close').addClass('non-human-allowed').trigger('click');
                                setTimeout(function() {
                                    $('body > .slide_out_area_close').removeClass('non-human-allowed');
                                }, 100);
                            }
                        }
                    });
                }
            }

            function FPActiveMenuItems(index) {
                if (!$('#nectar_fullscreen_rows[data-anchors="on"]').length > 0 || !index) return;
                var $hash = window.location.hash;
                var $hashSubstrng = ($hash && $hash.length > 0) ? $hash.substring(1, $hash.length) : '';
                if ($('body:not(.mobile) #header-outer[data-has-menu="true"]').length > 0 && $('#nectar_fullscreen_rows > .wpb_row:nth-child(' + index + ')[data-fullscreen-anchor-id]').length > 0 && $('header#top nav > ul.sf-menu > li').find('> a[href$="#' + $hashSubstrng + '"]').length > 0) {
                    $('header#top nav > ul.sf-menu > li').removeClass('current-menu-item');
                    $('header#top nav > ul.sf-menu > li').find('> a[href$="' + $hashSubstrng + '"]').parent().addClass('current-menu-item');
                }
            }

            function resetWaypoints() {
                $('img.img-with-animation.animated-in:not([data-animation="none"])').css({
                    'transition': 'none'
                });
                $('img.img-with-animation.animated-in:not([data-animation="none"])').css({
                    'opacity': '0',
                    'transform': 'none'
                }).removeClass('animated-in');
                $('.col.has-animation.animated-in:not([data-animation*="reveal"]), .wpb_column.has-animation.animated-in:not([data-animation*="reveal"])').css({
                    'transition': 'none'
                });
                $('.col.has-animation.animated-in:not([data-animation*="reveal"]), .wpb_column.has-animation.animated-in:not([data-animation*="reveal"]), .nectar_cascading_images .cascading-image:not([data-animation="none"]) .inner-wrap').css({
                    'opacity': '0',
                    'transform': 'none',
                    'left': 'auto',
                    'right': 'auto'
                }).removeClass('animated-in');
                $('.col.has-animation.boxed:not([data-animation*="reveal"]), .wpb_column.has-animation.boxed:not([data-animation*="reveal"])').addClass('no-pointer-events');
                $('.wpb_column.has-animation[data-animation*="reveal"], .nectar_cascading_images').removeClass('animated-in');
                if (overallWidth > 1000 && $('.using-mobile-browser').length == 0) {
                    $('.wpb_column.has-animation[data-animation="reveal-from-bottom"] > .column-inner-wrap').css({
                        'transition': 'none',
                        'transform': 'translate(0, 100%)'
                    });
                    $('.wpb_column.has-animation[data-animation="reveal-from-bottom"] > .column-inner-wrap > .column-inner').css({
                        'transition': 'none',
                        'transform': 'translate(0, -90%)'
                    });
                    $('.wpb_column.has-animation[data-animation="reveal-from-top"] > .column-inner-wrap').css({
                        'transition': 'none',
                        'transform': 'translate(0, -100%)'
                    });
                    $('.wpb_column.has-animation[data-animation="reveal-from-top"] > .column-inner-wrap > .column-inner').css({
                        'transition': 'none',
                        'transform': 'translate(0, 90%)'
                    });
                    $('.wpb_column.has-animation[data-animation="reveal-from-left"] > .column-inner-wrap').css({
                        'transition-duration': '0s',
                        'transform': 'translate(-100%, 0)'
                    });
                    $('.wpb_column.has-animation[data-animation="reveal-from-left"] > .column-inner-wrap > .column-inner').css({
                        'transition-duration': '0s',
                        'transform': 'translate(90%, 0)'
                    });
                    $('.wpb_column.has-animation[data-animation="reveal-from-right"] > .column-inner-wrap').css({
                        'transition-duration': '0s',
                        'transform': 'translate(100%, 0)'
                    });
                    $('.wpb_column.has-animation[data-animation="reveal-from-right"] > .column-inner-wrap > .column-inner').css({
                        'transition-duration': '0s',
                        'transform': 'translate(-90%, 0)'
                    });
                }
                $('.wpb_column.has-animation[data-animation*="reveal"] > .column-inner-wrap, .wpb_column.has-animation[data-animation*="reveal"] > .column-inner-wrap > .column-inner').removeClass('no-transform');
                $('.wpb_animate_when_almost_visible.animated').removeClass('wpb_start_animation').removeClass('animated');
                $('.wpb_column[data-border-animation="true"] .border-wrap.animation').removeClass('animation').removeClass('completed');
                $('.nectar-milestone.animated-in').removeClass('animated-in').removeClass('in-sight');
                $('.nectar-milestone .symbol').removeClass('in-sight');
                $('.nectar-fancy-ul[data-animation="true"]').removeClass('animated-in');
                $('.nectar-fancy-ul[data-animation="true"] ul li').css({
                    'opacity': '0',
                    'left': '-20px'
                });
                $('.nectar-progress-bar').parent().removeClass('completed');
                $('.nectar-progress-bar .bar-wrap > span').css({
                    'width': '0px'
                });
                $('.nectar-progress-bar .bar-wrap > span > strong').css({
                    'opacity': '0'
                });
                $('.owl-carousel[data-enable-animation="true"]').removeClass('animated-in');
                $('.owl-carousel[data-enable-animation="true"] .owl-stage > .owl-item').css({
                    'transition': 'none',
                    'opacity': '0',
                    'transform': 'translate(0, 70px)'
                });
                $('.divider-small-border[data-animate="yes"], .divider-border[data-animate="yes"]').removeClass('completed').css({
                    'transition': 'none',
                    'transform': 'scale(0,1)'
                });
                $('.nectar-icon-list').removeClass('completed');
                $('.nectar-icon-list-item').removeClass('animated');
                $('.portfolio-items .col').removeClass('animated-in');
                $('.nectar-split-heading').removeClass('animated-in');
                $('.nectar-split-heading .heading-line > div').transit({
                    'y': '200%'
                }, 0);
                $('.nectar_image_with_hotspots[data-animation="true"]').removeClass('completed');
                $('.nectar_image_with_hotspots[data-animation="true"] .nectar_hotspot_wrap').removeClass('animated-in');
                $('.nectar-animated-title').removeClass('completed');
                $('.nectar-highlighted-text em').removeClass('animated');
                if ($('.vc_pie_chart').length > 0) {
                    vc_pieChart();
                }
                $('.col.has-animation:not([data-animation*="reveal"]), .wpb_column.has-animation:not([data-animation*="reveal"])').each(function(i) {
                    clearTimeout($standAnimatedColTimeout[i]);
                });
            }
        } else if ($('#nectar_fullscreen_rows').length > 0 && $disableFPonMobile == 'on' || $().fullpage && $disableFPonMobile == 'on') {
            $('html,body').css({
                'height': 'auto',
                'overflow-y': 'auto'
            });
        }

        function initSF() {
            if ($('body[data-header-format="left-header"]').length == 0) {
                $disableHI = ($('body[data-dropdown-style="minimal"]').length > 0 && !($('#header-outer[data-megamenu-rt="1"]').length > 0 && $('#header-outer[data-transparent-header="true"]').length > 0)) ? true : false;
                $(".sf-menu").superfish({
                    delay: 650,
                    speed: 'fast',
                    disableHI: $disableHI,
                    speedOut: 'fast',
                    animation: {
                        opacity: 'show'
                    }
                });
                $('#header-outer .sf-menu > li:not(.megamenu) > ul > li > ul').each(function() {
                    if ($(this).offset().left + $(this).outerWidth() > $(window).width()) {
                        $(this).addClass('on-left-side');
                        $(this).find('ul').addClass('on-left-side');
                    }
                });
                $('body:not([data-header-format="left-header"]) header#top nav > ul > li.megamenu > ul > li > ul > li:has("> ul")').addClass('has-ul');
                if ($('body[data-megamenu-width="full-width"]').length > 0 && $('ul.sub-menu').length > 0) {
                    megamenuFullwidth();
                    $(window).on('smartresize', megamenuFullwidth);
                    $('header#top nav > ul > li.megamenu > .sub-menu').css('box-sizing', 'content-box');
                }
                $('header#top nav > ul.sf-menu > li').on('mouseenter', function() {
                    $(this).addClass('menu-item-over');
                });
                $('header#top nav > ul.sf-menu > li').on('mouseleave', function() {
                    $(this).removeClass('menu-item-over');
                });
                $('header#top nav .megamenu .sub-menu a.sf-with-ul .sf-sub-indicator, header#top .megamenu .sub-menu a .sf-sub-indicator').remove();
                $('header#top nav > ul > li.megamenu > ul.sub-menu > li > a').each(function() {
                    if ($(this).text() == '') {
                        $(this).remove();
                    }
                });
            }
        }

        function megamenuFullwidth() {
            var $windowWidth = $(window).width();
            var $headerContainerWidth = $('header#top > .container').width();
            $('header#top nav > ul > li.megamenu > .sub-menu').css({
                'padding-left': ($windowWidth - $headerContainerWidth) / 2 + 'px',
                'padding-right': ($windowWidth + 2 - $headerContainerWidth) / 2 + 'px',
                'width': $headerContainerWidth,
                'left': '-' + ($windowWidth - $headerContainerWidth) / 2 + 'px'
            });
        }
        var $navLeave;

        function addOrRemoveSF() {
            if (window.innerWidth < 1000 && $('body').attr('data-responsive') == '1') {
                $('body').addClass('mobile');
                $('header#top nav').css('display', 'none');
            } else {
                $('body').removeClass('mobile');
                $('header#top nav').css('display', '');
                $('#mobile-menu').hide();
                $('.slide-out-widget-area-toggle #toggle-nav .lines-button').removeClass('close');
                $('.sf-sub-indicator').css('height', $('a.sf-with-ul').height());
            }
            if (navigator.userAgent.match(/(Android|iPod|iPhone|iPad|BlackBerry|IEMobile|Opera Mini)/)) {
                $('body').addClass('using-mobile-browser');
            }
        }

        function showOnLeftSubMenu() {
            $('#header-outer .sf-menu > li:not(.megamenu) > ul > li > ul').each(function() {
                $(this).removeClass('on-left-side');
                if ($(this).offset().left + $(this).outerWidth() > $(window).width()) {
                    $(this).addClass('on-left-side');
                    $(this).find('ul').addClass('on-left-side');
                } else {
                    $(this).removeClass('on-left-side');
                    $(this).find('ul').removeClass('on-left-side');
                }
            });
        }
        addOrRemoveSF();
        initSF();
        $(window).resize(addOrRemoveSF);

        function SFArrows() {
            $('.sf-sub-indicator').css('height', $('a.sf-with-ul').height());
        }
        SFArrows();
        if (navigator.userAgent.match(/(Android|iPod|iPhone|iPad|IEMobile|BlackBerry|Opera Mini)/))
            $('body').attr('data-hhun', '0');

        function standardCarouselInit() {
            $('ul.carousel:not(".clients")').each(function() {
                var $that = $(this);
                var maxCols = ($(this).parents('.carousel-wrap').attr('data-full-width') == 'true') ? 'auto' : 3;
                var scrollNum = ($(this).parents('.carousel-wrap').attr('data-full-width') == 'true') ? 'auto' : '';
                var colWidth = ($(this).parents('.carousel-wrap').attr('data-full-width') == 'true') ? 500 : 453;
                var scrollSpeed, easing;
                var $autoplayBool = ($(this).attr('data-autorotate') == 'true') ? true : false;
                if ($('body.ascend').length > 0 && $(this).parents('.carousel-wrap').attr('data-full-width') != 'true' || $('body.material').length > 0 && $(this).parents('.carousel-wrap').attr('data-full-width') != 'true') {
                    if ($(this).find('li').length % 3 === 0) {
                        var $themeSkin = true;
                        var $themeSkin2 = true;
                    } else {
                        var $themeSkin = false;
                        var $themeSkin2 = true;
                    }
                } else {
                    var $themeSkin = true;
                    var $themeSkin2 = true;
                }
                (parseInt($(this).attr('data-scroll-speed'))) ? scrollSpeed = parseInt($(this).attr('data-scroll-speed')): scrollSpeed = 700;
                ($(this).is('[data-easing]')) ? easing = $(this).attr('data-easing'): easing = 'linear';
                var $element = $that;
                if ($that.find('img').length == 0) $element = $('body');
                imagesLoaded($element, function(instance) {
                    $that.carouFredSel({
                        circular: $themeSkin,
                        infinite: $themeSkin2,
                        height: 'auto',
                        responsive: true,
                        items: {
                            width: colWidth,
                            visible: {
                                min: 1,
                                max: maxCols
                            }
                        },
                        swipe: {
                            onTouch: true,
                            onMouse: true,
                            options: {
                                excludedElements: "button, input, select, textarea, .noSwipe",
                                tap: function(event, target) {
                                    if ($(target).attr('href') && !$(target).is('[target="_blank"]') && !$(target).is('[rel^="prettyPhoto"]') && !$(target).is('.magnific-popup') && !$(target).is('.magnific')) window.open($(target).attr('href'), '_self');
                                }
                            },
                            onBefore: function() {
                                $that.find('.work-item').trigger('mouseleave');
                                $that.find('.work-item .work-info a').trigger('mouseup');
                            }
                        },
                        scroll: {
                            items: scrollNum,
                            easing: easing,
                            duration: scrollSpeed,
                            onBefore: function(data) {
                                if ($('body.ascend').length > 0 && $that.parents('.carousel-wrap').attr('data-full-width') != 'true' || $('body.material').length > 0 && $that.parents('.carousel-wrap').attr('data-full-width') != 'true') {
                                    $that.parents('.carousel-wrap').find('.item-count .total').html(Math.ceil($that.find('> li').length / $that.triggerHandler("currentVisible").length));
                                }
                            },
                            onAfter: function(data) {
                                if ($('body.ascend').length > 0 && $that.parents('.carousel-wrap').attr('data-full-width') != 'true' || $('body.material').length > 0 && $that.parents('.carousel-wrap').attr('data-full-width') != 'true') {
                                    $that.parents('.carousel-wrap').find('.item-count .current').html($that.triggerHandler('currentPage') + 1);
                                    $that.parents('.carousel-wrap').find('.item-count .total').html(Math.ceil($that.find('> li').length / $that.triggerHandler("currentVisible").length));
                                }
                            }
                        },
                        prev: {
                            button: function() {
                                return $that.parents('.carousel-wrap').find('.carousel-prev');
                            }
                        },
                        next: {
                            button: function() {
                                return $that.parents('.carousel-wrap').find('.carousel-next');
                            }
                        },
                        auto: {
                            play: $autoplayBool
                        }
                    }, {
                        transition: true
                    }).animate({
                        'opacity': 1
                    }, 1300);
                    $that.parents('.carousel-wrap').wrap('<div class="carousel-outer">');
                    if ($that.parents('.carousel-wrap').attr('data-full-width') == 'true') $that.parents('.carousel-outer').css('overflow', 'visible');
                    if ($('body.ascend').length > 0 && $that.parents('.carousel-wrap').attr('data-full-width') != 'true' || $('body.material').length > 0 && $that.parents('.carousel-wrap').attr('data-full-width') != 'true') {
                        $('<div class="item-count"><span class="current">1</span>/<span class="total">' + ($that.find('> li').length / $that.triggerHandler("currentVisible").length) + '</span></div>').insertAfter($that.parents('.carousel-wrap').find('.carousel-prev'));
                    }
                    $that.addClass('finished-loading');
                    carouselHeightCalcs();
                });
            });
        }
        if ($('.carousel').length > 0) standardCarouselInit();

        function owlCarouselInit() {
            $('.owl-carousel').each(function() {
                $(this).addClass('owl-theme');
                var $that = $(this);
                var $stagePadding = ($(window).width() < 1000) ? 0 : parseInt($(this).attr('data-column-padding'));
                var $autoRotateBool = $that.attr('data-autorotate');
                var $autoRotateSpeed = $that.attr('data-autorotation-speed');
                var $owlLoopBool = ($that.is('[data-loop="true"]')) ? true : false;
                $(this).owlCarousel({
                    responsive: {
                        0: {
                            items: $(this).attr('data-mobile-cols')
                        },
                        690: {
                            items: $(this).attr('data-tablet-cols')
                        },
                        1000: {
                            items: $(this).attr('data-desktop-small-cols')
                        },
                        1300: {
                            items: $(this).attr('data-desktop-cols')
                        }
                    },
                    autoplay: $autoRotateBool,
                    autoplayTimeout: $autoRotateSpeed,
                    loop: $owlLoopBool,
                    smartSpeed: 350,
                    onTranslate: function() {
                        $that.addClass('moving');
                    },
                    onTranslated: function() {
                        $that.removeClass('moving');
                    }
                });
                $(this).on('changed.owl.carousel', function(event) {
                    if (event.item.count - event.page.size == event.item.index)
                        $(event.target).find('.owl-dots div:last').addClass('active').siblings().removeClass('active');
                });
            });
        }

        function owl_carousel_animate() {
            $($fullscreenSelector + '.owl-carousel[data-enable-animation="true"]').each(function() {
                $owlOffsetPos = ($('#nectar_fullscreen_rows').length > 0) ? '200%' : 'bottom-in-view';
                var $animationDelay = ($(this).is('[data-animation-delay]') && $(this).attr('data-animation-delay').length > 0 && $(this).attr('data-animation') != 'false') ? $(this).attr('data-animation-delay') : 0;
                var $that = $(this);
                var waypoint = new Waypoint({
                    element: $that,
                    handler: function(direction) {
                        if ($that.parents('.wpb_tab').length > 0 && $that.parents('.wpb_tab').css('visibility') == 'hidden' || $that.hasClass('animated-in')) {
                            waypoint.destroy();
                            return;
                        }
                        setTimeout(function() {
                            $that.find('.owl-stage > .owl-item').each(function(i) {
                                var $that = $(this);
                                $that.delay(i * 200).transition({
                                    'opacity': '1',
                                    'y': '0'
                                }, 600, 'easeOutQuart');
                            });
                            $that.addClass('animated-in');
                        }, $animationDelay);
                        waypoint.destroy();
                    },
                    offset: $owlOffsetPos
                });
            });
        }

        function productCarouselInit() {
            $('.products-carousel').each(function() {
                var $that = $(this).find('ul');
                var maxCols = 'auto';
                var scrollNum = 'auto';
                var colWidth = ($(this).parents('.full-width-content ').length > 0) ? 400 : 353;
                var scrollSpeed = 800;
                var easing = 'easeInOutQuart';
                var $element = $that;
                if ($that.find('img').length == 0) $element = $('body');
                $(this).append('<a class="carousel-prev" href="#"><i class="icon-salient-left-arrow"></i></a> <a class="carousel-next" href="#"><i class="icon-salient-right-arrow"></i></a>')
                imagesLoaded($element, function(instance) {
                    $that.carouFredSel({
                        circular: true,
                        responsive: true,
                        items: {
                            width: colWidth,
                            visible: {
                                min: 1,
                                max: maxCols
                            }
                        },
                        swipe: {
                            onTouch: true,
                            onMouse: true,
                            options: {
                                excludedElements: "button, input, select, textarea, .noSwipe",
                                tap: function(event, target) {
                                    if ($(target).attr('href') && !$(target).is('[target="_blank"]') && !$(target).hasClass('add_to_wishlist') && !$(target).hasClass('add_to_cart_button') && !$(target).is('[rel^="prettyPhoto"]'))
                                        window.open($(target).attr('href'), '_self');
                                    if ($(target).parent().attr('href') && !$(target).parent().is('[target="_blank"]') && !$(target).parent().hasClass('add_to_wishlist') && !$(target).parent().hasClass('add_to_cart_button') && !$(target).parent().is('[rel^="prettyPhoto"]'))
                                        window.open($(target).parent().attr('href'), '_self');
                                }
                            },
                            onBefore: function() {
                                $that.find('.product-wrap').trigger('mouseleave');
                                $that.find('.product a').trigger('mouseup');
                            }
                        },
                        scroll: {
                            items: scrollNum,
                            easing: easing,
                            duration: scrollSpeed
                        },
                        prev: {
                            button: function() {
                                return $that.parents('.carousel-wrap').find('.carousel-prev');
                            }
                        },
                        next: {
                            button: function() {
                                return $that.parents('.carousel-wrap').find('.carousel-next');
                            }
                        },
                        auto: {
                            play: false
                        }
                    }).animate({
                        'opacity': 1
                    }, 1300);
                    $that.parents('.carousel-wrap').wrap('<div class="carousel-outer">');
                    $that.addClass('finished-loading');
                    fullWidthContentColumns();
                    $(window).trigger('resize');
                });
            });
            var $wooFlickityCarousels = [];
            $('.nectar-woo-flickity').each(function(i) {
                var $that = $(this);
                $(this).find('.products > li').each(function() {
                    $(this).wrap('<div class="flickity-cell"></div>');
                });
                fullWidthSections();
                var pageDotsBool = ($that.is('[data-controls="bottom-pagination"]')) ? true : false;
                var arrowsBool = ($that.is('[data-controls="bottom-pagination"]')) ? false : true;
                var $autoplay = ($that.is('[data-autorotate-speed]') && parseInt($that.attr('data-autorotate-speed')) > 800) ? parseInt($that.attr('data-autorotate-speed')) : 5000;
                if (!$that.is('[data-autorotate="true"]')) {
                    $autoplay = false;
                }
                $wooFlickityCarousels[i] = $(this).find('ul');
                if (arrowsBool == true) {
                    $wooFlickityCarousels[i].on('ready.flickity', function() {
                        var flickityPrv = $that.find('.flickity-prev-next-button.previous').detach();
                        var flickityNxt = $that.find('.flickity-prev-next-button.next').detach();
                        $that.find('.nectar-woo-carousel-top').append(flickityPrv).append(flickityNxt);
                    });
                }
                $wooFlickityCarousels[i].flickity({
                    draggable: true,
                    lazyLoad: false,
                    imagesLoaded: true,
                    cellAlign: 'left',
                    groupCells: pageDotsBool,
                    prevNextButtons: arrowsBool,
                    pageDots: pageDotsBool,
                    resize: true,
                    percentPosition: true,
                    setGallerySize: true,
                    wrapAround: true,
                    autoPlay: $autoplay,
                    accessibility: false
                });
                if (arrowsBool == true) {
                    $that.find('.flickity-prev-next-button').append('<svg width="65px" height="65px" viewBox="0 0 72 72" xmlns="http://www.w3.org/2000/svg"><circle stroke-width="3" fill="none" stroke-linecap="round" cx="33" cy="33" r="28"></circle> <circle class="time" stroke-width="3" fill="none" stroke-linecap="round" cx="33" cy="33" r="28"></circle></svg>');
                    var $wooFlickityCount = $('<div class="woo-flickity-count" />');
                    $that.append($wooFlickityCount);
                    var $wooFlickityData = $wooFlickityCarousels[i].data('flickity');

                    function updateWooFlickityCount() {
                        var slideNumber = $wooFlickityData.selectedIndex + 1;
                        $wooFlickityCount.text(slideNumber + '/' + $wooFlickityData.slides.length);
                    }
                    updateWooFlickityCount();
                    $wooFlickityCarousels[i].on('select.flickity', updateWooFlickityCount);
                }
            });
        }
        if ($('.products-carousel').length > 0 || $('.nectar-woo-flickity').length > 0) productCarouselInit();

        function fwCarouselLinkFix() {
            var $mousePosStart = 0;
            var $mousePosEnd = 0;
            $('.carousel-wrap .portfolio-items .col .work-item .work-info a, .woocommerce .products-carousel ul.products li.product a').mousedown(function(e) {
                $mousePosStart = e.clientX;
            });
            $('.carousel-wrap .portfolio-items .col .work-item .work-info a, .woocommerce .products-carousel ul.products li.product a').mouseup(function(e) {
                $mousePosEnd = e.clientX;
            });
            $('.carousel-wrap .portfolio-items .col .work-item .work-info a, .woocommerce .products-carousel ul.products li.product a').click(function(e) {
                if (Math.abs($mousePosStart - $mousePosEnd) > 10) return false;
            });
        }
        fwCarouselLinkFix();

        function carouselHeightCalcs() {
            $('.carousel.portfolio-items.finished-loading').each(function() {
                var bottomSpace = ($(this).parents('.carousel-wrap').attr('data-full-width') == 'true' && $(this).find('.style-2, .style-3, .style-4').length > 0) ? 0 : 28;
                var tallestMeta = 0;
                $(this).find('> li').each(function() {
                    ($(this).find('.work-meta').height() > tallestMeta) ? tallestMeta = $(this).find('.work-meta').height(): tallestMeta = tallestMeta;
                });
                $(this).parents('.caroufredsel_wrapper').css({
                    'height': ($(this).find('.work-item').outerHeight() + tallestMeta + bottomSpace - 2) + 'px'
                });
                if ($('body.ascend').length > 0 && $(this).parents('.carousel-wrap').attr('data-full-width') != 'true' || $('body.material').length > 0 && $(this).parents('.carousel-wrap').attr('data-full-width') != 'true') {
                    $(this).parents('.carousel-wrap').find('.item-count .current').html(Math.ceil(($(this).triggerHandler("currentPosition") + 1) / $(this).triggerHandler("currentVisible").length));
                    $(this).parents('.carousel-wrap').find('.item-count .total').html(Math.ceil($(this).find('> li').length / $(this).triggerHandler("currentVisible").length));
                }
            });
            $('.carousel.finished-loading:not(".portfolio-items, .clients"), .caroufredsel_wrapper .products.finished-loading').each(function() {
                var tallestColumn = 0;
                $(this).find('> li').each(function() {
                    ($(this).height() > tallestColumn) ? tallestColumn = $(this).height(): tallestColumn = tallestColumn;
                });
                $(this).css('height', tallestColumn + 5);
                $(this).parents('.caroufredsel_wrapper').css('height', tallestColumn + 5);
                if ($('body.ascend').length > 0 && $(this).parents('.carousel-wrap').attr('data-full-width') != 'true' || $('body.material').length > 0 && $(this).parents('.carousel-wrap').attr('data-full-width') != 'true') {
                    $(this).parents('.carousel-wrap').find('.item-count .current').html(Math.ceil(($(this).triggerHandler("currentPosition") + 1) / $(this).triggerHandler("currentVisible").length));
                    $(this).parents('.carousel-wrap').find('.item-count .total').html(Math.ceil($(this).find('> li').length / $(this).triggerHandler("currentVisible").length));
                }
            });
        }


        function carouselfGrabbingClass() {
            $('body').on('mousedown', '.caroufredsel_wrapper, .carousel-wrap[data-full-width="true"] .portfolio-items .col .work-item .work-info a, .woocommerce .products-carousel ul.products li.product a', function() {
                $(this).addClass('active');
            });
            $('body').on('mouseup', '.caroufredsel_wrapper, .carousel-wrap[data-full-width="true"] .portfolio-items .col .work-item .work-info a, .woocommerce .products-carousel ul.products li.product a', function() {
                $(this).removeClass('active');
            });
        }
        carouselfGrabbingClass();
        $('body.ascend, body.material').on('mouseover', '.carousel-next', function() {
            $(this).parent().find('.carousel-prev, .item-count').addClass('next-hovered');
        });
        $('body.ascend, body.material').on('mouseleave', '.carousel-next', function() {
            $(this).parent().find('.carousel-prev, .item-count').removeClass('next-hovered');
        });

        jQuery.fn.setCursorPosition = function(position) {
            if (this.lengh == 0) return this;
            return $(this).setSelection(position, position);
        }
        jQuery.fn.setSelection = function(selectionStart, selectionEnd) {
            if (this.lengh == 0) return this;
            input = this[0];
            if (input.createTextRange) {
                var range = input.createTextRange();
                range.collapse(true);
                range.moveEnd('character', selectionEnd);
                range.moveStart('character', selectionStart);
                range.select();
            } else if (input.setSelectionRange) {
                input.focus();
                input.setSelectionRange(selectionStart, selectionEnd);
            }
            return this;
        }
        $.extend($.expr[':'], {
            transparent: function(elem, i, attr) {
                return ($(elem).css("opacity") === "0");
            }
        });

        function getQueryParams(qs) {
            qs = qs.split("+").join(" ");
            var params = {},
                tokens, re = /[?&]?([^=]+)=([^&]*)/g;
            while (tokens = re.exec(qs)) {
                params[decodeURIComponent(tokens[1])] = decodeURIComponent(tokens[2]);
            }
            return params;
        }
        var $_GET = getQueryParams(document.location.search);
        var CountUp = function(target, startVal, endVal, decimals, duration, options) {
            var lastTime = 0;
            var vendors = ['webkit', 'moz', 'ms', 'o'];
            for (var x = 0; x < vendors.length && !window.requestAnimationFrame; ++x) {
                window.requestAnimationFrame = window[vendors[x] + 'RequestAnimationFrame'];
                window.cancelAnimationFrame = window[vendors[x] + 'CancelAnimationFrame'] || window[vendors[x] + 'CancelRequestAnimationFrame'];
            }
            if (!window.requestAnimationFrame) {
                window.requestAnimationFrame = function(callback, element) {
                    var currTime = new Date().getTime();
                    var timeToCall = Math.max(0, 16 - (currTime - lastTime));
                    var id = window.setTimeout(function() {
                        callback(currTime + timeToCall);
                    }, timeToCall);
                    lastTime = currTime + timeToCall;
                    return id;
                };
            }
            if (!window.cancelAnimationFrame) {
                window.cancelAnimationFrame = function(id) {
                    clearTimeout(id);
                };
            }
            var self = this;
            self.options = {
                useEasing: true,
                useGrouping: true,
                separator: ',',
                decimal: '.',
                easingFn: null,
                formattingFn: null
            };
            for (var key in options) {
                if (options.hasOwnProperty(key)) {
                    self.options[key] = options[key];
                }
            }
            if (self.options.separator === '') {
                self.options.useGrouping = false;
            }
            if (!self.options.prefix) self.options.prefix = '';
            if (!self.options.suffix) self.options.suffix = '';
            self.d = (typeof target === 'string') ? document.getElementById(target) : target;
            self.startVal = Number(startVal);
            self.endVal = Number(endVal);
            self.countDown = (self.startVal > self.endVal);
            self.frameVal = self.startVal;
            self.decimals = Math.max(0, decimals || 0);
            self.dec = Math.pow(10, self.decimals);
            self.duration = Number(duration) * 1000 || 2000;
            self.formatNumber = function(nStr) {
                nStr = nStr.toFixed(self.decimals);
                nStr += '';
                var x, x1, x2, rgx;
                x = nStr.split('.');
                x1 = x[0];
                x2 = x.length > 1 ? self.options.decimal + x[1] : '';
                rgx = /(\d+)(\d{3})/;
                if (self.options.useGrouping) {
                    while (rgx.test(x1)) {
                        x1 = x1.replace(rgx, '$1' + self.options.separator + '$2');
                    }
                }
                return self.options.prefix + x1 + x2 + self.options.suffix;
            };
            self.easeOutExpo = function(t, b, c, d) {
                return c * (-Math.pow(2, -10 * t / d) + 1) * 1024 / 1023 + b;
            };
            self.easingFn = self.options.easingFn ? self.options.easingFn : self.easeOutExpo;
            self.formattingFn = self.options.formattingFn ? self.options.formattingFn : self.formatNumber;
            self.version = function() {
                return '1.7.1';
            };
            self.printValue = function(value) {
                var result = self.formattingFn(value);
                if (self.d.tagName === 'INPUT') {
                    this.d.value = result;
                } else if (self.d.tagName === 'text' || self.d.tagName === 'tspan') {
                    this.d.textContent = result;
                } else {
                    this.d.innerHTML = result;
                }
            };
            self.count = function(timestamp) {
                if (!self.startTime) {
                    self.startTime = timestamp;
                }
                self.timestamp = timestamp;
                var progress = timestamp - self.startTime;
                self.remaining = self.duration - progress;
                if (self.options.useEasing) {
                    if (self.countDown) {
                        self.frameVal = self.startVal - self.easingFn(progress, 0, self.startVal - self.endVal, self.duration);
                    } else {
                        self.frameVal = self.easingFn(progress, self.startVal, self.endVal - self.startVal, self.duration);
                    }
                } else {
                    if (self.countDown) {
                        self.frameVal = self.startVal - ((self.startVal - self.endVal) * (progress / self.duration));
                    } else {
                        self.frameVal = self.startVal + (self.endVal - self.startVal) * (progress / self.duration);
                    }
                }
                if (self.countDown) {
                    self.frameVal = (self.frameVal < self.endVal) ? self.endVal : self.frameVal;
                } else {
                    self.frameVal = (self.frameVal > self.endVal) ? self.endVal : self.frameVal;
                }
                self.frameVal = Math.round(self.frameVal * self.dec) / self.dec;
                self.printValue(self.frameVal);
                if (progress < self.duration) {
                    self.rAF = requestAnimationFrame(self.count);
                } else {
                    if (self.callback) {
                        self.callback();
                    }
                }
            };
            self.start = function(callback) {
                self.callback = callback;
                self.rAF = requestAnimationFrame(self.count);
                return false;
            };
            self.pauseResume = function() {
                if (!self.paused) {
                    self.paused = true;
                    cancelAnimationFrame(self.rAF);
                } else {
                    self.paused = false;
                    delete self.startTime;
                    self.duration = self.remaining;
                    self.startVal = self.frameVal;
                    requestAnimationFrame(self.count);
                }
            };
            self.reset = function() {
                self.paused = false;
                delete self.startTime;
                self.startVal = startVal;
                cancelAnimationFrame(self.rAF);
                self.printValue(self.startVal);
            };
            self.update = function(newEndVal) {
                cancelAnimationFrame(self.rAF);
                self.paused = false;
                delete self.startTime;
                self.startVal = self.frameVal;
                self.endVal = Number(newEndVal);
                self.countDown = (self.startVal > self.endVal);
                self.rAF = requestAnimationFrame(self.count);
            };
            self.printValue(self.startVal);
        };
        var easeOutCubic = function(t, b, c, d) {
            return c * ((t = t / d - 1) * t * t + 1) + b;
        };

        function vcWaypoints() {
            $($fullscreenSelector + ' .wpb_animate_when_almost_visible').each(function() {
                var $vcOffsetPos = ($('#nectar_fullscreen_rows').length > 0) ? '200%' : '90%';
                var $that = $(this);
                var waypoint = new Waypoint({
                    element: $that,
                    handler: function(direction) {
                        if ($that.parents('.wpb_tab').length > 0 && $that.parents('.wpb_tab').css('visibility') == 'hidden' || $that.hasClass('animated')) {
                            waypoint.destroy();
                            return;
                        }
                        $that.addClass("animated");
                        $that.addClass("wpb_start_animation");
                        waypoint.destroy();
                        if ($that.is('.nectar-button') && $('body[data-button-style*="rounded_shadow"]').length > 0) {
                            setTimeout(function() {
                                $that.removeClass('wpb_start_animation');
                            }, 1100);
                        }
                    },
                    offset: $vcOffsetPos
                });
            });
        }

        function milestoneInit() {
            $('.nectar-milestone').each(function() {
                if ($(this).is('[data-symbol]')) {
                    if ($(this).find('.symbol-wrap').length == 0) {
                        if ($(this).attr('data-symbol-pos') == 'before') {
                            $(this).find('.number').prepend('<div class="symbol-wrap"><span class="symbol">' + $(this).attr('data-symbol') + '</span></div>');
                        } else {
                            $(this).find('.number').append('<div class="symbol-wrap"><span class="symbol">' + $(this).attr('data-symbol') + '</span></div>');
                        }
                    }
                    $symbol_size = ($(this).attr('data-symbol-size') == $(this).find('.number').attr('data-number-size') && $(this).attr('data-symbol-alignment') == 'superscript') ? 32 : parseInt($(this).attr('data-symbol-size'));
                    $(this).find('.symbol-wrap').css({
                        'font-size': $symbol_size + 'px',
                        'line-height': $symbol_size + 'px'
                    });
                }
                $(this).find('.number').css({
                    'font-size': $(this).find('.number').attr('data-number-size') + 'px',
                    'line-height': $(this).find('.number').attr('data-number-size') + 'px'
                });
            });
            if (!$('body').hasClass('mobile') && $('.nectar-milestone').length > 0) {
                var $blurCssString = '';
                $($fullscreenSelector + '.nectar-milestone.motion_blur').each(function(i) {
                    $(this).addClass('instance-' + i);
                    var $currentColor = $(this).find('.number').css('color');
                    var colorInt = parseInt($currentColor.substring(1), 16);
                    var R = (colorInt & 0xFF0000) >> 16;
                    var G = (colorInt & 0x00FF00) >> 8;
                    var B = (colorInt & 0x0000FF) >> 0;
                    var $rgbaColorStart = 'rgba(' + R + ',' + G + ',' + B + ',0.2)';
                    var $rgbaColorEnd = 'rgba(' + R + ',' + G + ',' + B + ',1)';
                    var $numberSize = parseInt($(this).find('.number').attr('data-number-size'));
                    $blurCssString += '@keyframes motion-blur-number-' + i + ' { ' + ' 0% { ' + 'opacity: 0;' + 'color: ' + $rgbaColorStart + '; ' + 'text-shadow: 0 ' + $numberSize / 20 + 'px 0 ' + $rgbaColorStart + ', 0 ' + $numberSize / 10 + 'px 0 ' + $rgbaColorStart + ', 0 ' + $numberSize / 6 + 'px 0 ' + $rgbaColorStart + ', 0 ' + $numberSize / 5 + 'px 0 ' + $rgbaColorStart + ', 0 ' + $numberSize / 4 + 'px 0 ' + $rgbaColorStart + ', 0 -' + $numberSize / 20 + 'px 0 ' + $rgbaColorStart + ', 0 -' + $numberSize / 10 + 'px 0 ' + $rgbaColorStart + ', 0 -' + $numberSize / 6 + 'px 0 ' + $rgbaColorStart + ', 0 -' + $numberSize / 5 + 'px 0 ' + $rgbaColorStart + ', 0 -' + $numberSize / 4 + 'px 0 ' + $rgbaColorStart + '; ' + 'transform: translateZ(0px) translateY(-100%); ' + '-webkit-transform: translateZ(0px) translateY(-100%); ' + '} ' + '33% { opacity: 1 }' + '100% { ' + 'color: ' + $rgbaColorEnd + '; ' + 'text-shadow: none; ' + 'transform: translateZ(0px) translateY(0px); ' + '-webkit-transform: translateZ(0px) translateY(0px); ' + '} ' + '} ' + '@-webkit-keyframes motion-blur-number-' + i + ' { ' + ' 0% { ' + 'opacity: 0;' + 'color: ' + $rgbaColorStart + '; ' + 'text-shadow: 0 ' + $numberSize / 20 + 'px 0 ' + $rgbaColorStart + ', 0 ' + $numberSize / 10 + 'px 0 ' + $rgbaColorStart + ', 0 ' + $numberSize / 6 + 'px 0 ' + $rgbaColorStart + ', 0 ' + $numberSize / 5 + 'px 0 ' + $rgbaColorStart + ', 0 ' + $numberSize / 4 + 'px 0 ' + $rgbaColorStart + ', 0 -' + $numberSize / 20 + 'px 0 ' + $rgbaColorStart + ', 0 -' + $numberSize / 10 + 'px 0 ' + $rgbaColorStart + ', 0 -' + $numberSize / 6 + 'px 0 ' + $rgbaColorStart + ', 0 -' + $numberSize / 5 + 'px 0 ' + $rgbaColorStart + ', 0 -' + $numberSize / 4 + 'px 0 ' + $rgbaColorStart + '; ' + 'transform: translateZ(0px) translateY(-100%); ' + '-webkit-transform: translateZ(0px) translateY(-100%); ' + '} ' + '33% { opacity: 1 }' + '100% { ' + 'color: ' + $rgbaColorEnd + '; ' + 'text-shadow: none; ' + 'transform: translateZ(0px) translateY(0px); ' + '-webkit-transform: translateZ(0px) translateY(0px); ' + '} ' + '} ' + '.nectar-milestone.motion_blur.instance-' + i + ' .number span.in-sight { animation: 0.65s cubic-bezier(0, 0, 0.17, 1) 0s normal backwards 1 motion-blur-number-' + i + '; -webkit-animation: 0.65s cubic-bezier(0, 0, 0.17, 1) 0s normal backwards 1 motion-blur-number-' + i + '; } ';
                    $symbol = $(this).find('.symbol-wrap').clone();
                    $(this).find('.symbol-wrap').remove();
                    var characters = $(this).find('.number').text().split("");
                    $this = $(this).find('.number');
                    $this.empty();
                    $.each(characters, function(i, el) {
                        $this.append("<span>" + el + "</span");
                    });
                    if ($(this).has('[data-symbol]')) {
                        if ($(this).attr('data-symbol-pos') == 'after') {
                            $this.append($symbol);
                        } else {
                            $this.prepend($symbol);
                        }
                    }
                });
                var head = document.head || document.getElementsByTagName('head')[0];
                var style = document.createElement('style');
                style.type = 'text/css';
                if (style.styleSheet) {
                    style.styleSheet.cssText = $blurCssString;
                } else {
                    style.appendChild(document.createTextNode($blurCssString));
                }
                $(style).attr('id', 'milestone-blur');
                $('head #milestone-blur').remove();
                head.appendChild(style);
                milestoneWaypoint();
            }
        }

        function milestoneWaypoint() {
            $($fullscreenSelector + '.nectar-milestone').each(function() {
                var $offset = ($('#nectar_fullscreen_rows').length > 0) ? '250%' : '98%';
                var $that = $(this);
                var waypoint = new Waypoint({
                    element: $that,
                    handler: function(direction) {
                        if ($that.parents('.wpb_tab').length > 0 && $that.parents('.wpb_tab').css('visibility') == 'hidden' || $that.hasClass('animated-in')) {
                            waypoint.destroy();
                            return;
                        }
                        var $endNum = parseInt($that.find('.number span:not(.symbol)').text().replace(/,/g, ''));
                        if (!$that.hasClass('motion_blur')) {
                            var countOptions = {
                                easingFn: easeOutCubic
                            };
                            var $countEle = $that.find('.number span:not(.symbol)')[0];
                            var numAnim = new CountUp($countEle, 0, $endNum, 0, 2.2, countOptions);
                            numAnim.start();
                        } else {
                            $that.find('span').each(function(i) {
                                var $that = $(this);
                                setTimeout(function() {
                                    $that.addClass('in-sight');
                                }, 200 * i);
                            });
                        }
                        $that.addClass('animated-in');
                        waypoint.destroy();
                    },
                    offset: $offset
                });
            });
        }
        var $animationOnScrollTimeOut = ($('.nectar-box-roll').length > 0) ? 850 : 125;
        $tabbedClickCount = 0;
        $('body').on('click', '.tabbed > ul li:not(.cta-button) a', function() {
            var $id = $(this).parents('li').index() + 1;
            if (!$(this).hasClass('active-tab') && !$(this).hasClass('loading')) {
                $(this).parents('ul').find('a').removeClass('active-tab');
                $(this).addClass('active-tab');
                $(this).parents('.tabbed').find('> div:not(.clear)').css({
                    'visibility': 'hidden',
                    'position': 'absolute',
                    'opacity': '0',
                    'left': '-9999px'
                });
                $(this).parents('.tabbed').find('> div:nth-of-type(' + $id + ')').css({
                    'visibility': 'visible',
                    'position': 'relative',
                    'left': '0',
                    'display': 'block'
                }).stop().transition({
                    'opacity': 1
                }, 400);
                if ($(this).parents('.tabbed').find('> div:nth-of-type(' + $id + ') .iframe-embed').length > 0 || $(this).parents('.tabbed').find('> div:nth-of-type(' + $id + ') .portfolio-items').length > 0) setTimeout(function() {
                    $(window).resize();
                }, 10);
            }
            if ($tabbedClickCount != 0) {
                if ($(this).parents('.tabbed').find('> div:nth-of-type(' + $id + ')').find('.nectar-progress-bar').length > 0)
                    progressBars();
                if ($(this).parents('.tabbed').find('> div:nth-of-type(' + $id + ')').find('.divider-small-border [data-animate="yes"]').length > 0 || $(this).parents('.tabbed').find('> div:nth-of-type(' + $id + ')').find('.divider-border [data-animate="yes"]').length > 0)
                    dividers();
                if ($(this).parents('.tabbed').find('> div:nth-of-type(' + $id + ')').find('img.img-with-animation').length > 0 || $(this).parents('.tabbed').find('> div:nth-of-type(' + $id + ')').find('.col.has-animation').length > 0 || $(this).parents('.tabbed').find('> div:nth-of-type(' + $id + ')').find('.nectar_cascading_images').length > 0 || $(this).parents('.tabbed').find('> div:nth-of-type(' + $id + ')').find('.wpb_column.has-animation').length > 0) {
                    colAndImgAnimations();
                    cascadingImageBGSizing();
                }
                if ($(this).parents('.tabbed').find('> div:nth-of-type(' + $id + ')').find('.nectar-milestone').length > 0)
                    milestoneWaypoint();
                if ($(this).parents('.tabbed').find('> div:nth-of-type(' + $id + ')').find('.nectar_image_with_hotspots[data-animation="true"]').length > 0)
                    imageWithHotspots();
                if ($(this).parents('.tabbed').find('> div:nth-of-type(' + $id + ')').find('.nectar-fancy-ul').length > 0)
                    nectar_fancy_ul_init();
                if ($(this).parents('.tabbed').find('> div:nth-of-type(' + $id + ')').find('.nectar-split-heading').length > 0)
                    splitLineHeadings();
                if ($(this).parents('.tabbed').find('> div:nth-of-type(' + $id + ')').find('.wpb_column[data-border-animation="true"]').length > 0) {
                    animatedColBorders();
                }
                if ($(this).parents('.tabbed').find('> div:nth-of-type(' + $id + ')').find('.wpb_animate_when_almost_visible').length > 0) {
                    vcWaypoints();
                }
                if ($(this).parents('.tabbed').find('> div:nth-of-type(' + $id + ')').find('.nectar-animated-title').length > 0) {
                    animated_titles();
                }
                if ($(this).parents('.tabbed').find('> div:nth-of-type(' + $id + ')').find('.nectar-highlighted-text').length > 0) {
                    highlighted_text();
                }
                if ($(this).parents('.tabbed').find('> div:nth-of-type(' + $id + ')').find('.nectar_food_menu_item').length > 0) {
                    foodMenuItems();
                }
                if ($(this).parents('.wpb_row').length > 0) {
                    if ($(this).parents('.tabbed').find('> div:nth-of-type(' + $id + ')').find('.vc_pie_chart').length > 0 || $(this).parents('.tabbed').find('> div:nth-of-type(' + $id + ')').find('.wp-video-shortcode').length > 0 || $(this).parents('.tabbed').find('> div:nth-of-type(' + $id + ')').find('.post-area.masonry .posts-container').length > 0 || $(this).parents('.tabbed').find('> div:nth-of-type(' + $id + ')').find('.twentytwenty-container').length > 0 || $(this).parents('#nectar_fullscreen_rows[data-content-overflow="scrollbar"]').length > 0 || $(this).parents('.tabbed').find('> div:nth-of-type(' + $id + ')').find('.wpb_gallery').length > 0 || $(this).parents('.wpb_row').next().hasClass('parallax_section'))
                        $(window).trigger('resize');
                    if ($(this).parents('.tabbed').find('> div:nth-of-type(' + $id + ')').find('.nectar-flickity').length > 0 && typeof Flickity != 'undefined') {
                        var tabbedFlkty = Flickity.data($(this).parents('.tabbed').find('> div:nth-of-type(' + $id + ')').find('.nectar-flickity')[0]);
                        tabbedFlkty.resize();
                    }
                    if ($(this).parents('.tabbed').find('> div:nth-of-type(' + $id + ')').find('.nectar-woo-flickity').length > 0 && typeof Flickity != 'undefined') {
                        var wootabbedFlkty = Flickity.data($(this).parents('.tabbed').find('> div:nth-of-type(' + $id + ')').find('.nectar-woo-flickity > ul')[0]);
                        wootabbedFlkty.resize();
                    }
                }
                $(this).parents('.tabbed').find('> div:nth-of-type(' + $id + ')').find('.svg-icon-holder').each(function(i) {
                    var $that = $(this);
                    setTimeout(function() {
                        var $animationDelay = ($(this).is('[data-animation-delay]') && $(this).attr('data-animation-delay').length > 0 && $(this).attr('data-animation') != 'false') ? $(this).attr('data-animation-delay') : 0;
                        clearTimeout($animatedSVGIconTimeout[i]);
                        if ($that.attr('data-animation') == 'false') {
                            $animationSpeed = 1;
                            $that.css('opacity', '1');
                            $svg_icons[$that.find('svg').attr('id').slice(-1)].finish();
                        } else {
                            $svg_icons[$that.find('svg').attr('id').slice(-1)].reset();
                            $animatedSVGIconTimeout[i] = setTimeout(function() {
                                $svg_icons[$that.find('svg').attr('id').slice(-1)].play();
                            }, $animationDelay);
                        }
                    }, 150);
                });
            }
            $(this).parents('.tabbed').find('.wpb_row').each(function() {
                if (typeof $(this).find('[class*="vc_col-"]').first().offset() != 'undefined') {
                    var $firstChildOffset = $(this).find('[class*="vc_col-"]').first().offset().left;
                    $(this).find('[class*="vc_col-"]').each(function() {
                        $(this).removeClass('no-left-margin');
                        if ($(this).offset().left < $firstChildOffset + 15) {
                            $(this).addClass('no-left-margin');
                        } else {
                            $(this).removeClass('no-left-margin');
                        }
                    });
                }
            });
            $tabbedClickCount++;
            if ($(this).parent().parent().find('.magic-line').length > 0) {
                magicLineCalc($(this));
            }
            return false;
        });

        function magicLineCalc($ele) {
            var el, leftPos, ratio;
            el = $ele.parent();
            if (el.length) {
                leftPos = el.position().left;
                ratio = el.width();
            } else {
                leftPos = ratio = 0;
            }
            $ele.parent().parent().find('.magic-line').css('transform', 'translateX(' + leftPos + 'px) scaleX(' + ratio + ')');
        }

        function tabbedInit() {
            $('.tabbed').each(function() {
                $(this).find('.wpb_tab').each(function(i) {
                    if ($(this).is('[data-tab-icon]') && $(this).attr('data-tab-icon').length > 0) {
                        $(this).parent().addClass('using-icons');
                        $(this).parent().find('.wpb_tabs_nav li:nth-child(' + (i + 1) + ') > a').prepend('<i class="' + $(this).attr("data-tab-icon") + '"></i>');
                    }
                });
                if ($(this).find('.swiper-container').length == 0 && $(this).find('.testimonial_slider').length == 0 && $(this).find('.portfolio-items:not(".carousel")').length == 0 && $(this).find('.wpb_gallery .portfolio-items').length == 0 && $(this).find('iframe').length == 0) {
                    $(this).find('> ul li:first-child a').click();
                }
                if ($(this).find('.testimonial_slider').length > 0 || $(this).find('.portfolio-items:not(".carousel")').length > 0 || $(this).find('.wpb_gallery .portfolio-items').length > 0 || $(this).find('iframe').length > 0) {
                    var $that = $(this);
                    $(this).find('.wpb_tab').show().css({
                        'opacity': 0,
                        'height': '1px'
                    });
                    $(this).find('> ul li a').addClass('loading');
                    setTimeout(function() {
                        $that.find('.wpb_tab').hide().css({
                            'opacity': 1,
                            'height': 'auto'
                        });
                        $that.find('> ul li a').removeClass('loading');
                        $that.find('> ul li:first-child a').click();
                    }, 900);
                }
                var $that = $(this);
                setTimeout(function() {
                    if ($that.is('[data-style="minimal_alt"]')) {
                        $that.find('> ul').append('<li class="magic-line" />');
                        magicLineCalc($that.find('> ul > li:first-child > a'));
                    }
                }, 100);
            });
        }
        tabbedInit();

        function tabbbedDeepLinking() {
            if (typeof $_GET['tab'] != 'undefined') {
                $('.wpb_tabs_nav').each(function() {
                    $(this).find('li').each(function() {
                        var $currentText = $(this).find('a').text();
                        var $getText = $_GET['tab'];
                        var $that = $(this);
                        $currentText = $currentText.replace(/\s+/g, '-').toLowerCase();
                        $getText = $getText.replace(/\s+/g, '-').replace(/</g, '&lt;').replace(/"/g, '&quot;').toLowerCase();
                        if ($currentText == $getText) {
                            $(this).find('a').click();
                            setTimeout(function() {
                                $that.find('a').click();
                            }, 901);
                        }
                    })
                });
            }
        }
        tabbbedDeepLinking();
        $('body').on('click', '.toggle h3 a', function() {
            if (!$(this).parents('.toggles').hasClass('accordion')) {
                $(this).parents('.toggle').find('> div').slideToggle(300);
                $(this).parents('.toggle').toggleClass('open');
                if ($(this).parents('.toggle').hasClass('open')) {
                    $(this).find('i').attr('class', 'icon-minus-sign');
                } else {
                    $(this).find('i').attr('class', 'icon-plus-sign');
                }
                if ($(this).parents('.toggle').find('> div .iframe-embed').length > 0 && $(this).parents('.toggle').find('> div iframe.iframe-embed').height() == '0') responsiveVideoIframes();
                if ($(this).parents('.full-width-content').length > 0) setTimeout(function() {
                    fullWidthContentColumns();
                }, 300);
                if ($('#nectar_fullscreen_rows').length > 0) setTimeout(function() {
                    $(window).trigger('smartresize');
                }, 300);
                return false;
            }
        });
        $('body').on('click', '.accordion .toggle h3 a', function() {
            if ($(this).parents('.toggle').hasClass('open')) return false;
            $(this).parents('.toggles').find('.toggle > div').slideUp(300);
            $(this).parents('.toggles').find('.toggle h3 a i').attr('class', 'icon-plus-sign');
            $(this).parents('.toggles').find('.toggle').removeClass('open');
            $(this).parents('.toggle').find('> div').slideDown(300);
            $(this).parents('.toggle').addClass('open');
            if ($(this).parents('.toggle').hasClass('open')) {
                $(this).find('i').attr('class', 'icon-minus-sign');
            } else {
                $(this).find('i').attr('class', 'icon-plus-sign');
            }
            if ($(this).parents('.full-width-content').length > 0) {
                clearTimeout($t);
                var $t = setTimeout(function() {
                    fullWidthContentColumns();
                }, 400);
            }
            if ($('#nectar_fullscreen_rows').length > 0) {
                clearTimeout($t);
                var $t = setTimeout(function() {
                    $(window).trigger('smartresize');
                }, 400);
            }
            return false;
        });

        function accordionInit() {
            $('.accordion').each(function() {
                $(this).find('> .toggle').first().addClass('open').find('> div').show();
                $(this).find('> .toggle').first().find('a i').attr('class', 'icon-minus-sign');
            });
            $('.toggles').each(function() {
                var $isAccordion = ($(this).hasClass('accordion')) ? true : false;
                $(this).find('.toggle').each(function() {
                    if ($(this).find('> div .testimonial_slider').length > 0 || $(this).find('> div iframe').length > 0) {
                        var $that = $(this);
                        $(this).find('> div').show().css({
                            'opacity': 0,
                            'height': '1px',
                            'padding': '0'
                        });
                        testimonialHeightResize();
                        setTimeout(function() {
                            $that.find('> div').hide().css({
                                'opacity': 1,
                                'height': 'auto',
                                'padding': '10px 14px'
                            });
                            if ($isAccordion == true && $that.index() == 0) $that.find('> div').slideDown(300);
                        }, 900);
                    }
                });
            })
        }
        accordionInit();

        function accordionDeepLinking() {
            if (typeof $_GET['toggle'] != 'undefined') {
                $('.toggles').each(function() {
                    $(this).find('.toggle').each(function() {
                        var $currentText = $(this).find('h3 a').clone();
                        var $getText = $_GET['toggle'];
                        $($currentText).find('i').remove();
                        $currentText = $currentText.text();
                        $currentText = $currentText.replace(/\s+/g, '-').toLowerCase();
                        $getText = $getText.replace(/\s+/g, '-').replace(/</g, '&lt;').replace(/"/g, '&quot;').toLowerCase();
                        if ($currentText == $getText) $(this).find('h3 a').click();
                    });
                });
            }
        }
        accordionDeepLinking();
        $.cssHooks.color = {
            get: function(elem) {
                if (elem.currentStyle)
                    var color = elem.currentStyle["color"];
                else if (window.getComputedStyle)
                    var color = document.defaultView.getComputedStyle(elem, null).getPropertyValue("color");
                if (color.search("rgb") == -1)
                    return color;
                else {
                    color = color.match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);

                    function hex(x) {
                        return ("0" + parseInt(x).toString(16)).slice(-2);
                    }
                    if (color) {
                        return "#" + hex(color[1]) + hex(color[2]) + hex(color[3]);
                    }
                }
            }
        }
        $.cssHooks.backgroundColor = {
            get: function(elem) {
                if (elem.currentStyle)
                    var bg = elem.currentStyle["backgroundColor"];
                else if (window.getComputedStyle)
                    var bg = document.defaultView.getComputedStyle(elem, null).getPropertyValue("background-color");
                if (bg.search("rgb") == -1)
                    return bg;
                else {
                    bg = bg.match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);

                    function hex(x) {
                        return ("0" + parseInt(x).toString(16)).slice(-2);
                    }
                    if (bg) {
                        return "#" + hex(bg[1]) + hex(bg[2]) + hex(bg[3]);
                    }
                }
            }
        }

        function shadeColor(hex, lum) {
            hex = String(hex).replace(/[^0-9a-f]/gi, '');
            if (hex.length < 6) {
                hex = hex[0] + hex[0] + hex[1] + hex[1] + hex[2] + hex[2];
            }
            lum = lum || 0;
            var rgb = "#",
                c, i;
            for (i = 0; i < 3; i++) {
                c = parseInt(hex.substr(i * 2, 2), 16);
                c = Math.round(Math.min(Math.max(0, c + (c * lum)), 255)).toString(16);
                rgb += ("00" + c).substr(c.length);
            }
            return rgb;
        }

        function coloredButtons() {
            $('.nectar-button.see-through[data-color-override], .nectar-button.see-through-2[data-color-override], .nectar-button.see-through-3[data-color-override]').each(function() {
                var $usingMaterialSkin = ($('body.material[data-button-style^="rounded"]').length > 0) ? true : false;
                $(this).css('visibility', 'visible');
                if ($(this).hasClass('see-through-3') && $(this).attr('data-color-override') == 'false') {
                    return true;
                }
                if ($(this).attr('data-color-override') != 'false') {
                    var $color = $(this).attr('data-color-override');
                } else {
                    if ($(this).parents('.dark').length > 0)
                        var $color = '#000000';
                    else
                        var $color = '#ffffff';
                }
                if (!$(this).hasClass('see-through-3')) $(this).css('color', $color);
                $(this).find('i').css('color', $color);
                var colorInt = parseInt($color.substring(1), 16);
                var $hoverColor = ($(this).has('[data-hover-color-override]')) ? $(this).attr('data-hover-color-override') : 'no-override';
                var $hoverTextColor = ($(this).has('[data-hover-text-color-override]')) ? $(this).attr('data-hover-text-color-override') : '#fff';
                var R = (colorInt & 0xFF0000) >> 16;
                var G = (colorInt & 0x00FF00) >> 8;
                var B = (colorInt & 0x0000FF) >> 0;
                $opacityStr = ($(this).hasClass('see-through-3')) ? '1' : '0.75';
                $(this).css('border-color', 'rgba(' + R + ',' + G + ',' + B + ',' + $opacityStr + ')');
                if ($usingMaterialSkin) {
                    $(this).find('i').css({
                        'background-color': 'rgba(' + R + ',' + G + ',' + B + ',1)',
                        'box-shadow': '0px 8px 15px rgba(' + R + ',' + G + ',' + B + ',0.24)'
                    });
                }
                if ($(this).hasClass('see-through')) {
                    var $that = $(this);
                    $(this).on('mouseenter touchstart', function() {
                        $that.css('border-color', 'rgba(' + R + ',' + G + ',' + B + ',1)');
                    });
                    $(this).on('mouseleave touchtouchend', function() {
                        $that.css('border-color', 'rgba(' + R + ',' + G + ',' + B + ',1)');
                        $opacityStr = ($(this).hasClass('see-through-3')) ? '1' : '0.75';
                        $that.css('border-color', 'rgba(' + R + ',' + G + ',' + B + ',' + $opacityStr + ')');
                    });
                } else {
                    $(this).find('i').css('color', $hoverTextColor);
                    if ($hoverColor != 'no-override') {
                        var $that = $(this);
                        $(this).on('mouseenter touchstart', function() {
                            $that.css({
                                'border-color': $hoverColor,
                                'background-color': $hoverColor,
                                'color': $hoverTextColor
                            });
                            if ($usingMaterialSkin) {
                                $that.find('i').css({
                                    'background-color': '',
                                    'box-shadow': ''
                                });
                            }
                        });
                        $(this).on('mouseleave touchtouchend', function() {
                            $opacityStr = ($(this).hasClass('see-through-3')) ? '1' : '0.75';
                            if ($usingMaterialSkin) {
                                $that.find('i').css({
                                    'background-color': 'rgba(' + R + ',' + G + ',' + B + ',1)',
                                    'box-shadow': '0px 8px 15px rgba(' + R + ',' + G + ',' + B + ',0.24)'
                                });
                            }
                            if (!$that.hasClass('see-through-3')) {
                                $that.css({
                                    'border-color': 'rgba(' + R + ',' + G + ',' + B + ',' + $opacityStr + ')',
                                    'background-color': 'transparent',
                                    'color': $color
                                });
                            } else {
                                $that.css({
                                    'border-color': 'rgba(' + R + ',' + G + ',' + B + ',' + $opacityStr + ')',
                                    'background-color': 'transparent'
                                });
                            }
                        });
                    } else {
                        var $that = $(this);
                        $(this).on('mouseenter touchstart', function() {
                            $that.css({
                                'border-color': $hoverColor,
                                'color': $hoverTextColor
                            });
                        });
                        $(this).on('mouseleave touchtouchend', function() {
                            $opacityStr = ($that.hasClass('see-through-3')) ? '1' : '0.75';
                            $that.css({
                                'border-color': 'rgba(' + R + ',' + G + ',' + B + ',' + $opacityStr + ')',
                                'color': $hoverTextColor
                            });
                        });
                    }
                }
            });
            $('.nectar-button:not(.see-through):not(.see-through-2):not(.see-through-3)[data-color-override]').each(function() {
                $(this).css('visibility', 'visible');
                if ($(this).attr('data-color-override') != 'false') {
                    var $color = $(this).attr('data-color-override');
                    $(this).removeClass('accent-color').removeClass('extra-color-1').removeClass('extra-color-2').removeClass('extra-color-3');
                    $(this).css('background-color', $color);
                }
            });
            if ($('.swiper-slide .solid_color_2').length > 0 || $('.tilt-button-inner').length > 0) {
                var $tiltButtonCssString = '';
                $('.swiper-slide .solid_color_2 a').each(function(i) {
                    $(this).addClass('instance-' + i);
                    if ($(this).attr('data-color-override') != 'false') {
                        var $color = $(this).attr('data-color-override');
                    } else {
                        if ($(this).parents('.dark').length > 0)
                            var $color = '#000000';
                        else
                            var $color = '#ffffff';
                    }
                    $(this).css('color', $color);
                    $(this).find('i').css('color', $color);
                    var $currentColor = $(this).css('background-color');
                    var $topColor = shadeColor($currentColor, 0.13);
                    var $bottomColor = shadeColor($currentColor, -0.15);
                    $tiltButtonCssString += '.swiper-slide .solid_color_2 a.instance-' + i + ':after { background-color: ' + $topColor + ';  }' + ' .swiper-slide .solid_color_2 a.instance-' + i + ':before { background-color: ' + $bottomColor + '; } ';
                });
                $('.tilt-button-wrap a').each(function(i) {
                    $(this).addClass('instance-' + i);
                    var $currentColor = $(this).css('background-color');
                    if ($(this).attr('data-color-override') != 'false') {
                        var $color = $(this).attr('data-color-override');
                        $(this).css('background-color', $color);
                        $currentColor = $color;
                    }
                    var $topColor = shadeColor($currentColor, 0.13);
                    var $bottomColor = shadeColor($currentColor, -0.15);
                    $tiltButtonCssString += '.tilt-button-wrap a.instance-' + i + ':after { background-color: ' + $topColor + ';  }' + ' .tilt-button-wrap a.instance-' + i + ':before { background-color: ' + $bottomColor + '; } ';
                });
                var head = document.head || document.getElementsByTagName('head')[0];
                var style = document.createElement('style');
                style.type = 'text/css';
                if (style.styleSheet) {
                    style.styleSheet.cssText = $tiltButtonCssString;
                } else {
                    style.appendChild(document.createTextNode($tiltButtonCssString));
                }
                head.appendChild(style);
            }
            if ($('.nectar-3d-transparent-button').length > 0) {
                var $3dTransButtonCssString = '';
                $('.nectar-3d-transparent-button').each(function(i) {
                    var $that = $(this);
                    var $size = $that.attr('data-size');
                    var $padding = 0;
                    if ($size == 'large') {
                        $padding = 46;
                        $font_size = 16;
                    } else if ($size == 'medium') {
                        $padding = 30;
                        $font_size = 16;
                    } else if ($size == 'small') {
                        $padding = 20;
                        $font_size = 12;
                    } else if ($size == 'jumbo') {
                        $padding = 54;
                        $font_size = 24;
                    } else if ($size == 'extra_jumbo') {
                        $padding = 100;
                        $font_size = 64;
                    }
                    $that.find('svg text').attr('font-size', $font_size);
                    $boundingRect = $(this).find('.back-3d .button-text')[0].getBoundingClientRect();
                    $text_width = $boundingRect.width;
                    $text_height = $font_size * 1.5;
                    $extraMult = (navigator.userAgent.toLowerCase().indexOf('firefox') > -1) ? 0 : 1;
                    $that.css({
                        'width': ($text_width + $padding * 1.5) + 'px',
                        'height': ($text_height + $padding) + 'px'
                    });
                    $that.find('> a').css({
                        'height': ($text_height + $padding) + 'px'
                    });
                    $that.find('.back-3d svg, .front-3d svg').css({
                        'width': ($text_width + $padding * 1.5) + 'px',
                        'height': ($text_height + $padding) + 'px'
                    }).attr('viewBox', '0 0 ' + ($text_width + $padding) + ' ' + ($text_height + $padding));
                    if ($size == 'jumbo')
                        $that.find('svg text').attr('transform', 'matrix(1 0 0 1 ' + ($text_width + $padding * 1.5) / 2 + ' ' + (($text_height + $padding) / 1.68) + ')');
                    else if ($size == 'extra_jumbo')
                        $that.find('svg text').attr('transform', 'matrix(1 0 0 1 ' + ($text_width + $padding * 1.6) / 2 + ' ' + (($text_height + $padding) / 1.6) + ')');
                    else if ($size == 'large') {
                        $that.find('svg text').attr('transform', 'matrix(1 0 0 1 ' + ($text_width + $padding * 1.5) / 2 + ' ' + (($text_height + $padding) / 1.7) + ')');
                    } else {
                        $that.find('svg text').attr('transform', 'matrix(1 0 0 1 ' + ($text_width + $padding * 1.5) / 2 + ' ' + (($text_height + $padding) / 1.65) + ')');
                    }
                    $that.find('.front-3d ').css('transform-origin', '50% 50% -' + ($text_height + $padding) / 2 + 'px');
                    $that.find('.back-3d').css('transform-origin', '50% 50% -' + ($text_height + $padding) / 2 + 'px');
                    $(this).find('.front-3d svg > rect').attr('id', 'masked-rect-id-' + i);
                    $(this).find('.front-3d defs mask').attr('id', 'button-text-mask-' + i);
                    $that.css('visibility', 'visible');
                    $3dTransButtonCssString += '#masked-rect-id-' + i + ' { mask: url(#button-text-mask-' + i + '); -webkit-mask: url(#button-text-mask-' + i + ')} ';
                });

                function createExtraJumboSize() {
                    $('.nectar-3d-transparent-button').each(function(i) {
                        if ($(this).css('visibility') != 'visible') return;
                        var $that = $(this);
                        var $size = $that.attr('data-size');
                        if ($size == 'extra_jumbo') {
                            $extraMult = (navigator.userAgent.toLowerCase().indexOf('firefox') > -1) ? 0 : 1;
                            if (window.innerWidth < 1000 && window.innerWidth > 690) {
                                $padding = 64;
                                $font_size = 34;
                                $that.find('.back-3d rect').attr('stroke-width', '12');
                                $vert_height_divider = 1.7;
                            } else if (window.innerWidth <= 690) {
                                $padding = 46;
                                $font_size = 16;
                                $that.find('.back-3d rect').attr('stroke-width', '10');
                                $vert_height_divider = 1.7;
                            } else {
                                $padding = 100;
                                $font_size = 64;
                                $that.find('.back-3d rect').attr('stroke-width', '20');
                                $vert_height_divider = 1.6;
                            }
                            $that.find('svg text').attr('font-size', $font_size);
                            $boundingRect = $(this).find('.back-3d .button-text')[0].getBoundingClientRect();
                            $text_width = $boundingRect.width;
                            $text_height = $font_size * 1.5;
                            $that.css({
                                'width': ($text_width + $padding * 1.5) + 'px',
                                'height': ($text_height + $padding) + 'px'
                            });
                            $that.find('> a').css({
                                'height': ($text_height + $padding) + 'px'
                            });
                            $that.find('.back-3d svg, .front-3d svg').css({
                                'width': ($text_width + $padding * 1.5) + 'px',
                                'height': ($text_height + $padding) + 'px'
                            }).attr('viewBox', '0 0 ' + ($text_width + $padding) + ' ' + ($text_height + $padding));
                            $that.find('svg text').attr('transform', 'matrix(1 0 0 1 ' + ($text_width + $padding * 1.6) / 2 + ' ' + (($text_height + $padding) / $vert_height_divider) + ')');
                            $that.find('.front-3d ').css('transform-origin', '50% 50% -' + ($text_height + $padding) / 2 + 'px');
                            $that.find('.back-3d').css('transform-origin', '50% 50% -' + ($text_height + $padding) / 2 + 'px');
                        }
                    });
                }
                createExtraJumboSize();
                $(window).on('smartresize', createExtraJumboSize);
                var head = document.head || document.getElementsByTagName('head')[0];
                var style = document.createElement('style');
                style.type = 'text/css';
                if (style.styleSheet) {
                    style.styleSheet.cssText = $3dTransButtonCssString;
                } else {
                    style.appendChild(document.createTextNode($3dTransButtonCssString));
                }
                head.appendChild(style);
            }
            setTimeout(function() {
                $('.nectar-button.extra-color-gradient-1 .start, .nectar-button.extra-color-gradient-2 .start, .nectar-button.see-through-extra-color-gradient-1 .start, .nectar-button.see-through-extra-color-gradient-2 .start').removeClass('loading');
            }, 150);
            if (navigator.userAgent.toLowerCase().indexOf('firefox') > -1 || navigator.userAgent.indexOf("MSIE ") > -1 || navigator.userAgent.match(/Trident\/7\./)) {
                $('.nectar-button.extra-color-gradient-1, .nectar-button.extra-color-gradient-2, .nectar-button.see-through-extra-color-gradient-1, .nectar-button.see-through-extra-color-gradient-2').addClass('no-text-grad');
            }
        }
        coloredButtons();

        function largeIconHover() {
            $('.icon-3x').each(function() {
                $(this).closest('.col').hover(function() {
                    $(this).find('.icon-3x').addClass('hovered')
                }, function() {
                    $('.icon-3x').removeClass('hovered')
                });
            });
            if (navigator.userAgent.indexOf("MSIE ") > -1 || navigator.userAgent.match(/Trident\/7\./))
                $('[class^="icon-"].extra-color-gradient-1, [class^="icon-"].extra-color-gradient-2, [class^="icon-"][data-color="extra-color-gradient-1"], [class^="icon-"][data-color="extra-color-gradient-2"], .nectar_icon_wrap[data-color*="extra-color-gradient"] .nectar_icon, .nectar-gradient-text').addClass('no-grad');
        }
        largeIconHover();

        function teamMemberFullscreen() {
            $('body').on('click', '.team-member[data-style="bio_fullscreen"]', function() {
                if ($('.nectar_team_member_overlay').length > 0) return;
                var $usingBoxedClass = ($('body > #boxed').length > 0) ? 'in-boxed' : null;
                $teamMemberMeta = $(this).find('.nectar_team_bio').html();
                $teamMemberImg = ($(this).find('.nectar_team_bio_img[data-img-src]').length > 0) ? $(this).find('.nectar_team_bio_img').attr('data-img-src') : '';
                $('body').append('<div class="nectar_team_member_overlay ' + $usingBoxedClass + '"><div class="inner-wrap"><div class="team_member_details"><div class="bio-inner"><span class="mobile-close"></span><h2>' + $(this).find('.team-meta h3').html() + '</h2><div class="title">' + $(this).find('.team-meta p').html() + '</div><div class="team-desc">' + $teamMemberMeta + '</div></div></div><div class="team_member_picture"><div class="team_member_image_bg_cover"></div><div class="team_member_picture_wrap"><div class="team_member_image"></div></div></div></div></div><div class="nectar_team_member_close ' + $usingBoxedClass + '"><div class="inner"></div></div>');
                if ($teamMemberImg.length > 0) {
                    var teamTmpImg = new Image();
                    teamTmpImg.src = $teamMemberImg;
                    teamTmpImg.onload = function() {
                        $('.nectar_team_member_overlay .team_member_image').css('opacity', '1');
                    };
                    $('.nectar_team_member_overlay .team_member_image').css({
                        'background-image': 'url("' + $teamMemberImg + '")'
                    });
                }
                var $headerNavSpace = ($('body[data-header-format="left-header"]').length > 0 && $(window).width() > 1000) ? 0 : $('#header-outer').height();
                $('.nectar_team_member_overlay .inner-wrap').css({
                    'padding-top': $headerNavSpace
                });
                if ($('.using-mobile-browser').length > 0) {
                    $('body,html').addClass('nectar-no-scrolling');
                }
                teamFullscreenResize();
                $('.nectar_team_member_overlay').addClass('open').addClass('animating');
                setTimeout(function() {
                    $('.nectar_team_member_close').addClass('visible');
                    $('.nectar_team_member_overlay').removeClass('animating');
                }, 500);
                $(document).on('mousemove', teamMousemoveOn);
                if ($('.using-mobile-browser').length == 0) {
                    fullscreenBioScrolling();
                }
                if ($('.team-member[data-style="bio_fullscreen"]').length > 0 && navigator.userAgent.match(/(Android|iPod|iPhone|iPad|IEMobile|BlackBerry|Opera Mini)/)) {
                    $('.nectar_team_member_overlay').addClass('on-mobile');
                }
            });
            $('body').on('click', '.nectar_team_member_overlay', function() {
                if (!$(this).hasClass('animating')) {
                    $('.nectar_team_member_overlay').removeClass('open');
                    $('.nectar_team_member_close').removeClass('visible');
                    if ($('.using-mobile-browser').length > 0) {
                        $('body,html').removeClass('nectar-no-scrolling');
                    }
                    setTimeout(function() {
                        $(document).off('mousemove', teamMousemoveOn);
                        $('.nectar_team_member_overlay, .nectar_team_member_close').remove();
                    }, 820);
                }
            });
            if ($('.team-member[data-style="bio_fullscreen"]').length > 0) {
                $(window).resize(teamFullscreenResize);
            }
        }

        function teamFullscreenResize() {
            var $leftHeaderSize = ($('body[data-header-format="left-header"]').length > 0 && $(window).width() > 1000) ? 275 : 0;
            $('.nectar_team_member_overlay').css({
                'width': $(window).width() - $leftHeaderSize,
                'left': $leftHeaderSize
            });
        }

        function fullscreenBioScrolling() {
            $('.nectar_team_member_overlay .inner-wrap').mousewheel(function(event, delta) {
                this.scrollTop -= (delta * 30);
                event.preventDefault();
            });
        }

        function teamMousemoveOn(e) {
            if ($('a:hover').length > 0) {
                $('.nectar_team_member_close .inner').removeClass('visible');
            } else {
                $('.nectar_team_member_close .inner').addClass('visible');
            }
            $('.nectar_team_member_close').css({
                left: e.pageX - 26,
                top: e.pageY - $(window).scrollTop() - 29
            });
        }
        if ($('.team-member').length > 0) {
            teamMemberFullscreen();
        }

        function columnBGColors() {
            var $columnColorCSS = '';
            $('.wpb_column').each(function(i) {
                $(this).addClass('instance-' + i);
                if ($(this).attr('data-has-bg-color') == 'true') {
                    if ($(this).is('[data-animation*="reveal"]') && $(this).hasClass('has-animation')) {
                        $columnColorCSS += '.wpb_column.instance-' + i + ' > .column-bg-overlay { background-color:' + $(this).attr('data-bg-color') + ';  opacity: ' + $(this).attr('data-bg-opacity') + '; }';
                    } else {
                        $columnColorCSS += '.wpb_column.instance-' + i + ' > .column-bg-overlay{ background-color:' + $(this).attr('data-bg-color') + ';  opacity: ' + $(this).attr('data-bg-opacity') + '; }';
                    }
                }
                if ($(this).is('[data-hover-bg^="#"]')) {
                    if ($(this).is('[data-animation*="reveal"]') && $(this).hasClass('has-animation')) {
                        $columnColorCSS += '.wpb_column.instance-' + i + ':hover > .column-bg-overlay { background-color: ' + $(this).attr('data-hover-bg') + '!important; opacity: ' + $(this).attr('data-hover-bg-opacity') + '!important; }';
                    } else {
                        $columnColorCSS += '.wpb_column.instance-' + i + ':hover > .column-bg-overlay { background-color: ' + $(this).attr('data-hover-bg') + '!important; opacity: ' + $(this).attr('data-hover-bg-opacity') + '!important; }';
                    }
                }
            });
            if ($columnColorCSS.length > 1) {
                var head = document.head || document.getElementsByTagName('head')[0];
                var style = document.createElement('style');
                style.type = 'text/css';
                if (style.styleSheet) {
                    style.styleSheet.cssText = $columnColorCSS;
                } else {
                    style.appendChild(document.createTextNode($columnColorCSS));
                }
                head.appendChild(style);
            }
        }
        columnBGColors();

        function morphingOutlines() {
            if ($('.morphing-outline').length > 0) {
                $morphingOutlineCSS = '';
                $('.morphing-outline').each(function(i) {
                    $(this).addClass('instance-' + i).css({
                        'visibility': 'visible'
                    });
                    var $width = $(this).find('.inner').width();
                    var $height = $(this).find('.inner').height();
                    var $border = parseInt($(this).attr("data-border-thickness"));
                    var $hover = ($('body[data-button-style*="rounded"]').length > 0) ? ':hover' : '';
                    var $hover2 = ($('body[data-button-style*="rounded"]').length > 0) ? '' : ':hover';
                    $morphingOutlineCSS += 'body .morphing-outline.instance-' + i + ' .inner > * { color: ' + $(this).attr("data-starting-color") + '; } ';
                    $morphingOutlineCSS += 'body .morphing-outline.instance-' + i + ' .inner:after  { border-width:' + $(this).attr("data-border-thickness") + 'px ; border-color: ' + $(this).attr("data-starting-color") + '; } ';
                    $morphingOutlineCSS += 'body .wpb_column:hover > .wpb_wrapper > .morphing-outline.instance-' + i + ' .inner > *, body .wpb_column:hover > .vc_column-inner > .wpb_wrapper > .morphing-outline.instance-' + i + ' .inner > * { color: ' + $(this).attr("data-hover-color") + '; } ';
                    $morphingOutlineCSS += 'body .wpb_column:hover > .wpb_wrapper > .morphing-outline.instance-' + i + ' .inner:after, body .wpb_column:hover > .vc_column-inner > .wpb_wrapper > .morphing-outline.instance-' + i + ' .inner:after  { border-color: ' + $(this).attr("data-hover-color") + '; } ';
                    $morphingOutlineCSS += 'body .wpb_column' + $hover2 + ' > .wpb_wrapper > .morphing-outline.instance-' + i + ' .inner:after, body .wpb_column' + $hover2 + ' > .vc_column-inner > .wpb_wrapper > .morphing-outline.instance-' + i + ' .inner:after { padding: ' + (($width + 100 + $border * 2 - $height) / 2 - $border) + 'px 50px}';
                    $morphingOutlineCSS += '.morphing-outline.instance-' + i + ' { padding: ' + (30 + ($width + 80 + $border * 2 - $height) / 2 - $border) + 'px 50px}';
                    $morphingOutlineCSS += 'body .wpb_column' + $hover2 + ' > .wpb_wrapper > .morphing-outline.instance-' + i + ' .inner:after, body .wpb_column' + $hover2 + ' > .vc_column-inner > .wpb_wrapper > .morphing-outline.instance-' + i + ' .inner:after { top: -' + parseInt((($width + 100 + $border * 2 - $height) / 2 - $border) + $border) + 'px }';
                    $morphingOutlineCSS += 'body .wpb_column > .wpb_wrapper > .morphing-outline.instance-' + i + ' .inner:after, body .wpb_column > .vc_column-inner > .wpb_wrapper > .morphing-outline.instance-' + i + ' .inner:after { left: -' + parseInt(50 + $border) + 'px }';
                    $morphingOutlineCSS += 'body .wpb_column' + $hover + ' > .wpb_wrapper > .morphing-outline.instance-' + i + ' .inner:after, body .wpb_column' + $hover + ' > .vc_column-inner > .wpb_wrapper > .morphing-outline.instance-' + i + ' .inner:after { padding: 50px 50px}';
                    $morphingOutlineCSS += 'body .wpb_column' + $hover + ' > .wpb_wrapper > .morphing-outline.instance-' + i + ' .inner:after, body .wpb_column' + $hover + ' > .vc_column-inner > .wpb_wrapper > .morphing-outline.instance-' + i + ' .inner:after { top: -' + parseInt(50 + $border) + 'px }';
                });
                var head = document.head || document.getElementsByTagName('head')[0];
                var style = document.createElement('style');
                style.type = 'text/css';
                style.id = 'morphing-outlines';
                if (style.styleSheet) {
                    style.styleSheet.cssText = $morphingOutlineCSS;
                } else {
                    style.appendChild(document.createTextNode($morphingOutlineCSS));
                }
                $('#morphing-outlines').remove();
                head.appendChild(style);
            }
        }
        setTimeout(morphingOutlines, 100);
        setTimeout(fullWidthContentColumns, 126);
        var $svg_icons = [];

        function svgAnimations() {
            $svgOffsetPos = ($('#nectar_fullscreen_rows').length > 0) ? '200%' : 'bottom-in-view';
            if ($svg_icons.length == 0) {
                $('.svg-icon-holder:not(.animated-in)').has('svg').each(function(i) {
                    var $that = $(this);
                    if (navigator.userAgent.match(/(Android|iPod|iPhone|iPad|IEMobile|BlackBerry|Opera Mini)/)) $that.attr('data-animation', 'false');
                    $that.find('svg').css({
                        'height': parseInt($that.attr('data-size')) + 'px',
                        'width': parseInt($that.attr('data-size')) + 'px'
                    });
                    $(this).find('svg').attr('id', 'nectar-svg-animation-instance-' + i);
                    var $animationSpeed = ($that.is('[data-animation-speed]') && $that.attr('data-animation-speed').length > 0) ? $that.attr('data-animation-speed') : 200;
                    if ($that.attr('data-animation') == 'false') {
                        $animationSpeed = 1;
                        $that.css('opacity', '1');
                    }
                    if (!$that.hasClass('bound')) {
                        $svg_icons[i] = new Vivus($that.find('svg').attr('id'), {
                            type: 'delayed',
                            pathTimingFunction: Vivus.EASE_OUT,
                            animTimingFunction: Vivus.LINEAR,
                            duration: $animationSpeed,
                            onReady: svgInit
                        });
                    }
                    if ($animationSpeed !== 1) {
                        var $that = $(this);
                        var waypoint = new Waypoint({
                            element: $that,
                            handler: function(direction) {
                                if ($that.hasClass('animated-in')) {
                                    waypoint.destroy();
                                    return;
                                }
                                checkIfReady();
                                $that.addClass('animated-in');
                                waypoint.destroy();
                            },
                            offset: $svgOffsetPos
                        });
                    } else {
                        checkIfReady();
                    }

                    function checkIfReady() {
                        var $animationDelay = ($that.is('[data-animation-delay]') && $that.attr('data-animation-delay').length > 0 && $that.attr('data-animation') != 'false') ? $that.attr('data-animation-delay') : 0;
                        var $iconID = $that.find('svg').attr('id').replace(/[^0-9]/g, '');
                        if ($svg_icons[$iconID].isReady == true) {
                            setTimeout(function() {
                                $that.css('opacity', '1');
                                $svg_icons[$iconID].reset().play();
                            }, $animationDelay);
                        } else {
                            setTimeout(checkIfReady, 50);
                        }
                    }

                    function svgInit() {
                        $that.css({
                            'height': parseInt($that.attr('data-size')) + 'px',
                            'width': parseInt($that.attr('data-size')) + 'px'
                        });
                    }
                    $that.addClass('bound');
                });
            } else {
                $('.svg-icon-holder').addClass('animated-in').css('opacity', '1');
            }
            $('#nectar_fullscreen_rows .svg-icon-holder.animated-in').has('svg').each(function(i) {
                var $animationDelay = ($(this).is('[data-animation-delay]') && $(this).attr('data-animation-delay').length > 0 && $(this).attr('data-animation') != 'false') ? $(this).attr('data-animation-delay') : 0;
                var $that = $(this);
                var $iconID = $that.find('svg').attr('id').replace(/[^0-9]/g, '');
                clearTimeout($animatedSVGIconTimeout[i]);
                if ($that.attr('data-animation') == 'false') {
                    $animationSpeed = 1;
                    $that.css('opacity', '1');
                    $svg_icons[$iconID].finish();
                } else {
                    if ($(this).parents('.active').length > 0 || $(this).parents('#footer-outer').length > 0 || $('body.mobile').length > 0) {
                        $svg_icons[$iconID].reset();
                        $animatedSVGIconTimeout[i] = setTimeout(function() {
                            $svg_icons[$iconID].play();
                        }, $animationDelay);
                    } else {
                        $svg_icons[$iconID].reset().stop();
                    }
                }
            });
        }
        if ($('.vc_row-o-equal-height .svg-icon-holder[data-animation="true"]').length > 0 && $('#nectar_fullscreen_rows').length == 0) {
            $(window).on('smartresize', function() {
                clearTimeout($svgResizeTimeout);
                $svgResizeTimeout = setTimeout(function() {
                    if ($svg_icons.length > 0) {
                        $('.svg-icon-holder.animated-in').each(function(i) {
                            $(this).css('opacity', '1');
                            var $iconID = $(this).attr('id').replace(/[^0-9]/g, '');
                            $svg_icons[$iconID].finish();
                        });
                    }
                }, 300);
            });
        }

        function nectar_fancy_ul_init() {
            $($fullscreenSelector + '.nectar-fancy-ul').each(function() {
                var $icon = $(this).attr('data-list-icon');
                var $color = $(this).attr('data-color');
                var $animation = $(this).attr('data-animation');
                var $animationDelay = ($(this).is('[data-animation-delay]') && $(this).attr('data-animation-delay').length > 0 && $(this).attr('data-animation') != 'false') ? $(this).attr('data-animation-delay') : 0;
                $(this).find('li').each(function() {
                    if ($(this).find('> i').length == 0)
                        $(this).prepend('<i class="icon-default-style ' + $icon + ' ' + $color + '"></i> ');
                });
                if ($animation == 'true') {
                    var $that = $(this);
                    var waypoint = new Waypoint({
                        element: $that,
                        handler: function(direction) {
                            if ($that.parents('.wpb_tab').length > 0 && $that.parents('.wpb_tab').css('visibility') == 'hidden' || $that.hasClass('animated-in')) {
                                waypoint.destroy();
                                return;
                            }
                            setTimeout(function() {
                                $that.find('li').each(function(i) {
                                    var $that = $(this);
                                    $that.delay(i * 220).transition({
                                        'opacity': '1',
                                        'left': '0'
                                    }, 220, 'easeOutCubic');
                                });
                            }, $animationDelay);
                            $that.addClass('animated-in');
                            waypoint.destroy();
                        },
                        offset: 'bottom-in-view'
                    });
                }
            });
        }
        setTimeout(function() {}, $animationOnScrollTimeOut);

        function flipBoxHeights() {
            $('.nectar-flip-box').each(function() {
                var $flipBoxMinHeight = parseInt($(this).attr('data-min-height'));
                var $flipBoxHeight = ($(this).find('.flip-box-back .inner').height() > $(this).find('.flip-box-front .inner').height()) ? $(this).find('.flip-box-back .inner').height() : $(this).find('.flip-box-front .inner').height();
                if ($flipBoxHeight >= $flipBoxMinHeight - 80) {
                    $(this).find('> div').css('height', $flipBoxHeight + 80);
                } else
                    $(this).find('> div').css('height', 'auto');
            });
        }
        flipBoxHeights();
        if (navigator.userAgent.match(/(Android|iPod|iPhone|iPad|IEMobile|BlackBerry|Opera Mini)/)) {
            $('body').on('click', '.nectar-flip-box', function() {
                $(this).toggleClass('flipped');
            });
        }
        var $window = $(window);
        var windowHeight = $window.height();
        $window.unbind('scroll.parallaxSections').unbind('resize.parallaxSections');
        $window.unbind('resize.parallaxSectionsUpdateHeight');
        $window.unbind('load.parallaxSectionsOffsetL');
        $window.unbind('resize.parallaxSectionsOffsetR');
        $window.on('resize.parallaxSectionsUpdateHeight', psUpdateWindowHeight);

        function psUpdateWindowHeight() {
            windowHeight = $window.height();
        }

        function psUpdateOffset($this) {
            $this.each(function() {
                firstTop = $this.offset().top;
            });
        }
        $.fn.parallaxScroll = function(xpos, speedFactor, outerHeight) {
            var $this = $(this);
            var getHeight;
            var firstTop;
            var paddingTop = 0;
            var $windowDOMWidth = window.innerWidth,
                $windowDOMHeight = window.innerHeight;
            var $orientationChange = 0;
            $this.each(function() {
                firstTop = $this.offset().top;
            });
            $window.on('resize.parallaxSectionsOffsetR', psUpdateOffset($this));
            $window.on('load.parallaxSectionsOffsetL', psUpdateOffset($this));
            getHeight = function(jqo) {
                return jqo.outerHeight(true);
            };
            if (arguments.length < 1 || xpos === null) xpos = "50%";
            if (arguments.length < 2 || speedFactor === null) speedFactor = 0.25;
            if (arguments.length < 3 || outerHeight === null) outerHeight = true;
            var $element, top, height;
            var ua = window.navigator.userAgent;
            var msie = ua.indexOf("MSIE ");
            var $onMobileBrowser = navigator.userAgent.match(/(Android|iPod|iPhone|iPad|IEMobile|BlackBerry|Opera Mini)/);
            var $toTransformOrNot = ($smoothCache == true) ? true : false;
            if (!$toTransformOrNot) {
                $this.find('.row-bg.using-image, .page-header-bg-image, .image-bg, .video-wrap').addClass('translate');
            }
            var $ifFast = 0;
            $element = $this;
            height = getHeight($element);
            var classic_mobile_menu_open = false;
            setInterval(function() {
                height = getHeight($element);
                classic_mobile_menu_open = ($('body.classic_mobile_menu_open.mobile').length > 0) ? true : false;
            }, 600);
            var firstSection = (($element.parents('.top-level').length > 0 && $element.parents('.parallax_slider_outer').length > 0) || ($element.parents('.top-level').length > 0 && $element.is('.nectar-recent-posts-single_featured')) || $element.is('.wpb_row.top-level') || $('.wpb_row').length == 0) ? true : false;
            if ($('.wpb_row').length == 0 && $element.parents('.parallax_slider_outer').length > 0 && $element.is('[data-full-width="true"]') || ($('#portfolio-extra').length > 0 && $element.parents('.parallax_slider_outer').length > 0 && $element.parents('.wpb_row').length > 0 && $element.parents('.wpb_row').index() == '0')) {
                firstSection = true;
            }
            var nectarSliderElBool = $this.is('.nectar-slider-wrap');
            var pageHeaderBool = ($this.find('.page-header-bg-image').length > 0) ? true : false;
            var $elToParallax = false;
            if (nectarSliderElBool) {
                if ($this.find('.video-wrap').length > 0 || $this.find('.image-bg').length > 0) {
                    $elToParallax = $this.find('.video-wrap, .image-bg');
                }
            } else {
                if ($this.find('.row-bg.using-image').length > 0) {
                    $elToParallax = $this.find('.row-bg.using-image');
                } else if ($this.find('.page-header-bg-image').length > 0) {
                    $elToParallax = $this.find('.page-header-bg-image');
                }
            }

            function update() {
                firstTop = $element.offset().top;
                if ($elToParallax == false || firstTop + height < nectarDOMInfo.scrollTop || firstTop > nectarDOMInfo.scrollTop + windowHeight || $('body.material-ocm-open').length > 0) {} else {
                    if ($toTransformOrNot) {
                        $this.find('.row-bg.using-image').css('backgroundPosition', xpos + " " + Math.round((firstTop - nectarDOMInfo.scrollTop) * speedFactor) + "px");
                    } else {
                        if (nectarSliderElBool) {
                            if (firstSection) {
                                if (!classic_mobile_menu_open) {
                                    $this.find('.video-wrap, .image-bg').css({
                                        'transform': 'translate3d(0, ' + parseFloat(nectarDOMInfo.scrollTop * speedFactor) + 'px, 0)'
                                    });
                                }
                            } else {
                                $this.find('.video-wrap, .image-bg').css({
                                    'transform': 'translate3d(0, ' + parseFloat((($windowDOMHeight + nectarDOMInfo.scrollTop - firstTop) * speedFactor)) + 'px, 0)'
                                });
                            }
                        } else {
                            if (firstSection) {
                                if (!classic_mobile_menu_open) {
                                    $elToParallax.css({
                                        'transform': 'translate3d(0, ' + parseFloat(nectarDOMInfo.scrollTop * speedFactor) + 'px, 0)'
                                    });
                                }
                            } else {
                                $elToParallax.css({
                                    'transform': 'translate3d(0, ' + parseFloat((($windowDOMHeight + nectarDOMInfo.scrollTop - firstTop) * speedFactor)) + 'px, 0), scale(1.005)'
                                });
                            }
                            if (pageHeaderBool && !classic_mobile_menu_open) {
                                $elToParallax.css({
                                    'transform': 'translate3d(0, ' + parseFloat(nectarDOMInfo.scrollTop * speedFactor) + 'px, 0)'
                                });
                            }
                        }
                    }
                }
                if ($onMobileBrowser) {
                    requestAnimationFrame(update);
                }
            }
            if (window.addEventListener) {
                if (!navigator.userAgent.match(/(Android|iPod|iPhone|iPad|IEMobile|BlackBerry|Opera Mini)/)) {
                    window.addEventListener('scroll', function() {
                        requestAnimationFrame(update);
                    }, false);
                    $(window).resize(function() {
                        $windowDOMWidth = window.innerWidth;
                        $windowDOMHeight = window.innerHeight;
                    });
                } else {
                    requestAnimationFrame(update);
                    window.addEventListener("orientationchange", function() {
                        $orientationChange = 1;
                    });
                    $(window).resize(function() {
                        if (($(window).width() != $windowDOMWidth && $(window).height != $windowDOMHeight) || $orientationChange == 1) {
                            $windowDOMWidth = window.innerWidth;
                            $windowDOMHeight = window.innerHeight;
                            $orientationChange = 0;
                        }
                    });
                }
            }
            $window.on('resize.parallaxSections', update);
            update();
        };
        $('.wpb_row .vc_col-sm-12 .nectar-slider-wrap[data-full-width="true"]').each(function() {
            if ($(this).parents('.wpb_row.full-width-section').length == 0 && $(this).parents('.wpb_row.full-width-content').length == 0) {
                $(this).parents('.wpb_row').addClass('full-width-section');
            }
        });

        function fullWidthSections() {
            var $windowInnerWidth = window.innerWidth;
            var $scrollBar = ($('#ascrail2000').length > 0 && $windowInnerWidth > 1000) ? -13 : 0;
            var $bodyBorderWidth = ($('.body-border-right').length > 0 && $windowInnerWidth > 1000) ? parseInt($('.body-border-right').width()) * 2 : 0;
            if ($('#boxed').length == 1) {
                $justOutOfSight = ((parseInt($('.container-wrap').width()) - parseInt($('.main-content').width())) / 2) + 4;
            } else {
                var $extResponsivePadding = ($('body[data-ext-responsive="true"]').length > 0 && $windowInnerWidth >= 1000) ? 180 : 0;
                var $leftHeaderSize = ($('#header-outer[data-format="left-header"]').length > 0 && $windowInnerWidth >= 1000) ? parseInt($('#header-outer[data-format="left-header"]').width()) : 0;
                if ($(window).width() - $leftHeaderSize - $bodyBorderWidth <= parseInt($('.main-content').css('max-width'))) {
                    var $windowWidth = parseInt($('.main-content').css('max-width'));
                    if ($extResponsivePadding == 180) $windowWidth = $windowWidth - $scrollBar;
                } else {
                    var $windowWidth = $(window).width() - $leftHeaderSize - $bodyBorderWidth;
                }
                $contentWidth = parseInt($('.main-content').css('max-width'));
                if ($('body.single-post[data-ext-responsive="true"]').length > 0 && $('.container-wrap.no-sidebar').length > 0) {
                    $contentWidth = $('.post-area').width();
                    $extResponsivePadding = 0;
                }
                $justOutOfSight = Math.ceil((($windowWidth + $extResponsivePadding + $scrollBar - $contentWidth) / 2))
            }
            $('.carousel-outer').has('.carousel-wrap[data-full-width="true"]').css('overflow', 'visible');
            $('.carousel-wrap[data-full-width="true"], .portfolio-items[data-col-num="elastic"]:not(.fullwidth-constrained), .full-width-content').each(function() {
                var $leftHeaderSize = ($('#header-outer[data-format="left-header"]').length > 0 && $windowInnerWidth >= 1000) ? parseInt($('#header-outer[data-format="left-header"]').width()) : 0;
                var $bodyBorderWidth = ($('.body-border-right').length > 0 && $windowInnerWidth > 1000) ? (parseInt($('.body-border-right').width()) * 2) - 2 : 0;
                if ($('#boxed').length == 1) {
                    var $mainContentWidth = ($('#nectar_fullscreen_rows').length == 0) ? parseInt($('.main-content').width()) : parseInt($(this).parents('.container').width());
                    if ($('body.single-post[data-ext-responsive="true"]').length > 0 && $('.container-wrap.no-sidebar').length > 0 && $(this).parents('.post-area').length > 0) {
                        $contentWidth = $('.post-area').width();
                        $extResponsivePadding = 0;
                        $windowWidth = $(window).width() - $bodyBorderWidth;
                        $justOutOfSight = Math.ceil((($windowWidth + $extResponsivePadding + $scrollBar - $contentWidth) / 2))
                    } else {
                        if ($(this).parents('.page-submenu').length > 0)
                            $justOutOfSight = ((parseInt($('.container-wrap').width()) - $mainContentWidth) / 2);
                        else
                            $justOutOfSight = ((parseInt($('.container-wrap').width()) - $mainContentWidth) / 2) + 4;
                    }
                } else {
                    if ($('body.single-post[data-ext-responsive="true"]').length > 0 && $('.container-wrap.no-sidebar').length > 0 && $(this).parents('.post-area').length > 0) {
                        $contentWidth = $('.post-area').width();
                        $extResponsivePadding = 0;
                        $windowWidth = $(window).width() - $leftHeaderSize - $bodyBorderWidth;
                    } else {
                        var $mainContentMaxWidth = ($('#nectar_fullscreen_rows').length == 0) ? parseInt($('.main-content').css('max-width')) : parseInt($(this).parents('.container').css('max-width'));
                        if ($('#boxed').length == 0 && $(this).hasClass('portfolio-items') && $(this).is('[data-gutter*="px"]') && $(this).attr('data-gutter').length > 0 && $(this).attr('data-gutter') != 'none') {
                            $scrollBar = ($('#ascrail2000').length > 0 && $windowInnerWidth > 1000) ? -13 : 0;
                        }
                        if ($(window).width() - $leftHeaderSize - $bodyBorderWidth <= $mainContentMaxWidth) {
                            $windowWidth = $mainContentMaxWidth;
                            if ($extResponsivePadding == 180) $windowWidth = $windowWidth - $scrollBar;
                        }
                        $contentWidth = $mainContentMaxWidth;
                        $extResponsivePadding = ($('body[data-ext-responsive="true"]').length > 0 && window.innerWidth >= 1000) ? 180 : 0;
                        if ($leftHeaderSize > 0) $extResponsivePadding = ($('body[data-ext-responsive="true"]').length > 0 && window.innerWidth >= 1000) ? 120 : 0;
                    }
                    $justOutOfSight = Math.ceil((($windowWidth + $extResponsivePadding + $scrollBar - $contentWidth) / 2))
                }
                $extraSpace = 0;
                if ($(this).hasClass('carousel-wrap')) $extraSpace = 1;
                if ($(this).hasClass('portfolio-items')) $extraSpace = 5;
                $carouselWidth = ($('#boxed').length == 1) ? $mainContentWidth + parseInt($justOutOfSight * 2) : $(window).width() - $leftHeaderSize - $bodyBorderWidth + $extraSpace + $scrollBar;
                if ($('#boxed').length == 0 && $(this).hasClass('portfolio-items') && $(this).is('[data-gutter*="px"]') && $(this).attr('data-gutter').length > 0 && $(this).attr('data-gutter') != 'none') {
                    if ($(window).width() > 1000)
                        $carouselWidth = $(window).width() - $leftHeaderSize - $bodyBorderWidth + $scrollBar + 3
                    else
                        $carouselWidth = $(window).width() - $leftHeaderSize - $bodyBorderWidth + $scrollBar
                }
                if ($(this).parent().hasClass('default-style')) {
                    var $mainContentWidth = ($('#nectar_fullscreen_rows').length == 0) ? parseInt($('.main-content').width()) : parseInt($(this).parents('.container').width());
                    if ($('#boxed').length != 0) {
                        $carouselWidth = ($('#boxed').length == 1) ? $mainContentWidth + parseInt($justOutOfSight * 2) : $(window).width() - $leftHeaderSize + $extraSpace + $scrollBar;
                    } else {
                        $carouselWidth = ($('#boxed').length == 1) ? $mainContentWidth + parseInt($justOutOfSight * 2) : ($(window).width() - $leftHeaderSize - $bodyBorderWidth) - (($(window).width() - $leftHeaderSize - $bodyBorderWidth) * .025) + $extraSpace + $scrollBar;
                        $windowWidth = ($(window).width() - $leftHeaderSize - $bodyBorderWidth <= $mainContentWidth) ? $mainContentWidth : ($(window).width() - $leftHeaderSize - $bodyBorderWidth) - (($(window).width() - $leftHeaderSize - $bodyBorderWidth) * .025);
                        $justOutOfSight = Math.ceil((($windowWidth + $scrollBar - $mainContentWidth) / 2))
                    }
                } else if ($(this).parent().hasClass('spaced')) {
                    var $mainContentWidth = ($('#nectar_fullscreen_rows').length == 0) ? parseInt($('.main-content').width()) : parseInt($(this).parents('.container').width());
                    if ($('#boxed').length != 0) {
                        $carouselWidth = ($('#boxed').length == 1) ? $mainContentWidth + parseInt($justOutOfSight * 2) - ($(window).width() * .02) : $(window).width() + $extraSpace + $scrollBar;
                    } else {
                        $carouselWidth = ($('#boxed').length == 1) ? $mainContentWidth + parseInt($justOutOfSight * 2) : ($(window).width() - $leftHeaderSize - $bodyBorderWidth) - Math.ceil(($(window).width() - $leftHeaderSize - $bodyBorderWidth) * .02) + $extraSpace + $scrollBar;
                        var $windowWidth2 = ($(window).width() - $leftHeaderSize - $bodyBorderWidth <= $mainContentWidth) ? $mainContentWidth : ($(window).width() - $leftHeaderSize - $bodyBorderWidth) - (($(window).width() - $leftHeaderSize - $bodyBorderWidth) * .02);
                        $justOutOfSight = Math.ceil((($windowWidth2 + $scrollBar - $mainContentWidth) / 2) + 2)
                    }
                }
                if (!$(this).parents('.span_9').length > 0 && !$(this).parent().hasClass('span_3') && $(this).parent().attr('id') != 'sidebar-inner' && $(this).parent().attr('id') != 'portfolio-extra' && !$(this).find('.carousel-wrap[data-full-width="true"]').length > 0 && !$(this).find('.nectar-carousel-flickity-fixed-content').length > 0 && !$(this).find('.portfolio-items:not(".carousel")[data-col-num="elastic"]').length > 0) {
                    if ($('.single-product').length > 0 && $(this).parents('#tab-description').length > 0 && $(this).parents('.full-width-tabs').length == 0) {
                        $(this).css({
                            'visibility': 'visible'
                        });
                    } else {
                        if ($(this).hasClass('portfolio-items')) {
                            $(this).css({
                                'transform': 'translateX(-' + $justOutOfSight + 'px)',
                                'margin-left': 0,
                                'left': 0,
                                'width': $carouselWidth,
                                'visibility': 'visible'
                            });
                        } else {
                            if ($('#nectar_fullscreen_rows').length > 0 && $(this).hasClass('wpb_row')) {
                                $(this).css({
                                    'margin-left': -$justOutOfSight,
                                    'width': $carouselWidth,
                                    'visibility': 'visible'
                                });
                            } else {
                                $(this).css({
                                    'left': 0,
                                    'margin-left': -$justOutOfSight,
                                    'width': $carouselWidth,
                                    'visibility': 'visible'
                                });
                            }
                        }
                    }
                } else if ($(this).parent().attr('id') == 'portfolio-extra' && $('#full_width_portfolio').length != 0) {
                    $(this).css({
                        'left': 0,
                        'margin-left': -$justOutOfSight,
                        'width': $carouselWidth,
                        'visibility': 'visible'
                    });
                } else {
                    $(this).css({
                        'margin-left': 0,
                        'width': 'auto',
                        'left': '0',
                        'visibility': 'visible'
                    });
                }
            });
        }
        var $contentElementsNum = ($('#portfolio-extra').length == 0) ? $('.main-content > .row > *').length : $('.main-content > .row #portfolio-extra > *').length;

        function parallaxSrollSpeed(speedString) {
            var ua = window.navigator.userAgent;
            var msie = ua.indexOf("MSIE ");
            var speed;
            if ($smoothCache == true) {
                switch (speedString) {
                    case 'slow':
                        speed = 0.2;
                        break;
                    case 'medium':
                        speed = 0.4;
                        break;
                    case 'fast':
                        speed = 0.6;
                        break;
                }
            } else {
                switch (speedString) {
                    case 'slow':
                        speed = 0.6;
                        break;
                    case 'medium':
                        speed = 0.4;
                        break;
                    case 'fast':
                        speed = 0.25;
                        break;
                }
            }
            return speed;
        }

        function parallaxScrollInit() {
            if (nectarDOMInfo.usingMobileBrowser && $('body[data-remove-m-parallax="1"]').length > 0) {
                return;
            }
            parallaxRowsBGCals();
            $('.nectar-recent-posts-single_featured, .wpb_row.parallax_section, #page-header-bg[data-parallax="1"] .page-header-bg-image-wrap, .parallax_slider_outer .nectar-slider-wrap').each(function() {
                var $id = $(this).attr('id');
                var ua = window.navigator.userAgent;
                var msie = ua.indexOf("MSIE ");
                if ($smoothCache == true) {
                    if ($(this).find('[data-parallax-speed="fixed"]').length == 0) {
                        if ($(this).find('.row-bg').length == 0) {
                            $('#' + $id).parallaxScroll("50%", 0.25);
                        } else {
                            $('#' + $id + ".parallax_section").parallaxScroll("50%", parallaxSrollSpeed($(this).find('.row-bg').attr('data-parallax-speed')));
                        }
                    }
                } else if ($(this).find('[data-parallax-speed="fixed"]').length == 0) {
                    if ($(this).find('.row-bg').length == 0) {
                        $('#' + $id).parallaxScroll("50%", 0.25);
                    } else {
                        $('#' + $id + ".parallax_section").parallaxScroll("50%", parallaxSrollSpeed($(this).find('.row-bg').attr('data-parallax-speed')));
                    }
                }
                $(this).addClass('nectar-parallax-enabled');
            });
        }
        $('.full-width-section.wpb_row, .full-width-content.wpb_row').each(function() {
            if (!$(this).parent().hasClass('span_9') && !$(this).parent().hasClass('span_3') && $(this).parent().attr('id') != 'sidebar-inner') {
                if ($(this).parents('#portfolio-extra').length > 0 && $('#full_width_portfolio').length == 0) return false;
                if ($(this).index() == '0' && $('#page-header-bg').length == 0 && $('.page-header-no-bg').length == 0 && $('.project-title').length == 0 && $('body.single').length == 0 && $('.project-title').length == 0) {
                    $(this).addClass('first-section');
                    var $that = $(this);
                    setTimeout(function() {
                        $that.addClass('loaded');
                    }, 50);
                }
            }
        });
        parallaxScrollInit();
        parallaxRowsBGCals();

        function parallaxRowsBGCals() {
            if (nectarDOMInfo.usingMobileBrowser && $('body[data-remove-m-parallax="1"]').length > 0) {
                return;
            }
            $('.nectar-recent-posts-single_featured, .wpb_row.parallax_section, #page-header-bg[data-parallax="1"] .page-header-bg-image-wrap, .parallax_slider_outer .nectar-slider-wrap .slide-bg-wrap').each(function() {
                var ua = window.navigator.userAgent;
                var msie = ua.indexOf("MSIE ");
                if ($smoothCache == true) {
                    $(this).find('.row-bg').css({
                        'height': $(this).outerHeight(true) * 2.8,
                        'margin-top': '-' + ($(this).outerHeight(true) * 2.8) / 2 + 'px'
                    });
                } else {
                    if ($(this).find('.row-bg').length == 0 && $(this).find('.page-header-bg-image').length > 0) {} else if ($(this).find('.row-bg').length == 0 && $(this).find('.image-bg').length > 0) {
                        var $non_page_builder_slider = false;
                        if ($('.wpb_row').length == 0 && $(this).parents('.nectar-slider-wrap[data-full-width="true"]').length > 0 && $(this).parents('.parallax_slider_outer').length > 0 && $(this).parents('.parallax_slider_outer').index() == '0') {
                            $non_page_builder_slider = true;
                        }
                        if ($('#portfolio-extra').length > 0 && $(this).parents('.wpb_row').length > 0 && $(this).parents('.parallax_slider_outer').length > 0 && $(this).parents('.wpb_row').index() == '0') {
                            $non_page_builder_slider = true;
                        }
                        if ($(this).parents('.top-level').length > 0 || $non_page_builder_slider) {
                            $(this).find('.image-bg').css({
                                'height': Math.ceil($(this).parent().offset().top * 0.25) + $(this).outerHeight(true)
                            });
                        } else {
                            $(this).find('.image-bg').css({
                                'height': Math.ceil($(window).height() * 0.25) + $(this).outerHeight(true)
                            });
                        }
                    } else if ($(this).find('.row-bg').length == 0 && $(this).find('.video-wrap').length > 0) {
                        var $non_page_builder_slider = false;
                        if ($('.wpb_row').length == 0 && $(this).parents('.nectar-slider-wrap[data-full-width="true"]').length > 0 && $(this).parents('.parallax_slider_outer').length > 0 && $(this).parents('.parallax_slider_outer').index() == '0') {
                            $non_page_builder_slider = true;
                        }
                        if ($('#portfolio-extra').length > 0 && $(this).parents('.wpb_row').length > 0 && $(this).parents('.parallax_slider_outer').length > 0 && $(this).parents('.wpb_row').index() == '0') {
                            $non_page_builder_slider = true;
                        }
                        if ($(this).parents('.top-level').length > 0 || $non_page_builder_slider) {
                            $(this).find('.video-wrap').css({
                                'height': Math.ceil($(this).parent().offset().top * 0.25) + $(this).outerHeight(true)
                            });
                        } else {
                            $(this).find('.video-wrap').css({
                                'height': Math.ceil($(window).height() * 0.25) + $(this).outerHeight(true)
                            });
                        }
                        var vid = $(this).find('.video-wrap video');
                        var vid_w_orig = 1280;
                        var vid_h_orig = 720;
                        var container_w = vid.parent().width();
                        var container_h = vid.parent().height();
                        var scale_w = container_w / vid_w_orig;
                        var scale_h = container_h / vid_h_orig;
                        var scale = scale_w > scale_h ? scale_w : scale_h;
                        vid.width(scale * vid_w_orig);
                        vid.height(scale * vid_h_orig);
                    } else {
                        if ($(this).is('.nectar-recent-posts-single_featured') && $(this).parents('.top-level').length > 0) {} else if (!$(this).hasClass('top-level')) {
                            var $ifFast = ($(this).find('.row-bg[data-parallax-speed="fast"]').length > 0) ? 60 : 0;
                            $(this).find('.row-bg').css({
                                'height': Math.ceil($(window).height() * parallaxSrollSpeed($(this).find('.row-bg').attr('data-parallax-speed'))) + $(this).outerHeight(true) + $ifFast
                            });
                        }
                    }
                }
            });
        }

        function fwsClasses() {
            $('.wpb_wrapper > .nectar-slider-wrap[data-full-width="true"]').each(function() {
                if (!$(this).parent().hasClass('span_9') && !$(this).parent().hasClass('span_3') && $(this).parent().attr('id') != 'sidebar-inner') {
                    if ($(this).parents('.wpb_row').index() == '0') {
                        $(this).addClass('first-nectar-slider');
                    }
                }
            });
            if ($('#portfolio-extra').length == 0) {
                $contentElementsNum = ($('.main-content > .row > .wpb_row').length > 0) ? $('.main-content > .row > .wpb_row').length : $('.main-content > .row > *').length;
            } else {
                $contentElementsNum = $('.main-content > .row #portfolio-extra > *').length;
            }
            $('.full-width-section, .full-width-content:not(.page-submenu .full-width-content):not(.blog-fullwidth-wrap), .row > .nectar-slider-wrap[data-full-width="true"], .wpb_wrapper > .nectar-slider-wrap[data-full-width="true"], .portfolio-items[data-col-num="elastic"]').each(function() {
                if (!$(this).parent().hasClass('span_9') && !$(this).parent().hasClass('span_3') && $(this).parent().attr('id') != 'sidebar-inner') {
                    if ($(this).parents('.wpb_row').length > 0) {
                        if ($(this).parents('#portfolio-extra').length > 0 && $('#full_width_portfolio').length == 0) return false;
                        if ($(this).parents('.wpb_row').index() == '0' && $('#page-header-bg').length != 0) {} else if ($(this).parents('.wpb_row').index() == '0' && $('#page-header-bg').length == 0 && $('.page-header-no-bg').length == 0 && $('.project-title').length == 0 && $(this).parents('.wpb_row').index() == '0' && $('.project-title').length == 0 && $('body[data-bg-header="true"]').length == 0) {
                            if ($('.single').length == 0) {
                                $('.container-wrap').css('padding-top', '0px');
                            } else {
                                $(this).addClass('first-section');
                            }
                        }
                        if ($(this).parents('.wpb_row').index() == $contentElementsNum - 1 && $('#respond').length == 0) {
                            if ($(this).attr('id') != 'portfolio-filters-inline') {
                                $('.container-wrap').css('padding-bottom', '0px');
                                $('#call-to-action .triangle').remove();
                            }
                        }
                    } else {
                        if ($(this).parents('#portfolio-extra').length > 0 && $('#full_width_portfolio').length == 0) return false;
                        if ($(this).find('.portfolio-filters-inline').length == 0 && $(this).attr('id') != 'post-area') {
                            if ($(this).index() == '0' && $('#page-header-bg').length != 0) {} else if ($(this).index() == '0' && $('#page-header-bg').length == 0 && $(this).index() == '0' && $('.page-header-no-bg').length == 0 && $(this).index() == '0' && !$(this).hasClass('blog_next_prev_buttons') && !$(this).hasClass('nectar-shop-outer') && $(this).parents('.pum-container').length == 0) {
                                if ($('body[data-header-resize="0"]').length == 1 && $('.single').length == 0 || $('body.material').length > 0 && $('.single').length == 0) {
                                    if (!$('body.blog .blog-fullwidth-wrap > .masonry:not(.meta-overlaid)').length > 0) {
                                        $('.container-wrap').css('padding-top', '0px');
                                    }
                                } else {
                                    $(this).addClass('first-section');
                                }
                            }
                            if ($(this).index() == $contentElementsNum - 1 && $('#respond').length == 0 && $('body.woocommerce-checkout').length == 0) {
                                $('.container-wrap').css('padding-bottom', '0px');
                                $('.bottom_controls').css('margin-top', '0px');
                                $('#call-to-action .triangle').remove();
                            }
                        }
                    }
                }
            });
            $('#portfolio-extra > .nectar-slider-wrap[data-full-width="true"], .portfolio-wrap').each(function() {
                if ($(this).index() == $contentElementsNum - 1 && $('#commentform').length == 0 && $('#pagination').length == 0) {
                    if (parseInt($('.container-wrap').css('padding-bottom')) > 0) $(this).css('margin-bottom', '-40px');
                    $('#call-to-action .triangle').remove();
                }
            });
            $('.portfolio-filters').each(function() {
                if ($(this).index() == '0' && $('#page-header-bg').length != 0 || $(this).index() == '0') {
                    $(this).addClass('first-section nder-page-header');
                } else if ($(this).index() == '0' && $('#page-header-bg').length == 0 || $(this).index() == '0') {
                    $(this).css({
                        'margin-top': '0px'
                    }).addClass('first-section');
                }
            });
            $('.portfolio-filters-inline').each(function() {
                if ($(this).parents('.wpb_row').length > 0) {
                    if ($(this).parents('.wpb_row').index() == '0' && $('#page-header-bg').length != 0 || $(this).parents('.wpb_row').index() == '0') {
                        if ($('body[data-header-resize="0"]').length == 0) {}
                    }
                } else {
                    if ($(this).index() == '0' && $('#page-header-bg').length != 0 || $(this).index() == '0') {
                        $(this).css({
                            'margin-top': '-2.1em',
                            'padding-top': '19px'
                        }).addClass('first-section nder-page-header');
                    } else if ($(this).index() == '0' && $('#page-header-bg').length == 0 || $(this).index() == '0') {
                        $(this).css({
                            'margin-top': '-30px',
                            'padding-top': '50px'
                        }).addClass('first-section');
                    }
                }
            });
        }

        function fullwidthImgOnlySizingInit() {
            $('.full-width-section:not(.custom-skip)').each(function() {
                var $fwsHeight = $(this).outerHeight(true);
                if ($(this).find('.span_12 *').length == 0 && $.trim($(this).find('.span_12').text()).length == 0 && $fwsHeight > 40) {
                    $(this).addClass('bg-only');
                    $(this).css({
                        'height': $fwsHeight,
                        'padding-top': '0px',
                        'padding-bottom': '0px'
                    });
                    $(this).attr('data-image-height', $fwsHeight);
                }
            });
        }

        function fullwidthImgOnlySizing() {
            $('.full-width-section.bg-only').each(function() {
                var $initialHeight = $(this).attr('data-image-height');
                if (window.innerWidth < 1000 && window.innerWidth > 690) {
                    $(this).css('height', $initialHeight - $initialHeight * .60);
                } else if (window.innerWidth <= 690) {
                    $(this).css('height', $initialHeight - $initialHeight * .78);
                } else if (window.innerWidth < 1300 && window.innerWidth >= 1000) {
                    $(this).css('height', $initialHeight - $initialHeight * .33);
                } else {
                    $(this).css('height', $initialHeight);
                }
            });
        }
        fullwidthImgOnlySizingInit();
        fullwidthImgOnlySizing();

        function fullWidthRowPaddingAdjustInit() {
            if ($('#boxed').length == 0) {
                $('.full-width-section, .full-width-content').each(function() {
                    var $topPadding = $(this)[0].style.paddingTop;
                    var $bottomPadding = $(this)[0].style.paddingBottom;
                    if ($topPadding.indexOf("%") >= 0) $(this).attr('data-top-percent', $topPadding);
                    if ($bottomPadding.indexOf("%") >= 0) $(this).attr('data-bottom-percent', $bottomPadding);
                });
            }
        }

        function fullWidthRowPaddingAdjustCalc() {
            if ($('#boxed').length == 0) {
                $('.full-width-section[data-top-percent], .full-width-section[data-bottom-percent], .full-width-content[data-top-percent],  .full-width-content[data-bottom-percent]').each(function() {
                    var $windowHeight = $(window).width();
                    var $topPadding = ($(this).attr('data-top-percent')) ? $(this).attr('data-top-percent') : 'skip';
                    var $bottomPadding = ($(this).attr('data-bottom-percent')) ? $(this).attr('data-bottom-percent') : 'skip';
                    if ($topPadding != 'skip') {
                        $(this).css('padding-top', $windowHeight * (parseInt($topPadding) / 100));
                    }
                    if ($bottomPadding != 'skip') {
                        $(this).css('padding-bottom', $windowHeight * (parseInt($bottomPadding) / 100));
                    }
                });
            }
        }
        if (nectarDOMInfo.usingMobileBrowser) {
            fullWidthRowPaddingAdjustCalc();
        }

        function fullWidthContentColumns() {
            $('.main-content > .row > .full-width-content, #portfolio-extra > .full-width-content, .woocommerce-tabs #tab-description > .full-width-content, .post-area.span_12 article .content-inner > .full-width-content').each(function() {
                if ($(this).find('> .span_12 > .col').length > 1) {
                    var tallestColumn = 0;
                    var $columnInnerHeight = 0;
                    $(this).find('> .span_12 > .col').each(function() {
                        $column_inner_selector = ($(this).find('> .vc_column-inner > .wpb_wrapper').length > 0) ? '.vc_column-inner' : '.column-inner-wrap > .column-inner';
                        var $padding = parseInt($(this).css('padding-top'));
                        ($(this).find('> ' + $column_inner_selector + ' > .wpb_wrapper').height() + ($padding * 2) > tallestColumn) ? tallestColumn = $(this).find('> ' + $column_inner_selector + ' > .wpb_wrapper').height() + ($padding * 2): tallestColumn = tallestColumn;
                    });
                    $(this).find('> .span_12 > .col').each(function() {
                        $column_inner_selector = ($(this).find('> .vc_column-inner > .wpb_wrapper').length > 0) ? '.vc_column-inner' : '.column-inner-wrap > .column-inner';
                        if ($(this).find('> ' + $column_inner_selector + ' > .wpb_wrapper > *').length > 0) {
                            if (!$(this).parent().parent().hasClass('vc_row-o-equal-height')) $(this).css('height', tallestColumn);
                        } else {
                            $(this).css('min-height', tallestColumn);
                            if ($(this).is('[data-animation*="reveal"]')) $(this).find('.column-inner').css('min-height', tallestColumn);
                        }
                    });
                    var $childRows = $(this).find('> .span_12 > .col .wpb_row').length;
                    if (window.innerWidth > 1000) {
                        var $padding = parseInt($(this).find('> .span_12 > .col').css('padding-top'));
                    } else {
                        $(this).find('> .span_12 > .col .wpb_row .col').css('min-height', '0px');
                    }
                    if ($(this).hasClass('vertically-align-columns') && window.innerWidth > 1000 && !$(this).hasClass('vc_row-o-equal-height')) {
                        $(this).find('> .span_12 > .col').each(function() {
                            $column_inner_selector = ($(this).find('> .vc_column-inner > .wpb_wrapper').length > 0) ? '.vc_column-inner' : '.column-inner-wrap > .column-inner';
                            $columnInnerHeight = $(this).find('> ' + $column_inner_selector + ' > .wpb_wrapper').height();
                            var $marginCalc = ($(this).height() / 2) - ($columnInnerHeight / 2);
                            if ($marginCalc <= 0) $marginCalc = 0;
                            $(this).find('> ' + $column_inner_selector + ' > .wpb_wrapper').css('margin-top', $marginCalc);
                            $(this).find('> ' + $column_inner_selector + ' > .wpb_wrapper').css('margin-bottom', $marginCalc);
                        });
                    }
                }
            });
            $('.main-content > .row > .wpb_row:not(.full-width-content).vc_row-o-equal-height').each(function() {
                if ($(this).find('>.span_12>.wpb_column[data-animation*="reveal"]').length > 0) {
                    var tallestColumn = 0;
                    var $columnInnerHeight = 0;
                    $(this).find('> .span_12 > .col').each(function() {
                        var $padding = parseInt($(this).find('> .column-inner-wrap > .column-inner').css('padding-top'));
                        ($(this).find('> .column-inner-wrap > .column-inner').height() + ($padding * 2) > tallestColumn) ? tallestColumn = $(this).find('> .column-inner-wrap > .column-inner').height() + ($padding * 2): tallestColumn = tallestColumn;
                    });
                    $(this).find('> .span_12 > .col').each(function() {
                        if ($(this).find('> .column-inner-wrap > .column-inner .wpb_wrapper > *').length > 0) {
                            $(this).find('> .column-inner-wrap').css('height', tallestColumn);
                        } else {
                            $(this).css('min-height', tallestColumn);
                            if ($(this).is('[data-animation*="reveal"]')) $(this).find('.column-inner').css('min-height', tallestColumn);
                        }
                    });
                }
            });
            $('.wpb_row.vc_row-o-equal-height>.span_12>.wpb_column[class*="padding-"][data-padding-pos="all"]').each(function() {
                $(this).css({
                    'padding-top': $(this).css('padding-left'),
                    'padding-bottom': $(this).css('padding-left')
                });
            });
        }
        fullWidthContentColumns();
        if ($('.owl-carousel').length > 0) owlCarouselInit();
        var $mouseParallaxScenes = [];

        function mouseParallaxInit() {
            $('.wpb_row:has(.nectar-parallax-scene)').each(function(i) {
                var $headerNavSpace = ($('body[data-header-format="left-header"]').length > 0 && $(window).width() > 1000) ? 0 : $('#header-space').height();
                var $strength = parseInt($(this).find('.nectar-parallax-scene').attr('data-scene-strength'));
                $mouseParallaxScenes[i] = $(this).find('.nectar-parallax-scene').parallax({
                    scalarX: $strength,
                    scalarY: $strength
                });
                var images = $(this).find('.nectar-parallax-scene li');
                $.each(images, function() {
                    if ($(this).find('div').length > 0) {
                        var el = $(this).find('div'),
                            image = el.css('background-image').replace(/"/g, '').replace(/url\(|\)$/ig, '');
                        if (image && image !== '' && image !== 'none')
                            images = images.add($('<img>').attr('src', image));
                    }
                });
                var $that = $(this);
            });
        }
        mouseParallaxInit();

        function ulChecks() {
            $('ul.checks li').prepend('<i class="icon-ok-sign"></i>');
        }
        ulChecks();

        function colAndImgAnimations() {
            $colAndImgOffsetPos = ($('#nectar_fullscreen_rows').length > 0) ? '200%' : '88%';
            $colAndImgOffsetPos2 = ($('#nectar_fullscreen_rows').length > 0) ? '200%' : '70%';
            $($fullscreenSelector + 'img.img-with-animation').each(function() {
                var $that = $(this);
                var $animationEasing = ($('body[data-cae]').length > 0) ? $('body').attr('data-cae') : 'easeOutSine';
                var $animationDuration = ($('body[data-cad]').length > 0) ? $('body').attr('data-cad') : '650';
                var waypoint = new Waypoint({
                    element: $that,
                    handler: function(direction) {
                        if ($that.parents('.wpb_tab').length > 0 && $that.parents('.wpb_tab').css('visibility') == 'hidden' || $that.hasClass('animated-in')) {
                            waypoint.destroy();
                            return;
                        }
                        if (!navigator.userAgent.match(/(Android|iPod|iPhone|iPad|BlackBerry|IEMobile|Opera Mini)/) || $('body[data-responsive="0"]').length > 0) {
                            if ($that.attr('data-animation') == 'fade-in-from-left') {
                                $that.delay($that.attr('data-delay')).transition({
                                    'opacity': 1,
                                    'x': '0px'
                                }, $animationDuration, $animationEasing);
                            } else if ($that.attr('data-animation') == 'fade-in-from-right') {
                                $that.delay($that.attr('data-delay')).transition({
                                    'opacity': 1,
                                    'x': '0px'
                                }, $animationDuration, $animationEasing);
                            } else if ($that.attr('data-animation') == 'fade-in-from-bottom') {
                                $that.delay($that.attr('data-delay')).transition({
                                    'opacity': 1,
                                    'y': '0px'
                                }, $animationDuration, $animationEasing);
                            } else if ($that.attr('data-animation') == 'fade-in') {
                                $that.delay($that.attr('data-delay')).transition({
                                    'opacity': 1
                                }, $animationDuration, $animationEasing);
                            } else if ($that.attr('data-animation') == 'grow-in') {
                                setTimeout(function() {
                                    $that.transition({
                                        scale: 1,
                                        'opacity': 1
                                    }, $animationDuration, $animationEasing);
                                }, $that.attr('data-delay'));
                            } else if ($that.attr('data-animation') == 'flip-in') {
                                setTimeout(function() {
                                    $that.transition({
                                        rotateY: 0,
                                        'opacity': 1
                                    }, $animationDuration, $animationEasing);
                                }, $that.attr('data-delay'));
                            } else if ($that.attr('data-animation') == 'flip-in-vertical') {
                                setTimeout(function() {
                                    $that.transition({
                                        rotateX: 0,
                                        'opacity': 1
                                    }, $animationDuration, $animationEasing);
                                }, $that.attr('data-delay'));
                            }
                            $that.addClass('animated-in');
                        }
                        waypoint.destroy();
                    },
                    offset: $colAndImgOffsetPos
                });
            });
            $($fullscreenSelector + '.nectar_cascading_images').each(function() {
                var $that = $(this);
                var $animationEasing = ($('body[data-cae]').length > 0) ? $('body').attr('data-cae') : 'easeOutSine';
                var $animationDuration = ($('body[data-cad]').length > 0) ? $('body').attr('data-cad') : '650';
                var $animationDelay = ($(this).is('[data-animation-timing]')) ? $(this).attr('data-animation-timing') : 175;
                $animationDelay = parseInt($animationDelay);
                var waypoint = new Waypoint({
                    element: $that,
                    handler: function(direction) {
                        if ($that.parents('.wpb_tab').length > 0 && $that.parents('.wpb_tab').css('visibility') == 'hidden' || $that.hasClass('animated-in')) {
                            waypoint.destroy();
                            return;
                        }
                        if (!navigator.userAgent.match(/(Android|iPod|iPhone|iPad|BlackBerry|IEMobile|Opera Mini)/) || $('body[data-responsive="0"]').length > 0) {
                            $that.find('.cascading-image').each(function(i) {
                                var $that2 = $(this);
                                if ($that2.attr('data-animation') == 'flip-in' || $that2.attr('data-animation') == 'flip-in-vertical') {
                                    setTimeout(function() {
                                        $that2.find('.inner-wrap').css({
                                            'opacity': 1,
                                            'transform': 'rotate(0deg) translateZ(0px)'
                                        });
                                    }, i * $animationDelay);
                                } else {
                                    setTimeout(function() {
                                        $that2.find('.inner-wrap').css({
                                            'opacity': 1,
                                            'transform': 'translateX(0px) translateY(0px) scale(1,1) translateZ(0px)'
                                        });
                                    }, i * $animationDelay);
                                }
                            });
                            $that.addClass('animated-in');
                        }
                        waypoint.destroy();
                    },
                    offset: $colAndImgOffsetPos
                });
            });
            $($fullscreenSelector + '.col.has-animation:not([data-animation*="reveal"]), ' + $fullscreenSelector + '.wpb_column.has-animation:not([data-animation*="reveal"]), ' + $fullscreenSelector + '.nectar-fancy-box.has-animation').each(function(i) {
                var $that = $(this);
                var $animationEasing = ($('body[data-cae]').length > 0) ? $('body').attr('data-cae') : 'easeOutSine';
                var $animationDuration = ($('body[data-cad]').length > 0) ? $('body').attr('data-cad') : '650';
                if ($that.is('[data-animation="flip-in-vertical"]')) {
                    $that.parents('.col.span_12').addClass('flip-in-vertical-wrap');
                }
                var waypoint = new Waypoint({
                    element: $that,
                    handler: function(direction) {
                        if ($that.parents('.wpb_tab').length > 0 && $that.parents('.wpb_tab').css('visibility') == 'hidden' || $that.hasClass('animated-in')) {
                            waypoint.destroy();
                            return;
                        }
                        if (!navigator.userAgent.match(/(Android|iPod|iPhone|iPad|BlackBerry|IEMobile|Opera Mini)/) || $('body[data-responsive="0"]').length > 0) {
                            if ($that.attr('data-animation') == 'fade-in-from-left') {
                                $standAnimatedColTimeout[i] = setTimeout(function() {
                                    $that.transition({
                                        'opacity': 1,
                                        'x': '0px'
                                    }, $animationDuration, $animationEasing);
                                }, $that.attr('data-delay'));
                            } else if ($that.attr('data-animation') == 'fade-in-from-right') {
                                $standAnimatedColTimeout[i] = setTimeout(function() {
                                    $that.transition({
                                        'opacity': 1,
                                        'x': '0px'
                                    }, $animationDuration, $animationEasing);
                                }, $that.attr('data-delay'));
                            } else if ($that.attr('data-animation') == 'fade-in-from-bottom') {
                                $standAnimatedColTimeout[i] = setTimeout(function() {
                                    $that.transition({
                                        'opacity': 1,
                                        'y': '0px'
                                    }, $animationDuration, $animationEasing);
                                }, $that.attr('data-delay'));
                            } else if ($that.attr('data-animation') == 'fade-in') {
                                $standAnimatedColTimeout[i] = setTimeout(function() {
                                    $that.transition({
                                        'opacity': 1
                                    }, $animationDuration, $animationEasing);
                                }, $that.attr('data-delay'));
                            } else if ($that.attr('data-animation') == 'grow-in') {
                                $standAnimatedColTimeout[i] = setTimeout(function() {
                                    $that.transition({
                                        scale: 1,
                                        'opacity': 1
                                    }, $animationDuration, $animationEasing);
                                }, $that.attr('data-delay'));
                            } else if ($that.attr('data-animation') == 'flip-in') {
                                $standAnimatedColTimeout[i] = setTimeout(function() {
                                    $that.transition({
                                        rotateY: 0,
                                        'opacity': 1
                                    }, $animationDuration, $animationEasing);
                                }, $that.attr('data-delay'));
                            } else if ($that.attr('data-animation') == 'flip-in-vertical') {
                                $standAnimatedColTimeout[i] = setTimeout(function() {
                                    $that.transition({
                                        rotateX: 0,
                                        y: 0,
                                        'opacity': 1
                                    }, $animationDuration, $animationEasing);
                                }, $that.attr('data-delay'));
                            }
                            if ($that.hasClass('boxed')) {
                                $that.addClass('no-pointer-events');
                                setTimeout(function() {
                                    $that.removeClass('no-pointer-events');
                                }, parseInt($animationDuration) + parseInt($that.attr('data-delay')) + 30);
                            }
                            $that.addClass('animated-in');
                        }
                        waypoint.destroy();
                    },
                    offset: $colAndImgOffsetPos
                });
            });
            $($fullscreenSelector + '.wpb_column.has-animation[data-animation*="reveal"]').each(function() {
                var $that = $(this);
                var $animationEasing = ($('body[data-cae]').length > 0) ? $('body').attr('data-cae') : 'easeOutSine';
                var $animationDuration = ($('body[data-cad]').length > 0) ? $('body').attr('data-cad') : '650';
                var waypoint = new Waypoint({
                    element: $that,
                    handler: function(direction) {
                        if ($that.parents('.wpb_tab').length > 0 && $that.parents('.wpb_tab').css('visibility') == 'hidden' || $that.hasClass('animated-in')) {
                            waypoint.destroy();
                            return;
                        }
                        if (!navigator.userAgent.match(/(Android|iPod|iPhone|iPad|BlackBerry|IEMobile|Opera Mini)/) || $('body[data-responsive="0"]').length > 0) {
                            if ($that.attr('data-animation') == 'reveal-from-bottom' || $that.attr('data-animation') == 'reveal-from-top') {
                                setTimeout(function() {
                                    if ($that.hasClass('animated-in')) $that.find('.column-inner-wrap, .column-inner').transition({
                                        'y': 0
                                    }, $animationDuration, $animationEasing, function() {
                                        if ($that.hasClass('animated-in')) $that.find('.column-inner-wrap, .column-inner').addClass('no-transform');
                                    });
                                }, $that.attr('data-delay'));
                            } else if ($that.attr('data-animation') == 'reveal-from-right' || $that.attr('data-animation') == 'reveal-from-left') {
                                setTimeout(function() {
                                    if ($that.hasClass('animated-in')) $that.find('.column-inner-wrap, .column-inner').transition({
                                        'x': 0
                                    }, $animationDuration, $animationEasing, function() {
                                        if ($that.hasClass('animated-in')) $that.find('.column-inner-wrap, .column-inner').addClass('no-transform');
                                    });
                                }, $that.attr('data-delay'));
                            }
                            $that.addClass('animated-in');
                        }
                        waypoint.destroy();
                    },
                    offset: $colAndImgOffsetPos2
                });
            });
        }
        setTimeout(function() {}, $animationOnScrollTimeOut);

        function cascadingImageBGSizing() {
            $('.nectar_cascading_images').each(function() {
                if ($(this).parents('.vc_row-o-equal-height').length > 0 && $(this).parents('.wpb_column').length > 0)
                    $(this).css('max-width', $(this).parents('.wpb_column').width());
                $(this).find('.bg-color').each(function() {
                    var $bgColorHeight = 0;
                    var $bgColorWidth = 0;
                    if ($(this).parent().find('.img-wrap').length == 0) {
                        $firstSibling = $(this).parents('.cascading-image').siblings('.cascading-image[data-has-img="true"]').first();
                        $firstSibling.css({
                            'position': 'relative',
                            'visiblity': 'hidden'
                        });
                        $bgColorHeight = $firstSibling.find('.img-wrap').height();
                        $bgColorWidth = $firstSibling.find('.img-wrap').width();
                        if ($firstSibling.index() == 0) {
                            $firstSibling.css({
                                'visiblity': 'visible'
                            });
                        } else {
                            $firstSibling.css({
                                'position': 'absolute',
                                'visiblity': 'visible'
                            });
                        }
                    } else {
                        $bgColorHeight = $(this).parent().find('.img-wrap').height();
                        $bgColorWidth = $(this).parent().find('.img-wrap').width();
                    }
                    $(this).css({
                        'height': $bgColorHeight,
                        'width': $bgColorWidth
                    });
                });
            });
        }
        if ($('.nectar_cascading_images').length > 0) {
            imagesLoaded($('.nectar_cascading_images'), function(instance) {
                cascadingImageBGSizing();
            });
        }

        function splitLineHeadings() {
            $splitLineOffsetPos = ($('#nectar_fullscreen_rows').length > 0) ? '200%' : 'bottom-in-view';
            $($fullscreenSelector + '.nectar-split-heading').each(function() {
                var $that = $(this);
                var $animationEasing = ($('body[data-cae]').length > 0) ? $('body').attr('data-cae') : 'easeOutSine';
                var $animationDuration = ($('body[data-cad]').length > 0) ? $('body').attr('data-cad') : '650';
                var waypoint = new Waypoint({
                    element: $that,
                    handler: function(direction) {
                        if ($that.parents('.wpb_tab').length > 0 && $that.parents('.wpb_tab').css('visibility') == 'hidden' || $that.hasClass('animated-in')) {
                            waypoint.destroy();
                            return;
                        }
                        if (!navigator.userAgent.match(/(Android|iPod|iPhone|iPad|BlackBerry|IEMobile|Opera Mini)/) || $('body[data-responsive="0"]').length > 0) {
                            $that.find('.heading-line').each(function(i) {
                                $(this).find('> div').delay(i * 70).transition({
                                    'y': '0px'
                                }, $animationDuration, $animationEasing);
                            });
                            $that.addClass('animated-in');
                        }
                        waypoint.destroy();
                    },
                    offset: $splitLineOffsetPos
                });
            });
        }

        function oneFourthClasses() {
            $('.col.span_3, .vc_span3, .vc_col-sm-3').each(function() {
                if (!$(this).is('[data-t-w-inherits="small_desktop"]')) {
                    var $currentDiv = $(this);
                    var $nextDiv = $(this).next('div');
                    if ($nextDiv.hasClass('span_3') && !$currentDiv.hasClass('one-fourths') || $nextDiv.hasClass('vc_span3') && !$currentDiv.hasClass('one-fourths') || $nextDiv.hasClass('vc_col-sm-3') && !$currentDiv.hasClass('one-fourths')) {
                        $currentDiv.addClass('one-fourths clear-both');
                        $nextDiv.addClass('one-fourths right-edge');
                    }
                }
            });
            $('.span_12 .col.span_6').each(function() {
                if ($(this).next('div').hasClass('span_6') && $.trim($(this).next('div').html()).length == 0) {
                    $(this).addClass('empty-second')
                }
            });
        }
        oneFourthClasses();

        function progressBars() {
            $progressBarsOffsetPos = ($('#nectar_fullscreen_rows').length > 0) ? '200%' : 'bottom-in-view';
            $($fullscreenSelector + '.nectar-progress-bar').parent().each(function(i) {
                var $that = $(this);
                var waypoint = new Waypoint({
                    element: $that,
                    handler: function(direction) {
                        if ($that.parents('.wpb_tab').length > 0 && $that.parents('.wpb_tab').css('visibility') == 'hidden' || $that.hasClass('completed')) {
                            waypoint.destroy();
                            return;
                        }
                        if ($progressBarsOffsetPos == '100%') $that.find('.nectar-progress-bar .bar-wrap').css('opacity', '1');
                        $that.find('.nectar-progress-bar').each(function(i) {
                            var percent = $(this).find('span').attr('data-width');
                            var $endNum = parseInt($(this).find('span strong i').text());
                            var $that = $(this);
                            $that.find('span').delay(i * 90).transition({
                                'width': percent + '%'
                            }, 1050, 'easeInOutQuint', function() {});
                            setTimeout(function() {
                                var countOptions = {
                                    useEasing: false
                                };
                                var $countEle = $that.find('span strong i')[0];
                                var numAnim = new CountUp($countEle, 0, $endNum, 0, 1, countOptions);
                                numAnim.start();
                                $that.find('span strong').transition({
                                    'opacity': 1
                                }, 550, 'easeInCirc');
                            }, (i * 90));
                            if (percent == '100') {
                                $that.find('span strong').addClass('full');
                            }
                        });
                        $that.addClass('completed');
                        waypoint.destroy();
                    },
                    offset: $progressBarsOffsetPos
                });
            });
        }

        function animatedColBorders() {
            $progressBarsOffsetPos = ($('#nectar_fullscreen_rows').length > 0) ? '200%' : '75%';
            $($fullscreenSelector + '.wpb_column[data-border-animation="true"]').each(function(i) {
                var $that = $(this);
                var waypoint = new Waypoint({
                    element: $that,
                    handler: function(direction) {
                        if ($that.parents('.wpb_tab').length > 0 && $that.parents('.wpb_tab').css('visibility') == 'hidden' || $that.hasClass('completed')) {
                            waypoint.destroy();
                            return;
                        }
                        $borderDelay = ($that.attr('data-border-animation-delay').length > 0) ? parseInt($that.attr('data-border-animation-delay')) : 0;
                        setTimeout(function() {
                            $that.find('.border-wrap').addClass('animation');
                            $that.find('.border-wrap').addClass('completed');
                        }, $borderDelay)
                        waypoint.destroy();
                    },
                    offset: $progressBarsOffsetPos
                });
            });
        }

        function foodMenuItems() {
            $foodItemOffsetPos = ($('#nectar_fullscreen_rows').length > 0) ? '200%' : '80%';
            $($fullscreenSelector + '.nectar_food_menu_item').parent().each(function(i) {
                var $that = $(this);
                var waypoint = new Waypoint({
                    element: $that,
                    handler: function(direction) {
                        if ($that.parents('.wpb_tab').length > 0 && $that.parents('.wpb_tab').css('visibility') == 'hidden' || $that.hasClass('completed')) {
                            waypoint.destroy();
                            return;
                        }
                        $that.find('.nectar_food_menu_item').each(function(i) {
                            var $that = $(this);
                            setTimeout(function() {
                                $that.addClass('animated-in');
                            }, i * 150);
                        });
                        waypoint.destroy();
                    },
                    offset: $foodItemOffsetPos
                });
            });
        }

        function dividers() {
            $dividerOffsetPos = ($('#nectar_fullscreen_rows').length > 0) ? '200%' : 'bottom-in-view';
            $($fullscreenSelector + '.divider-small-border[data-animate="yes"], ' + $fullscreenSelector + '.divider-border[data-animate="yes"]').each(function(i) {
                var $lineDur = ($(this).hasClass('divider-small-border')) ? 1300 : 1500;
                var $that = $(this);
                var waypoint = new Waypoint({
                    element: $that,
                    handler: function(direction) {
                        if ($that.parents('.wpb_tab').length > 0 && $that.parents('.wpb_tab').css('visibility') == 'hidden' || $that.hasClass('completed')) {
                            waypoint.destroy();
                            return;
                        }
                        $that.each(function(i) {
                            $(this).css({
                                'transform': 'scale(0,1)',
                                'visibility': 'visible'
                            });
                            var $that = $(this);
                            $that.delay($that.attr('data-animation-delay')).transition({
                                'transform': 'scale(1, 1)'
                            }, $lineDur, 'cubic-bezier(.18,1,.22,1)');
                        });
                        $that.addClass('completed');
                        waypoint.destroy();
                    },
                    offset: $dividerOffsetPos
                });
            });
        }

        function iconList() {
            $iconListOffsetPos = ($('#nectar_fullscreen_rows').length > 0) ? '250%' : '75%';
            $($fullscreenSelector + '.nectar-icon-list[data-animate="true"]').each(function(i) {
                var $that = $(this);
                var waypoint = new Waypoint({
                    element: $that,
                    handler: function(direction) {
                        if ($that.parents('.wpb_tab').length > 0 && $that.parents('.wpb_tab').css('visibility') == 'hidden' || $that.hasClass('completed')) {
                            waypoint.destroy();
                            return;
                        }
                        $that.each(function(i) {
                            var $listItemAnimationDelay = ($that.is('[data-direction="horizontal"]')) ? 100 : 300;
                            $(this).find('.nectar-icon-list-item').each(function(i) {
                                var $thatt = $(this);
                                setTimeout(function() {
                                    $thatt.addClass('animated')
                                }, i * $listItemAnimationDelay);
                            });
                        });
                        $that.addClass('completed');
                        waypoint.destroy();
                    },
                    offset: $iconListOffsetPos
                });
            });
        }

        function narrowParentBGC(element) {
            var narrowedBGC;
            if (element.parents('.wpb_column[data-bg-color*="#"]').length > 0 && element.parents('.wpb_column[data-bg-opacity="1"]').length > 0) {
                var narrowedBGC = element.parents('.wpb_column').attr('data-bg-color');
            } else if (element.parents('.wpb_row').length > 0 && element.parents('.wpb_row').find('.row-bg.using-bg-color').length > 0) {
                var narrowedBGC = element.parents('.wpb_row').find('.row-bg.using-bg-color').css('background-color');
            } else {
                if ($('#nectar_fullscreen_rows').length > 0)
                    var narrowedBGC = $('#nectar_fullscreen_rows > .wpb_row .full-page-inner-wrap').css('background-color');
                else
                    var narrowedBGC = $('.container-wrap').css('background-color');
            }
            return narrowedBGC;
        }
        var nectarMatchingBGCss = '';
        $('.nectar-icon-list[data-icon-style="border"], .nectar_icon_wrap[data-style="border-animation"][data-color*="extra-color-gradient-"]').each(function(i) {
            var $bgColorToSet = narrowParentBGC($(this));
            if ($(this).hasClass('nectar-icon-list'))
                $(this).find('.list-icon-holder').css('background-color', $bgColorToSet);
            else {
                $(this).addClass('instance-' + i);
                nectarMatchingBGCss += '.nectar_icon_wrap.instance-' + i + ' .nectar_icon:before { background-color: ' + $bgColorToSet + '!important; }';
            }
        });
        $('body.material .nectar-button.see-through[class*="m-extra-color-gradient"]').each(function(i) {
            var $bgColorToSet = narrowParentBGC($(this));
            $(this).addClass('instance-' + i);
            nectarMatchingBGCss += '.nectar-button.see-through.instance-' + i + ':after { background-color: ' + $bgColorToSet + '!important; }';
        });
        if (nectarMatchingBGCss.length > 0) {
            var head = document.head || document.getElementsByTagName('head')[0];
            var style = document.createElement('style');
            style.type = 'text/css';
            if (style.styleSheet) {
                style.styleSheet.cssText = nectarMatchingBGCss;
            } else {
                style.appendChild(document.createTextNode(nectarMatchingBGCss));
            }
            head.appendChild(style);
        }
        $('.nectar_image_with_hotspots[data-hotspot-icon="numerical"]').each(function() {
            $(this).find('.nectar_hotspot_wrap').each(function(i) {
                var $that = $(this);
                setTimeout(function() {
                    $that.find('.nectar_hotspot').addClass('pulse');
                }, i * 300);
            });
        });

        function hotSpotHoverBind() {
            var hotSpotHoverTimeout = [];
            $('.nectar_image_with_hotspots:not([data-tooltip-func="click"]) .nectar_hotspot').each(function(i) {
                hotSpotHoverTimeout[i] = '';
                $(this).on('mouseover', function() {
                    clearTimeout(hotSpotHoverTimeout[i]);
                    $(this).parent().css({
                        'z-index': '400',
                        'height': 'auto',
                        'width': 'auto'
                    });
                });
                $(this).on('mouseleave', function() {
                    var $that = $(this);
                    $that.parent().css({
                        'z-index': 'auto'
                    });
                    hotSpotHoverTimeout[i] = setTimeout(function() {
                        $that.parent().css({
                            'height': '30px',
                            'width': '30px'
                        });
                    }, 300);
                });
            });
        }
        hotSpotHoverBind();

        function responsiveTooltips() {
            $('.nectar_image_with_hotspots').each(function() {
                $(this).find('.nectar_hotspot_wrap').each(function(i) {
                    if (window.innerWidth > 690) {
                        if ($(this).parents('.nectar_image_with_hotspots[data-tooltip-func="hover"]').length > 0) {
                            $(this).find('.nectar_hotspot').removeClass('click');
                            $(this).find('.nttip').removeClass('open');
                        }
                        $(this).find('.nttip .inner a.tipclose').remove();
                        $('.nttip').css('height', 'auto');
                        $(this).css({
                            'width': 'auto',
                            'height': 'auto'
                        });
                        $(this).find('.nttip').removeClass('force-right').removeClass('force-left').removeClass('force-top').css('width', 'auto');
                        var $tipOffset = $(this).find('.nttip').offset();
                        if ($tipOffset.left > $(this).parents('.nectar_image_with_hotspots').width() - 200)
                            $(this).find('.nttip').css('width', '250px');
                        else
                            $(this).find('.nttip').css('width', 'auto');
                        if ($tipOffset.left < 0)
                            $(this).find('.nttip').addClass('force-right');
                        else if ($tipOffset.left + $(this).find('.nttip').outerWidth(true) > window.innerWidth)
                            $(this).find('.nttip').addClass('force-left').css('width', '250px');
                        else if ($tipOffset.top + $(this).find('.nttip').height() + 35 > $(window).height() && $('#nectar_fullscreen_rows').length > 0)
                            $(this).find('.nttip').addClass('force-top');
                        if ($(this).find('> .open').length == 0)
                            $(this).css({
                                'width': '30px',
                                'height': '30px'
                            });
                    } else {
                        $(this).find('.nttip').removeClass('force-left').removeClass('force-right').removeClass('force-top');
                        $(this).find('.nectar_hotspot').addClass('click');
                        if ($(this).find('.nttip a.tipclose').length == 0)
                            $(this).find('.nttip .inner').append('<a href="#" class="tipclose"><span></span></a>');
                        $('.nttip').css('height', $(window).height());
                    }
                });
            });
        }
        responsiveTooltips();

        function imageWithHotspotClickEvents() {
            $('body').on('click', '.nectar_hotspot.click', function() {
                $(this).parents('.nectar_image_with_hotspots').find('.nttip').removeClass('open');
                $(this).parent().find('.nttip').addClass('open');
                $(this).parents('.nectar_image_with_hotspots').find('.nectar_hotspot').removeClass('open');
                $(this).parent().find('.nectar_hotspot').addClass('open');
                if (window.innerWidth > 690) {
                    $(this).parent().css({
                        'z-index': '120',
                        'height': 'auto',
                        'width': 'auto'
                    });
                    var $that = $(this);
                    setTimeout(function() {
                        $that.parents('.nectar_image_with_hotspots').find('.nectar_hotspot_wrap').each(function() {
                            if ($(this).find('> .open').length == 0)
                                $(this).css({
                                    'height': '30px',
                                    'width': '30px',
                                    'z-index': 'auto'
                                });
                        });
                    }, 300);
                }
                if (window.innerWidth <= 690) $(this).parents('.wpb_row, [class*="vc_col-"]').css('z-index', '200');
                return false;
            });
            $('body').on('click', '.nectar_hotspot.open', function() {
                $(this).parent().find('.nttip').removeClass('open');
                $(this).parent().find('.nectar_hotspot').removeClass('open');
                $(this).parents('.wpb_row').css('z-index', 'auto');
                return false;
            });
            $('body').on('click', '.nttip.open', function() {
                if (window.innerWidth < 690) {
                    $(this).parents('.nectar_image_with_hotspots').find('.nttip').removeClass('open');
                    $(this).parents('.wpb_row').css('z-index', 'auto');
                    return false;
                }
            });
        }
        imageWithHotspotClickEvents();

        function imageWithHotspots() {
            $imageWithHotspotsOffsetPos = ($('#nectar_fullscreen_rows').length > 0) ? '200%' : '50%';
            $($fullscreenSelector + '.nectar_image_with_hotspots[data-animation="true"]').each(function(i) {
                var $that = $(this);
                var waypoint = new Waypoint({
                    element: $that,
                    handler: function(direction) {
                        if ($that.parents('.wpb_tab').length > 0 && $that.parents('.wpb_tab').css('visibility') == 'hidden' || $that.hasClass('completed')) {
                            waypoint.destroy();
                            return;
                        }
                        $that.addClass('completed');
                        $that.find('.nectar_hotspot_wrap').each(function(i) {
                            var $that2 = $(this);
                            var $extrai = ($that2.parents('.col.has-animation').length > 0) ? 1 : 0;
                            setTimeout(function() {
                                $that2.addClass('animated-in');
                            }, 175 * (i + $extrai));
                        });
                        waypoint.destroy();
                    },
                    offset: $imageWithHotspotsOffsetPos
                });
            });
        }

        function animated_titles() {
            $animatedTitlesOffsetPos = ($('#nectar_fullscreen_rows').length > 0) ? '200%' : 'bottom-in-view';
            $($fullscreenSelector + '.nectar-animated-title').each(function(i) {
                var $that = $(this);
                var waypoint = new Waypoint({
                    element: $that,
                    handler: function(direction) {
                        if ($that.parents('.wpb_tab').length > 0 && $that.parents('.wpb_tab').css('visibility') == 'hidden' || $that.hasClass('completed')) {
                            waypoint.destroy();
                            return;
                        }
                        $that.addClass('completed');
                        waypoint.destroy();
                    },
                    offset: $animatedTitlesOffsetPos
                });
            });
        }

        function highlighted_text() {
            $highlightedTextOffsetPos = ($('#nectar_fullscreen_rows').length > 0) ? '200%' : 'bottom-in-view';
            $($fullscreenSelector + '.nectar-highlighted-text').each(function(i) {
                if ($(this).is('[data-using-custom-color="true"]')) {
                    var highlightedColorCss = '';
                    var $custom_highlight_color = $(this).attr('data-color');
                    $(this).addClass('instance-' + i);
                    highlightedColorCss += '.nectar-highlighted-text.instance-' + i + ' em:before { background-color: ' + $custom_highlight_color + '; }';
                    if (highlightedColorCss.length > 1) {
                        var head = document.head || document.getElementsByTagName('head')[0];
                        var style = document.createElement('style');
                        style.type = 'text/css';
                        if (style.styleSheet) {
                            style.styleSheet.cssText = highlightedColorCss;
                        } else {
                            style.appendChild(document.createTextNode(highlightedColorCss));
                        }
                        head.appendChild(style);
                    }
                }
                if (nectarDOMInfo.usingMobileBrowser) {
                    $(this).find('em').addClass('animated');
                }
                var $that = $(this);
                var waypoint = new Waypoint({
                    element: $that,
                    handler: function(direction) {
                        if ($that.parents('.wpb_tab').length > 0 && $that.parents('.wpb_tab').css('visibility') == 'hidden' || $that.hasClass('animated')) {
                            waypoint.destroy();
                            return;
                        }
                        $that.find('em').each(function(i) {
                            var $highlighted_em = $(this);
                            setTimeout(function() {
                                $highlighted_em.addClass('animated');
                            }, i * 300);
                        });
                        waypoint.destroy();
                    },
                    offset: $highlightedTextOffsetPos
                });
            });
        }
        var $tallestCol;

        function pricingTableHeight() {
            $('.pricing-table[data-style="default"]').each(function() {
                $tallestCol = 0;
                $(this).find('> div ul').each(function() {
                    ($(this).height() > $tallestCol) ? $tallestCol = $(this).height(): $tallestCol = $tallestCol;
                });
                if ($tallestCol == 0) $tallestCol = 'auto';
                $(this).find('> div ul').css('height', $tallestCol);
            });
        }
        pricingTableHeight();
        $('body').on('click', '.testimonial_slider:not([data-style*="multiple_visible"]):not([data-style="minimal"]) .controls li', function() {
            if ($(this).find('span').hasClass('active')) return false;
            var $index = $(this).index();
            var currentHeight = $(this).parents('.testimonial_slider').find('.slides blockquote').eq($index).height();
            $(this).parents('.testimonial_slider').find('li span').removeClass('active');
            $(this).find('span').addClass('active');
            $(this).parents('.testimonial_slider').find('.slides blockquote').addClass('no-trans');
            $(this).parents('.testimonial_slider').find('.slides blockquote').css({
                'opacity': '0',
                'transform': 'translateX(-25px)',
                'z-index': '1'
            });
            $(this).parents('.testimonial_slider').find('.slides blockquote').eq($index).removeClass('no-trans').css({
                'opacity': '1',
                'transform': 'translateX(0px)'
            }).css('z-index', '20');
            $(this).parents('.testimonial_slider:not(.disable-height-animation)').find('.slides').stop(true, true).animate({
                'height': currentHeight + 40 + 'px'
            }, 450, 'easeOutCubic');
            resizeVideoToCover();
        });
        $('body').on('click', '.testimonial_slider[data-style="minimal"] .testimonial-next-prev a', function() {
            var $index = $(this).parents('.testimonial_slider').find('.slides blockquote.active').index();
            var $actualIndex = $index;
            $(this).parents('.testimonial_slider').find('.slides blockquote').addClass('no-trans');
            $(this).parents('.testimonial_slider').find('.slides blockquote').css({
                'opacity': '0',
                'transform': 'translateX(-25px)',
                'z-index': '1'
            });
            $(this).parents('.testimonial_slider').find('.slides blockquote').eq($index).removeClass('active');
            if ($(this).hasClass('next')) {
                if ($index + 1 >= $(this).parents('.testimonial_slider').find('.slides blockquote').length) {
                    $actualIndex = 0;
                } else {
                    $actualIndex = $index + 1;
                }
                var currentHeight = $(this).parents('.testimonial_slider').find('.slides blockquote').eq($actualIndex).height();
                $(this).parents('.testimonial_slider').find('.slides blockquote').eq($actualIndex).addClass('active').removeClass('no-trans').css({
                    'opacity': '1',
                    'transform': 'translateX(0px)'
                }).css('z-index', '20');
                $(this).parents('.testimonial_slider').find('.control-wrap ul').css({
                    'transform': 'translateX(-' + (20 * $actualIndex) + 'px)'
                });
            } else {
                if ($index - 1 == -1) {
                    $actualIndex = $(this).parents('.testimonial_slider').find('.slides blockquote').length - 1;
                } else {
                    $actualIndex = $index - 1;
                }
                var currentHeight = $(this).parents('.testimonial_slider').find('.slides blockquote').eq($index - 1).height();
                $(this).parents('.testimonial_slider').find('.slides blockquote').eq($index - 1).addClass('active').removeClass('no-trans').css({
                    'opacity': '1',
                    'transform': 'translateX(0px)'
                }).css('z-index', '20');
                $(this).parents('.testimonial_slider').find('.control-wrap ul').css({
                    'transform': 'translateX(-' + (20 * $actualIndex) + 'px)'
                });
            }
            $(this).parents('.testimonial_slider:not(.disable-height-animation)').find('.slides').stop(true, true).animate({
                'height': currentHeight + 40 + 'px'
            }, 450, 'easeOutCubic');
            resizeVideoToCover();
            return false;
        });
        var $tallestQuote;

        function createTestimonialControls() {
            $('.testimonial_slider:not([data-style*="multiple_visible"])').animate({
                'opacity': '1'
            }, 800);
            $('.testimonial_slider:not([data-style*="multiple_visible"])').each(function(i) {
                if ($(this).find('blockquote').length > 1 && $(this).find('.controls').length == 0) {
                    $(this).append('<div class="controls"><ul></ul></div>');
                    var slideNum = $(this).find('blockquote').length;
                    var $that = $(this);
                    for (var i = 0; i < slideNum; i++) {
                        if (!$(this).is('[data-style="minimal"]')) {
                            $that.find('.controls ul').append('<li><span class="pagination-switch"></span></li>');
                        } else {
                            $that.find('.controls ul').append('<li>' + (i + 1) + '</li>');
                        }
                    }
                    if ($(this).is('[data-style="minimal"]')) {
                        $(this).append('<div class="testimonial-next-prev"><a href="#" class="prev fa fa-angle-left"></a><a href="#" class="next fa fa-angle-right"></a></div>');
                        $(this).find('.slides blockquote:first-child').addClass('active').css({
                            'opacity': '1',
                            'transform': 'translateX(0px)'
                        }).css('z-index', '20');
                        if (!$(this).hasClass('disable-height-animation')) {
                            $(this).find('.slides').css({
                                'height': $(this).find('.slides blockquote:first-child').height() + 40 + 'px'
                            });
                        }
                        if ($(this).attr('data-autorotate').length > 0) {
                            slide_interval = (parseInt($(this).attr('data-autorotate')) < 100) ? 4000 : parseInt($(this).attr('data-autorotate'));
                            var $that = $(this);
                            var $rotate = setInterval(function() {
                                testimonialRotate($that)
                            }, slide_interval);
                        }
                        $(this).find('.testimonial-next-prev a').click(function(e) {
                            if (typeof e.clientX != 'undefined') clearInterval($rotate);
                        });
                        $(this).find('.controls ul').wrap('<div class="control-wrap" />');
                        $(this).find('.controls ul').css('width', (($(this).find('.controls ul li').length * 20) + 1) + 'px');
                        $(this).find('.controls').append('<span class="out-of">/</span><span class="total">' + $(this).find('blockquote').length + '</span>');
                        $(this).swipe({
                            swipeLeft: function(e) {
                                $(this).find('.testimonial-next-prev .next').trigger('click');
                                e.stopImmediatePropagation();
                                clearInterval($rotate);
                                return false;
                            },
                            swipeRight: function(e) {
                                $(this).find('.testimonial-next-prev .prev').trigger('click');
                                e.stopImmediatePropagation();
                                clearInterval($rotate);
                                return false;
                            }
                        });
                    }
                    if (!$(this).is('[data-style="minimal"]')) {
                        $(this).find('.controls ul li').first().click();
                        if ($(this).attr('data-autorotate').length > 0) {
                            slide_interval = (parseInt($(this).attr('data-autorotate')) < 100) ? 4000 : parseInt($(this).attr('data-autorotate'));
                            var $that = $(this);
                            var $rotate = setInterval(function() {
                                testimonialRotate($that)
                            }, slide_interval);
                        }
                        $(this).find('.controls li').click(function(e) {
                            if (typeof e.clientX != 'undefined') clearInterval($rotate);
                        });
                        $(this).swipe({
                            swipeLeft: function(e) {
                                $(this).find('.controls ul li span.active').parent().next('li').find('span').trigger('click');
                                e.stopImmediatePropagation();
                                clearInterval($rotate);
                                return false;
                            },
                            swipeRight: function(e) {
                                $(this).find('.controls ul li span.active').parent().prev('li').find('span').trigger('click');
                                e.stopImmediatePropagation();
                                clearInterval($rotate);
                                return false;
                            }
                        });
                    }
                } else if ($(this).find('.controls').length == 0) {
                    var currentHeight = $(this).find('.slides blockquote').height();
                    $(this).find('.slides blockquote').css({
                        'opacity': '0',
                        'transform': 'translateX(-25px)',
                        'z-index': '1'
                    });
                    $(this).find('.slides blockquote').css({
                        'opacity': '1',
                        'transform': 'translateX(0px)'
                    }).css('z-index', '20');
                    $(this).find('.slides').stop(true, true).animate({
                        'height': currentHeight + 20 + 'px'
                    }, 450, 'easeOutCubic');
                }
            });
            $('.testimonial_slider[data-style*="multiple_visible"] .slides').each(function() {
                var $that = $(this);
                var $element = $that;
                var $autoplay = ($that.parents('.testimonial_slider').attr('data-autorotate').length > 1 && parseInt($that.parents('.testimonial_slider').attr('data-autorotate')) > 100) ? parseInt($that.parents('.testimonial_slider').attr('data-autorotate')) : false;
                if ($that.find('img').length == 0) $element = $('body');
                if ($(this).parents('.testimonial_slider').attr('data-style') != 'multiple_visible_minimal') {
                    $(this).find('blockquote').each(function() {
                        $(this).find('.image-icon').insertAfter($(this).find('p'));
                    });
                } else {
                    if ($(this).find('blockquote').length > 4) {
                        $(this).parents('.testimonial_slider').addClass('has-alf');
                    }
                }
                var $testimonialGroupCells = ($(this).parents('.testimonial_slider').attr('data-style') == 'multiple_visible_minimal') ? true : false;
                imagesLoaded($element, function(instance) {
                    $that.flickity({
                        contain: true,
                        draggable: true,
                        groupCells: $testimonialGroupCells,
                        lazyLoad: false,
                        imagesLoaded: true,
                        percentPosition: true,
                        prevNextButtons: false,
                        pageDots: true,
                        resize: true,
                        setGallerySize: true,
                        wrapAround: true,
                        autoPlay: $autoplay,
                        accessibility: false
                    });
                    $that.parents('.testimonial_slider').css('opacity', '1');
                });
            });
        }
        createTestimonialControls();

        function testimonialRotate(slider) {
            var $testimonialLength = slider.find('li').length;
            var $currentTestimonial = slider.find('.pagination-switch.active').parent().index();
            if (slider.parents('.toggle').length > 0 && slider.parents('.toggle').hasClass('open')) {
                if (!slider.is('[data-style="minimal"]')) {
                    if ($currentTestimonial + 1 == $testimonialLength) {
                        slider.find('ul li:first-child').click();
                    } else {
                        slider.find('.pagination-switch.active').parent().next('li').click();
                    }
                } else {
                    slider.find('.testimonial-next-prev .next').click();
                }
            } else {
                if (!slider.is('[data-style="minimal"]')) {
                    if ($currentTestimonial + 1 == $testimonialLength) {
                        slider.find('ul li:first-child').click();
                    } else {
                        slider.find('.pagination-switch.active').parent().next('li').click();
                    }
                } else {
                    slider.find('.testimonial-next-prev .next').click();
                }
            }
        }

        function testimonialHeightResize() {
            $('.testimonial_slider:not(.disable-height-animation):not([data-style*="multiple_visible"])').each(function() {
                var $index = $(this).find('.controls ul li span.active').parent().index();
                var currentHeight = $(this).find('.slides blockquote').eq($index).height();
                $(this).find('.slides').stop(true, true).css({
                    'height': currentHeight + 40 + 'px'
                });
            });
        }

        function testimonialSliderHeight() {
            $('.testimonial_slider.disable-height-animation:not([data-style*="multiple_visible"])').each(function() {
                $tallestQuote = 0;
                $(this).find('blockquote').each(function() {
                    ($(this).height() > $tallestQuote) ? $tallestQuote = $(this).height(): $tallestQuote = $tallestQuote;
                });
                if ($tallestQuote == 0) $tallestQuote = 100;
                $(this).find('.slides').css('height', $tallestQuote + 40 + 'px');
                $(this).animate({
                    'opacity': '1'
                });
                fullWidthContentColumns();
            });
        }

        function testimonialSliderHeightMinimalMult() {
            $('.testimonial_slider[data-style="multiple_visible_minimal"]').each(function() {
                $tallestQuote = 0;
                $(this).find('blockquote > .inner p').css('height', 'auto');
                $(this).find('blockquote > .inner p').each(function() {
                    ($(this).height() > $tallestQuote) ? $tallestQuote = $(this).height(): $tallestQuote = $tallestQuote;
                });
                if ($tallestQuote == 0) $tallestQuote = 200;
                $(this).find('blockquote > .inner p').css('height', $tallestQuote + 'px');
            });
        }
        if ($('.testimonial_slider.disable-height-animation:not([data-style*="multiple_visible"])').length > 0) {
            testimonialSliderHeight();
            setTimeout(testimonialSliderHeight, 500);
        }
        if ($('.testimonial_slider[data-style="multiple_visible_minimal"]').length > 0) {
            testimonialSliderHeightMinimalMult();
            setTimeout(testimonialSliderHeightMinimalMult, 500);
        }

        function responsiveVideoIframesInit() {
            $('iframe').each(function() {
                if (typeof $(this).attr('src') != 'undefined' && !$(this).hasClass('iframe-embed') && $(this).parents('.ult_modal').length == 0 && $(this).parents('.ls-slide').length == 0 && $(this).parents('.esg-entry-media').length == 0 && $(this).parents('.wpb_video_widget.wpb_content_element').length == 0) {
                    if ($(this).attr('src').toLowerCase().indexOf("youtube") >= 0 || $(this).attr('src').toLowerCase().indexOf("vimeo") >= 0 || $(this).attr('src').toLowerCase().indexOf("twitch.tv") >= 0 || $(this).attr('src').toLowerCase().indexOf("kickstarter") >= 0 || $(this).attr('src').toLowerCase().indexOf("embed-ssl.ted") >= 0 || $(this).attr('src').toLowerCase().indexOf("dailymotion") >= 0) {
                        $(this).addClass('iframe-embed');
                        $(this).attr('data-aspectRatio', $(this).height() / $(this).width()).removeAttr('height').removeAttr('width');
                        if ($(this).parents('.post-area.masonry.classic').length > 0) {
                            $(this).attr('data-aspectRatio', '0.56').removeAttr('height').removeAttr('width');
                        }
                    }
                } else {}
            });
        }

        function responsiveVideoIframes() {
            $('iframe[data-aspectRatio]').each(function() {
                var newWidth = $(this).parent().width();
                var $el = $(this);
                if ($(this).parents('.swiper-slide').length > 0) {
                    if ($(this).is(':visible')) $el.width(newWidth).height(newWidth * $el.attr('data-aspectRatio'));
                } else {
                    $el.width(newWidth).height(newWidth * $el.attr('data-aspectRatio'));
                }
            });
        }

        function videoshortcodeSize() {
            $('.wp-video').each(function() {});
        }
        responsiveVideoIframesInit();
        responsiveVideoIframes();
        $('.video-wrap iframe').unwrap();
        $('#sidebar iframe[src]').unwrap();
        $('audio').attr('width', '100%');
        $('audio').attr('height', '100%');
        $('audio').css('visibility', 'visible');
        if ($('body').hasClass('mobile')) {
            $('video').css('visibility', 'hidden');
        } else {
            $('video').css('visibility', 'visible');
        }
        $('.wp-video').each(function() {
            video = $(this).find('video').get(0);
            video.addEventListener('loadeddata', function() {
                videoshortcodeSize();
                $(window).trigger('resize');
            }, false);
        });
        $('.main-content iframe[src]').each(function() {
            $(this).css({
                'opacity': '1',
                'visibility': 'visible'
            });
        });
        $('.wpb_row:has(".nectar-video-wrap"):not(.fp-section)').each(function(i) {
            $(this).css('z-index', 100 + i);
        });
        var min_w = 1200;
        var vid_w_orig;
        var vid_h_orig;
        vid_w_orig = 1280;
        vid_h_orig = 720;

        function resizeVideoToCover() {
            $('.nectar-video-wrap').each(function(i) {
                if ($(this).find('video').length == 0) return;
                if ($(this).parents('#page-header-bg').length > 0) {
                    if ($('.container-wrap.auto-height').length > 0) return false;
                    var $containerHeight = $(this).parents('#page-header-bg').outerHeight();
                    var $containerWidth = $(this).parents('#page-header-bg').outerWidth();
                } else {
                    var $containerHeight = $(this).parents('.wpb_row').outerHeight();
                    var $containerWidth = ($(this).parents('.full-width-section').length > 0) ? window.innerWidth : $(this).parents('.wpb_row').outerWidth();
                }
                $(this).width($containerWidth);
                if ($(this).parents('#page-header-bg').length > 0) {
                    $(this).height($containerHeight);
                }
                var scale_h = $containerWidth / vid_w_orig;
                var scale_v = ($containerHeight - $containerHeight) / vid_h_orig;
                var scale = scale_h > scale_v ? scale_h : scale_v;
                min_w = 1280 / 720 * ($containerHeight + 40);
                if (scale * vid_w_orig < min_w) {
                    scale = min_w / vid_w_orig;
                }
                $(this).find('video, .mejs-overlay, .mejs-poster').width(Math.ceil(scale * vid_w_orig + 0));
                $(this).find('video, .mejs-overlay, .mejs-poster').height(Math.ceil(scale * vid_h_orig + 0));
                $(this).scrollLeft(($(this).find('video').width() - $containerWidth) / 2);
                $(this).scrollTop(($(this).find('video').height() - ($containerHeight)) / 2);
                $(this).find('.mejs-overlay, .mejs-poster').scrollTop(($(this).find('video').height() - ($containerHeight)) / 2);
                if ($(this).attr('data-bg-alignment') == 'center bottom' || $(this).attr('data-bg-alignment') == 'bottom') {
                    $(this).scrollTop(($(this).find('video').height() - ($containerHeight + 6)));
                } else if ($(this).attr('data-bg-alignment') == 'center top' || $(this).attr('data-bg-alignment') == 'top') {
                    $(this).scrollTop(0);
                }
                $(this).addClass('position-loaded');
            });
        }

        function videoBGInit() {
            setTimeout(function() {
                resizeVideoToCover();
                $('.video-color-overlay').each(function() {
                    $(this).css('background-color', $(this).attr('data-color'));
                });
                $('.nectar-video-wrap').each(function(i) {
                    if ($(this).find('video').length == 0) return;
                    var $headerVideo = ($(this).parents('#page-header-bg').length > 0) ? true : false;
                    var $that = $(this);
                    var videoReady = setInterval(function() {
                        if ($that.find('video').get(0).readyState > 3) {
                            if (!nectarDOMInfo.usingMobileBrowser) {
                                $that.transition({
                                    'opacity': '1'
                                }, 400);
                                $that.find('video').transition({
                                    'opacity': '1'
                                }, 400);
                                $that.parent().find('.video-color-overlay').transition({
                                    'opacity': '0.7'
                                }, 400);
                                if ($headerVideo == true) {
                                    pageHeaderTextEffect();
                                }
                            }
                            $('#ajax-loading-screen').addClass('loaded');
                            setTimeout(function() {
                                $('#ajax-loading-screen').addClass('hidden');
                            }, 1000);
                            clearInterval(videoReady);
                        }
                    }, 60);
                    if (nectarDOMInfo.usingMobileBrowser) {
                        if ($that.parents('.full-width-section').length > 0) {
                            $that.css('left', '50%');
                        } else {
                            $that.css('left', '0px');
                        }
                        if ($headerVideo == true) {
                            pageHeaderTextEffect();
                        }
                        $that.find('video')[0].onplay = function() {
                            $that.transition({
                                'opacity': '1'
                            }, 400);
                            $that.find('video').transition({
                                'opacity': '1'
                            }, 400);
                            $that.parent().find('.video-color-overlay').transition({
                                'opacity': '0.7'
                            }, 400);
                        };
                    }
                });
            }, 300);
            if (navigator.userAgent.match(/(Android|iPod|iPhone|iPad|BlackBerry|IEMobile|Opera Mini)/)) {
                $('.nectar-video-wrap').each(function() {
                    if (!$(this).find('video').is('[muted]')) {
                        $(this).parent().find('.mobile-video-image').show();
                        $(this).remove();
                    }
                });
            }
            if (navigator.userAgent.indexOf('Chrome') > 0 && !/Edge\/12./i.test(navigator.userAgent) && !/Edge\/\d./i.test(navigator.userAgent)) {
                $('.nectar-video-wrap').each(function(i) {
                    if (jQuery(this).find('video source[type="video/webm"]').length > 0) {
                        var webmSource = jQuery(this).find('video source[type="video/webm"]').attr('src') + "?id=" + Math.ceil(Math.random() * 10000);
                        var firstVideo = jQuery(this).find('video').get(0);
                        firstVideo.src = webmSource;
                        firstVideo.load();
                    }
                });
            }
            jQuery(".vc_row").each(function() {
                var youtubeUrl, youtubeId, $row = jQuery(this);
                $row.find('.nectar-youtube-bg').length > 0 ? (youtubeUrl = $row.find('.nectar-youtube-bg span').text(), youtubeId = nectarExtractYoutubeId(youtubeUrl), youtubeId && ($row.find(".vc_video-bg").remove(), nectarInsertYoutubeVideoAsBackground($row.find('.nectar-youtube-bg'), youtubeId))) : $row.find(".nectar-youtube-bg").remove()
                $row.find('.nectar-youtube-bg span').remove();
                if (!nectarDOMInfo.usingMobileBrowser) {
                    $row.find('.nectar-video-wrap, .nectar-youtube-bg').css({
                        'opacity': '1',
                        'width': '100%',
                        'height': '100%'
                    });
                }
                $row.find('.video-color-overlay').transition({
                    'opacity': '0.7'
                }, 400);
            });

            function nectarInsertYoutubeVideoAsBackground($element, youtubeId, counter) {
                if ("undefined" == typeof YT || void 0 === YT.Player) return 100 < (counter = void 0 === counter ? 0 : counter) ? void console.warn("Too many attempts to load YouTube api") : void setTimeout(function() {
                    nectarInsertYoutubeVideoAsBackground($element, youtubeId, counter++)
                }, 100);
                var $container = $element.prepend('<div class="vc_video-bg"><div class="inner"></div></div>').find(".inner");
                new YT.Player($container[0], {
                    width: "100%",
                    height: "100%",
                    videoId: youtubeId,
                    playerVars: {
                        playlist: youtubeId,
                        iv_load_policy: 3,
                        enablejsapi: 1,
                        disablekb: 1,
                        autoplay: 1,
                        controls: 0,
                        showinfo: 0,
                        rel: 0,
                        loop: 1
                    },
                    events: {
                        onReady: function(event) {
                            event.target.mute().setLoop(!0);
                            nectarResizeVideoBackground($element);
                        }
                    }
                }), nectarResizeVideoBackground($element), jQuery(window).bind("resize", function() {
                    nectarResizeVideoBackground($element);
                });
                setTimeout(function() {
                    nectarResizeVideoBackground($element);
                }, 100);
            }

            function nectarResizeVideoBackground($element) {
                var iframeW, iframeH, marginLeft, marginTop, containerW = $element.innerWidth(),
                    containerH = $element.innerHeight(),
                    ratio1 = 16,
                    ratio2 = 9;
                ratio1 / ratio2 > containerW / containerH ? (iframeW = containerH * (ratio1 / ratio2), iframeH = containerH, marginLeft = -Math.round((iframeW - containerW) / 2) + "px", marginTop = -Math.round((iframeH - containerH) / 2) + "px", iframeW += "px", iframeH += "px") : (iframeW = containerW, iframeH = containerW * (ratio2 / ratio1), marginTop = -Math.round((iframeH - containerH) / 2) + "px", marginLeft = -Math.round((iframeW - containerW) / 2) + "px", iframeW += "px", iframeH += "px"), $element.find(".vc_video-bg iframe").css({
                    maxWidth: "1000%",
                    marginLeft: marginLeft,
                    marginTop: marginTop,
                    width: iframeW,
                    height: iframeH
                })
            }

            function nectarExtractYoutubeId(url) {
                if ("undefined" == typeof url) return !1;
                var id = url.match(/(?:https?:\/{2})?(?:w{3}\.)?youtu(?:be)?\.(?:com|be)(?:\/watch\?v=|\/)([^\s&]+)/);
                return null !== id ? id[1] : !1
            }
        }
        if ($('.nectar-video-wrap').length > 0 || $('.nectar-youtube-bg').length > 0) {
            videoBGInit();
        }
        $mobileNavSelector = ($('.off-canvas-menu-container.mobile-only').length > 0) ? '.off-canvas-menu-container.mobile-only ' : '#mobile-menu .container ';
        $($mobileNavSelector + '.megamenu > ul > li > a').each(function() {
            if ($(this).text() == '') {
                $navLIs = $(this).parent().find('> ul > li').clone();
                $(this).parent().find('ul').remove();
                $(this).parent().parent().append($navLIs);
                $(this).parent().remove();
            }
        });
        var $bodyBorderHeaderColorMatch = ($('.body-border-top').css('background-color') == '#ffffff' && $('body').attr('data-header-color') == 'light' || $('.body-border-top').css('background-color') == $('#header-outer').attr('data-user-set-bg')) ? true : false;
        var $bodyBorderWidth = ($('.body-border-right').length > 0) ? $('.body-border-right').width() : 0;
        var $resetHeader;

        function mobileBreakPointCheck() {
            var $mobileBreakpoint = ($('body[data-header-breakpoint]').length > 0 && $('body').attr('data-header-breakpoint') != '1000') ? parseInt($('body').attr('data-header-breakpoint')) : 1000;
            var $withinCustomBreakpoint = false;
            if ($mobileBreakpoint != 1000) {
                if ($('body[data-user-set-ocm="1"][data-slide-out-widget-area-style="slide-out-from-right-hover"]').length == 0 && window.innerWidth > 1000 && window.innerWidth <= $mobileBreakpoint) {
                    $withinCustomBreakpoint = true;
                }
            }
            return $withinCustomBreakpoint;
        }
        if ($('#slide-out-widget-area.slide-out-from-right-hover').length > 0) {
            if ($('#ajax-content-wrap > .slide-out-widget-area-toggle').length == 0) {
                $('<div class="slide-out-widget-area-toggle slide-out-hover-icon-effect" data-icon-animation="simple-transform"><div> <a href="#sidewidgetarea" class="closed"> <span> <i class="lines-button x2"> <i class="lines"></i> </i> </span> </a> </div> </div>').insertAfter('#slide-out-widget-area');
                if ($('#header-outer[data-has-menu="true"]').length > 0 || $('body[data-header-search="true"]').length > 0) $('#ajax-content-wrap > .slide-out-widget-area-toggle').addClass('small');
            }

            function calculateHoverNavMinHeight() {
                $widgetHeights = 0;
                $('#slide-out-widget-area > .widget').each(function() {
                    $widgetHeights += $(this).height();
                });
                $menuHeight = (($('#slide-out-widget-area').height() - 25 - $('.bottom-meta-wrap').outerHeight(true) - $widgetHeights) > $('#slide-out-widget-area .off-canvas-menu-container:last-child').height()) ? $('#slide-out-widget-area').height() - 25 - $('.bottom-meta-wrap').outerHeight(true) - $widgetHeights : $('#slide-out-widget-area .off-canvas-menu-container:last-child').height();
                $('#slide-out-widget-area .inner').css({
                    'height': 'auto',
                    'min-height': $menuHeight
                });
                $('#slide-out-widget-area.slide-out-from-right-hover > .inner .off-canvas-menu-container').transition({
                    y: '-' + ($('#slide-out-widget-area.slide-out-from-right-hover > .inner .off-canvas-menu-container:last-child').height() / 2) + 'px'
                }, 0);
            }

            function openRightHoverNav() {
                calculateHoverNavMinHeight();
                if (navigator.userAgent.match(/(Android|iPod|iPhone|iPad|BlackBerry|IEMobile|Opera Mini)/) && $('#slide-out-widget-area.open').length > 0) {
                    mobileCloseNavCheck();
                    return;
                }
                $('#slide-out-widget-area').css({
                    'transform': 'translate3d(0,0,0)'
                }).addClass('open');
                var $bodyBorderHeaderColorMatch = ($('.body-border-top').length > 0 && $('.body-border-top').css('background-color') == '#ffffff' && $('body').attr('data-header-color') == 'light' || $('.body-border-top').length > 0 && $('.body-border-top').css('background-color') == $('#header-outer').attr('data-user-set-bg')) ? true : false;
                if ($('header#top .container .span_9 > .slide-out-widget-area-toggle').length > 0) {
                    var secondaryBarHeight = ($('#header-secondary-outer').length > 0) ? $('#header-secondary-outer').height() : 0;
                    if ($('body.mobile').length > 0) {
                        $('.slide-out-hover-icon-effect').css({
                            'top': $('header#top .span_9 > .slide-out-widget-area-toggle a').offset().top - $(window).scrollTop(),
                            'right': parseInt($('#header-outer header > .container').css('padding-right')) + 1
                        });
                    } else {
                        if ($bodyBorderHeaderColorMatch) {
                            var $extraCushion = ($('#header-outer[data-has-menu="false"]').length > 0) ? 2 : 1;
                            $('.slide-out-hover-icon-effect').css({
                                'top': nectarDOMInfo.adminBarHeight + secondaryBarHeight + parseInt($('header#top nav >ul .slide-out-widget-area-toggle a').css('padding-top')),
                                'right': 29 + $extraCushion
                            });
                        } else {
                            var $withinCustomBreakpoint = mobileBreakPointCheck();
                            if ($('body.ascend').length > 0 && $withinCustomBreakpoint != true) {
                                var $extraCushion = ($('#header-outer[data-has-menu="false"]').length > 0) ? 2 : 1;
                                $('.slide-out-hover-icon-effect').css({
                                    'top': nectarDOMInfo.adminBarHeight + secondaryBarHeight + parseInt($('header#top nav >ul .slide-out-widget-area-toggle a').css('padding-top')),
                                    'right': parseInt($('#header-outer header >.container').css('padding-right')) + $extraCushion
                                });
                            } else {
                                if ($('body.material').length > 0) {
                                    if ($('#header-outer[data-format="centered-menu-bottom-bar"]').length > 0) {
                                        var $nectarHamMenuPos = ($('header#top .span_9 > .slide-out-widget-area-toggle').css('display') == 'block') ? $('#header-outer header#top > .container .span_9 > .slide-out-widget-area-toggle.mobile-icon').position() : $('header#top .span_3 .right-side .slide-out-widget-area-toggle > div').offset();
                                        if ($('#header-secondary-outer.hide-up').length > 0) {
                                            secondaryBarHeight = 0;
                                        }
                                        $('.slide-out-hover-icon-effect').css({
                                            'top': secondaryBarHeight + parseInt($nectarHamMenuPos.top) - nectarDOMInfo.scrollTop,
                                            'right': parseInt($('#header-outer header >.container').css('padding-right')) + 2
                                        });
                                    } else {
                                        var $nectarHamMenuPos = ($('header#top .span_9 > .slide-out-widget-area-toggle').css('display') == 'block') ? $('#header-outer header#top > .container .span_9 > .slide-out-widget-area-toggle.mobile-icon').position() : $('header#top nav .buttons .slide-out-widget-area-toggle > div').position();
                                        if ($('#header-secondary-outer.hide-up').length > 0) {
                                            secondaryBarHeight = 0;
                                        }
                                        $('.slide-out-hover-icon-effect').css({
                                            'top': nectarDOMInfo.adminBarHeight + secondaryBarHeight + parseInt($nectarHamMenuPos.top),
                                            'right': parseInt($('#header-outer header >.container').css('padding-right')) + 2
                                        });
                                    }
                                } else {
                                    $menuToggleSelector = ($('header#top nav > ul .slide-out-widget-area-toggle').length > 0 && $('header#top nav > ul .slide-out-widget-area-toggle').css('display') != 'none') ? $('header#top nav > ul .slide-out-widget-area-toggle') : $('body header#top .span_9 >.slide-out-widget-area-toggle');
                                    $('.slide-out-hover-icon-effect').css({
                                        'top': nectarDOMInfo.adminBarHeight + secondaryBarHeight + parseInt($menuToggleSelector.css('padding-top')) + parseInt($('#header-outer').css('padding-top')),
                                        'right': parseInt($('#header-outer header >.container').css('padding-right')) + 1 + parseInt($menuToggleSelector.css('margin-right'))
                                    });
                                }
                            }
                        }
                    }
                }
                $('.slide-out-hover-icon-effect .lines-button').removeClass('no-delay').addClass('unhidden-line');
                if ($('#header-outer[data-permanent-transparent="1"]').length == 0 && $('#nectar_fullscreen_rows').length == 0) {
                    if (!($(window).scrollTop() == 0 && $('#header-outer.transparent').length > 0)) {
                        if ($('body.mobile').length == 0 && $bodyBorderHeaderColorMatch) {
                            $('#header-outer').attr('data-transparent', 'true').addClass('no-bg-color').addClass('slide-out-hover');
                            $('#header-outer header, #header-outer > .cart-outer').addClass('all-hidden');
                        }
                    }
                    if ($('#header-outer[data-remove-fixed="1"]').length == 0 && $('body.mobile').length == 0 && $bodyBorderHeaderColorMatch) {
                        var headerResize = $('#header-outer').attr('data-header-resize');
                        if (headerResize == 1) {
                            $(window).off('scroll', bigNav);
                            $(window).off('scroll', smallNav);
                        } else {
                            $(window).off('scroll', opaqueCheck);
                            $(window).off('scroll', transparentCheck);
                        }
                    }
                }
                if (!navigator.userAgent.match(/(Android|iPod|iPhone|iPad|BlackBerry|IEMobile|Opera Mini)/)) {
                    $(window).on('mousemove.rightOffsetCheck', closeNavCheck);
                }
            }

            function closeNavCheck(e) {
                var $windowWidth = $(window).width();
                if (e.clientX < $windowWidth - 340 - $bodyBorderWidth) {
                    $(window).off('mousemove.rightOffsetCheck', closeNavCheck);
                    $('#slide-out-widget-area').css({
                        'transform': 'translate3d(341px,0,0)'
                    }).removeClass('open');
                    $('#header-outer').removeClass('style-slide-out-from-right');
                    $('.slide-out-hover-icon-effect .lines-button').removeClass('unhidden-line').addClass('no-delay');
                    var $bodyBorderHeaderColorMatch = ($('.body-border-top').length > 0 && $('.body-border-top').css('background-color') == '#ffffff' && $('body').attr('data-header-color') == 'light' || $('.body-border-top').length > 0 && $('.body-border-top').css('background-color') == $('#header-outer').attr('data-user-set-bg')) ? true : false;
                    if ($('#header-outer[data-permanent-transparent="1"]').length == 0) {
                        if ($('#header-outer[data-remove-fixed="1"]').length == 0 && $('body.mobile').length == 0 && $bodyBorderHeaderColorMatch) {
                            if ($('body.mobile').length == 0) {
                                $('#header-outer').removeClass('no-bg-color');
                                $('#header-outer header, #header-outer > .cart-outer').removeClass('all-hidden');
                            }
                        }
                        if ($('#header-outer[data-remove-fixed="1"]').length == 0 && $('body.mobile').length == 0 && $bodyBorderHeaderColorMatch) {
                            var headerResize = $('#header-outer').attr('data-header-resize');
                            if (headerResize == 1) {
                                $(window).off('scroll.headerResizeEffect');
                                if ($(window).scrollTop() == 0) {
                                    $(window).on('scroll.headerResizeEffect', smallNav);
                                    if ($('#header-outer[data-full-width="true"][data-transparent-header="true"]').length > 0 && $('.body-border-top').length > 0 && $bodyBorderHeaderColorMatch == true && $('#header-outer.pseudo-data-transparent').length > 0) {
                                        $('#header-outer[data-full-width="true"] header > .container').stop(true, true).animate({
                                            'padding': '0'
                                        }, {
                                            queue: false,
                                            duration: 250,
                                            easing: 'easeOutCubic'
                                        });
                                    }
                                } else {
                                    $(window).on('scroll.headerResizeEffect', bigNav);
                                }
                            } else {
                                $(window).off('scroll.headerResizeEffectOpaque');
                                $(window).on('scroll.headerResizeEffectOpaque', opaqueCheck);
                            }
                        }
                    }
                }
            }

            function mobileCloseNavCheck(e) {
                $('#slide-out-widget-area').css({
                    'transform': 'translate3d(341px,0,0)'
                }).removeClass('open');
                $('#header-outer').removeClass('style-slide-out-from-right');
                $('.slide-out-hover-icon-effect .lines-button').removeClass('unhidden-line').addClass('no-delay');
                if ($('#header-outer[data-permanent-transparent="1"]').length == 0) {
                    $('#header-outer').removeClass('no-bg-color');
                    $('#header-outer header').removeClass('all-hidden');
                }
                var $bodyBorderHeaderColorMatch = ($('.body-border-top').length > 0 && $('.body-border-top').css('background-color') == '#ffffff' && $('body').attr('data-header-color') == 'light' || $('.body-border-top').length > 0 && $('.body-border-top').css('background-color') == $('#header-outer').attr('data-user-set-bg')) ? true : false;
                if ($('#header-outer[data-remove-fixed="1"]').length == 0 && $('body.mobile').length == 0 && $bodyBorderHeaderColorMatch) {
                    var headerResize = $('#header-outer').attr('data-header-resize');
                    if (headerResize == 1) {
                        $(window).off('scroll.headerResizeEffect');
                        if ($(window).scrollTop() == 0) {
                            $(window).on('scroll.headerResizeEffect', smallNav);
                            if ($('#header-outer[data-full-width="true"][data-transparent-header="true"]').length > 0 && $('.body-border-top').length > 0 && $bodyBorderHeaderColorMatch == true && $('#header-outer.pseudo-data-transparent').length > 0) {
                                $('#header-outer[data-full-width="true"] header > .container').stop(true, true).animate({
                                    'padding': '0'
                                }, {
                                    queue: false,
                                    duration: 250,
                                    easing: 'easeOutCubic'
                                });
                            }
                        } else {
                            $(window).on('scroll.headerResizeEffect', bigNav);
                        }
                    } else {
                        $(window).off('scroll.headerResizeEffectOpaque');
                        $(window).on('scroll.headerResizeEffectOpaque', opaqueCheck);
                    }
                }
            }
            if (!navigator.userAgent.match(/(Android|iPod|iPhone|iPad|BlackBerry|IEMobile|Opera Mini)/)) {
                $('body').on('mouseenter', '#header-outer .slide-out-widget-area-toggle:not(.std-menu) a', openRightHoverNav);
            } else {
                $('body').on('click', '.slide-out-widget-area-toggle:not(.std-menu) a', openRightHoverNav);
            }
            $(window).on('smartresize', calculateHoverNavMinHeight);
        }

        function setMaterialWidth() {
            $('#slide-out-widget-area.slide-out-from-right').css({
                'padding-top': $(window).height() * 0.1,
                'padding-bottom': $(window).height() * 0.1
            });
            slideOutWidgetOverflowState();
        }
        if ($('body.material[data-slide-out-widget-area-style="slide-out-from-right"]').length > 0) {
            setMaterialWidth();
        }
        if ($('body.material').length > 0 && $('body[data-slide-out-widget-area-style="slide-out-from-right-hover"]').length == 0) {
            if ($('body[data-slide-out-widget-area-style*="fullscreen"]').length == 0) {
                var $menuIconClone = $('header#top nav ul .slide-out-widget-area-toggle a > span > i').clone();
                $menuIconClone.addClass('hover-effect');
                $('header#top nav ul .slide-out-widget-area-toggle a > span').append($menuIconClone);
                var $menuIconClone2 = $('header#top .slide-out-widget-area-toggle.mobile-icon a > span > i').clone();
                $menuIconClone2.addClass('hover-effect');
                $('header#top .slide-out-widget-area-toggle.mobile-icon a > span').append($menuIconClone2);
            }
            $('body:not([data-slide-out-widget-area-style="slide-out-from-right"]) header#top .slide-out-widget-area-toggle a > span').append($('<span class="close-wrap"> <span class="close-line close-line1"></span> <span class="close-line close-line2"></span> </span>'));
        }
        if ($('body.material #boxed').length > 0 && $('body[data-slide-out-widget-area-style="slide-out-from-right-hover"]').length > 0) {
            $('#ajax-content-wrap > .slide-out-widget-area-toggle.slide-out-hover-icon-effect.small').insertAfter('.ocm-effect-wrap');
        }
        if ($('body.material').length > 0 && $('body[data-slide-out-widget-area-style*="fullscreen"]').length == 0) {
            $('body.material #slide-out-widget-area.slide-out-from-right .slide_out_area_close').insertAfter('.ocm-effect-wrap');
            $('#slide-out-widget-area-bg').insertAfter('.ocm-effect-wrap');
            $('#slide-out-widget-area').insertAfter('.ocm-effect-wrap');
        }
        if ($('body.material[data-header-search="true"]').length > 0 || $('body.material .ocm-effect-wrap').length > 0) {
            var materialTransTO;
            $(window).resize(function() {
                clearTimeout(materialTransTO);
                $('body[data-slide-out-widget-area-style="slide-out-from-right"] > a.slide_out_area_close, .material #header-outer, .ocm-effect-wrap, .ocm-effect-wrap-shadow').addClass('no-material-transition');
                materialTransTO = setTimeout(function() {
                    $('body[data-slide-out-widget-area-style="slide-out-from-right"] > a.slide_out_area_close, .material #header-outer, .ocm-effect-wrap, .ocm-effect-wrap-shadow').removeClass('no-material-transition');
                }, 250);
                setMaterialWidth();
            });
        }

        function materialOCM_Size() {
            if ($('.ocm-effect-wrap.material-ocm-open').length > 0) {
                $('.ocm-effect-wrap').css({
                    'height': $(window).height()
                });
                $('.ocm-effect-wrap-inner').css({
                    'padding-top': nectarDOMInfo.adminBarHeight
                });
            }
        }
        $(window).resize(materialOCM_Size);

        function OCM_dropdown_function() {
            var $nectar_ocm_dropdown_func = ($('#slide-out-widget-area[data-dropdown-func]').length > 0) ? $('#slide-out-widget-area').attr('data-dropdown-func') : 'default';
            if ($nectar_ocm_dropdown_func == 'separate-dropdown-parent-link') {
                $('#slide-out-widget-area .off-canvas-menu-container li.menu-item-has-children').append('<span class="ocm-dropdown-arrow"><i class="fa-angle-down"></i></span>');
            }
        }
        OCM_dropdown_function();
        $('body').on('click', '.slide-out-widget-area-toggle:not(.std-menu) a.closed:not(.animating)', function() {
            if (animating == 'true' || $('.slide-out-from-right-hover').length > 0) return false;
            var $that = $(this);
            $('#header-outer').removeClass('no-transition');
            if ($('#slide-out-widget-area').hasClass('slide-out-from-right')) {
                $slideOutAmount = ($('.body-border-top').length > 0 && $('body.mobile').length == 0) ? $('.body-border-top').height() : 0;
                if ($('body.material').length == 0) {
                    $('#slide-out-widget-area .inner').css({
                        'height': 'auto',
                        'min-height': $('#slide-out-widget-area').height() - 25 - $('.bottom-meta-wrap').height()
                    });
                    if ($('#boxed').length == 0) {
                        $('.container-wrap, .home-wrap, #header-secondary-outer, #footer-outer:not(#nectar_fullscreen_rows #footer-outer), .nectar-box-roll,   #page-header-wrap .page-header-bg-image,  #page-header-wrap .nectar-video-wrap, #page-header-wrap .mobile-video-image, #page-header-wrap #page-header-bg > .container, .page-header-no-bg, div:not(.container) > .project-title').stop(true).transition({
                            x: '-300px'
                        }, 700, 'easeInOutCubic');
                        var $withinCustomBreakpoint = mobileBreakPointCheck();
                        if ($('#header-outer[data-format="centered-logo-between-menu"]').length == 0 || $withinCustomBreakpoint) {
                            if ($('#header-outer[data-transparency-option="1"]').length == 0 || ($('#header-outer[data-transparency-option="1"]').length > 0 && $('#header-outer[data-full-width="true"]').length == 0) || $('body.mobile').length > 0) {
                                $('#header-outer').stop(true).css('transform', 'translateY(0)').transition({
                                    x: '-' + (300 + $slideOutAmount) + 'px'
                                }, 700, 'easeInOutCubic');
                            } else {
                                $('#header-outer').stop(true).css('transform', 'translateY(0)').transition({
                                    x: '-' + (300 + $slideOutAmount) + 'px',
                                    'background-color': 'transparent',
                                    'border-bottom': '1px solid rgba(255,255,255,0.22)'
                                }, 700, 'easeInOutCubic');
                            }
                        } else {
                            $('#header-outer header#top nav > ul.buttons, body:not(.material) #header-outer .cart-outer .cart-menu-wrap').transition({
                                x: '-300px'
                            }, 700, 'easeInOutCubic');
                        }
                        $('#ascrail2000').transition({
                            'x': '-' + (300 + $slideOutAmount) + 'px'
                        }, 700, 'easeInOutCubic');
                        $('body:not(.ascend):not(.material) #header-outer .cart-menu').stop(true).transition({
                            'x': '300px'
                        }, 700, 'easeInOutCubic');
                    }
                    $('#slide-out-widget-area').stop(true).transition({
                        x: '-' + $slideOutAmount + 'px'
                    }, 700, 'easeInOutCubic').addClass('open');
                    if ($('#boxed').length == 0) {
                        if ($('#header-outer[data-full-width="true"]').length > 0 && !$('body').hasClass('mobile')) {
                            $('#header-outer').addClass('highzI');
                            $('#ascrail2000').addClass('z-index-adj');
                            if ($('#header-outer[data-format="centered-logo-between-menu"]').length == 0) {
                                if ($bodyBorderWidth == 0)
                                    $('header#top #logo').stop(true).transition({
                                        x: (300 + $slideOutAmount) + 'px'
                                    }, 700, 'easeInOutCubic');
                            }
                            $('header#top .slide-out-widget-area-toggle .lines-button').addClass('close');
                            if ($('#header-outer[data-remove-border="true"]').length > 0) {
                                $('body:not(.ascend) #header-outer[data-full-width="true"] header#top nav > ul.product_added').stop(true).transition({
                                    x: '64px'
                                }, 700, 'easeInOutCubic');
                            } else {
                                $('body:not(.ascend) #header-outer[data-full-width="true"] header#top nav > ul.product_added').stop(true).transition({
                                    x: '89px'
                                }, 700, 'easeInOutCubic');
                            }
                            $('body #header-outer nav > ul > li > a').css({
                                'margin-bottom': '0'
                            });
                        }
                    }
                    $('#header-outer').addClass('style-slide-out-from-right');
                    $('#slide-out-widget-area-bg').css({
                        'height': '100%',
                        'width': '100%'
                    }).stop(true).transition({
                        'opacity': 1
                    }, 700, 'easeInOutCubic', function() {
                        $('.slide-out-widget-area-toggle:not(.std-menu) > div > a').removeClass('animating');
                    });
                    if ($('#header-outer[data-format="centered-logo-between-menu"]').length == 0) {
                        $logoWidth = ($('#logo img:visible').length > 0) ? $('#logo img:visible').width() : $('#logo').width();
                        if ($('header#top nav > .sf-menu').offset().left - $logoWidth - 300 < 20) $('#header-outer').addClass('hidden-menu');
                    } else {
                        $('#header-outer').addClass('hidden-menu-items');
                    }
                    var headerResize = $('#header-outer').attr('data-header-resize');
                    if ($('#header-outer[data-remove-fixed="1"]').length == 0) {
                        if ($bodyBorderHeaderColorMatch == true && headerResize == 1) {
                            $('#header-outer').stop(true).transition({
                                y: '0'
                            }, 0).addClass('transparent').css('transition', 'transform');
                            if ($('#header-outer').attr('data-transparent-header') != 'true') {
                                $('#header-outer').attr('data-transparent-header', 'true').addClass('pseudo-data-transparent');
                            }
                            $(window).off('scroll', bigNav);
                            $(window).off('scroll', smallNav);
                        } else if ($bodyBorderHeaderColorMatch == true) {
                            $('#header-outer').addClass('transparent');
                            $(window).off('scroll', opaqueCheck);
                            $(window).off('scroll', transparentCheck);
                            if ($('#header-outer').attr('data-transparent-header') != 'true') {
                                $('#header-outer').attr('data-transparent-header', 'true').addClass('pseudo-data-transparent');
                            }
                        }
                    }
                } else if ($('body.material').length > 0) {
                    if ($('#ajax-loading-screen').length > 0 && $('.ocm-effect-wrap #ajax-loading-screen').length > 0) {
                        $('#ajax-loading-screen').insertBefore('.ocm-effect-wrap');
                    }
                    if ($(window).scrollTop() > 40) {
                        $('body[data-hhun="1"] #header-secondary-outer').addClass('hidden');
                    }
                    setTimeout(function() {
                        $('.slide-out-widget-area-toggle:not(.std-menu) > div > a').removeClass('animating');
                    }, 300);
                    $('#slide-out-widget-area, #slide-out-widget-area-bg, #header-outer .slide-out-widget-area-toggle').addClass('material-open');
                    if ($('body:not(.mobile) #header-outer[data-format="centered-menu-bottom-bar"][data-condense="true"]').length > 0 && $('#header-outer[data-format="centered-menu-bottom-bar"] .span_9').css('display') != 'none') {
                        $('#header-outer:not(.fixed-menu)').css('top', nectarDOMInfo.adminBarHeight - $(window).scrollTop() + 'px');
                        if ($('#header-secondary-outer').length > 0 && $('#header-outer.fixed-menu').length > 0) {
                            $('#header-secondary-outer').css('visibility', 'hidden');
                        }
                    }
                    $('#ajax-content-wrap').css({
                        'position': 'relative',
                        'top': '-' + $(window).scrollTop() + 'px'
                    });
                    $('.ocm-effect-wrap-inner').css({
                        'padding-top': nectarDOMInfo.adminBarHeight
                    });
                    $('#fp-nav').addClass('material-ocm-open');
                    $('body').addClass('material-ocm-open');
                    $('.ocm-effect-wrap').css({
                        'height': window.innerHeight
                    });
                    setTimeout(function() {
                        $('.ocm-effect-wrap').addClass('material-ocm-open');
                    }, 40);
                    $('body > .slide_out_area_close').addClass('follow-body');
                    $('#header-outer:not([data-format="left-header"]) header#top .slide-out-widget-area-toggle a').addClass('effect-shown');
                    $('body[data-hhun="1"]:not(.no-scroll):not(.mobile) #header-outer[data-permanent-transparent="false"]:not(.detached):not(.parallax-contained):not(.at-top-before-box)').css({
                        'transition': 'none',
                        'transform': 'translateY(' + nectarDOMInfo.adminBarHeight + 'px)'
                    });
                    setTimeout(function() {
                        $('body > .slide_out_area_close').addClass('material-ocm-open');
                    }, 350);
                }
            } else if ($('#slide-out-widget-area').hasClass('fullscreen')) {
                if ($('body.material').length > 0) {
                    $('header#top .slide-out-widget-area-toggle a').addClass('menu-push-out');
                }
                var $scrollDelay = 0;
                var $scrollDelay2 = 0;
                if ($(window).scrollTop() + $(window).height() > $('.blurred-wrap').height() && $('#nectar_fullscreen_rows').length == 0) {
                    $('body,html').stop().animate({
                        scrollTop: $('.blurred-wrap').height() - $(window).height()
                    }, 600, 'easeInOutCubic');
                    $scrollDelay = 550;
                    $scrollDelay2 = 200;
                }
                $('header#top .slide-out-widget-area-toggle:not(.std-menu) .lines-button').addClass('close');
                setTimeout(function() {
                    $('.blurred-wrap').addClass('blurred');
                }, $scrollDelay);
                $('#slide-out-widget-area.fullscreen').show().addClass('open');
                if ($('.nectar-social-sharing-fixed').length == 0) {
                    hideToTop();
                }
                $('.container-wrap').addClass('no-shadow');
                $('#header-outer').stop(true).css('transform', 'translateY(0)');
                setTimeout(function() {
                    $('.off-canvas-menu-container .menu > li').each(function(i) {
                        $(this).delay(i * 50).transition({
                            y: 0,
                            'opacity': 1
                        }, 800, 'easeOutExpo');
                    });
                    $('#slide-out-widget-area.fullscreen .widget').each(function(i) {
                        $(this).delay(i * 100).transition({
                            y: 0,
                            'opacity': 1
                        }, 800, 'easeOutExpo');
                    });
                }, 370 + $scrollDelay2);
                setTimeout(function() {
                    $('#slide-out-widget-area .off-canvas-social-links').addClass('line-shown');
                    $('#slide-out-widget-area .off-canvas-social-links li').each(function(i) {
                        $(this).delay(i * 50).transition({
                            'scale': 1
                        }, 400, 'easeOutCubic');
                    });
                    $('#slide-out-widget-area .bottom-text').transition({
                        'opacity': 0.7
                    }, 400, 'easeOutCubic');
                }, 750 + $scrollDelay2);
                setTimeout(function() {
                    $easing = ($('body.mobile').length > 0) ? 'easeOutCubic' : 'easeInOutQuint';
                    $('#slide-out-widget-area-bg').css({
                        'height': '100%',
                        'width': '100%'
                    }).show().stop(true).transition({
                        'y': '0%'
                    }, 920, $easing, function() {
                        $('.slide-out-widget-area-toggle > div > a').removeClass('animating');
                    });
                }, 50 + $scrollDelay2);
                slideOutWidgetOverflowState();
                if ($('.mobile #header-outer[data-permanent-transparent="false"]').length > 0 && $('.container-wrap').hasClass('no-scroll')) $('#ajax-content-wrap').addClass('at-content');
                if ($('.mobile #header-outer[data-permanent-transparent="false"]').length > 0 || $('.mobile').length == 0 && $('#header-outer.transparent').length == 0) $('#slide-out-widget-area.fullscreen .inner-wrap').css('padding-top', $('#header-outer').height());
            } else if ($('#slide-out-widget-area').hasClass('fullscreen-alt')) {
                if ($('body.material').length > 0) {
                    $('header#top .slide-out-widget-area-toggle a').addClass('menu-push-out');
                }
                $('header#top .slide-out-widget-area-toggle:not(.std-menu) .lines-button').addClass('close');
                $('#slide-out-widget-area.fullscreen-alt').show().addClass('open');
                $('#slide-out-widget-area-bg').addClass('open');
                $('body > div[class*="body-border"]').css('z-index', '9995');
                $('.off-canvas-menu-container .menu').transition({
                    y: '0px',
                    'opacity': 1
                }, 0);
                if ($('.nectar-social-sharing-fixed').length == 0) {
                    hideToTop();
                }
                if ($('#header-outer.transparent').length == 0) {} else {
                    if ($('.body-border-top').length > 0) {
                        $('.admin-bar #slide-out-widget-area-bg.fullscreen-alt').css({
                            'padding-top': ($('.body-border-top').outerHeight(true) + 32) + 'px'
                        });
                        $('body:not(.admin-bar) #slide-out-widget-area-bg.fullscreen-alt').css({
                            'padding-top': ($('.body-border-top').outerHeight(true)) + 'px'
                        });
                    }
                }
                $('#header-outer').stop(true).css('transform', 'translateY(0)');
                if ($('#logo .starting-logo').length > 0 && $(window).width() > 1000 && $('#header-outer[data-format="centered-menu-bottom-bar"].fixed-menu').length == 0 && $('body.material #header-outer[data-condense="true"]').length == 0) {
                    $('#header-outer').stop(true).css('transform', 'translateY(0)').addClass('transparent');
                    if ($('#header-outer').attr('data-transparent-header') != 'true') {
                        $('#header-outer').attr('data-transparent-header', 'true').addClass('pseudo-data-transparent');
                    }
                }
                $('.off-canvas-menu-container .clip-wrap').css('transition-duration', '0s');
                setTimeout(function() {
                    $('.off-canvas-menu-container .menu > li').each(function(i) {
                        $(this).delay(i * 50).transition({
                            y: 0,
                            'opacity': 1
                        }, 750, 'easeOutCubic').addClass('no-pointer-events');
                    });
                    setTimeout(function() {
                        $('.off-canvas-menu-container .menu > li').removeClass('no-pointer-events');
                        $('.off-canvas-menu-container .clip-wrap').css('transition-duration', '.45s');
                    }, 500);
                    $('#slide-out-widget-area.fullscreen-alt .widget').each(function(i) {
                        $(this).delay(i * 100).transition({
                            y: 0,
                            'opacity': 1
                        }, 650, 'easeOutCubic');
                    });
                }, 200);
                setTimeout(function() {
                    $('#slide-out-widget-area .off-canvas-social-links').addClass('line-shown');
                    $('#slide-out-widget-area .off-canvas-social-links li').css('opacity', '1').each(function(i) {
                        $(this).delay(i * 50).transition({
                            'scale': 1
                        }, 400, 'easeOutCubic');
                    });
                    $('#slide-out-widget-area .bottom-text').transition({
                        'opacity': 1
                    }, 600, 'easeOutCubic');
                }, 200);
                if ($('#slide-out-widget-area-bg').hasClass('solid')) $opacity = 1;
                if ($('#slide-out-widget-area-bg').hasClass('dark')) $opacity = 0.97;
                if ($('#slide-out-widget-area-bg').hasClass('medium')) $opacity = 0.6;
                if ($('#slide-out-widget-area-bg').hasClass('light')) $opacity = 0.4;
                $('#slide-out-widget-area-bg').removeClass('no-transition');
                $('#slide-out-widget-area-bg').addClass('padding-removed').css({
                    'height': '100%',
                    'width': '100%',
                    'left': '0',
                    'opacity': $opacity
                });
                setTimeout(function() {
                    $('.slide-out-widget-area-toggle > div > a').removeClass('animating');
                }, 600);
                slideOutWidgetOverflowState();
                if ($('.mobile #header-outer[data-permanent-transparent="false"]').length > 0 && $('.container-wrap').hasClass('no-scroll')) $('#ajax-content-wrap').addClass('at-content');
                if ($('.mobile #header-outer[data-permanent-transparent="false"]').length > 0 || $('.mobile').length == 0 && $('#header-outer.transparent').length == 0) $('#slide-out-widget-area.fullscreen-alt .inner-wrap').css('padding-top', $('#header-outer').height());
            }
            $('#header-outer').removeClass('side-widget-closed').addClass('side-widget-open');
            if ($('#header-outer[data-transparency-option="1"]').length > 0 && $('#boxed').length == 0 && $('#header-outer[data-full-width="true"]').length > 0) {
                if ($('body.material[data-slide-out-widget-area-style="slide-out-from-right"]').length == 0 && $('body.material #header-outer[data-condense="true"]').length == 0) {
                    $('#header-outer').addClass('transparent');
                }
            }
            if ($('#header-outer.dark-slide.transparent').length > 0 && $('#boxed').length == 0 && $('body.material-ocm-open').length == 0) $('#header-outer').removeClass('dark-slide').addClass('temp-removed-dark-slide');
            $('.slide-out-widget-area-toggle > div > a').removeClass('closed').addClass('open');
            $('.slide-out-widget-area-toggle > div > a').addClass('animating');
            return false;
        });
        $('body').on('click', '.slide-out-widget-area-toggle:not(.std-menu) a.open:not(.animating), #slide-out-widget-area .slide_out_area_close,  > .slide_out_area_close, #slide-out-widget-area-bg.slide-out-from-right, .material-ocm-open #ajax-content-wrap', function(e) {
            if (e.originalEvent == undefined && $('.slide_out_area_close.non-human-allowed').length == 0) {
                return;
            }
            if ($('.slide-out-widget-area-toggle:not(.std-menu) a.animating').length > 0) return;
            $('#header-outer').removeClass('no-transition');
            var $that = $(this);
            $('.slide-out-widget-area-toggle:not(.std-menu) a').removeClass('open').addClass('closed');
            $('.slide-out-widget-area-toggle:not(.std-menu) a').addClass('animating');
            if ($('#slide-out-widget-area').hasClass('slide-out-from-right')) {
                if ($('body.material').length == 0) {
                    $('.container-wrap, .home-wrap, #header-secondary-outer, #footer-outer:not(#nectar_fullscreen_rows #footer-outer), .nectar-box-roll, #page-header-wrap .page-header-bg-image,  #page-header-wrap .nectar-video-wrap, #page-header-wrap .mobile-video-image, #page-header-wrap #page-header-bg > .container, .page-header-no-bg, div:not(.container) > .project-title').stop(true).transition({
                        x: '0px'
                    }, 700, 'easeInOutCubic');
                    if ($('#header-outer[data-transparency-option="1"]').length > 0 && $('#boxed').length == 0) {
                        $currentRowBG = ($('#header-outer[data-current-row-bg-color]').length > 0) ? $('#header-outer').attr('data-current-row-bg-color') : $('#header-outer').attr('data-user-set-bg');
                        $('#header-outer').stop(true).transition({
                            x: '0px',
                            'background-color': $currentRowBG
                        }, 700, 'easeInOutCubic');
                    } else {
                        $('#header-outer').stop(true).transition({
                            x: '0px'
                        }, 700, 'easeInOutCubic');
                    }
                    $('#ascrail2000').stop(true).transition({
                        'x': '0px'
                    }, 700, 'easeInOutCubic');
                    $('body:not(.ascend):not(.material) #header-outer .cart-menu').stop(true).transition({
                        'x': '0px'
                    }, 700, 'easeInOutCubic');
                    $('#slide-out-widget-area').stop(true).transition({
                        x: '301px'
                    }, 700, 'easeInOutCubic').removeClass('open');
                    if ($('#boxed').length == 0) {
                        if ($('#header-outer[data-full-width="true"]').length > 0) {
                            $('#header-outer').removeClass('highzI');
                            $('header#top #logo').stop(true).transition({
                                x: '0px'
                            }, 700, 'easeInOutCubic');
                            $('.lines-button').removeClass('close');
                            $('body:not(.ascend) #header-outer[data-full-width="true"] header#top nav > ul.product_added').stop(true).transition({
                                x: '0px'
                            }, 700, 'easeInOutCubic');
                        }
                    }
                    if ($('#header-outer[data-format="centered-logo-between-menu"]').length > 0) {
                        $('#header-outer header#top nav > ul.buttons, #header-outer .cart-outer .cart-menu-wrap').stop(true).transition({
                            x: '0px'
                        }, 700, 'easeInOutCubic');
                    }
                    $('#slide-out-widget-area-bg').stop(true).transition({
                        'opacity': 0
                    }, 700, 'easeInOutCubic', function() {
                        $('.slide-out-widget-area-toggle a').removeClass('animating');
                        $(this).css({
                            'height': '1px',
                            'width': '1px'
                        });
                        if ($('#header-outer[data-remove-fixed="1"]').length == 0) {
                            if ($('#header-outer').hasClass('parallax-contained') && $(window).scrollTop() > 0 && $('#header-outer[data-permanent-transparent="1"]').length == 0) {
                                $('#header-outer').removeClass('parallax-contained').addClass('detached').removeClass('transparent');
                            } else if ($(window).scrollTop() == 0 && $('body[data-hhun="1"]').length > 0 && $('#page-header-bg[data-parallax="1"]').length > 0 || $(window).scrollTop() == 0 && $('body[data-hhun="1"]').length > 0 && $('.parallax_slider_outer').length > 0) {
                                if ($('#header-outer[data-transparency-option="1"]').length > 0) $('#header-outer').addClass('transparent');
                                $('#header-outer').addClass('parallax-contained').removeClass('detached');
                            }
                        }
                        $('.container-wrap').css('transform', 'none');
                    });
                    $('#header-outer').removeClass('style-slide-out-from-right');
                    var headerResize = $('#header-outer').attr('data-header-resize');
                    if ($('#header-outer[data-remove-fixed="1"]').length == 0) {
                        if ($bodyBorderHeaderColorMatch == true && headerResize == 1) {
                            $(window).off('scroll.headerResizeEffect');
                            if ($(window).scrollTop() == 0) {
                                $(window).on('scroll.headerResizeEffect', smallNav);
                                if ($('#header-outer[data-full-width="true"][data-transparent-header="true"]').length > 0 && $('.body-border-top').length > 0 && $bodyBorderHeaderColorMatch == true && $('#header-outer.pseudo-data-transparent').length > 0) {
                                    $('#header-outer[data-full-width="true"] header > .container').stop(true, true).animate({
                                        'padding': '0'
                                    }, {
                                        queue: false,
                                        duration: 250,
                                        easing: 'easeOutCubic'
                                    });
                                }
                            } else
                                $(window).on('scroll.headerResizeEffect', bigNav);
                            if ($('#header-outer').hasClass('pseudo-data-transparent')) {
                                $('#header-outer').attr('data-transparent-header', 'false').removeClass('pseudo-data-transparent').removeClass('transparent');
                            }
                            $('#header-outer').css('transition', 'transform');
                        } else if ($bodyBorderHeaderColorMatch == true) {
                            $(window).off('scroll.headerResizeEffectOpaque');
                            $(window).on('scroll.headerResizeEffectOpaque', opaqueCheck);
                            $('#header-outer').css('transition', 'transform');
                            if ($('#header-outer').hasClass('pseudo-data-transparent')) {
                                $('#header-outer').attr('data-transparent-header', 'false').removeClass('pseudo-data-transparent').removeClass('transparent');
                            }
                        }
                    }
                } else if ($('body.material').length > 0) {
                    $('#slide-out-widget-area').removeClass('open');
                    $('#slide-out-widget-area, #slide-out-widget-area-bg, #header-outer .slide-out-widget-area-toggle').removeClass('material-open');
                    $('.ocm-effect-wrap, .ocm-effect-wrap-shadow, body > .slide_out_area_close, #fp-nav').removeClass('material-ocm-open');
                    $('body > .slide_out_area_close').removeClass('follow-body');
                    setTimeout(function() {
                        $('.slide-out-widget-area-toggle a').removeClass('animating');
                        $('body').removeClass('material-ocm-open');
                        $('.ocm-effect-wrap').css({
                            'height': '100%'
                        });
                        $('.ocm-effect-wrap-inner').css({
                            'padding-top': '0'
                        });
                        $(window).scrollTop(Math.abs(parseInt($('#ajax-content-wrap').css('top'))));
                        $('#ajax-content-wrap').css({
                            'position': '',
                            'top': ''
                        });
                        if ($('#header-outer[data-format="centered-menu-bottom-bar"]').length > 0 && $('#header-outer[data-format="centered-menu-bottom-bar"] .span_9').css('display') != 'none' && $('body.mobile').length == 0) {
                            $('#header-outer:not(.fixed-menu)').css('top', '');
                            $('#header-secondary-outer').css('visibility', '');
                        }
                        $('body[data-hhun="1"]:not(.no-scroll) #header-outer[data-permanent-transparent="false"]:not(.detached):not(.parallax-contained):not(.at-top-before-box)').css({
                            'transform': ''
                        });
                        setTimeout(function() {
                            $('body[data-hhun="1"]:not(.no-scroll) #header-outer[data-permanent-transparent="false"]:not(.detached):not(.parallax-contained):not(.at-top-before-box)').css({
                                'transition': ''
                            });
                        }, 30);
                        $('body[data-hhun="1"] #header-secondary-outer.hidden').removeClass('hidden');
                    }, 900);
                    setTimeout(function() {
                        $('#header-outer:not([data-format="left-header"]) header#top .slide-out-widget-area-toggle a').addClass('no-trans').removeClass('effect-shown');
                    }, 200);
                    setTimeout(function() {
                        $('#header-outer:not([data-format="left-header"]) header#top .slide-out-widget-area-toggle a').removeClass('no-trans')
                    }, 500);
                }
            } else if ($('#slide-out-widget-area').hasClass('fullscreen')) {
                if ($('body.material').length > 0) {
                    setTimeout(function() {
                        $('header#top .slide-out-widget-area-toggle a').removeClass('menu-push-out');
                    }, 350);
                }
                $('.slide-out-widget-area-toggle:not(.std-menu) .lines-button').removeClass('close');
                $('.blurred-wrap').removeClass('blurred');
                $('#slide-out-widget-area.fullscreen').transition({
                    'opacity': 0
                }, 700, 'easeOutQuad', function() {
                    $('#slide-out-widget-area.fullscreen').hide().css('opacity', '1');
                }).removeClass('open');
                $('#slide-out-widget-area.fullscreen .widget').transition({
                    'opacity': 0
                }, 700, 'easeOutQuad', function() {
                    $(this).transition({
                        y: '110px'
                    }, 0);
                });
                setTimeout(function() {
                    $('.off-canvas-menu-container .menu > li').transition({
                        y: '80px',
                        'opacity': 0
                    }, 0);
                    $('#slide-out-widget-area .off-canvas-social-links li').transition({
                        'scale': 0
                    }, 0);
                    $('#slide-out-widget-area .off-canvas-social-links').removeClass('line-shown');
                    $('#slide-out-widget-area .bottom-text').transition({
                        'opacity': 0
                    }, 0);
                    $('#slide-out-widget-area .menuwrapper .menu').removeClass('subview');
                    $('#slide-out-widget-area .menuwrapper .menu li').removeClass('subview subviewopen');
                    $('#slide-out-widget-area.fullscreen .inner .off-canvas-menu-container').css('height', 'auto');
                }, 800);
                setTimeout(function() {
                    if ($('.nectar-social-sharing-fixed').length == 0) {
                        showToTop();
                    }
                    $('.container-wrap').removeClass('no-shadow');
                }, 500);
                $('#slide-out-widget-area-bg').stop(true).transition({
                    'opacity': 0
                }, 900, 'easeOutQuad', function() {
                    if ($('.mobile #header-outer[data-permanent-transparent="false"]').length > 0 && $('.container-wrap').hasClass('no-scroll')) $('#ajax-content-wrap').removeClass('at-content');
                    if ($('.mobile #header-outer[data-permanent-transparent="false"]').length == 0) $('#slide-out-widget-area.fullscreen .inner-wrap').css('padding-top', '0');
                    $('.slide-out-widget-area-toggle a').removeClass('animating');
                    if ($('#slide-out-widget-area-bg').hasClass('solid')) $opacity = 1;
                    if ($('#slide-out-widget-area-bg').hasClass('dark')) $opacity = 0.93;
                    if ($('#slide-out-widget-area-bg').hasClass('medium')) $opacity = 0.6;
                    if ($('#slide-out-widget-area-bg').hasClass('light')) $opacity = 0.4;
                    $(this).css({
                        'height': '1px',
                        'width': '1px',
                        'opacity': $opacity
                    }).transition({
                        y: '-100%'
                    }, 0);
                });
            } else if ($('#slide-out-widget-area').hasClass('fullscreen-alt')) {
                if ($('body.material').length > 0) {
                    setTimeout(function() {
                        $('header#top .slide-out-widget-area-toggle a').removeClass('menu-push-out');
                    }, 350);
                }
                $('.slide-out-widget-area-toggle:not(.std-menu) .lines-button').removeClass('close');
                $('.blurred-wrap').removeClass('blurred');
                $('#slide-out-widget-area-bg').removeClass('open');
                $('#slide-out-widget-area.fullscreen-alt .widget').transition({
                    'opacity': 0
                }, 500, 'easeOutQuad', function() {
                    $(this).transition({
                        y: '40px'
                    }, 0);
                });
                $('#slide-out-widget-area .bottom-text, #slide-out-widget-area .off-canvas-social-links li').transition({
                    'opacity': 0
                }, 250, 'easeOutQuad');
                $('#slide-out-widget-area .off-canvas-social-links').removeClass('line-shown');
                $('.off-canvas-menu-container .menu').transition({
                    y: '-13px',
                    'opacity': 0
                }, 400);
                setTimeout(function() {
                    $('.off-canvas-menu-container .menu > li').stop(true, true).transition({
                        y: '40px',
                        'opacity': 0
                    }, 0);
                    $('#slide-out-widget-area .off-canvas-social-links li').transition({
                        'scale': 0
                    }, 0);
                    $('#slide-out-widget-area .off-canvas-social-links').removeClass('line-shown');
                    $('#slide-out-widget-area .menuwrapper .menu').removeClass('subview');
                    $('#slide-out-widget-area .menuwrapper .menu li').removeClass('subview subviewopen');
                    $('#slide-out-widget-area.fullscreen-alt .inner .off-canvas-menu-container').css('height', 'auto');
                    if ($('.mobile #header-outer[data-permanent-transparent="false"]').length > 0 && $('.container-wrap').hasClass('no-scroll')) $('#ajax-content-wrap').removeClass('at-content');
                    if ($('.mobile #header-outer[data-permanent-transparent="false"]').length == 0) $('#slide-out-widget-area.fullscreen-alt .inner-wrap').css('padding-top', '0');
                    $('.slide-out-widget-area-toggle a').removeClass('animating');
                    $('#slide-out-widget-area-bg').css({
                        'height': '1px',
                        'width': '1px',
                        'left': '-100%'
                    });
                    $('#slide-out-widget-area.fullscreen-alt').hide().removeClass('open');
                }, 550);
                setTimeout(function() {
                    if ($('.nectar-social-sharing-fixed').length == 0) {
                        showToTop();
                    }
                }, 600);
                setTimeout(function() {
                    $('#slide-out-widget-area-bg').removeClass('padding-removed');
                }, 50);
                var borderDelay = ($bodyBorderHeaderColorMatch == true) ? 150 : 50;
                setTimeout(function() {
                    $('#slide-out-widget-area-bg').stop(true).css({
                        'opacity': 0
                    });
                    if ($('[data-transparent-header="true"]').length > 0) $('body > div[class*="body-border"]').css('z-index', '10000');
                }, borderDelay);
                setTimeout(function() {
                    $('#header-outer.transparent.small-nav, #header-outer.transparent.detached, #header-outer:not([data-permanent-transparent="1"]).transparent.scrolled-down').removeClass('transparent');
                    if ($('#header-outer').hasClass('pseudo-data-transparent')) {
                        $('#header-outer').attr('data-transparent-header', 'false').removeClass('pseudo-data-transparent').removeClass('transparent');
                    }
                }, 100);
            }
            if ($('#header-outer.temp-removed-dark-slide.transparent').length > 0 && $('#boxed').length == 0) $('#header-outer').removeClass('temp-removed-dark-slide').addClass('dark-slide');
            if ($('#header-outer[data-permanent-transparent="1"]').length == 0 && $('#slide-out-widget-area.fullscreen-alt').length == 0) {
                if ($('.nectar-box-roll').length == 0) {
                    if ($('#header-outer.small-nav').length > 0 || $('#header-outer.scrolled-down').length > 0 || $('#header-outer.detached').length > 0) $('#header-outer').removeClass('transparent');
                } else {
                    if ($('#header-outer.small-nav').length > 0 || $('#header-outer.scrolled-down').length > 0 || $('.container-wrap.auto-height').length > 0) $('#header-outer').removeClass('transparent');
                }
            }
            $('#header-outer').removeClass('hidden-menu');
            $('#header-outer').removeClass('side-widget-open').addClass('side-widget-closed');
            return false;
        });

        function slideOutWidgetOverflowState() {
            if (window.innerWidth < 1000 || $('body > #boxed').length > 0 || $('.ocm-effect-wrap-inner > #boxed').length > 0) {
                $('#slide-out-widget-area.fullscreen .off-canvas-social-links, #slide-out-widget-area.fullscreen-alt .off-canvas-social-links').appendTo('#slide-out-widget-area .inner');
                $('#slide-out-widget-area.fullscreen .bottom-text, #slide-out-widget-area.fullscreen-alt .bottom-text').appendTo('#slide-out-widget-area .inner');
            } else {
                $('#slide-out-widget-area.fullscreen .off-canvas-social-links,#slide-out-widget-area.fullscreen-alt .off-canvas-social-links').appendTo('#slide-out-widget-area .inner-wrap');
                $('#slide-out-widget-area.fullscreen .bottom-text, #slide-out-widget-area.fullscreen-alt .bottom-text').appendTo('#slide-out-widget-area .inner-wrap');
            }
            if ($('#slide-out-widget-area[class*="fullscreen"] .inner').height() >= $(window).height() - 100) {
                $('#slide-out-widget-area[class*="fullscreen"] .inner, #slide-out-widget-area[class*="fullscreen"]').addClass('overflow-state');
            } else {
                $('#slide-out-widget-area[class*="fullscreen"] .inner, #slide-out-widget-area[class*="fullscreen"]').removeClass('overflow-state');
            }
            $('#slide-out-widget-area[class*="fullscreen"] .inner').transition({
                y: '-' + ($('#slide-out-widget-area[class*="fullscreen"] .inner').height() / 2) + 'px'
            }, 0);
            if ($('.slide-out-from-right.open .off-canvas-menu-container.mobile-only').length > 0 && $('body.mobile').length == 0) {
                $('#slide-out-widget-area .slide_out_area_close').trigger('click');
            }
            OCM_Dropdown_Icon_Pos();
        }

        function OCM_Dropdown_Icon_Pos() {
            $('#slide-out-widget-area[class*="slide-out-from-right"] .off-canvas-menu-container li.menu-item-has-children').each(function() {
                $(this).find('.ocm-dropdown-arrow').css({
                    'top': $(this).find('a').height() / 2
                });
            });
        }
        OCM_Dropdown_Icon_Pos();

        function fullWidthHeaderSlidingWidgetMenuCalc() {
            $('header#top nav > ul > li.megamenu > ul.sub-menu').stop(true).transition({
                'width': $(window).width() - 360,
                'left': '300px'
            }, 700, 'easeInOutCubic');
        }

        function slideOutWidgetAreaScrolling() {
            $('#slide-out-widget-area').mousewheel(function(event, delta) {
                this.scrollTop -= (delta * 30);
                event.preventDefault();
            });
        }
        setTimeout(slideOutWidgetAreaScrolling, 500);
        if (navigator.userAgent.match(/(Android|iPod|iPhone|iPad|BlackBerry|IEMobile|Opera Mini)/)) {
            $('#slide-out-widget-area').addClass('mobile');
        }

        function closeOCM(item) {
            if ($('#slide-out-widget-area.open').length > 0) {
                var $windowCurrentLocation = window.location.href.split("#")[0];
                var $windowClickedLocation = item.find('> a').attr('href').split("#")[0];
                if ($windowCurrentLocation == $windowClickedLocation || item.find('a[href^="#"]').length > 0) {
                    if (item.parents('.slide-out-from-right-hover').length > 0) {
                        $('.slide-out-widget-area-toggle.slide-out-hover-icon-effect a').trigger('click');
                    } else {
                        $('.slide-out-widget-area-toggle a').trigger('click');
                    }
                }
            }
        }

        function leftHeaderSubmenus() {
            $('#header-outer[data-format="left-header"] nav li.megamenu').removeClass('megamenu');
            $ocm_link_selector = ($('#slide-out-widget-area[data-dropdown-func="separate-dropdown-parent-link"]').length > 0) ? '#slide-out-widget-area .off-canvas-menu-container li.menu-item-has-children > .ocm-dropdown-arrow' : 'body.material #slide-out-widget-area[class*="slide-out-from-right"] .off-canvas-menu-container li.menu-item-has-children > a';
            $('#header-outer[data-format="left-header"]  li.menu-item-has-children > a, ' + $ocm_link_selector).click(function() {
                if ($(this).parent().hasClass('open-submenu')) {
                    $(this).parent().find('.sub-menu').css({
                        'max-height': '0'
                    });
                    $(this).parent().removeClass('open-submenu');
                } else {
                    var $that = $(this);
                    var $maxSubMenuHeight;
                    $that.parent().find('> .sub-menu').addClass('no-trans');
                    setTimeout(function() {
                        $that.parent().find('> .sub-menu').css({
                            'max-height': 'none',
                            'position': 'absolute',
                            'visibility': 'hidden'
                        });
                        $maxSubMenuHeight = $that.parent().find('> .sub-menu').height();
                        $that.parent().find('> .sub-menu').removeClass('no-trans');
                        $that.parent().find('> .sub-menu').css({
                            'max-height': '0',
                            'position': 'relative',
                            'visibility': 'visible'
                        });
                    }, 25);
                    setTimeout(function() {
                        $that.closest('ul').find('li.menu-item-has-children').removeClass('open-submenu');
                        $that.closest('ul').find('li.menu-item-has-children > .sub-menu').css({
                            'max-height': '0'
                        });
                        $that.parent().addClass('open-submenu');
                        $that.parent().find('> .sub-menu').css('max-height', $maxSubMenuHeight);
                        if ($that.parents('ul').length > 0) {
                            $that.parents('ul:not(.sf-menu)').each(function() {
                                $(this).css('max-height');
                                $(this).css('max-height', parseInt($(this).height() + parseInt($(this).css('padding-top')) * 2 + $maxSubMenuHeight) + 'px');
                            });
                        }
                    }, 50);
                }
                return false;
            });
            var $maxSubMenuHeightArr = [];
            $('#header-outer[data-format="left-header"] .current-menu-ancestor').find('.current-menu-item').parents('ul.sub-menu').each(function(i) {
                $maxSubMenuHeightArr[i] = $(this).parent().find('> .sub-menu').height();
                var $that = $(this);
                setTimeout(function() {
                    var $totalSubMenuHeight = 0;
                    for (var $i = 0; $i < $maxSubMenuHeightArr.length; $i++) {
                        $totalSubMenuHeight += parseInt($maxSubMenuHeightArr[i]);
                    }
                    $that.parent().addClass('open-submenu');
                    $that.css('max-height', $totalSubMenuHeight);
                }, 40);
            });
        }
        if ($('#header-outer[data-format="left-header"]').length > 0 || $('body.material[data-slide-out-widget-area-style*="slide-out-from-right"]').length > 0 || $('#slide-out-widget-area[data-dropdown-func="separate-dropdown-parent-link"]').length > 0) {
            leftHeaderSubmenus();
        };
        (function($, window, undefined) {
            'use strict';
            var Modernizr = window.Modernizr,
                $body = $('body');
            $.DLMenu = function(options, element) {
                this.$el = $(element);
                this._init(options);
            };
            $.DLMenu.defaults = {
                animationClasses: {
                    classin: 'dl-animate-in-1',
                    classout: 'dl-animate-out-1'
                },
                onLevelClick: function(el, name) {
                    return false;
                },
                onLinkClick: function(el, ev) {
                    return false;
                }
            };
            $.DLMenu.prototype = {
                _init: function(options) {
                    this.options = $.extend(true, {}, $.DLMenu.defaults, options);
                    this._config();
                    var animEndEventNames = {
                            'WebkitAnimation': 'webkitAnimationEnd',
                            'OAnimation': 'oAnimationEnd',
                            'msAnimation': 'MSAnimationEnd',
                            'animation': 'animationend'
                        },
                        transEndEventNames = {
                            'WebkitTransition': 'webkitTransitionEnd',
                            'MozTransition': 'transitionend',
                            'OTransition': 'oTransitionEnd',
                            'msTransition': 'MSTransitionEnd',
                            'transition': 'transitionend'
                        };
                    this.animEndEventName = animEndEventNames[Modernizr.prefixed('animation')] + '.menu';
                    this.transEndEventName = transEndEventNames[Modernizr.prefixed('transition')] + '.menu', this.supportAnimations = Modernizr.cssanimations, this.supportTransitions = Modernizr.csstransitions;
                    this._initEvents();
                },
                _config: function() {
                    this.open = false;
                    this.$trigger = this.$el.children('.trigger');
                    this.$menu = this.$el.children('ul.menu');
                    this.$menuitems = this.$menu.find('li:not(.back) > a');
                    this.$el.find('ul.sub-menu').prepend('<li class="back"><a href="#"> ' + $('#slide-out-widget-area').attr('data-back-txt') + ' </a></li>');
                    this.$back = this.$menu.find('li.back');
                },
                _initEvents: function() {
                    var self = this;
                    this.$trigger.on('click.menu', function() {
                        if (self.open) {
                            self._closeMenu();
                        } else {
                            self._openMenu();
                        }
                        return false;
                    });
                    this.$menuitems.on('click.menu', function(event) {
                        var $item = $(this).parent('li'),
                            $submenu = $item.children('ul.sub-menu');
                        $('.fullscreen-alt .off-canvas-menu-container .clip-wrap, .fullscreen-alt .off-canvas-menu-container .clip-wrap span').css('transition-duration', '0s');
                        if ($submenu.length > 0) {
                            var $flyin = $submenu.clone().css('opacity', 0).insertAfter(self.$menu),
                                onAnimationEndFn = function() {
                                    self.$menu.off(self.animEndEventName).removeClass(self.options.animationClasses.classout).addClass('subview');
                                    $item.addClass('subviewopen').parents('.subviewopen:first').removeClass('subviewopen').addClass('subview');
                                    $flyin.remove();
                                    setTimeout(function() {
                                        $('.off-canvas-menu-container .menu > li').removeClass('no-pointer-events');
                                        $('.off-canvas-menu-container .clip-wrap, .off-canvas-menu-container .clip-wrap span').css('transition-duration', '.45s');
                                    }, 300);
                                };
                            setTimeout(function() {
                                $flyin.addClass(self.options.animationClasses.classin);
                                self.$menu.addClass(self.options.animationClasses.classout);
                                if (self.supportAnimations) {
                                    self.$menu.on(self.animEndEventName, onAnimationEndFn);
                                } else {
                                    onAnimationEndFn.call();
                                }
                                self.options.onLevelClick($item, $item.children('a:first').text());
                            });
                            $item.parents('.off-canvas-menu-container').css('height', $item.parents('.off-canvas-menu-container').find('.menuwrapper .menu').height()).transition({
                                'height': $flyin.height()
                            }, 500, 'easeInOutQuad');
                            return false;
                        } else {
                            self.options.onLinkClick($item.find('> a'), event);
                        }
                        closeOCM($item);
                    });
                    this.$back.on('click.menu', function(event) {
                        var $this = $(this),
                            $submenu = $this.parents('ul.sub-menu:first'),
                            $item = $submenu.parent(),
                            $flyin = $submenu.clone().insertAfter(self.$menu);
                        var onAnimationEndFn = function() {
                            self.$menu.off(self.animEndEventName).removeClass(self.options.animationClasses.classin);
                            $flyin.remove();
                        };
                        setTimeout(function() {
                            $flyin.addClass(self.options.animationClasses.classout);
                            self.$menu.addClass(self.options.animationClasses.classin);
                            if (self.supportAnimations) {
                                self.$menu.on(self.animEndEventName, onAnimationEndFn);
                            } else {
                                onAnimationEndFn.call();
                            }
                            $item.removeClass('subviewopen');
                            var $subview = $this.parents('.subview:first');
                            if ($subview.is('li')) {
                                $subview.addClass('subviewopen');
                            }
                            $subview.removeClass('subview');
                        });
                        $item.parents('.off-canvas-menu-container').css('height', $item.parents('.off-canvas-menu-container').find('.menuwrapper .menu').height())
                        setTimeout(function() {
                            $item.parents('.off-canvas-menu-container').transition({
                                'height': $item.parent().height()
                            }, 500, 'easeInOutQuad');
                        }, 50);
                        return false;
                    });
                },
                closeMenu: function() {
                    if (this.open) {
                        this._closeMenu();
                    }
                },
                _closeMenu: function() {
                    var self = this,
                        onTransitionEndFn = function() {
                            self.$menu.off(self.transEndEventName);
                            self._resetMenu();
                        };
                    this.$menu.removeClass('menuopen');
                    this.$menu.addClass('menu-toggle');
                    this.$trigger.removeClass('active');
                    if (this.supportTransitions) {
                        this.$menu.on(this.transEndEventName, onTransitionEndFn);
                    } else {
                        onTransitionEndFn.call();
                    }
                    this.open = false;
                },
                openMenu: function() {
                    if (!this.open) {
                        this._openMenu();
                    }
                },
                _openMenu: function() {
                    var self = this;
                    $body.off('click').on('click.menu', function() {
                        self._closeMenu();
                    });
                    this.$menu.addClass('menuopen menu-toggle').on(this.transEndEventName, function() {
                        $(this).removeClass('menu-toggle');
                    });
                    this.$trigger.addClass('active');
                    this.open = true;
                },
                _resetMenu: function() {
                    this.$menu.removeClass('subview');
                    this.$menuitems.removeClass('subview subviewopen');
                }
            };
            var logError = function(message) {
                if (window.console) {
                    window.console.error(message);
                }
            };
            $.fn.dlmenu = function(options) {
                if (typeof options === 'string') {
                    var args = Array.prototype.slice.call(arguments, 1);
                    this.each(function() {
                        var instance = $.data(this, 'menu');
                        if (!instance) {
                            logError("cannot call methods on menu prior to initialization; " + "attempted to call method '" + options + "'");
                            return;
                        }
                        if (!$.isFunction(instance[options]) || options.charAt(0) === "_") {
                            logError("no such method '" + options + "' for menu instance");
                            return;
                        }
                        instance[options].apply(instance, args);
                    });
                } else {
                    this.each(function() {
                        var instance = $.data(this, 'menu');
                        if (instance) {
                            instance._init();
                        } else {
                            instance = $.data(this, 'menu', new $.DLMenu(options, this));
                        }
                    });
                }
                return this;
            };
        })(jQuery, window);

        function fullscreenMenuInit() {
            $('#slide-out-widget-area .off-canvas-menu-container .menu').wrap('<div class="menu-wrap menuwrapper" />');
            $('#slide-out-widget-area .off-canvas-menu-container .menu').addClass('menuopen');
            $ocmAnimationClassNum = ($('#slide-out-widget-area.fullscreen-alt').length > 0) ? '4' : '5';
            $('#slide-out-widget-area .off-canvas-menu-container .menu-wrap').dlmenu({
                animationClasses: {
                    classin: 'dl-animate-in-' + $ocmAnimationClassNum,
                    classout: 'dl-animate-out-' + $ocmAnimationClassNum
                }
            });
        }
        if ($('body.material[data-slide-out-widget-area-style*="slide-out-from-right"]').length == 0 && $('#slide-out-widget-area[data-dropdown-func="separate-dropdown-parent-link"]').length == 0) {
            fullscreenMenuInit();
        } else if ($('body.using-mobile-browser[data-slide-out-widget-area-style="slide-out-from-right-hover"]').length > 0) {
            $('body #slide-out-widget-area .inner .off-canvas-menu-container li a[href]').on('click', function() {
                if ($(this).attr('href') != '#') {
                    closeOCM($(this).parent());
                }
            });
        }
        $('body').on('mouseover', '#slide-out-widget-area .off-canvas-menu-container .menuwrapper > .sub-menu li > a', function() {
            var $currentTxt = $(this).text();
            $('.off-canvas-menu-container .menuwrapper .menu li > a').removeClass('hovered');
            $('.off-canvas-menu-container .menuwrapper .menu li > a:contains(' + $currentTxt + ')').addClass('hovered');
        });
        $('body').on('mouseover', '.off-canvas-menu-container .menuwrapper .menu li > a', function() {
            $('.off-canvas-menu-container .menuwrapper .menu li > a').removeClass('hovered');
        });
        var pageHeaderHeight;
        var pageHeaderHeightCopy;
        var pageHeadingHeight;
        var extraSpaceFromResize = ($('#header-outer[data-header-resize="1"]').length > 0 && $('.nectar-box-roll').length == 0) ? 0 : 1;
        var $headerRemoveStickyness = ($('body[data-hhun="1"]').length > 0 && $('#header-outer[data-remove-fixed="1"]').length > 0) ? 1 : 0;
        if ($('body.material').length > 0) {
            extraSpaceFromResize = 0;
        }

        function fullScreenHeaderInit() {
            pageHeaderHeight = parseInt($('#page-header-bg').height());
            return;
            pageHeaderHeight = parseInt($('#page-header-bg').attr('data-height'));
            pageHeaderHeightCopy = parseInt($('#page-header-bg').attr('data-height'));
            var $headerNavSpace = ($('body[data-header-format="left-header"]').length > 0 && window.innerWidth > 1000) ? 0 : $('#header-outer').height();
            if ($('.fullscreen-header').length > 0) {
                if ($('#header-outer[data-transparency-option]').length > 0 && $('#header-outer').attr('data-transparency-option') != '0') {
                    var calculatedNum = (!$('body').hasClass('mobile')) ? $(window).height() : $(window).height() - parseInt($headerNavSpace);
                } else {
                    var calculatedNum = (!$('body').hasClass('mobile')) ? $(window).height() - parseInt($headerNavSpace) + extraSpaceFromResize : $(window).height() - parseInt($headerNavSpace);
                }
                var extraHeight = ($('#wpadminbar').length > 0) ? $('#wpadminbar').height() : 0;
                if ($('.nectar-box-roll').length > 0) extraHeight = 0;
                pageHeaderHeight = calculatedNum - extraHeight;
                pageHeaderHeightCopy = calculatedNum - extraHeight;
            }
            $('#page-header-bg').css('height', pageHeaderHeight + 'px').removeClass('not-loaded');
            setTimeout(function() {
                $('#page-header-bg').css('overflow', 'visible')
            }, 800);
        }
        fullScreenHeaderInit();

        function pageHeader() {
            pageHeaderHeight = parseInt($('#page-header-bg').height());
            $('body[data-aie="slide-down"] #page-header-wrap:not(.fullscreen-header)').css('height', pageHeaderHeight + 'px');
            return;
            var $scrollTop = 0;
            var $windowInnerWidth = window.innerWidth;
            var $headerNavSpace = ($('body[data-header-format="left-header"]').length > 0 && $windowInnerWidth > 1000) ? 0 : $('#header-outer').height();
            var $windowHeight = $(window).height();
            if ($('.fullscreen-header').length > 0) {
                if ($('#header-outer[data-transparency-option]').length > 0 && $('#header-outer').attr('data-transparency-option') != '0') {
                    var calculatedNum = (!$('body').hasClass('mobile')) ? $windowHeight : $windowHeight - parseInt($headerNavSpace);
                    if ($('body[data-permanent-transparent="1"]').length > 0) calculatedNum = $windowHeight;
                } else {
                    var calculatedNum = (!$('body').hasClass('mobile')) ? $windowHeight - parseInt($headerNavSpace) + extraSpaceFromResize : $windowHeight - parseInt($headerNavSpace);
                }
                var extraHeight = ($('#wpadminbar').length > 0) ? $('#wpadminbar').height() : 0;
                if ($('.nectar-box-roll').length > 0) extraHeight = 0;
                pageHeaderHeight = calculatedNum - extraHeight;
                pageHeaderHeightCopy = calculatedNum - extraHeight;
            }
            if ($windowInnerWidth < 1000 && $windowInnerWidth > 690 && !$('body').hasClass('salient_non_responsive')) {
                var $multiplier = ($('.fullscreen-header').length > 0) ? 1 : 1.6;
                $('#page-header-bg').attr('data-height', pageHeaderHeightCopy / $multiplier).css('height', pageHeaderHeightCopy / $multiplier + 'px');
                $('#page-header-wrap').css('height', pageHeaderHeightCopy / $multiplier + 'px');
            } else if ($windowInnerWidth <= 690 && $windowInnerWidth > 480 && !$('body').hasClass('salient_non_responsive')) {
                var $multiplier = ($('.fullscreen-header').length > 0) ? 1 : 2.1;
                $('#page-header-bg').attr('data-height', pageHeaderHeightCopy / $multiplier).css('height', pageHeaderHeightCopy / $multiplier + 'px');
                $('#page-header-wrap').css('height', pageHeaderHeightCopy / $multiplier + 'px');
            } else if ($windowInnerWidth <= 480 && !$('body').hasClass('salient_non_responsive')) {
                var $multiplier = ($('.fullscreen-header').length > 0) ? 1 : 2.5;
                $('#page-header-bg').attr('data-height', pageHeaderHeightCopy / $multiplier).css('height', pageHeaderHeightCopy / $multiplier + 'px');
                $('#page-header-wrap').css('height', pageHeaderHeightCopy / $multiplier + 'px');
            } else {
                $('#page-header-bg').attr('data-height', pageHeaderHeightCopy).css('height', pageHeaderHeightCopy + 'px');
                if ($('.fullscreen-header').length > 0) {
                    $('#page-header-wrap').css('height', pageHeaderHeightCopy + 'px');
                } else {
                    $('#page-header-wrap').css('height', pageHeaderHeightCopy + 'px');
                }
                if ($('#page-header-bg[data-parallax="1"]').length == 0) {
                    $('#page-header-wrap').css('height', pageHeaderHeightCopy + 'px');
                }
            }
            if ($('body[data-header-format="left-header"]').length > 0) {
                $('#page-header-bg[data-parallax="1"]').css('width', $('#ajax-content-wrap').width())
            }
            if (!$('body').hasClass('mobile')) {
                pageHeaderHeight = parseInt($('#page-header-bg').attr('data-height'));
                $('#page-header-bg .container > .row').css('top', 0);
                var $divisionMultipler = ($('#header-outer[data-remove-border="true"]').length > 0 && $('#header-outer[data-format="centered-menu-under-logo"]').length == 0) ? 2 : 1;
                pageHeadingHeight = $('#page-header-bg .col.span_6').height();
                if ($('#header-outer[data-transparent-header="true"]').length > 0 && $('.fullscreen-header').length == 0) {} else {
                    var $extraResizeHeight = ($('#header-outer[data-header-resize="1"]').length > 0) ? 22 : 0;
                }
                $('#page-header-bg:not("[data-parallax=1]") .portfolio-filters').css('top', (pageHeaderHeight / 2) + 2);
                if ($('#page-header-bg[data-parallax="1"]').length > 0) {
                    $scrollTop = $(window).scrollTop();
                }
                if ($('#page-header-bg[data-parallax="1"] .span_6 .inner-wrap').css('opacity') > 0) {
                    if ($('#header-outer[data-transparent-header="true"]').length > 0 && $('body.single-post .fullscreen-header').length == 0) {
                        if ($headerRemoveStickyness) {
                            $('#page-header-bg[data-parallax="1"] .portfolio-filters').css({
                                'top': ($scrollTop * -0.10) + ((pageHeaderHeight / 2)) - 7 + "px"
                            });
                        } else {
                            $('#page-header-bg[data-parallax="1"] .portfolio-filters').css({
                                'opacity': 1 - ($scrollTop / (pageHeaderHeight - ($('#page-header-bg .col.span_6').height() * 2) + 75)),
                                'top': ($scrollTop * -0.10) + ((pageHeaderHeight / 2)) - 7 + "px"
                            });
                        }
                    } else {
                        if ($headerRemoveStickyness) {
                            $('#page-header-bg[data-parallax="1"] .portfolio-filters').css({
                                'top': ($scrollTop * -0.10) + ((pageHeaderHeight / 2)) - 7 + "px"
                            });
                        } else {
                            $('#page-header-bg[data-parallax="1"] .portfolio-filters').css({
                                'opacity': 1 - ($scrollTop / (pageHeaderHeight - ($('#page-header-bg .col.span_6').height() * 2) + 75)),
                                'top': ($scrollTop * -0.10) + ((pageHeaderHeight / 2)) - 7 + "px"
                            });
                        }
                    }
                }
            } else {
                pageHeaderHeight = parseInt($('#page-header-bg').attr('data-height'));
                var pageHeadingHeight = $('#page-header-bg .container > .row').height();
                $('#page-header-bg .container > .row').css('top', (pageHeaderHeight / 2) - (pageHeadingHeight / 2) + 5);
            }
            $('#page-header-bg .container > .row').css('visibility', 'visible');
        }
        var $pt_timeout = ($('body[data-ajax-transitions="true"]').length > 0 && $('#page-header-bg[data-animate-in-effect="slide-down"]').length > 0) ? 350 : 0;
        if ($('#page-header-bg').length > 0) {
            setTimeout(function() {
                pageHeader();
            }, $pt_timeout);
        }
        if ($('#header-outer').attr('data-header-resize') == '' || $('#header-outer').attr('data-header-resize') == '0') {
            $('#page-header-wrap').css('margin-top', '0');
        }

        function extractUrl(input) {
            return input.replace(/"/g, "").replace(/url\(|\)$/ig, "");
        }
        if ($('#page-header-bg[data-parallax="1"]').length > 0) {
            var img = new Image();
            var imgX, imgY, aspectRatio;
            var diffX, diffY;
            var pageHeadingHeight = $('#page-header-bg .col.span_6').height();
            var pageHeaderHeight = parseInt($('#page-header-bg').height());
            var headerPadding2 = parseInt($('#header-outer').attr('data-padding')) * 2;
            var wooCommerceHeader = ($('.demo_store').length > 0) ? 32 : 0;
            var $initialImgCheck = extractUrl($('#page-header-bg[data-parallax="1"]').css('background-image'));
            if ($initialImgCheck && $initialImgCheck.indexOf('.') !== -1) {
                img.onload = function() {
                    pageHeaderInit();
                }
                img.src = extractUrl($('#page-header-bg[data-parallax="1"]').css('background-image'));
            } else {
                pageHeaderInit();
            }
            var extraHeight = ($('#wpadminbar').length > 0) ? $('#wpadminbar').height() : 0;
            if ($('body[data-hhun="1"]').length > 0 && !$('#header-outer[data-remove-fixed="1"]').length > 0) $('#header-outer').addClass('parallax-contained');
            window.addEventListener('scroll', function() {
                window.requestAnimationFrame(bindHeaderParallax);
            }, false);
        }

        function bindHeaderParallax() {
            var $scrollTop = $(window).scrollTop();
            var pageHeadingHeight = $('#page-header-bg .col.span_6').height();
            if (!$('body').hasClass('mobile') && navigator.userAgent.match(/iPad/i) == null && $('body.material-ocm-open').length == 0) {
                if (window.innerWidth > 1000) {
                    $('body:not("[data-header-format=\'left-header\']") #page-header-bg[data-parallax="1"]').css('top', $('#ajax-content-wrap').offset().top);
                } else {
                    $('body:not("[data-header-format=\'left-header\']") #page-header-bg[data-parallax="1"]').css('top', '0');
                }
                var $multiplier1 = ($('body[data-hhun="1"]').length > 0 || $('#header-outer[data-format="centered-menu-bottom-bar"][data-condense="true"]').length > 0) ? 0.40 : 0.4;
                var $multiplier2 = ($('body[data-hhun="1"]').length > 0 || $('#header-outer[data-format="centered-menu-bottom-bar"][data-condense="true"]').length > 0) ? 0.09 : 0.09;
                var $parallaxHeaderHUN = ($('#header-outer[data-transparency-option="1"]').length > 0) ? 0.49 : 0.4;
                if ($('#page-header-bg.out-of-sight').length == 0) {
                    if ($headerRemoveStickyness) {
                        $('#page-header-bg[data-parallax="1"]').css({
                            'transform': 'translateY(' + $scrollTop * -0.55 + 'px)'
                        });
                    } else {
                        $('#page-header-bg[data-parallax="1"]').css({
                            'transform': 'translateY(' + $scrollTop * -$multiplier1 + 'px)'
                        });
                    }
                    var multipler = ($('body').hasClass('single')) ? 1 : 2;
                    if (!$headerRemoveStickyness) {
                        $('#page-header-bg[data-parallax="1"] .span_6 .inner-wrap,  #page-header-bg[data-parallax="1"][data-post-hs="default_minimal"] .author-section').css({
                            'opacity': 1 - ($scrollTop / (pageHeaderHeight - 60))
                        });
                    }
                    if ($headerRemoveStickyness) {
                        $('#page-header-bg[data-parallax="1"] .span_6 .inner-wrap, body[data-button-style="rounded"] #page-header-bg[data-parallax="1"] .scroll-down-wrap, #page-header-bg[data-parallax="1"][data-post-hs="default_minimal"] .author-section').css({
                            'transform': 'translateY(' + $scrollTop * -0.45 + 'px)'
                        });
                    } else {
                        $('#page-header-bg[data-parallax="1"] .span_6 .inner-wrap, body[data-button-style="rounded"] #page-header-bg[data-parallax="1"] .section-down-arrow, #page-header-bg[data-parallax="1"][data-post-hs="default_minimal"] .author-section').css({
                            'transform': 'translateY(' + $scrollTop * -$multiplier2 + 'px)'
                        });
                    }
                    if ($('#page-header-bg[data-parallax="1"] .span_6 .inner-wrap').css('opacity') == 0) {
                        $('#page-header-bg[data-parallax="1"] .span_6 .inner-wrap, #page-header-bg[data-parallax="1"] .portfolio-filters').hide();
                    } else {
                        $('#page-header-bg[data-parallax="1"] .span_6 .inner-wrap, #page-header-bg[data-parallax="1"] .portfolio-filters').show();
                    }
                    if ($('body[data-hhun="1"]').length > 0 && !$('#header-outer').hasClass('side-widget-open') && !$('#header-outer .slide-out-widget-area-toggle a').hasClass('animating')) {
                        $('#header-outer.parallax-contained').css({
                            'transform': 'translateY(' + $scrollTop * -$parallaxHeaderHUN + 'px)'
                        });
                    }
                } else if ($('#page-header-bg.out-of-sight').length == 0) {
                    var multipler = ($('body').hasClass('single')) ? 1 : 2;
                    $('#page-header-wrap .nectar-particles .fade-out').css({
                        'opacity': 0 + ($scrollTop / (pageHeaderHeight + pageHeaderHeight * $multiplier))
                    });
                }
                if (($scrollTop / (pageHeaderHeight + $('#header-space').height() + extraHeight)) > 1) {
                    $('#page-header-bg, .nectar-particles, #page-header-bg .fade-out').css('visibility', 'hidden').hide().addClass('out-of-sight');
                } else {
                    $('#page-header-bg, .nectar-particles, #page-header-bg .fade-out').css('visibility', 'visible').show().removeClass('out-of-sight');
                    pageHeaderHeight = parseInt($('#page-header-bg').height());
                    $('#page-header-bg .container > .row').css('top', 0);
                    var $divisionMultipler = ($('#header-outer[data-remove-border="true"]').length > 0 && $('#header-outer[data-format="centered-menu-under-logo"]').length == 0) ? 2 : 1;
                    pageHeadingHeight = $('#page-header-bg .col.span_6').height();
                }
            }
        }
        if ($('#page-header-bg').length > 0) {
            var $initialImgCheckAscend = extractUrl($('#page-header-bg').css('background-image'));
            if ($initialImgCheckAscend && $initialImgCheckAscend.indexOf('.') !== -1) {
                $('#page-header-bg').addClass('has-bg');
            }
        }

        function pageHeaderInit() {
            var wooCommerceHeader = ($('.demo_store').length > 0) ? 32 : 0;
            var centeredNavAltSpace = ($('#header-outer[data-format="centered-menu-under-logo"]').length > 0) ? $('header#top nav > .sf-menu').height() - 20 : null;
            if ($('#header-outer[data-transparent-header="true"]').length > 0) {
                $('#page-header-bg[data-parallax="1"]').css({
                    'top': extraHeight + wooCommerceHeader
                });
            } else {
                var logoHeight = parseInt($('#header-outer').attr('data-logo-height'));
                var headerPadding = parseInt($('#header-outer').attr('data-padding'));
                var headerPadding2 = parseInt($('#header-outer').attr('data-padding'));
                var extraDef = 10;
                var headerResize = ($('body').hasClass('pp-video-function')) ? '1' : $('#header-outer').attr('data-header-resize');
                var headerResizeOffExtra = 0;
                var extraHeight = ($('#wpadminbar').length > 0) ? $('#wpadminbar').height() : 0;
                var usingLogoImage = true;
                var mediaElement = ($('.wp-video-shortcode').length > 0) ? 36 : 0;
                var secondaryHeader = ($('#header-outer').attr('data-using-secondary') == '1') ? 32 : 0;
                if ($('body[data-header-resize="0"]').length == 0 && $('body.material').length == 0) {
                    $('#page-header-bg[data-parallax="1"]').css({
                        'top': ($('#page-header-wrap').offset().top) + 'px'
                    });
                }
            }
            if ($('#ajax-content-wrap').length == 0 || !$('body').hasClass('ajax-loaded')) {
                $('#page-header-bg[data-parallax="1"]').animate({
                    'opacity': 1
                }, 350, 'easeInCubic');
            } else if ($('#ajax-content-wrap').length == 1) {
                $('#page-header-bg[data-parallax="1"]').css({
                    'opacity': 1
                });
            }
            if ($smoothCache == true && $(window).width() > 690 && $('body').outerHeight(true) > $(window).height() && Modernizr.csstransforms3d && !navigator.userAgent.match(/(Android|iPod|iPhone|iPad|BlackBerry|IEMobile|Opera Mini)/)) {
                niceScrollInit();
                $(window).trigger('resize')
            }
            $('#page-header-bg[data-parallax="1"] .nectar-particles').append('<div class="fade-out" />');
        }

        function nectarPageHeader() {
            if ($('#page-header-bg').length > 0) {
                fullScreenHeaderInit();
                pageHeader();
            }
            if ($('#page-header-bg[data-parallax="1"]').length > 0) {
                var img = new Image();
                var $initialImgCheck = extractUrl($('#page-header-bg[data-parallax="1"]').css('background-image'));
                if ($initialImgCheck && $initialImgCheck.indexOf('.') !== -1) {
                    img.onload = function() {
                        pageHeaderInit();
                    }
                    img.src = extractUrl($('#page-header-bg[data-parallax="1"]').css('background-image'));
                } else {
                    pageHeaderInit();
                }
                $('#page-header-bg[data-parallax="1"] .span_6').css({
                    'opacity': 1
                });
                if (window.addEventListener) {
                    window.addEventListener('scroll', function() {
                        requestAnimationFrame(bindHeaderParallax);
                    }, false);
                }
            }
            if ($('#page-header-bg').length > 0) {
                var $initialImgCheckAscend = extractUrl($('#page-header-bg').css('background-image'));
                if ($initialImgCheckAscend && $initialImgCheckAscend.indexOf('.') !== -1) {
                    $('#page-header-bg').addClass('has-bg');
                }
            }
        }
        if (navigator.userAgent.indexOf('Safari') != -1 && navigator.userAgent.indexOf('Chrome') == -1 || navigator.userAgent.match(/(iPod|iPhone|iPad)/)) {
            window.onunload = function() {
                nectarPageHeader();
            };
        }

        function pageHeaderTextEffectInit() {
            $('#page-header-bg').each(function() {
                if ($(this).attr('data-text-effect') == 'rotate_in') {
                    var $topHeading = 'none';
                    if ($(this).find('.span_6 h1').length > 0) {
                        $topHeading = 'h1';
                    }
                    if ($topHeading != 'none') {
                        var $selector = ($(this).find('.nectar-particles').length > 0) ? '.inner-wrap.shape-1' : '.span_6';
                        $(this).find($selector).find($topHeading).addClass('top-heading').contents().filter(function() {
                            return this.nodeType === 3 && typeof this.data != 'undefined' && this.data.replace(/\s+/, "");
                        }).wrap('<span class="wraped"></span>');
                        $(this).find($selector).find('.wraped').each(function() {
                            textNode = $(this);
                            text = textNode.text().split(' ');
                            replace = '';
                            $.each(text, function(index, value) {
                                if (value.replace(/\s+/, "")) {
                                    replace += '<span class="wraped"><span>' + value + '</span></span> ';
                                }
                            });
                            textNode.replaceWith($(replace));
                        });
                    }
                }
            });
        }

        function pageHeaderTextEffect() {
            if ($('#page-header-bg .nectar-particles').length == 0 && $('#page-header-bg[data-text-effect="none"]').length == 0 || $('.nectar-box-roll').length > 0 && $('#page-header-bg .nectar-particles').length == 0) {
                var $selector = ($('.nectar-box-roll').length == 0) ? '#page-header-bg .span_6' : '.nectar-box-roll .overlaid-content .span_6';
                $($selector).find('.wraped').each(function(i) {
                    $(this).find('span').delay(i * 370).transition({
                        rotateX: '0',
                        'opacity': 1,
                        y: 0
                    }, 400, 'easeOutQuad');
                });
                setTimeout(function() {
                    $($selector).find('.inner-wrap > *:not(.top-heading)').each(function(i) {
                        $(this).delay(i * 370).transition({
                            rotateX: '0',
                            'opacity': 1,
                            y: 0
                        }, 650, 'easeOutQuad');
                    });
                    $('.scroll-down-wrap').removeClass('hidden');
                }, $($selector).find('.wraped').length * 370);
            }
        }
        var $effectTimeout = ($('#ajax-loading-screen').length > 0) ? 800 : 0;
        pageHeaderTextEffectInit();
        if ($('#page-header-bg .nectar-video-wrap video').length == 0) {
            setTimeout(pageHeaderTextEffect, $effectTimeout);
        }
        if ($('header#top nav > ul.sf-menu ul').length > 0) {
            var $midnightSubmenuTimeout;
            $('body').on('mouseover', '#header-outer .midnightHeader .sf-with-ul, #header-outer .midnightHeader .cart-menu', function() {
                if ($(this).parents('.midnightHeader').offset().top - $(window).scrollTop() < 50) {
                    $(this).parents('.midnightHeader').css({
                        'z-index': '9999'
                    }).addClass('overflow');
                    $(this).parents('.midnightInner').css('overflow', 'visible');
                }
            });
            $('body').on('mouseleave', '#header-outer .midnightHeader', function() {
                var $that = $(this);
                clearTimeout($midnightSubmenuTimeout);
                $midnightSubmenuTimeout = setTimeout(function() {
                    if (!$that.is(':hover')) {
                        $that.css({
                            'z-index': 'auto'
                        }).removeClass('overflow');
                        $that.find('.midnightInner').css('overflow', 'hidden');
                    }
                }, 900);
            });
        }

        function midnightInit() {
            if ($('#header-outer[data-permanent-transparent="1"]').length > 0 && $('body[data-bg-header="true"]').length > 0) {
                if ($('.container-wrap div[data-midnight]').length == 0) {
                    $('.container-wrap').attr('data-midnight', 'dark');
                }
                var $midnightCompatArr = [];
                $('div[data-midnight]').each(function() {
                    if ($(this).attr('data-midnight') == 'light' || $(this).attr('data-midnight') == 'dark') {
                        $midnightCompatArr.push($(this));
                    }
                });
                if ($midnightCompatArr.length > 0) {
                    $.each($midnightCompatArr, function(k, v) {
                        if (v.attr('data-midnight') == 'light' || v.attr('data-midnight') == 'dark') {
                            var $that = v;
                            var waypoint = new Waypoint({
                                element: $that,
                                handler: function(direction) {
                                    if ($('body.material-ocm-open').length > 0) return;
                                    if (direction == 'down') {
                                        var $textColor = ($that.attr('data-midnight') == 'light') ? '' : 'dark-slide';
                                        $('#header-outer').removeClass('dark-slide').addClass($textColor);
                                    } else {
                                        if (k - 1 >= 0) {
                                            var $prevMidItem = k - 1;
                                        } else {
                                            var $prevMidItem = k;
                                        }
                                        var $textColor = ($midnightCompatArr[$prevMidItem].attr('data-midnight') == 'light') ? '' : 'dark-slide';
                                        $('#header-outer').removeClass('dark-slide').addClass($textColor);
                                    }
                                },
                                offset: $('#header-outer').height()
                            });
                        }
                    });
                }
            }
        }

        function getScrollbarWidth() {
            var outer = document.createElement("div");
            outer.style.visibility = "hidden";
            outer.style.width = "100px";
            outer.style.msOverflowStyle = "scrollbar";
            document.body.appendChild(outer);
            var widthNoScroll = outer.offsetWidth;
            outer.style.overflow = "scroll";
            var inner = document.createElement("div");
            inner.style.width = "100%";
            outer.appendChild(inner);
            var widthWithScroll = inner.offsetWidth;
            outer.parentNode.removeChild(outer);
            return widthNoScroll - widthWithScroll;
        }

        function boxRollInit() {
            if ($('.nectar-box-roll').length > 0) {
                $('body').attr('data-scrollbar-width', getScrollbarWidth());
                $('body, html, #ajax-content-wrap, .container-wrap, .blurred-wrap').addClass('no-scroll');
                $('body,html').stop().animate({
                    scrollTop: 0
                }, 0);
                $('.container-wrap').css('opacity', 0).addClass('no-transform-animation-bottom-out').addClass('bottomBoxOut');
                if ($('.mobile').length == 0) $('#ajax-loading-screen .loading-icon > span').css({
                    'left': '-' + getScrollbarWidth() / 2 + 'px'
                });
                var $overlaid = $('#page-header-bg .overlaid-content').clone();
                var $scrollDownOverlaid = $('.scroll-down-wrap').clone();
                $('#page-header-bg').removeAttr('data-midnight');
                $('#page-header-bg .overlaid-content, #page-header-bg .scroll-down-wrap').remove();
                $('.nectar-box-roll').append($overlaid);
                if ($('#header-outer.dark-slide').length == 0) {
                    $('.nectar-box-roll').attr('data-midnight', 'light');
                } else {
                    $('.nectar-box-roll').attr('data-midnight', 'dark');
                }
                $('.overlaid-content').append($scrollDownOverlaid);
                if ($('.page-submenu[data-sticky="true"]').length > 0) {
                    $('.container-wrap').addClass('no-trans');
                }
                nectarBoxRollContentHeight();
                $('html').addClass('nectar-box-roll-loaded');
                setTimeout(function() {
                    pageLoadHash();
                }, 700);
            } else {
                $('#ajax-content-wrap, .blurred-wrap').addClass('at-content');
                $('body, html, #ajax-content-wrap, .container-wrap, .blurred-wrap').removeClass('no-scroll');
                $('.container-wrap').css('opacity', 1).removeClass('no-transform-animation-bottom-out').removeClass('bottomBoxOut').removeClass('bottomBoxIn');
                perspect = 'not-rolled';
            }
        }
        if ($('.nectar-box-roll').length > 0) {
            boxRollInit();
        }

        function nectarBoxRollContentHeight() {
            var $headerNavSpace = ($('body[data-header-format="left-header"]').length > 0 && $(window).width() > 1000) ? 0 : $('#header-space').height();
            if ($('#header-outer[data-transparent-header="true"]').length == 0) {
                $('.nectar-box-roll .overlaid-content, .nectar-box-roll .canvas-bg, .container-wrap').css({
                    'height': window.innerHeight - $headerNavSpace,
                    'min-height': window.innerHeight - $headerNavSpace
                });
                if ($('.mobile').length == 0 && $('body[data-header-format="left-header"]').length == 0) {
                    $('#ajax-content-wrap').css('margin-top', $headerNavSpace);
                    $('#slide-out-widget-area.fullscreen').css('margin-top', '-' + $headerNavSpace + 'px');
                } else {
                    $('#ajax-content-wrap, #slide-out-widget-area.fullscreen').css('margin-top', '0');
                }
            } else {
                if ($('.mobile').length > 0 && $('body[data-permanent-transparent="1"]').length == 0) {
                    $('.nectar-box-roll .overlaid-content, .nectar-box-roll .canvas-bg, .container-wrap').css('height', window.innerHeight - $headerNavSpace);
                } else {
                    $('.nectar-box-roll .overlaid-content, .nectar-box-roll .canvas-bg, .container-wrap').css('height', window.innerHeight);
                }
            }
        }
        if ($('.nectar-box-roll').length > 0) $(window).on('resize', nectarBoxRollContentHeight);
        var perspect = 'not-rolled';
        var animating = 'false';

        function boxRoll(e, d) {
            var $headerNavSpace = ($('body[data-header-format="left-header"]').length > 0 && $(window).width() > 1000) ? 0 : $('#header-space').height();
            if ($('#slide-out-widget-area.open').length > 0) return false;
            if ($('.nectar-box-roll canvas').length > 0 && $('.nectar-box-roll canvas[data-loaded="true"]').length == 0) return false;
            if (perspect == 'not-rolled' && animating == 'false' && d == -1) {
                perspect = 'rolled';
                animating = 'true';
                $('body').addClass('box-animating').addClass('box-perspective-rolled').addClass('box-rolling');
                $('.nectar-box-roll #page-header-bg').removeClass('topBoxIn').addClass('topBoxOut').css('will-change', 'transform');
                $('.nectar-box-roll .overlaid-content').removeClass('topBoxIn2').removeClass('topBoxIn').addClass('topBoxOut2').css('will-change', 'transform');
                $('.container-wrap').removeClass('bottomBoxOut').addClass('bottomBoxIn').removeClass('no-transform-animation-bottom-out').addClass('nectar-box-roll-class').css('will-change', 'transform');
                if ($('#header-outer[data-transparent-header="true"]').length == 0) {
                    $('.container-wrap').css({
                        'height': $(window).height() - $headerNavSpace,
                        'opacity': 1
                    });
                    $('#slide-out-widget-area.fullscreen').css('margin-top', '0px');
                } else {
                    $('.container-wrap').css({
                        'height': $(window).height(),
                        'opacity': 1
                    });
                }
                $('.nectar-slider-wrap').css({
                    'opacity': 0
                });
                updateRowRightPadding(d);
                pauseVideoBG();
                var timeout1 = 1220;
                var timeout2 = 1650;
                var timeout3 = 1700;
                var timeout4 = 1350;
                if ($('html.no-cssanimations').length > 0) {
                    timeout1 = 1;
                    timeout2 = 1;
                    timeout3 = 1;
                    timeout4 = 1;
                }
                $('.container-wrap').css('padding-right', $('body').attr('data-scrollbar-width') + 'px');
                setTimeout(function() {
                    $('#header-outer, #wpadminbar, body:not(.material) .cart-outer .cart-menu, .midnightHeader .midnightInner').animate({
                        'padding-right': $('body').attr('data-scrollbar-width')
                    }, 250);
                    $('.nectar-box-roll .canvas-bg').addClass('out-of-sight');
                    if ($('#header-outer[data-permanent-transparent="1"]').length == 0) $('#header-outer').removeClass('transparent');
                    if ($('body.mobile').length > 0) $('.nectar-box-roll').css({
                        'z-index': '1'
                    });
                    $first_row_coloring = ($('.container-wrap > .main-content > .row > .wpb_row').length > 0) ? $('.container-wrap > .main-content > .row > .wpb_row:first-child').attr('data-midnight') : 'dark';
                    if ($('#header-outer[data-permanent-transparent="1"]').length > 0) {
                        if ($first_row_coloring == 'dark') {
                            $('#header-outer').addClass('dark-slide');
                        } else {
                            $('#header-outer').removeClass('dark-slide');
                        }
                    }
                }, timeout1);
                setTimeout(function() {
                    updateRowRightPadding(1);
                    $('body,html,#ajax-content-wrap, .container-wrap, .blurred-wrap').removeClass('no-scroll');
                    $('#ajax-content-wrap, .blurred-wrap').addClass('at-content');
                    $('.container-wrap, #footer-outer').removeClass('bottomBoxIn').removeClass('nectar-box-roll-class').addClass('auto-height');
                    $('#header-outer, #wpadminbar, .container-wrap, .cart-outer .cart-menu, .midnightHeader .midnightInner').stop().css('padding-right', 0);
                    if ($smoothActive == 1 && $(window).width() > 690 && Modernizr.csstransforms3d && !navigator.userAgent.match(/(Android|iPod|iPhone|iPad|IEMobile|Opera Mini)/)) {
                        niceScrollInit();
                    }
                    $('.nectar-box-roll').css({
                        'z-index': '-1000'
                    }).transition({
                        'y': '-200%'
                    }, 0);
                    $('.nectar-box-roll canvas').hide();
                    $('body').removeClass('box-rolling');
                    $('.nectar-slider-wrap').transition({
                        'opacity': 1
                    }, 600, 'easeOutCubic');
                    $('.nectar-box-roll #page-header-bg, .nectar-box-roll .overlaid-content, .container-wrap').css('will-change', 'auto');
                    if ($waypointsBound == false) {
                        waypoints();
                        midnightInit();
                    }
                }, timeout2);
                setTimeout(function() {
                    $('.container-wrap .main-content > .row > div > div[class*="col"]').css({
                        'opacity': 1
                    });
                }, timeout4);
                setTimeout(function() {
                    animating = 'false';
                    $('body').removeClass('box-animating');
                }, timeout3);
                if ($('#header-outer[data-permanent-transparent="1"]').length == 0 && $('.mobile').length == 0 && $('#header-outer[data-transparent-header="true"]').length != 0) {
                    $('#ajax-content-wrap').transition({
                        'margin-top': $('#header-outer').outerHeight(true) + $('#header-outer').offset().top
                    }, 2000, 'easeInOutQuad');
                }
                if ($('.mobile #header-outer[data-permanent-transparent="1"]').length > 0 && $('.mobile #header-outer[data-mobile-fixed="false"]').length == 1) $('#header-outer').transition({
                    'y': '-100%'
                }, 400, 'easeOutCubic');
            } else if (perspect == 'rolled' && animating == 'false' && d == 1 && $(window).scrollTop() < 100) {
                $('.container-wrap').removeClass('auto-height');
                if ($('#header-outer[data-transparent-header="true"]').length == 0) {
                    $('.container-wrap').css({
                        'height': $(window).height() - $headerNavSpace,
                        'opacity': 1
                    });
                } else {
                    $('.container-wrap').css({
                        'height': $(window).height(),
                        'opacity': 1
                    });
                }
                $('#footer-outer').removeClass('auto-height');
                $('body').addClass('box-rolling');
                perspect = 'not-rolled';
                animating = 'true';
                $('body').addClass('box-animating').addClass('box-perspective-not-rolled');
                $('#header-outer, #wpadminbar, .container-wrap, .cart-outer .cart-menu, .midnightHeader .midnightInner').css('padding-right', $('body').attr('data-scrollbar-width') + 'px');
                $('.nectar-slider-wrap').transition({
                    'opacity': 0
                }, 600, 'easeOutCubic');
                $('.container-wrap .main-content > .row > div > div[class*="col"]').stop(true).css({
                    'opacity': 0
                });
                setTimeout(function() {
                    $('#header-outer, #wpadminbar, .cart-outer .cart-menu, .midnightHeader .midnightInner').animate({
                        'padding-right': 0
                    }, 250);
                    $('.nectar-box-roll .canvas-bg').removeClass('out-of-sight');
                    resizeVideoToCover();
                    if ($('#header-outer[data-transparent-header="true"]').length != 0) {
                        $('#ajax-content-wrap').stop(true, true).transition({
                            'margin-top': 0
                        }, 2000, 'easeInOutCubic');
                    } else {
                        if ($('.mobile').length == 0) $('#slide-out-widget-area.fullscreen').css('margin-top', '-' + $headerNavSpace + 'px');
                    }
                }, 30);
                var timeout1 = 1700;
                var timeout2 = 1600;
                var timeout3 = 1300;
                if ($('html.no-cssanimations').length > 0) {
                    timeout1 = 1;
                    timeout2 = 1;
                    timeout3 = 1;
                }
                if ($('body.mobile').length > 0) {
                    setTimeout(function() {
                        $('.nectar-box-roll').css('z-index', '1000');
                    }, timeout3);
                } else {
                    $('.nectar-box-roll').css('z-index', '1000');
                }
                updateRowRightPadding(d);
                removeNiceScroll();
                $('.nectar-box-roll').transition({
                    'y': '0'
                }, 0);
                $('.nectar-box-roll canvas').show();
                setTimeout(function() {
                    updateRowRightPadding(1);
                    animating = 'false';
                    $('body').removeClass('box-animating');
                    $('#page-header-bg').removeClass('topBoxIn');
                    $('.overlaid-content').removeClass('topBoxIn2');
                    $('body').removeClass('box-rolling');
                    resumeVideoBG();
                    $('.nectar-box-roll #page-header-bg, .nectar-box-roll .overlaid-content, .container-wrap').css('will-change', 'auto');
                    if ($('#header-outer[data-permanent-transparent="1"]').length > 0) {
                        if ($('.nectar-box-roll[data-midnight="dark"]').length > 0) {
                            $('#header-outer').addClass('dark-slide');
                        } else {
                            $('#header-outer').removeClass('dark-slide');
                        }
                    }
                }, timeout1);
                setTimeout(function() {
                    if ($('.mobile #header-outer[data-permanent-transparent="1"]').length > 0 && $('.mobile #header-outer[data-mobile-fixed="false"]').length == 1) $('#header-outer').transition({
                        'y': '0%'
                    }, 400, 'easeOutCubic');
                }, timeout2);
                $('body,html,#ajax-content-wrap, .container-wrap, .blurred-wrap').addClass('no-scroll');
                $('#ajax-content-wrap, .blurred-wrap').removeClass('at-content');
                $('.container-wrap').addClass('nectar-box-roll-class');
                $('.nectar-box-roll #page-header-bg').removeClass('topBoxOut').addClass('topBoxIn').css('will-change', 'transform');
                $('.container-wrap').removeClass('bottomBoxIn').addClass('bottomBoxOut').css('will-change', 'transform');
                if ($('#header-outer[data-transparent-header="true"]').length > 0 && $('#header-outer[data-permanent-transparent="1"]').length == 0) $('#header-outer').addClass('transparent');
                $('.nectar-box-roll .overlaid-content').removeClass('topBoxOut2').removeClass('topBoxOut').addClass('topBoxIn2').css('will-change', 'transform');
                if ($('#header-outer[data-header-resize="1"]').length > 0) {
                    bigNav();
                }
                $('.nectar-box-roll .trigger-scroll-down').removeClass('hovered');
            }
        }

        function boxScrollEvent(event, delta) {
            if ($('#slide-out-widget-area.open.fullscreen').length > 0 || $('.material-ocm-open').length > 0 || $('#search-outer.material-open').length > 0) return false;
            boxRoll(event, delta);
        }

        function boxRollMouseWheelInit() {
            if ($('.nectar-box-roll').length > 0) {
                $('body').on("mousewheel", boxScrollEvent);
            } else {
                $('body').off("mousewheel", boxScrollEvent);
            }
        }
        if ($('.nectar-box-roll').length > 0) {
            boxRollMouseWheelInit();
        }
        $('body').on('click', '.nectar-box-roll .section-down-arrow', function() {
            boxRoll(null, -1);
            $(this).addClass('hovered');
            setTimeout(function() {
                $('.nectar-box-roll .section-down-arrow').removeClass('hovered');
            }, 2000);
            return false;
        });

        function updateRowRightPadding(d) {
            $('.wpb_row.full-width-section').each(function() {
                if ($(this).hasClass('extraPadding') && d == 1) {
                    $(this).css('padding-right', parseInt($(this).css('padding-right')) - parseInt($('body').attr('data-scrollbar-width')) + 'px').removeClass('extraPadding');
                } else {
                    $(this).css('padding-right', parseInt($('body').attr('data-scrollbar-width')) + parseInt($(this).css('padding-right')) + 'px').addClass('extraPadding');
                }
            });
            $('.wpb_row.full-width-content').each(function() {
                if ($(this).find('.row-bg.using-image').length == 0) {
                    if ($(this).hasClass('extraPadding') && d == 1) {
                        $(this).find('.row-bg').css('width', parseInt($(this).width()) - parseInt($('body').attr('data-scrollbar-width')) + 'px').removeClass('extraPadding');
                    } else {
                        $(this).find('.row-bg').css('width', parseInt($('body').attr('data-scrollbar-width')) + $(this).width() + 'px').addClass('extraPadding');
                    }
                }
            });
        }

        function pauseVideoBG() {
            if ($('.nectar-box-roll video').length > 0 && !nectarDOMInfo.usingMobileBrowser) {
                $('.nectar-box-roll video')[0].pause();
            }
        }

        function resumeVideoBG() {
            if ($('.nectar-box-roll video').length > 0 && !nectarDOMInfo.usingMobileBrowser) {
                $('.nectar-box-roll video')[0].play();
            }
        }
        if (navigator.userAgent.match(/(Android|iPod|iPhone|iPad|BlackBerry|IEMobile|Opera Mini)/) && $('.nectar-box-roll').length > 0) {
            $('body').swipe({
                tap: function(event, target) {
                    if ($(target).parents('.nectar-flip-box').length > 0)
                        $(target).parents('.nectar-flip-box').trigger('click');
                    if ($(target).is('.nectar-flip-box'))
                        $(target).trigger('click');
                },
                swipeStatus: function(event, phase, direction, distance, duration, fingers) {
                    if ($('#slide-out-widget-area.open').length > 0) return false;
                    if (direction == 'up') {
                        boxRoll(null, -1);
                        if ($('#ajax-content-wrap.no-scroll').length == 0) $('body').swipe("option", "allowPageScroll", 'vertical');
                    } else if (direction == "down" && $(window).scrollTop() == 0) {
                        boxRoll(null, 1);
                        $('body').swipe("option", "allowPageScroll", 'auto');
                    }
                }
            });
        }

        function removeNiceScroll() {
            if ($().niceScroll && $("html").getNiceScroll()) {
                var nice = $("html").getNiceScroll();
                nice.stop();
                $('html').removeClass('no-overflow-y');
                $('.nicescroll-rails').hide();
                if ($('#boxed').length == 0) {
                    $('body, body #header-outer, body #header-secondary-outer, body #search-outer, .midnightHeader .midnightInner').css('padding-right', '0px');
                } else if ($('body[data-ext-responsive="true"]').length == 0) {
                    $('body').css('padding-right', '0px');
                }
                $('body').attr('data-smooth-scrolling', '0');
            }
        }
        $waypointsBound = false;

        function waypoints() {
            colAndImgAnimations();
            progressBars();
            dividers();
            iconList();
            animated_titles();
            highlighted_text();
            imageWithHotspots();
            splitLineHeadings();
            svgAnimations();
            milestoneInit();
            nectar_fancy_ul_init();
            owl_carousel_animate();
            headerRowColorInheritInit();
            morphingOutlines();
            portfolioLoadIn();
            animatedColBorders();
            foodMenuItems();
            vcWaypoints();
            $waypointsBound = true;
        }
        var timeout;
        var productToAdd;
        var $dropdownStyle = ($('body[data-dropdown-style="minimal"]').length > 0) ? 'minimal' : 'default';
        $('body').on('click', '.product .add_to_cart_button', function() {
            var $productHeading = ($(this).parents('li').find('h2').length > 0) ? 'h2' : 'h3';
            productToAdd = $(this).parents('li').find($productHeading).text();
            $('#header-outer .cart-notification span.item-name').html(productToAdd);
        });
        $('body').on('mouseenter', '#header-outer .cart-notification', function() {
            if ($dropdownStyle == 'minimal') {
                $(this).hide();
                $('#header-outer .widget_shopping_cart').addClass('open').stop(true, true).show();
                $('#header-outer .cart_list').stop(true, true).show();
            } else {
                $(this).fadeOut(400);
                $('#header-outer .widget_shopping_cart').stop(true, true).fadeIn(300);
                $('#header-outer .cart_list').stop(true, true).fadeIn(300);
            }
            clearTimeout(timeout);
        });
        var $headerCartSelector = ($('body.material').length > 0) ? '#header-outer .nectar-woo-cart' : '#header-outer  div.cart-outer';
        if ($($headerCartSelector).length > 0) {
            $($headerCartSelector).hoverIntent(function() {
                if ($dropdownStyle == 'minimal') {
                    $('#header-outer .widget_shopping_cart').addClass('open').stop(true, true).show()
                    $('#header-outer .cart_list').stop(true, true).show();
                    clearTimeout(timeout);
                    $('#header-outer .cart-notification').hide();
                } else {
                    $('#header-outer .widget_shopping_cart').addClass('open').stop(true, true).fadeIn(300);
                    $('#header-outer .cart_list').stop(true, true).fadeIn(300);
                    clearTimeout(timeout);
                    $('#header-outer .cart-notification').fadeOut(300);
                }
            });
        }
        $('body').on('mouseleave', $headerCartSelector, function() {
            var $that = $(this);
            setTimeout(function() {
                if (!$that.is(':hover')) {
                    $('#header-outer .widget_shopping_cart').removeClass('open').stop(true, true).fadeOut(300);
                    $('#header-outer .cart_list').stop(true, true).fadeOut(300);
                }
            }, 200);
        });
        if ($('#header-outer[data-cart="false"]').length == 0) {
            $('body').on('added_to_cart', shopping_cart_dropdown_show);
            $('body').on('added_to_cart', shopping_cart_dropdown);
            $('body').on('removed_from_cart', wooCartImgPos);
        }

        function shopping_cart_dropdown() {
            if (!$('.widget_shopping_cart .widget_shopping_cart_content .cart_list .empty').length && $('.widget_shopping_cart .widget_shopping_cart_content .cart_list').length > 0) {
                $('.cart-menu-wrap').addClass('has_products');
                $('header#top nav > ul, #search-outer #search #close a, header#top .span_9 >.slide-out-widget-area-toggle').addClass('product_added');
                if (!$('.cart-menu-wrap').hasClass('static')) $('.cart-menu-wrap, #mobile-cart-link').addClass('first-load');
                wooCartImgPos();
                if ($('#header-outer').hasClass('directional-nav-effect') && $('#header-outer .cart-icon-wrap .dark').length == 0 && $('body.ascend').length > 0) {
                    $('#header-outer .cart-outer .cart-icon-wrap').each(function() {
                        $(this).find('> i, > span.light, > span.dark, > span.original').remove();
                        $(this).append('<span class="dark"><span><i class="icon-salient-cart"></i></span></span><span class="light"><span><i class="icon-salient-cart"></i></span></span><span class="original"><span><i class="icon-salient-cart"></i></span></span>');
                        $(this).find('.original').attr('data-w', $(this).find('span.original').width() + 1);
                    });
                }
            }
        }

        function shopping_cart_dropdown_show(e) {
            clearTimeout(timeout);
            if (!$('.widget_shopping_cart .widget_shopping_cart_content .cart_list .empty').length && $('.widget_shopping_cart .widget_shopping_cart_content .cart_list').length > 0 && typeof e.type != 'undefined') {
                if ($('#header-outer .cart-notification .item-name').length > 0 && $('#header-outer .cart-notification .item-name').text().length == 0) {
                    return;
                }
                if (!$('#header-outer .cart-menu-wrap').hasClass('has_products')) {
                    setTimeout(function() {
                        $('#header-outer .cart-notification').fadeIn(400);
                    }, 400);
                } else if (!$('#header-outer .cart-notification').is(':visible')) {
                    $('#header-outer .cart-notification').fadeIn(400);
                } else {
                    $('#header-outer .cart-notification').show();
                }
                timeout = setTimeout(hideCart, 2700);
                $('.cart-menu a, .widget_shopping_cart a').addClass('no-ajaxy');
            }
        }

        function hideCart() {
            $('#header-outer .cart-notification').stop(true, true).fadeOut();
        }

        function checkForWooItems() {
            var checkForCartItems = setInterval(shopping_cart_dropdown, 250);
            setTimeout(function() {
                clearInterval(checkForCartItems);
            }, 4500);
        }

        function wooCartImgPos() {
            $('#header-outer .widget_shopping_cart .cart_list li').each(function() {
                if ($(this).find('> img').length == 0 && $(this).find('.product-meta').length == 0) {
                    var productCartImgLinkSrc = ($(this).find('> a[href]:not(.remove)').length > 0) ? $(this).find('> a[href]:not(.remove)').attr('href') : '';
                    var productCartImg = $(this).find('> a > img').clone();
                    $(this).wrapInner('<div class="product-meta" />');
                    $(this).prepend(productCartImg);
                    if (productCartImgLinkSrc.length > 0) {
                        productCartImg.wrap('<a href="' + productCartImgLinkSrc + '"></a>');
                    }
                }
            });
        }
        if ($('#header-outer[data-cart="false"]').length == 0) {
            checkForWooItems();
        }

        function nectarAccountPageTabs() {
            if ($('body.woocommerce-account #customer_login').length == 0) return;
            $('.woocommerce-account .woocommerce > #customer_login').prepend('<div class="nectar-form-controls" />');
            $('.woocommerce-account .woocommerce > #customer_login > div:not(.nectar-form-controls)').each(function() {
                var $title = $(this).find('> h2').text();
                $('#customer_login .nectar-form-controls').append('<div class="control">' + $title + '</div>');
            });
            $('.woocommerce-account .woocommerce > #customer_login .nectar-form-controls .control').on('click', function() {
                $('.woocommerce-account .woocommerce > #customer_login .nectar-form-controls .control').removeClass('active');
                $(this).addClass('active');
                var formIndex = $(this).index() + 1;
                $('#customer_login div[class*="u-column"]').hide();
                $('#customer_login div[class*="u-column"].col-' + formIndex).show();
                setTimeout(function() {
                    $('#customer_login div[class*="u-column"]').removeClass('visible');
                    $('#customer_login div[class*="u-column"].col-' + formIndex).addClass('visible');
                }, 30);
            });
            $('.woocommerce-account .woocommerce > #customer_login .nectar-form-controls .control:nth-child(1)').trigger('click');
        }
        nectarAccountPageTabs();
        var extraHeight = ($('#wpadminbar').length > 0) ? $('#wpadminbar').height() : 0;
        var secondaryHeader = ($('#header-outer').attr('data-using-secondary') == '1') ? 32 : 0;

        function searchFieldCenter() {
            var $headerHeightSpace = ($('body[data-header-format="left-header"]').length > 0 && $(window).width() > 1000) ? 0 : $('#header-outer').outerHeight();
            $('#search-outer').css('top', $headerHeightSpace + extraHeight + secondaryHeader);
            $('#search-outer > #search #search-box').css('top', ($(window).height() / 2) - ($('#search-outer > #search input').height() / 2) - $headerHeightSpace);
        }
        $('body').on('mouseover', '.text_on_hover .product-wrap', function() {
            $(this).parent().addClass('hovered');
        });
        $('body').on('mouseover', '.text_on_hover > a:first-child', function() {
            $(this).parent().addClass('hovered');
        });
        $('body').on('mouseout', '.text_on_hover .product-wrap', function() {
            $(this).parent().removeClass('hovered');
        });
        $('body').on('mouseout', '.text_on_hover > a:first-child', function() {
            $(this).parent().removeClass('hovered');
        });
        if ($('.material.product').length > 0 || $('.minimal.product').length > 0 || $('.nectar-fancy-box[data-style="parallax_hover"]').length > 0 || $('.nectar-category-grid[data-shadow-hover="yes"]').length > 0) {
            $productZindex = 101;
            $('body').on('mouseenter', '.material.product, .minimal.product, .nectar-fancy-box[data-style="parallax_hover"], .nectar-category-grid[data-shadow-hover="yes"] .nectar-category-grid-item', function() {
                $productZindex++;
                $(this).css('z-index', $productZindex + 1);
            });
            $('body').on('mouseleave', '.material.product, .minimal.product, .nectar-fancy-box[data-style="parallax_hover"], .nectar-category-grid[data-shadow-hover="yes"] .nectar-category-grid-item', function() {
                var $that = $(this);
                setTimeout(function() {
                    if (!$that.is(':hover')) $that.css('z-index', 100);
                }, 350);
            });
            setInterval(function() {
                if ($('.nectar-fancy-box[data-style="parallax_hover"]:hover').length > 0 || $('.minimal.product:hover').length > 0) {
                    return;
                }
                $('.material.product:not(:hover), .minimal.product:not(:hover), .nectar-fancy-box[data-style="parallax_hover"]:not(:hover), .nectar-category-grid[data-shadow-hover="yes"] .nectar-category-grid-item:not(:hover)').css('z-index', 100);
                $productZindex = 101;
            }, 10000);
        }

        function minimalProductHover() {
            $('.products .classic .product-wrap .add_to_cart_button').wrapInner('<span />');
            $('.products .classic .product-wrap .add_to_cart_button').prepend('<i class="normal icon-salient-cart"></i>');
            $('body').on('mouseover', '.products .minimal.product', function() {
                minimalProductCalc($(this));
            });
            $('body').on('mouseleave', '.products .minimal.product', function() {
                $(this).find('.background-color-expand').css({
                    'transform': 'scale(1)'
                });
            });
            $('.products .minimal.product').each(function() {
                if ($(this).is(':hover')) {
                    $(this).trigger('mouseover');
                }
            });
        }

        function minimalProductCalc(el) {
            var $item = el;
            var $itemWidth = $item.width();
            var $itemHeight = $item.height();
            var $wChange = (parseInt($itemWidth) + 40) / parseInt($itemWidth);
            var $hChange = (parseInt($itemHeight) + 40) / parseInt($itemHeight);
            $item.addClass('hover-bound');
            $item.find('.background-color-expand').css({
                'transform': 'scale(' + $wChange + ',' + $hChange + ') translateY(0px)'
            });
        }
        minimalProductHover();
        $('.woocommerce #sidebar .widget.woocommerce').each(function() {
            if ($(this).find('> h4').length == 0) {
                $(this).addClass('no-widget-title');
            }
        });
        $('body').on('click', '#sidebar .widget.woocommerce:not(.widget_price_filter) h4', function() {
            if ($(window).width() < 1000) {
                $(this).parent().find('> ul').slideToggle();
                $(this).parent().toggleClass('open-filter');
            }
        });
        $('body').on('mouseenter', '#header-outer [data-cart-style="slide_in"] .cart-menu-wrap', openRightCart);

        function openRightCart() {
            if ($('.nectar-slide-in-cart ul.cart_list li:not(.empty)').length > 0) {
                $('.nectar-slide-in-cart').addClass('open');
                $(window).on('mousemove.rightCartOffsetCheck', closeCartCheck);
            }
        }

        function closeCartCheck(e) {
            var $windowWidth = $(window).width();
            if (e.clientX < $windowWidth - 370 - $bodyBorderWidth) {
                $(window).off('mousemove.rightCartOffsetCheck', closeNavCheck);
                $('.nectar-slide-in-cart').removeClass('open');
            }
        }
        var $placeholder = $('#search input[type=text]').attr('data-placeholder');
        var logoHeight = parseInt($('#header-outer').attr('data-logo-height'));
        if ($('body').hasClass('material') && $('#header-outer .bg-color-stripe').length == 0) {
            $('#header-outer').append('<div class="bg-color-stripe" />');
        }
        $('body').on('click', '#search-btn a', function() {
            return false;
        });
        $('body').on('mouseup', '#search-btn a:not(.inactive), #header-outer .mobile-search', function() {
            if ($(this).hasClass('open-search')) {
                return false;
            }
            if ($('body').hasClass('ascend') || $('body[data-header-format="left-header"]').length > 0 && $('body.material').length == 0) {
                $('#search-outer > #search form, #search-outer #search .span_12 span').css('opacity', 0);
                $('#search-outer > #search form').css('bottom', '10px');
                $('#search-outer #search .span_12 span').css('top', '10px');
                $('#search-outer').show();
                $('#search-outer').stop().transition({
                    scale: '1,0',
                    'opacity': 1
                }, 0).transition({
                    scale: '1,1'
                }, 400, 'easeInOutCubic');
                $('#search-outer > #search form').delay(400).animate({
                    'opacity': 1,
                    'bottom': 0
                }, 'easeOutCirc');
                $('#search-outer #search .span_12 span').delay(470).animate({
                    'opacity': 1,
                    'top': 0
                }, 'easeOutCirc');
            } else if (!$('body').hasClass('material')) {
                $('#search-outer').stop(true).fadeIn(600, 'easeOutExpo');
            } else {
                $('#header-outer[data-transparent-header="true"] .bg-color-stripe').css('transition', '');
                $('#search-outer').addClass('material-open');
                $('#ajax-content-wrap').addClass('material-open');
                $('#header-outer').addClass('material-search-open');
                $('#fp-nav').addClass('material-ocm-open');
            }
            if ($('body[data-header-format="left-header"]').length == 0) {
                $('body.original #search-outer > #search input[type="text"]').css({
                    'top': $('#search-outer').height() / 2 - $('#search-outer > #search input[type="text"]').height() / 2
                });
            }
            setTimeout(function() {
                $('#search input[type=text]').focus();
                if ($('#search input[type=text]').attr('value') == $placeholder) {
                    $('#search input[type=text]').setCursorPosition(0);
                }
            }, 300);
            if ($('body').hasClass('ascend') || $('body[data-header-format="left-header"]').length > 0 && $('body.material').length == 0) {
                searchFieldCenter();
            }
            $(this).toggleClass('open-search');
            $('.slide-out-widget-area-toggle a:not(#toggle-nav).open:not(.animating)').trigger('click');
            return false;
        });
        $('body:not(.material)').on('keydown', '#search input[type=text]', function() {
            if ($(this).attr('value') == $placeholder) {
                $(this).attr('value', '');
            }
        });
        $('body:not(.material)').on('keyup', '#search input[type=text]', function() {
            if ($(this).attr('value') == '') {
                $(this).attr('value', $placeholder);
                $(this).setCursorPosition(0);
            }
        });
        $('body').on('click', '#close', function() {
            closeSearch();
            $('#search-btn a, #header-outer .mobile-search').removeClass('open-search');
            return false;
        });
        $('body.material').on('click', '#ajax-content-wrap', function(e) {
            if (e.originalEvent !== undefined) {
                closeSearch();
                $('#search-btn a, #header-outer .mobile-search').removeClass('open-search');
            }
        });
        if ($('body.material').length > 0) {
            $(document).keyup(function(e) {
                if (e.keyCode == 27) {
                    closeSearch();
                    $('#search-btn a').removeClass('open-search');
                    if ($('.ocm-effect-wrap.material-ocm-open').length > 0) {
                        $('.slide-out-widget-area-toggle.material-open a').trigger('click');
                    }
                }
            });
        }
        $('body:not(.material)').on('blur', '#search-box input[type=text]', function(e) {
            closeSearch();
            $('#search-btn a, #header-outer .mobile-search').removeClass('open-search');
        });

        function closeSearch() {
            if ($('body').hasClass('ascend') || $('body[data-header-format="left-header"]').length > 0 && $('body.material').length == 0) {
                $('#search-outer').stop().transition({
                    'opacity': 0
                }, 300, 'easeOutCubic');
                $('#search-btn a').addClass('inactive');
                setTimeout(function() {
                    $('#search-outer').hide();
                    $('#search-btn a').removeClass('inactive');
                }, 300);
            } else if ($('body.material').length == 0) {
                $('#search-outer').stop(true).fadeOut(450, 'easeOutExpo');
            }
            if ($('body').hasClass('material')) {
                $('#ajax-content-wrap').removeClass('material-open');
                $('#header-outer').removeClass('material-search-open');
                $('#search-outer').removeClass('material-open');
                $('#fp-nav').removeClass('material-ocm-open');
            }
        }
        $('body').on('click', '#mobile-menu #mobile-search .container a#show-search', function() {
            $('#mobile-menu .container > ul').slideUp(500);
            return false;
        });

        function centeredNavBottomBarReposition() {
            var $headerOuter = $('#header-outer');
            var $headerSpan9 = $('#header-outer[data-format="centered-menu-bottom-bar"] header#top .span_9');
            var $headerSpan3 = $('#header-outer[data-format="centered-menu-bottom-bar"] header#top .span_3');
            var $secondaryHeader = $('#header-secondary-outer');
            var $headerBtns = $headerSpan3.find('nav >ul.buttons');
            var $bodyBorderSize = ($('.body-border-top').length > 0 && $(window).width() > 1000) ? $('.body-border-top').height() : 0;
            var override_remove_check = false;

            function centeredNavBottomBarSecondary() {
                if ($('body.mobile').length > 0) {
                    $('#header-outer').css('margin-top', '');
                } else {
                    if ($('#header-outer').css('top') == '0px') {
                        $(window).off('scroll', centeredNavBottomFixed_Add);
                        $(window).off('scroll', centeredNavBottomFixed_Remove);
                        $navLogoMargin = parseInt($('body.material #header-outer #logo').css('margin-top'));
                        if ($headerSpan9.offset().top - $navLogoMargin - nectarDOMInfo.scrollTop <= $headerOuter.offset().top - parseInt($secondaryHeader.height())) {
                            $(window).on('scroll', centeredNavBottomFixed_Add);
                        } else {
                            $(window).on('scroll', centeredNavBottomFixed_Remove);
                        }
                    }
                    $('#header-outer').css('margin-top', nectarDOMInfo.secondaryHeaderHeight);
                    if ($('#header-outer .span_9').css('display') == 'none') {
                        $('#header-outer').css('margin-top', '');
                    } else if ($('#header-outer .span_9').css('display') != 'none' && parseInt($('#header-outer').css('top')) > 0) {
                        $('#header-outer').css('top', '');
                    }
                }
            }
            if ($secondaryHeader.length > 0) {
                if ($('#header-outer[data-remove-fixed="1"]').length == 0 && $('#header-outer[data-condense="true"]').length > 0) {
                    setTimeout(function() {
                        nectarDOMInfo.secondaryHeaderHeight = $('#header-secondary-outer').height();
                        centeredNavBottomBarSecondary();
                    }, 50);
                    $(window).smartresize(centeredNavBottomBarSecondary);
                }
            }
            var $navLogoMargin = parseInt($('body.material #header-outer #logo').css('margin-top'));
            if ($('#header-outer[data-condense="true"]').length > 0) {
                $(window).on('scroll', centeredNavBottomFixed_Add);
                $(window).trigger('scroll');
                $(window).smartresize(function() {
                    condenseCustomBreakPointHelper();
                    if (nectarDOMInfo.windowWidth > 1000 && $('#header-outer').css('position') == 'fixed' && $('#header-outer').css('top') == '0px' && override_remove_check == false) {
                        setTimeout(function() {
                            $(window).off('scroll', centeredNavBottomFixed_Add);
                            $(window).off('scroll', centeredNavBottomFixed_Remove);
                            override_remove_check = true;
                            centeredNavBottomFixed_Remove();
                        }, 100);
                    }
                });

                function condenseCustomBreakPointHelper() {
                    var $withinCustomBreakpoint = mobileBreakPointCheck();
                    if ($withinCustomBreakpoint) {
                        $('#header-outer').addClass('within-custom-breakpoint');
                    } else {
                        $('#header-outer').removeClass('within-custom-breakpoint');
                    }
                }
                condenseCustomBreakPointHelper();
            }

            function centeredNavBottomFixed_Add() {
                if (nectarDOMInfo.windowWidth < 1000 || $('body.material-ocm-open').length > 0 || $('#header-outer[data-has-menu="true"][data-format="centered-menu-bottom-bar"] .span_9').css('display') == 'none') {
                    return;
                }
                $navLogoMargin = parseInt($('body.material #header-outer #logo').css('margin-top'));
                var $bodyBorderTop = ($('.body-border-top').length > 0 && nectarDOMInfo.secondaryHeaderHeight > 0) ? $('.body-border-top').height() : 0;
                if ($headerSpan9.offset().top - $navLogoMargin - nectarDOMInfo.scrollTop <= $headerOuter.offset().top - parseInt(nectarDOMInfo.secondaryHeaderHeight) + $bodyBorderTop) {
                    var amountToMove = (parseInt($headerSpan9.position().top) - $navLogoMargin - parseInt(nectarDOMInfo.adminBarHeight)) + parseInt(nectarDOMInfo.secondaryHeaderHeight) - $bodyBorderTop;
                    if ($('#header-outer[data-megamenu-rt="1"]').length > 0 && $('#header-outer .megamenu').length > 0 && $('#header-outer[data-transparent-header="true"]').length > 0) {
                        $('#header-outer').removeClass('no-transition');
                    }
                    $headerOuter.addClass('fixed-menu').removeClass('transparent').css({
                        'top': '-' + amountToMove + 'px',
                        'position': 'fixed'
                    });
                    var $headerNavBarOffset = $('header#top .span_9 nav >ul').offset().top;
                    var $headerButtonsOffset = $headerBtns.offset().top;
                    if ($('#boxed > #header-outer').length > 0) {
                        $headerButtonsOffset = $headerButtonsOffset + 20;
                    }
                    var $headerButtonsHeight = ($headerSpan9.find('.sf-menu > li > a').length > 0) ? (20 - parseInt($headerSpan9.find('.sf-menu > li > a').height())) / 2 : 2;
                    $headerBtns.css('transform', 'translateY(' + (parseInt($headerNavBarOffset) - parseInt($headerButtonsOffset) - $headerButtonsHeight - 1) + 'px)');
                    $headerBtns.find('.nectar-woo-cart').css('height', $headerOuter.height() + parseInt($headerOuter.css('top')) - parseInt(nectarDOMInfo.adminBarHeight) + parseInt(nectarDOMInfo.secondaryHeaderHeight));
                    $(window).off('scroll', centeredNavBottomFixed_Add);
                    $(window).on('scroll', centeredNavBottomFixed_Remove);
                }
            }

            function centeredNavBottomFixed_Remove() {
                if (nectarDOMInfo.windowWidth < 1000 || $('body.material-ocm-open').length > 0 || $('#header-outer[data-has-menu="true"][data-format="centered-menu-bottom-bar"] .span_9').css('display') == 'none') {
                    return;
                }
                $navLogoMargin = parseInt($('body.material #header-outer #logo').css('margin-top'));
                if ($headerSpan9.offset().top - $navLogoMargin - nectarDOMInfo.scrollTop > $headerOuter.offset().top - parseInt(nectarDOMInfo.secondaryHeaderHeight) || override_remove_check) {
                    $headerOuter.removeClass('fixed-menu').css({
                        'top': '0',
                        'position': 'absolute'
                    });
                    override_remove_check = false;
                    $headerBtns.css('transform', 'translateY(0px)');
                    $headerBtns.find('.nectar-woo-cart').css('height', '');
                    if ($('#header-outer.transparent').length == 0) {
                        if ($('#header-outer[data-megamenu-rt="1"]').length > 0 && $('#header-outer .megamenu').length > 0) {
                            $('#header-outer').removeClass('no-transition');
                        }
                        if ($('#header-outer[data-megamenu-rt="1"]').length > 0 && $('#header-outer[data-transparent-header="true"]').length > 0 && $('#header-outer .megamenu').length > 0) {
                            if ($('#header-outer').attr('data-transparent-header') == 'true' && $('.nectar-box-roll').length == 0 && $('.megamenu.sfHover').length == 0) {
                                $('#header-outer').addClass('transparent');
                                $('#header-outer').removeClass('no-transition');
                            } else if ($('#header-outer').attr('data-transparent-header') == 'true' && $('.nectar-box-roll').length == 0 && $('.megamenu.sfHover').length > 0) {
                                $('#header-outer').addClass('no-transition');
                            }
                        } else {
                            if ($('#header-outer').attr('data-transparent-header') == 'true' && $('.nectar-box-roll').length == 0) $('#header-outer').addClass('transparent');
                        }
                    }
                    $(window).off('scroll', centeredNavBottomFixed_Remove);
                    $(window).on('scroll', centeredNavBottomFixed_Add);
                }
            }
        }

        function condenseHeaderMobileOverride() {
            var $transCondenseHeader = $('#header-outer[data-has-menu="true"][data-format="centered-menu-bottom-bar"][data-condense="true"][data-transparent-header="true"] .span_9');
            if ($transCondenseHeader.length > 0 && nectarDOMInfo.windowWidth > 1000 && $transCondenseHeader.css('display') == 'none') {
                $('#header-outer').removeClass('transparent').addClass('no-transition');
            } else if ($transCondenseHeader.length > 0 && nectarDOMInfo.scrollTop < 20 && nectarDOMInfo.windowWidth > 1000 && $transCondenseHeader.css('display') != 'none') {
                $('#header-outer:not(.transparent)').addClass('transparent');
            }
        }
        if ($('#header-outer[data-format="centered-menu-bottom-bar"]').length > 0) {
            centeredNavBottomBarReposition();
            condenseHeaderMobileOverride();
            $(window).smartresize(condenseHeaderMobileOverride);
        }

        function centeredLogoMargins() {
            if ($('#header-outer[data-format="centered-logo-between-menu"]').length > 0 && $(window).width() > 1000) {
                $midnightSelector = ($('#header-outer .midnightHeader').length > 0) ? '> .midnightHeader:first-child' : '';
                var $navItemLength = $('#header-outer[data-format="centered-logo-between-menu"] ' + $midnightSelector + ' nav > .sf-menu > li').length;
                if ($('#header-outer #social-in-menu').length > 0) {
                    $navItemLength--;
                }
                $centerLogoWidth = ($('#header-outer .row .col.span_3 #logo img:visible').length == 0) ? parseInt($('#header-outer .row .col.span_3').width()) : parseInt($('#header-outer .row .col.span_3 img:visible').width());
                $extraMenuSpace = ($('#header-outer[data-lhe="animated_underline"]').length > 0) ? parseInt($('#header-outer header#top nav > ul > li:first-child > a').css('margin-right')) : parseInt($('#header-outer header#top nav > ul > li:first-child > a').css('padding-right'));
                if ($extraMenuSpace > 30) {
                    $extraMenuSpace += 45;
                } else if ($extraMenuSpace > 20) {
                    $extraMenuSpace += 40;
                } else {
                    $extraMenuSpace += 30;
                }
                $('#header-outer[data-format="centered-logo-between-menu"] nav > .sf-menu > li:nth-child(' + Math.floor($navItemLength / 2) + ')').css({
                    'margin-right': ($centerLogoWidth + $extraMenuSpace) + 'px'
                }).addClass('menu-item-with-margin');
                $leftMenuWidth = 0;
                $rightMenuWidth = 0;
                $('#header-outer[data-format="centered-logo-between-menu"] ' + $midnightSelector + ' nav > .sf-menu > li:not(#social-in-menu)').each(function(i) {
                    if (i + 1 <= Math.floor($navItemLength / 2)) {
                        $leftMenuWidth += $(this).width();
                    } else {
                        $rightMenuWidth += $(this).width();
                    }
                });
                var $menuDiff = Math.abs($rightMenuWidth - $leftMenuWidth);
                if ($leftMenuWidth > $rightMenuWidth) {
                    $('#header-outer .row > .col.span_9').css('padding-right', $menuDiff);
                } else {
                    $('#header-outer .row > .col.span_9').css('padding-left', $menuDiff);
                }
                $('#header-outer[data-format="centered-logo-between-menu"] nav').css('visibility', 'visible');
            }
        }
        var logoHeight = parseInt($('#header-outer').attr('data-logo-height'));
        var headerPadding = parseInt($('#header-outer').attr('data-padding'));
        var usingLogoImage = $('#header-outer').attr('data-using-logo');
        if (isNaN(headerPadding) || headerPadding.length == 0) {
            headerPadding = 28;
        }
        if (isNaN(logoHeight) || usingLogoImage.length == 0) {
            usingLogoImage = false;
            logoHeight = 30;
        }
        if ($('header#top nav > ul li#search-btn a').length > 0) {
            $searchBtnHeight = $('header#top nav > ul li#search-btn a').height();
        } else {
            $searchBtnHeight = 24;
        }

        function headerInit() {
            if ($('#header-outer[data-format="left-header"]').length > 0) return;
            if ($('body.material').length == 0) {
                $('#header-outer #logo img').css({
                    'height': logoHeight
                });
                $('body:not(.material) #header-outer, .ascend #header-outer[data-full-width="true"][data-using-pr-menu="true"] header#top nav ul.buttons li.menu-item, .ascend #header-outer[data-full-width="true"][data-format="centered-menu"] header#top nav ul.buttons li#social-in-menu').css({
                    'padding-top': headerPadding
                });
                if ($('body.mobile').length == 0) {
                    $('header#top nav > ul > li:not(#social-in-menu) > a').css({
                        'padding-bottom': Math.floor(((logoHeight / 2) - ($('header#top nav > ul > li > a').height() / 2)) + headerPadding),
                        'padding-top': Math.floor((logoHeight / 2) - ($('header#top nav > ul > li > a').height() / 2))
                    });
                    var $socialInMenuHeight = ($('header#top nav > .sf-menu > li:not(#social-in-menu) a').length > 0 && $('header#top nav > .sf-menu > li:not(#social-in-menu) a').height() > 22) ? $('header#top nav > .sf-menu > li:not(#social-in-menu) a').height() : $('header#top nav > ul > li#social-in-menu > a i').height();
                    $('header#top nav > ul > li#social-in-menu > a').css({
                        'margin-top': Math.ceil(logoHeight / 2) - Math.ceil($socialInMenuHeight / 2)
                    });
                }
                if ($('#header-outer[data-format="centered-menu-under-logo"]').length == 0) {
                    $('#header-outer .cart-menu').css({
                        'padding-bottom': Math.ceil(((logoHeight / 2) - ($searchBtnHeight / 2)) + headerPadding),
                        'padding-top': Math.ceil(((logoHeight / 2) - ($searchBtnHeight / 2)) + headerPadding)
                    });
                }
                $('header#top nav > ul li#search-btn, header#top nav > ul li#nectar-user-account, header#top nav > ul li.slide-out-widget-area-toggle').css({
                    'padding-bottom': (logoHeight / 2) - ($searchBtnHeight / 2),
                    'padding-top': (logoHeight / 2) - ($searchBtnHeight / 2)
                });
                if ($('body.ascend ').length > 0 && $('#header-outer[data-full-width="true"]').length > 0) {
                    $('header#top nav > ul li#search-btn, header#top nav > ul li#nectar-user-account, header#top nav > ul li.slide-out-widget-area-toggle').css({
                        'padding-top': 0,
                        'padding-bottom': 0
                    });
                    $('header#top nav > ul.buttons').css({
                        'margin-top': -headerPadding,
                        'height': Math.floor(logoHeight + headerPadding * 2) - 1
                    });
                    $('header#top nav > ul li#search-btn a, header#top nav > ul li#nectar-user-account a, header#top nav > ul li.slide-out-widget-area-toggle a').css({
                        'visibility': 'visible',
                        'padding-top': Math.floor((logoHeight / 2) - ($searchBtnHeight / 2) + headerPadding),
                        'padding-bottom': Math.floor((logoHeight / 2) - ($searchBtnHeight / 2) + headerPadding)
                    });
                }
                $('header#top .sf-menu > li > ul, header#top .sf-menu > li.sfHover > ul').css({
                    'top': $('header#top nav > ul.sf-menu > li > a').outerHeight()
                });
                setTimeout(function() {
                    $('body:not(.ascend):not(.material) #search-outer #search-box .ui-autocomplete').css({
                        'top': parseInt($('#header-outer').outerHeight()) + 'px'
                    });
                }, 1000);
                $('body:not(.ascend):not(.material) #search-outer #search-box .ui-autocomplete').css({
                    'top': parseInt($('#header-outer').outerHeight()) + 'px'
                });
            }
            if ($('.nectar-parallax-scene.first-section').length == 0) {
                if ($('#header-outer').attr('data-using-secondary') == '1') {
                    if ($('#header-outer[data-mobile-fixed="false"]').length > 0 || $('body.mobile').length == 0) {
                        $('#header-space').css('height', parseInt($('#header-outer').outerHeight()) + $('#header-secondary-outer').height());
                    } else {
                        $('#header-space').css('height', parseInt($('#header-outer').outerHeight()));
                    }
                } else {
                    $('#header-space').css('height', $('#header-outer').outerHeight());
                }
            }
            $('#header-outer .container, #header-outer .cart-menu').css('visibility', 'visible');
            if ($('#header-outer[data-format="centered-menu-under-logo"]').length == 0) {
                $('body:not(.ascend):not(.material) #search-outer, #search .container').css({
                    'height': logoHeight + headerPadding * 2
                });
                $('body:not(.ascend):not(.material) #search-outer > #search input[type="text"]').css({
                    'font-size': 43,
                    'height': '59px',
                    'top': ((logoHeight + headerPadding * 2) / 2) - $('#search-outer > #search input[type="text"]').height() / 2
                });
                $('body:not(.ascend):not(.material) #search-outer > #search #close a').css({
                    'top': ((logoHeight + headerPadding * 2) / 2) - 8
                });
            } else {
                $('body:not(.ascend):not(.material) #search-outer, #search .container').css({
                    'height': logoHeight + headerPadding * 2 + logoHeight + 17
                });
                $('body:not(.ascend):not(.material) #search-outer > #search input[type="text"]').css({
                    'font-size': 43,
                    'height': '59px',
                    'top': ((logoHeight + headerPadding * 2) / 2) - ($('#search-outer > #search input[type="text"]').height() / 2) + logoHeight / 2 + 17
                });
                $('body:not(.ascend):not(.material) #search-outer > #search #close a').css({
                    'top': ((logoHeight + headerPadding * 2) / 2) - 8 + logoHeight / 2 + 17
                });
            }
        }
        var headerResize = $('#header-outer').attr('data-header-resize');
        var headerHideUntilNeeded = $('body').attr('data-hhun');
        if ($('#header-outer[data-remove-fixed="1"]').length == 0) {
            if ($(window).scrollTop() != 0 && $('#header-outer.transparent[data-permanent-transparent="false"]').length == 1) $('#header-outer').removeClass('transparent');
        }
        if (headerResize == 1 && headerHideUntilNeeded != '1') {
            headerInit();
            $(window).off('scroll.headerResizeEffect');
            if ($('#nectar_fullscreen_rows').length == 0) {
                $(window).on('scroll.headerResizeEffect', smallNav);
            } else if ($('#nectar_fullscreen_rows[data-mobile-disable="on"]').length > 0 && navigator.userAgent.match(/(Android|iPod|iPhone|iPad|BlackBerry|IEMobile|Opera Mini)/)) {
                $(window).on('scroll.headerResizeEffect', smallNav);
            }
        } else if (headerHideUntilNeeded != '1') {
            headerInit();
            $(window).off('scroll.headerResizeEffectOpaque');
            $(window).on('scroll.headerResizeEffectOpaque', opaqueCheck);
        } else if (headerHideUntilNeeded == '1') {
            headerInit();
            if ($('.nectar-box-roll').length > 0) $('#header-outer').addClass('at-top-before-box');
            var previousScroll = 0,
                menuOffset = $('#header-space').height() * 2,
                detachPoint = ($('body.mobile').length > 0) ? 150 : 600,
                hideShowOffset = 6;

            function hhunCalcs(e) {
                if ($('body.animated-scrolling').length > 0 && $('#header-outer.detached').length > 0) return false;
                if ($('body.material-ocm-open').length > 0 || $('#search-outer.material-open').length > 0) {
                    return false;
                }
                if ($('#header-outer[data-mobile-fixed="false"]').length > 0 && $('body.mobile').length > 0) {
                    $('#header-outer').removeClass('detached');
                    return false;
                }
                var currentScroll = $(this).scrollTop(),
                    scrollDifference = Math.abs(currentScroll - previousScroll);
                if (!$('#header-outer').hasClass('side-widget-open') && !$('#header-outer .slide-out-widget-area-toggle a').hasClass('animating')) {
                    if (currentScroll > menuOffset) {
                        if (currentScroll > detachPoint) {
                            if (!$('#header-outer').hasClass('detached'))
                                $('#header-outer').addClass('detached').removeClass('parallax-contained');
                            $('#header-outer').removeClass('no-transition');
                            if ($('#header-outer[data-permanent-transparent="1"]').length == 0) $('#header-outer').removeClass('transparent');
                        }
                        if (scrollDifference >= hideShowOffset) {
                            if (currentScroll > previousScroll) {
                                if (!$('#header-outer').hasClass('invisible')) {
                                    if ($('#header-outer.at-top').length > 0) {
                                        $('#header-outer').addClass('no-trans-hidden');
                                        setTimeout(function() {
                                            $('#header-outer').addClass('invisible').removeClass('at-top');
                                            $('#header-outer').removeClass('no-trans-hidden');
                                        }, 30);
                                    } else {
                                        $('#header-outer').addClass('invisible').removeClass('at-top');
                                    }
                                    if ($(".sf-menu").length > 0 && $().superfish) {
                                        $(".sf-menu").superfish('hide');
                                        $('header#top nav > ul.sf-menu > li.menu-item-over').removeClass('menu-item-over');
                                    }
                                }
                                $('.page-submenu.stuck').css('transform', 'translateY(0px)').addClass('header-not-visible');
                            } else {
                                if ($('#header-outer').hasClass('invisible'))
                                    $('#header-outer').removeClass('invisible');
                                if ($('.body-border-top').length > 0 && $('body.mobile').length == 0) {
                                    var $bodyBorderHeaderColorMatch = ($('.body-border-top').css('background-color') == '#ffffff' && $('body').attr('data-header-color') == 'light' || $('.body-border-top').css('background-color') == $('#header-outer').attr('data-user-set-bg')) ? true : false;
                                    var $bodyBorderSizeToRemove = ($bodyBorderHeaderColorMatch) ? $('.body-border-top').height() : 0;
                                    $('.page-submenu.stuck').css('transform', 'translateY(' + ($('#header-outer').outerHeight() - $bodyBorderSizeToRemove) + 'px)').removeClass('header-not-visible');
                                } else {
                                    $('.page-submenu.stuck').css('transform', 'translateY(' + $('#header-outer').outerHeight() + 'px)').removeClass('header-not-visible');
                                }
                            }
                        }
                    } else {
                        $topDetachNum = ($('#header-outer[data-using-secondary="1"]').length > 0) ? 32 : 0;
                        if ($('.body-border-top').length > 0) {
                            $topDetachNum = ($('#header-outer[data-using-secondary="1"]').length > 0) ? 32 + $('.body-border-top').height() : $('.body-border-top').height();
                        }
                        if (currentScroll <= $topDetachNum) {
                            $('#header-outer').removeClass('detached').removeClass('invisible').addClass('at-top');
                            if ($('#header-outer[data-megamenu-rt="1"]').length > 0 && $('#header-outer[data-transparent-header="true"]').length > 0 && $('#header-outer .megamenu').length > 0) {
                                if ($('#header-outer[data-transparent-header="true"]').length > 0 && $('.nectar-box-roll').length == 0 && $('.megamenu.sfHover').length == 0) {
                                    $('#header-outer').addClass('transparent').css('transform', 'translateY(0)');
                                    $('#header-outer').removeClass('no-transition');
                                } else if ($('.nectar-box-roll').length > 0) $('#header-outer').css('transform', 'translateY(0)').addClass('at-top-before-box');
                            } else {
                                if ($('#header-outer[data-transparent-header="true"]').length > 0 && $('.nectar-box-roll').length == 0) $('#header-outer').addClass('transparent').css('transform', 'translateY(0)');
                                else if ($('.nectar-box-roll').length > 0) $('#header-outer').css('transform', 'translateY(0)').addClass('at-top-before-box');
                            }
                            if ($('#page-header-bg[data-parallax="1"]').length > 0) $('#header-outer').addClass('parallax-contained').css('transform', 'translateY(0)');
                        }
                    }
                    if ((window.innerHeight + window.scrollY) >= document.body.offsetHeight) {
                        $('#header-outer').removeClass('invisible');
                        if ($('.body-border-top').length > 0 && $('body.mobile').length == 0) {
                            var $bodyBorderHeaderColorMatch = ($('.body-border-top').css('background-color') == '#ffffff' && $('body').attr('data-header-color') == 'light' || $('.body-border-top').css('background-color') == $('#header-outer').attr('data-user-set-bg')) ? true : false;
                            var $bodyBorderSizeToRemove = ($bodyBorderHeaderColorMatch) ? $('.body-border-top').height() : 0;
                            $('.page-submenu.stuck').css('transform', 'translateY(' + ($('#header-outer').outerHeight() - $bodyBorderSizeToRemove) + 'px)').removeClass('header-not-visible');
                        } else {
                            $('.page-submenu.stuck').css('transform', 'translateY(' + $('#header-outer').outerHeight() + 'px)').removeClass('header-not-visible');
                        }
                    }
                }
                previousScroll = currentScroll;
            }
            if ($('#header-outer[data-remove-fixed="1"]').length == 0) {
                hhunCalcs();
                $(window).scroll(hhunCalcs);
            }
        }
        if ($('#nectar_fullscreen_rows').length == 0 && $('.nectar-box-roll').length == 0) {
            midnightInit();
        }
        if ($('#nectar_fullscreen_rows').length > 0) {
            ($('#header-outer').attr('data-permanent-transparent', 'false'))
        }
        var shrinkNum = 6;
        var extraHeight = ($('#wpadminbar').length > 0) ? $('#wpadminbar').height() : 0;
        var $bodyBorderHeaderColorMatch = ($('.body-border-top').css('background-color') == '#ffffff' && $('body').attr('data-header-color') == 'light' || $('.body-border-top').css('background-color') == $('#header-outer').attr('data-user-set-bg')) ? true : false;
        var $scrollTriggerOffset = ($('body.material').length > 0) ? 150 : 0;
        if ($('#header-outer[data-shrink-num]').length > 0) shrinkNum = $('#header-outer').attr('data-shrink-num');

        function smallNav() {
            var $offset = $(window).scrollTop();
            var $windowWidth = $(window).width();
            if ($offset > $scrollTriggerOffset && $windowWidth > 1000 && $('body.material-ocm-open').length == 0) {
                if ($('body.material').length > 0) {
                    if ($('#search-outer.material-open').length == 0) {
                        $('#header-outer[data-transparent-header="true"] .bg-color-stripe').css('transition', 'none');
                    }
                    if ($('#header-secondary-outer').length > 0) {
                        $('#header-secondary-outer').addClass('hide-up').css('transform', 'translateY(-100%)');
                        $('#header-outer').css('transform', 'translateY(-' + $('#header-secondary-outer').height() + 'px)');
                    }
                }
                if ($('#header-outer[data-megamenu-rt="1"]').length > 0 && $('#header-outer[data-transparent-header="true"]').length > 0 && $('#header-outer .megamenu').length > 0) {
                    if ($('#header-outer').attr('data-transparent-header') == 'true' && $('#header-outer.side-widget-open').length == 0 && $('#header-outer[data-permanent-transparent="1"]').length == 0 && $('.megamenu.sfHover').length == 0) {
                        $('#header-outer').removeClass('transparent');
                        $('#header-outer').removeClass('no-transition');
                    }
                } else {
                    if ($('#header-outer').attr('data-transparent-header') == 'true' && $('#header-outer.side-widget-open').length == 0 && $('#header-outer[data-permanent-transparent="1"]').length == 0) $('#header-outer').removeClass('transparent');
                }
                $('#header-outer, #search-outer').addClass('small-nav');
                if ($('#header-outer[data-full-width="true"][data-transparent-header="true"]').length > 0 && $('.body-border-top').length > 0 && $bodyBorderHeaderColorMatch == true) {
                    $('#header-outer[data-full-width="true"] header > .container').stop(true, true).animate({
                        'padding': '0'
                    }, {
                        queue: false,
                        duration: 250,
                        easing: 'easeOutCubic'
                    });
                }
                if ($('body.material').length > 0) {
                    $('header#top nav > ul > li.menu-item-with-margin').stop(true, true).animate({
                        'margin-right': (parseInt($('header#top nav > ul > li.menu-item-with-margin').css('margin-right')) - parseInt(shrinkNum) * 3) + 'px'
                    }, {
                        queue: false,
                        duration: 310,
                        easing: 'easeOutQuad'
                    });
                }
                if ($('body.material').length == 0) {
                    $('#header-outer #logo img').stop(true, true).animate({
                        'height': logoHeight - shrinkNum
                    }, {
                        queue: false,
                        duration: 250,
                        easing: 'easeOutCubic'
                    });
                    $('body:not(.material) #header-outer, .ascend #header-outer[data-full-width="true"][data-using-pr-menu="true"] header#top nav ul.buttons li.menu-item, .ascend #header-outer[data-full-width="true"][data-format="centered-menu"] header#top nav ul.buttons li#social-in-menu').stop(true, true).animate({
                        'padding-top': Math.ceil(headerPadding / 1.8)
                    }, {
                        queue: false,
                        duration: 250,
                        easing: 'easeOutCubic'
                    });
                    if ($('#header-outer[data-format="centered-menu-under-logo"]').length > 0) {
                        $('#header-outer .row > .span_3').stop(true, true).animate({
                            'padding-bottom': Math.ceil(headerPadding / 1.8)
                        }, {
                            queue: false,
                            duration: 250,
                            easing: 'easeOutCubic'
                        });
                    }
                    $('header#top nav > ul > li:not(#social-in-menu) > a').stop(true, true).animate({
                        'padding-bottom': Math.floor((((logoHeight - shrinkNum) / 2) - ($('header#top nav > ul > li > a').height() / 2)) + headerPadding / 1.8),
                        'padding-top': Math.floor(((logoHeight - shrinkNum) / 2) - ($('header#top nav > ul > li > a').height() / 2))
                    }, {
                        queue: false,
                        duration: 250,
                        easing: 'easeOutCubic'
                    });
                    $('header#top nav > ul > li#social-in-menu > a').stop(true, true).animate({
                        'margin-bottom': Math.floor((((logoHeight - shrinkNum) / 2) - ($('header#top nav > ul > li#social-in-menu > a').height() / 2)) + headerPadding / 1.8),
                        'margin-top': Math.floor(((logoHeight - shrinkNum) / 2) - ($('header#top nav > ul > li#social-in-menu > a').height() / 2))
                    }, {
                        queue: false,
                        duration: 250,
                        easing: 'easeOutCubic'
                    });
                    $('header#top nav > ul > li.menu-item-with-margin').stop(true, true).animate({
                        'margin-right': (parseInt($('header#top nav > ul > li.menu-item-with-margin').css('margin-right')) - parseInt(shrinkNum) * 3) + 'px'
                    }, {
                        queue: false,
                        duration: 250,
                        easing: 'easeOutCubic'
                    });
                    if ($bodyBorderHeaderColorMatch == true) {
                        $('.body-border-top').stop(true, true).animate({
                            'margin-top': '-' + $('.body-border-top').height() + 'px'
                        }, {
                            queue: false,
                            duration: 400,
                            easing: 'easeOutCubic',
                            complete: function() {
                                $(this).css('margin-top', 0)
                            }
                        });
                    }
                    if ($('#header-outer[data-format="centered-menu-under-logo"]').length == 0) {
                        $('#header-outer .cart-menu').stop(true, true).animate({
                            'padding-top': Math.ceil(((logoHeight - shrinkNum) / 2) - ($searchBtnHeight / 2) + headerPadding / 1.7),
                            'padding-bottom': Math.ceil(((logoHeight - shrinkNum) / 2) - ($searchBtnHeight / 2) + headerPadding / 1.7) + 1
                        }, {
                            queue: false,
                            duration: 250,
                            easing: 'easeOutCubic'
                        });
                    }
                    if ($('body.ascend ').length > 0 && $('#header-outer[data-full-width="true"]').length > 0) {
                        $('header#top nav > ul.buttons').stop(true, true).animate({
                            'margin-top': -Math.ceil(headerPadding / 1.8),
                            'height': Math.floor((headerPadding * 2) / 1.8 + logoHeight - shrinkNum)
                        }, {
                            queue: false,
                            duration: 250,
                            easing: 'easeOutCubic'
                        });
                        $('header#top nav > ul li#search-btn a, header#top nav > ul li#nectar-user-account a, header#top nav > ul li.slide-out-widget-area-toggle a').stop(true, true).animate({
                            'padding-top': Math.ceil(((logoHeight - shrinkNum) / 2) - ($searchBtnHeight / 2) + headerPadding / 1.7),
                            'padding-bottom': Math.ceil(((logoHeight - shrinkNum) / 2) - ($searchBtnHeight / 2) + headerPadding / 1.7) + 1
                        }, {
                            queue: false,
                            duration: 250,
                            easing: 'easeOutCubic'
                        });
                    } else {
                        $('header#top nav > ul li#search-btn, header#top nav > ul li#nectar-user-account, header#top nav > ul li.slide-out-widget-area-toggle').stop(true, true).animate({
                            'padding-bottom': Math.ceil(((logoHeight - shrinkNum) / 2) - ($searchBtnHeight / 2)),
                            'padding-top': Math.ceil(((logoHeight - shrinkNum) / 2) - ($searchBtnHeight / 2))
                        }, {
                            queue: false,
                            duration: 250,
                            easing: 'easeOutCubic'
                        });
                    }
                    if ($('#header-outer[data-format="centered-menu-under-logo"]').length > 0) {
                        $('header#top .sf-menu > li > ul, header#top .sf-menu > li.sfHover > ul').stop(true, true).animate({
                            'top': Math.floor($('header#top nav > ul > li > a').outerHeight())
                        }, {
                            queue: false,
                            duration: 250,
                            easing: 'easeOutCubic'
                        });
                    } else {
                        $('header#top .sf-menu > li > ul, header#top .sf-menu > li.sfHover > ul').stop(true, true).animate({
                            'top': Math.floor($('header#top nav > ul > li > a').height() + (((logoHeight - shrinkNum) / 2) - ($('header#top nav > ul > li > a').height() / 2)) * 2 + headerPadding / 1.8),
                        }, {
                            queue: false,
                            duration: 250,
                            easing: 'easeOutCubic'
                        });
                    }
                    $('body:not(.ascend) #search-outer #search-box .ui-autocomplete').stop(true, true).animate({
                        'top': Math.floor((logoHeight - shrinkNum) + (headerPadding * 2) / 1.8) + 'px'
                    }, {
                        queue: false,
                        duration: 250,
                        easing: 'easeOutCubic'
                    });
                    if ($('#header-outer[data-format="centered-menu-under-logo"]').length == 0) {
                        $('body:not(.ascend) #search-outer, #search .container').stop(true, true).animate({
                            'height': Math.floor((logoHeight - shrinkNum) + (headerPadding * 2) / 1.8)
                        }, {
                            queue: false,
                            duration: 250,
                            easing: 'easeOutCubic'
                        });
                        $('body:not(.ascend) #search-outer > #search input[type="text"]').stop(true, true).animate({
                            'font-size': 30,
                            'line-height': '30px',
                            'height': '44px',
                            'top': ((logoHeight - shrinkNum + headerPadding + 5) / 2) - ($('#search-outer > #search input[type="text"]').height() - 15) / 2
                        }, {
                            queue: false,
                            duration: 250,
                            easing: 'easeOutCubic'
                        });
                        $('body:not(.ascend) #search-outer > #search #close a').stop(true, true).animate({
                            'top': ((logoHeight - shrinkNum + headerPadding + 5) / 2) - 10
                        }, {
                            queue: false,
                            duration: 250,
                            easing: 'easeOutCubic'
                        });
                    } else {
                        $('body:not(.ascend) #search-outer, #search .container').stop(true, true).animate({
                            'height': Math.floor((logoHeight - shrinkNum) + (headerPadding * 2) / 1.8) + logoHeight - shrinkNum + 17
                        }, {
                            queue: false,
                            duration: 250,
                            easing: 'easeOutCubic'
                        });
                        $('body:not(.ascend) #search-outer > #search input[type="text"]').stop(true, true).animate({
                            'font-size': 30,
                            'line-height': '30px',
                            'height': '44px',
                            'top': ((logoHeight - shrinkNum + headerPadding + 5) / 2) - ($('#search-outer > #search input[type="text"]').height() - 15) / 2 + (logoHeight - shrinkNum) / 2 + 8
                        }, {
                            queue: false,
                            duration: 250,
                            easing: 'easeOutCubic'
                        });
                        $('body:not(.ascend) #search-outer > #search #close a').stop(true, true).animate({
                            'top': ((logoHeight - shrinkNum + headerPadding + 5) / 2) - 10 + (logoHeight - shrinkNum) / 2 + 8
                        }, {
                            queue: false,
                            duration: 250,
                            easing: 'easeOutCubic'
                        });
                    }
                }
                if ($('.nectar-box-roll').length > 0 && $('#header-outer[data-permanent-transparent="1"]').length == 0) $('#ajax-content-wrap').animate({
                    'margin-top': (Math.floor((logoHeight - shrinkNum) + (headerPadding * 2) / 1.8 + extraHeight + secondaryHeader))
                }, {
                    queue: false,
                    duration: 250,
                    easing: 'easeOutCubic'
                })
                if ($('body').hasClass('ascend')) {
                    $('#search-outer').stop(true, true).animate({
                        'top': Math.floor((logoHeight - shrinkNum) + (headerPadding * 2) / 1.8 + extraHeight + secondaryHeader)
                    }, {
                        queue: false,
                        duration: 250,
                        easing: 'easeOutCubic'
                    });
                }
                if (usingLogoImage == false) $('body:not(.material) header#top #logo').stop(true, true).animate({
                    'margin-top': 0
                }, {
                    queue: false,
                    duration: 450,
                    easing: 'easeOutExpo'
                });
                $(window).off('scroll', smallNav);
                $(window).on('scroll', bigNav);
                $('#header-outer[data-transparent-header="true"]').css('transition', 'transform 0.3s ease, background-color 0.30s ease, opacity 0.3s ease, box-shadow 0.30s ease, margin 0.25s ease-out');
                $('#header-outer[data-transparent-header="true"] .cart-menu').css('transition', 'none');
                setTimeout(function() {
                    $('#header-outer[data-transparent-header="true"]').css('transition', 'transform 0.3s ease, background-color 0.30s ease, opacity 0.3s ease, box-shadow 0.30s ease, border-color 0.30s ease, margin 0.25s ease-out');
                    $('#header-outer[data-transparent-header="true"] .cart-menu').css('transition', 'border-color 0.30s ease');
                }, 300);
            }
        }

        function bigNav() {
            var $offset = $(window).scrollTop();
            var $windowWidth = $(window).width();
            if ($('body.material-ocm-open').length > 0) {
                return false;
            }
            if ($offset <= $scrollTriggerOffset && $windowWidth > 1000 || $('.small-nav').length > 0 && $('#ajax-content-wrap.no-scroll').length > 0) {
                $('#header-outer, #search-outer').removeClass('small-nav');
                if ($('#header-outer[data-megamenu-rt="1"]').length > 0 && $('#header-outer[data-transparent-header="true"]').length > 0 && $('#header-outer .megamenu').length > 0) {
                    if ($('#header-outer').attr('data-transparent-header') == 'true' && $('.nectar-box-roll').length == 0 && $('.megamenu.sfHover').length == 0) {
                        $('#header-outer').addClass('transparent');
                        $('#header-outer').removeClass('no-transition');
                    }
                } else {
                    if ($('#header-outer').attr('data-transparent-header') == 'true' && $('.nectar-box-roll').length == 0) $('#header-outer').addClass('transparent');
                }
                if ($('#header-outer[data-full-width="true"][data-transparent-header="true"]').length > 0 && $('.body-border-top').length > 0 && $bodyBorderHeaderColorMatch == true) {
                    $('#header-outer[data-full-width="true"] header > .container').stop(true, true).animate({
                        'padding': '0 28px'
                    }, {
                        queue: false,
                        duration: 250,
                        easing: 'easeOutCubic'
                    });
                }
                if ($('body.material').length > 0) {
                    $('header#top nav > ul > li.menu-item-with-margin').stop(true, true).animate({
                        'margin-right': (parseInt($('header#top nav > ul > li.menu-item-with-margin').css('margin-right')) + parseInt(shrinkNum) * 3) + 'px'
                    }, {
                        queue: false,
                        duration: 140,
                        easing: 'easeOutQuad'
                    });
                    if ($('#header-secondary-outer').length > 0) {
                        $('#header-secondary-outer, #header-outer').removeClass('hide-up').css('transform', 'translateY(0%)');
                    }
                }
                if ($('body.material').length == 0) {
                    $('#header-outer #logo img').stop(true, true).animate({
                        'height': logoHeight,
                    }, {
                        queue: false,
                        duration: 250,
                        easing: 'easeOutCubic'
                    });
                    $('body:not(.material) #header-outer, .ascend #header-outer[data-full-width="true"][data-using-pr-menu="true"] header#top nav ul.buttons li.menu-item, .ascend #header-outer[data-full-width="true"][data-format="centered-menu"] header#top nav ul.buttons li#social-in-menu').stop(true, true).animate({
                        'padding-top': headerPadding
                    }, {
                        queue: false,
                        duration: 250,
                        easing: 'easeOutCubic'
                    });
                    if ($('#header-outer[data-format="centered-menu-under-logo"]').length > 0) {
                        $('#header-outer .row > .span_3').stop(true, true).animate({
                            'padding-bottom': headerPadding
                        }, {
                            queue: false,
                            duration: 250,
                            easing: 'easeOutCubic'
                        });
                    }
                    $('header#top nav > ul > li:not(#social-in-menu) > a').stop(true, true).animate({
                        'padding-bottom': ((logoHeight / 2) - ($('header#top nav > ul > li > a').height() / 2)) + headerPadding,
                        'padding-top': (logoHeight / 2) - ($('header#top nav > ul > li > a').height() / 2)
                    }, {
                        queue: false,
                        duration: 250,
                        easing: 'easeOutCubic'
                    });
                    var $socialInMenuHeight = ($('header#top nav > .sf-menu > li:not(#social-in-menu) a').length > 0 && $('header#top nav > .sf-menu > li:not(#social-in-menu) a').height() > 22) ? $('header#top nav > .sf-menu > li:not(#social-in-menu) a').height() : $('header#top nav > ul > li#social-in-menu > a i').height();
                    $('header#top nav > ul > li#social-in-menu > a').stop(true, true).animate({
                        'margin-top': Math.ceil(logoHeight / 2) - Math.ceil($socialInMenuHeight / 2)
                    }, {
                        queue: false,
                        duration: 250,
                        easing: 'easeOutCubic'
                    });
                    $('header#top nav > ul > li.menu-item-with-margin').stop(true, true).animate({
                        'margin-right': (parseInt($('header#top nav > ul > li.menu-item-with-margin').css('margin-right')) + parseInt(shrinkNum) * 3) + 'px'
                    }, {
                        queue: false,
                        duration: 250,
                        easing: 'easeOutCubic'
                    });
                    if ($bodyBorderHeaderColorMatch == true) {
                        $('.body-border-top').css({
                            'margin-top': '-' + $('.body-border-top').height() + 'px'
                        }).stop(true, true).animate({
                            'margin-top': '0'
                        }, {
                            queue: false,
                            duration: 250,
                            easing: 'easeOutCubic'
                        });
                    }
                    if ($('#header-outer[data-format="centered-menu-under-logo"]').length == 0) {
                        $('#header-outer .cart-menu').stop(true, true).animate({
                            'padding-bottom': Math.ceil(((logoHeight / 2) - ($searchBtnHeight / 2)) + headerPadding),
                            'padding-top': Math.ceil(((logoHeight / 2) - ($searchBtnHeight / 2)) + headerPadding)
                        }, {
                            queue: false,
                            duration: 250,
                            easing: 'easeOutCubic'
                        });
                    }
                    if ($('body.ascend ').length > 0 && $('#header-outer[data-full-width="true"]').length > 0) {
                        $('header#top nav > ul.buttons').stop(true, true).animate({
                            'margin-top': -Math.ceil(headerPadding),
                            'height': Math.floor(headerPadding * 2 + logoHeight) - 1
                        }, {
                            queue: false,
                            duration: 250,
                            easing: 'easeOutCubic'
                        });
                        $('header#top nav > ul li#search-btn a, header#top nav > ul li#nectar-user-account a, header#top nav > ul li.slide-out-widget-area-toggle a').stop(true, true).animate({
                            'padding-top': Math.floor((logoHeight / 2) - ($searchBtnHeight / 2) + headerPadding),
                            'padding-bottom': Math.floor((logoHeight / 2) - ($searchBtnHeight / 2) + headerPadding)
                        }, {
                            queue: false,
                            duration: 250,
                            easing: 'easeOutCubic'
                        });
                    } else {
                        $('header#top nav > ul li#search-btn, header#top nav > ul li#nectar-user-account, header#top nav > ul li.slide-out-widget-area-toggle').stop(true, true).animate({
                            'padding-bottom': Math.floor((logoHeight / 2) - ($searchBtnHeight / 2)),
                            'padding-top': Math.ceil((logoHeight / 2) - ($searchBtnHeight / 2))
                        }, {
                            queue: false,
                            duration: 250,
                            easing: 'easeOutCubic'
                        });
                    }
                    if ($('#header-outer[data-format="centered-menu-under-logo"]').length > 0) {
                        $('header#top .sf-menu > li > ul, header#top .sf-menu > li.sfHover > ul').stop(true, true).animate({
                            'top': Math.floor($('header#top nav > ul > li > a').outerHeight())
                        }, {
                            queue: false,
                            duration: 250,
                            easing: 'easeOutCubic'
                        });
                    } else {
                        $('header#top .sf-menu > li > ul, header#top .sf-menu > li.sfHover > ul').stop(true, true).animate({
                            'top': Math.ceil($('header#top nav > ul > li > a').height() + (((logoHeight) / 2) - ($('header#top nav > ul > li > a').height() / 2)) * 2 + headerPadding),
                        }, {
                            queue: false,
                            duration: 250,
                            easing: 'easeOutCubic'
                        });
                    }
                    $('body:not(.ascend) #search-outer #search-box .ui-autocomplete').stop(true, true).animate({
                        'top': Math.ceil(logoHeight + headerPadding * 2) + 'px'
                    }, {
                        queue: false,
                        duration: 250,
                        easing: 'easeOutCubic'
                    });
                    if ($('#header-outer[data-format="centered-menu-under-logo"]').length == 0) {
                        $('body:not(.ascend) #search-outer, #search .container').stop(true, true).animate({
                            'height': Math.ceil(logoHeight + headerPadding * 2)
                        }, {
                            queue: false,
                            duration: 250,
                            easing: 'easeOutCubic'
                        });
                        $('body:not(.ascend) #search-outer > #search input[type="text"]').stop(true, true).animate({
                            'font-size': 43,
                            'line-height': '43px',
                            'height': '59px',
                            'top': ((logoHeight + headerPadding * 2) / 2) - 30
                        }, {
                            queue: false,
                            duration: 250,
                            easing: 'easeOutCubic'
                        });
                        $('body:not(.ascend) #search-outer > #search #close a').stop(true, true).animate({
                            'top': ((logoHeight + headerPadding * 2) / 2) - 8
                        }, {
                            queue: false,
                            duration: 250,
                            easing: 'easeOutCubic'
                        });
                    } else {
                        $('body:not(.ascend) #search-outer, #search .container').stop(true, true).animate({
                            'height': Math.ceil(logoHeight + headerPadding * 2) + logoHeight + 17
                        }, {
                            queue: false,
                            duration: 250,
                            easing: 'easeOutCubic'
                        });
                        $('body:not(.ascend) #search-outer > #search input[type="text"]').stop(true, true).animate({
                            'font-size': 43,
                            'line-height': '43px',
                            'height': '59px',
                            'top': ((logoHeight + headerPadding * 2) / 2) - 30 + (logoHeight) / 2 + 8
                        }, {
                            queue: false,
                            duration: 250,
                            easing: 'easeOutCubic'
                        });
                        $('body:not(.ascend) #search-outer > #search #close a').stop(true, true).animate({
                            'top': ((logoHeight + headerPadding * 2) / 2) - 8 + (logoHeight) / 2 + 8
                        }, {
                            queue: false,
                            duration: 250,
                            easing: 'easeOutCubic'
                        });
                    }
                    if ($('body').hasClass('ascend')) {
                        $('#search-outer').stop(true, true).animate({
                            'top': (logoHeight) + (headerPadding * 2) + extraHeight + secondaryHeader
                        }, {
                            queue: false,
                            duration: 250,
                            easing: 'easeOutCubic'
                        });
                    }
                    if (usingLogoImage == false) $('header#top #logo').stop(true, true).animate({
                        'margin-top': 4
                    }, {
                        queue: false,
                        duration: 450,
                        easing: 'easeOutExpo'
                    });
                }
                if ($('.nectar-box-roll').length > 0 && $('#header-outer[data-permanent-transparent="1"]').length == 0) $('#ajax-content-wrap').animate({
                    'margin-top': (Math.floor((logoHeight) + (headerPadding * 2) + extraHeight + secondaryHeader))
                }, {
                    queue: false,
                    duration: 250,
                    easing: 'easeOutCubic'
                })
                $(window).off('scroll', bigNav);
                $(window).on('scroll', smallNav);
                $('#header-outer[data-transparent-header="true"]').css('transition', 'transform 0.3s ease, background-color 0.30s ease, opacity 0.3s ease, box-shadow 0.30s ease, margin 0.25s ease-out');
                $('#header-outer[data-transparent-header="true"] .cart-menu').css('transition', 'none');
                setTimeout(function() {
                    $('#header-outer[data-transparent-header="true"]').css('transition', 'transform 0.3s ease, background-color 0.30s ease, opacity 0.3s ease, box-shadow 0.30s ease, border-color 0.30s ease, margin 0.25s ease-out');
                    $('#header-outer[data-transparent-header="true"] .cart-menu').css('transition', 'border-color 0.30s ease');
                }, 300);
            }
        }

        function headerSpace() {
            if ($('.mobile').length > 0) {
                if (window.innerHeight < window.innerWidth && window.innerWidth > 1000) {
                    if ($('#header-outer.small-nav').length == 0)
                        $('#header-space').css('height', $('#header-outer').outerHeight() + $('#header-secondary-outer').height());
                } else {
                    $('#header-space').css('height', $('#header-outer').outerHeight());
                }
            } else {
                if ($('.nectar-parallax-scene.first-section').length == 0) {
                    var shrinkNum = 6;
                    var headerPadding = parseInt($('#header-outer').attr('data-padding'));
                    if ($('#header-outer[data-shrink-num]').length > 0) shrinkNum = $('#header-outer').attr('data-shrink-num');
                    var headerPadding2 = headerPadding - headerPadding / 1.8;
                    var $headerHeight = ($('#header-outer[data-header-resize="1"]').length > 0 && $('.small-nav').length > 0) ? $('#header-outer').outerHeight() + (parseInt(shrinkNum) + headerPadding2 * 2) : $('#header-outer').outerHeight();
                    if ($('#header-outer').attr('data-using-secondary') == '1') {
                        $('#header-space').css('height', $headerHeight + $('#header-secondary-outer').height());
                    } else {
                        $('#header-space').css('height', $headerHeight);
                    }
                }
            }
        }
        if (navigator.userAgent.match(/(Android|iPod|iPhone|iPad|IEMobile|BlackBerry|Opera Mini)/) && $('#header-outer[data-mobile-fixed="1"]').length > 0 && $('#header-outer[data-permanent-transparent="false"]').length > 0) {
            $('#header-space').css('height', $('#header-outer').outerHeight());
        }
        var lastPosition = -1;
        var $headerScrollTop = nectarDOMInfo.scrollTop;

        function headerOffsetAdjust() {
            $headerScrollTop = nectarDOMInfo.scrollTop;
            if (lastPosition == $headerScrollTop) {
                requestAnimationFrame(headerOffsetAdjust);
                return false;
            } else lastPosition = $headerScrollTop;
            headerOffsetAdjustCalc();
            requestAnimationFrame(headerOffsetAdjust);
        }
        var condenseHeaderLayout = $('#header-outer[data-condense="true"]').length > 0 ? true : false;
        var headerOuterCached = $('#header-outer');

        function headerOffsetAdjustCalc() {
            if ($('body.mobile').length > 0 || condenseHeaderLayout == true && $('#header-outer .span_9').css('display') == 'none') {
                var $eleHeight = 0;
                var $endOffset = ($('#wpadminbar').css('position') == 'fixed') ? $('#wpadminbar').height() : 0;
                $eleHeight += ($('#header-secondary-outer').length > 0 && $('#header-secondary-outer').css('display') == 'block') ? nectarDOMInfo.secondaryHeaderHeight : 0;
                $eleHeight += nectarDOMInfo.adminBarHeight;
                if ($eleHeight - $headerScrollTop > $endOffset) {
                    headerOuterCached.css('top', $eleHeight - $headerScrollTop + 'px');
                } else {
                    headerOuterCached.css('top', $endOffset);
                }
            } else {
                if (condenseHeaderLayout == false) {
                    var $eleHeight = 0;
                    $eleHeight += nectarDOMInfo.secondaryHeaderHeight;
                    $eleHeight += nectarDOMInfo.adminBarHeight;
                    headerOuterCached.css('top', $eleHeight + 'px');
                }
            }
        }
        if ($('#header-outer[data-mobile-fixed="1"]').length > 0 && $('#wpadminbar').length > 0 || $('#header-outer[data-mobile-fixed="1"]').length > 0 && $('#header-secondary-outer').length > 0) {
            if ($('#nectar_fullscreen_rows').length == 0) {
                requestAnimationFrame(headerOffsetAdjust);
            } else if ($('#nectar_fullscreen_rows').length > 0 && $onMobileBrowser) {
                requestAnimationFrame(headerOffsetAdjust);
            }
            $(window).smartresize(headerOffsetAdjustCalc);
        }

        function footerRevealCalcs() {
            var $headerNavSpace = ($('body[data-header-format="left-header"]').length > 0 && $(window).width() > 1000) ? 0 : $('#header-outer').outerHeight();
            if ($(window).height() - $('#wpadminbar').height() - $headerNavSpace - $('#footer-outer').height() - 1 - $('#page-header-bg').height() - $('.page-header-no-bg').height() > 0) {
                $resizeExtra = ($('body:not(.material) #header-outer[data-header-resize="1"]').length > 0) ? 55 : 0;
                $('body[data-footer-reveal="1"] .container-wrap').css({
                    'margin-bottom': $('#footer-outer').height() - 1
                });
                $('.container-wrap').css({
                    'min-height': $(window).height() - $('#wpadminbar').height() - $headerNavSpace - $('#footer-outer').height() - 1 - $('.page-header-no-bg').height() - $('#page-header-bg').height() + $resizeExtra
                });
            } else {
                $('body[data-footer-reveal="1"] .container-wrap').css({
                    'margin-bottom': $('#footer-outer').height() - 1
                });
            }
            if ($(window).width() < 1000) $('#footer-outer').attr('data-midnight', 'light');
            else $('#footer-outer').removeAttr('data-midnight');
        }
        if ($('body[data-footer-reveal="1"]').length > 0 || $('body.material[data-slide-out-widget-area-style="slide-out-from-right"]').length > 0) {
            setTimeout(function() {
                footerRevealCalcs();
            }, 60);
            footerRevealCalcs();
            if ($('bodybody[data-footer-reveal="1"][data-footer-reveal-shadow="large_2"]').length > 0) $('.container-wrap').css({
                boxShadow: '0 70px 110px -30px ' + $('#footer-outer').css('backgroundColor')
            });
        }

        function opaqueCheck() {
            if ($('#header-outer[data-format="centered-menu-bottom-bar"][data-condense="true"]').length > 0) {
                return;
            }
            var $offset = $(window).scrollTop();
            var $windowWidth = $(window).width();
            if ($offset > 0 && $windowWidth > 1000) {
                if ($('body.material').length > 0) {
                    $('#header-outer').addClass('scrolled-down');
                    if ($('#header-secondary-outer').length > 0) {
                        $('#header-secondary-outer').addClass('hide-up').css('transform', 'translateY(-100%)');
                        $('#header-outer').css('transform', 'translateY(-' + $('#header-secondary-outer').height() + 'px)');
                    }
                }
                if ($('#header-outer').attr('data-transparent-header') == 'true' && $('#header-outer[data-permanent-transparent="1"]').length == 0) $('#header-outer').removeClass('transparent').addClass('scrolled-down');
                $(window).off('scroll', opaqueCheck);
                $(window).on('scroll', transparentCheck);
            }
        }

        function transparentCheck() {
            if ($('#header-outer[data-format="centered-menu-bottom-bar"][data-condense="true"]').length > 0) {
                return;
            }
            var $offset = $(window).scrollTop();
            var $windowWidth = $(window).width();
            if ($offset == 0 && $windowWidth > 1000 && $('body.material-ocm-open').length == 0) {
                if ($('#header-outer[data-megamenu-rt="1"]').length > 0 && $('#header-outer[data-transparent-header="true"]').length > 0 && $('#header-outer .megamenu').length > 0) {
                    if ($('#header-outer').attr('data-transparent-header') == 'true' && $('.megamenu.sfHover').length == 0) {
                        $('#header-outer').addClass('transparent').removeClass('scrolled-down');
                        $('#header-outer').removeClass('no-transition');
                    } else if ($('#header-outer').attr('data-transparent-header') == 'true') {
                        $('#header-outer').removeClass('scrolled-down');
                    }
                } else {
                    if ($('#header-outer').attr('data-transparent-header') == 'true') {
                        $('#header-outer').addClass('transparent').removeClass('scrolled-down');
                    }
                }
                if ($('body.material').length > 0) {
                    $('#header-outer').removeClass('scrolled-down');
                    if ($('#header-secondary-outer').length > 0) {
                        $('#header-secondary-outer, #header-outer').removeClass('hide-up').css('transform', 'translateY(0%)');
                    }
                }
                $(window).off('scroll', transparentCheck);
                $(window).on('scroll', opaqueCheck);
            }
        }

        function headerRowColorInheritInit() {
            if ($('body[data-header-inherit-rc="true"]').length > 0 && $('.mobile').length == 0) {
                var headerOffset = ($('#header-outer[data-permanent-transparent="1"]').length == 0) ? (logoHeight - shrinkNum) + Math.ceil((headerPadding * 2) / 1.8) + nectarDOMInfo.adminBarHeight : logoHeight / 2 + headerPadding + nectarDOMInfo.adminBarHeight;
                $('.main-content > .row > .wpb_row').each(function() {
                    var $that = $(this);
                    var waypoint = new Waypoint({
                        element: $that,
                        handler: function(direction) {
                            if (direction == 'down') {
                                if ($that.find('.row-bg.using-bg-color').length > 0) {
                                    var $textColor = ($that.find('> .col.span_12.light').length > 0) ? 'light-text' : 'dark-text';
                                    $('#header-outer').css('background-color', $that.find('.row-bg').css('background-color')).removeClass('light-text').removeClass('dark-text').addClass($textColor);
                                    $('#header-outer').attr('data-current-row-bg-color', $that.find('.row-bg').css('background-color'));
                                    $('body.material #header-outer .bg-color-stripe').css('background-color', $that.find('.row-bg').css('background-color'));
                                } else {
                                    $('#header-outer').css('background-color', $('#header-outer').attr('data-user-set-bg')).removeClass('light-text').removeClass('dark-text');
                                    $('#header-outer').attr('data-current-row-bg-color', $('#header-outer').attr('data-user-set-bg'));
                                    $('body.material #header-outer .bg-color-stripe').css('background-color', '');
                                }
                            } else {
                                if ($that.prev('div.wpb_row').find('.row-bg.using-bg-color').length > 0) {
                                    var $textColor = ($that.prev('div.wpb_row').find('> .col.span_12.light').length > 0) ? 'light-text' : 'dark-text';
                                    $('#header-outer').css('background-color', $that.prev('div.wpb_row').find('.row-bg').css('background-color')).removeClass('light-text').removeClass('dark-text').addClass($textColor);
                                    $('#header-outer').attr('data-current-row-bg-color', $that.prev('div.wpb_row').find('.row-bg').css('background-color'));
                                    $('body.material #header-outer .bg-color-stripe').css('background-color', $that.prev('div.wpb_row').find('.row-bg').css('background-color'));
                                } else {
                                    $('#header-outer').css('background-color', $('#header-outer').attr('data-user-set-bg')).removeClass('light-text').removeClass('dark-text');
                                    $('#header-outer').attr('data-current-row-bg-color', $('#header-outer').attr('data-user-set-bg'));
                                    $('body.material #header-outer .bg-color-stripe').css('background-color', '');
                                }
                            }
                        },
                        offset: headerOffset
                    });
                });
            }
        }
        if ($('.page-submenu[data-sticky="true"]').length > 0 && $('#nectar_fullscreen_rows').length == 0) {
            (function() {
                'use strict'
                var $ = window.jQuery
                var Waypoint = window.Waypoint
                var $offsetHeight = 0;
                var shrinkNum = 6;
                var headerPadding = parseInt($('#header-outer').attr('data-padding'));
                if ($('#header-outer[data-shrink-num]').length > 0) shrinkNum = $('#header-outer').attr('data-shrink-num');
                var headerPadding2 = headerPadding - headerPadding / 1.8;
                var $headerNavSpace = ($('body[data-header-format="left-header"]').length > 0 && $(window).width() > 1000) ? 0 : $('#header-outer').outerHeight();
                var $headerHeight = ($('#header-outer[data-header-resize="1"]').length > 0 && $('body.mobile').length == 0) ? $headerNavSpace - (parseInt(shrinkNum) + headerPadding2 * 2) : $headerNavSpace;
                if ($('body.mobile').length == 0 && $('#header-outer[data-condense="true"]').length > 0) {
                    var $headerSpan9 = $('#header-outer[data-format="centered-menu-bottom-bar"] header#top .span_9');
                    var $secondaryHeader = $('#header-secondary-outer');
                    $headerHeight = $('#header-outer').height() - (parseInt($headerSpan9.position().top) - parseInt($('#header-outer #logo').css('margin-top'))) - parseInt(nectarDOMInfo.secondaryHeaderHeight);
                }
                if ($('.page-template-template-no-header-footer').length > 0 || $('.page-template-template-no-header').length > 0) {
                    $headerNavSpace = 0;
                    $headerHeight = 0;
                }
                if ($('#header-secondary-outer').length > 0 && $('body.mobile').length == 0 && $('body.material').length == 0) $headerHeight += $('#header-secondary-outer').height();
                $(window).on('smartresize', function() {
                    $headerNavSpace = ($('body[data-header-format="left-header"]').length > 0 && $(window).width() > 1000) ? 0 : $('#header-outer').outerHeight();
                    $headerHeight = ($('#header-outer[data-header-resize="1"]').length > 0 && $('.small-nav').length == 0 && $('body.mobile').length == 0) ? $headerNavSpace - (parseInt(shrinkNum) + headerPadding2 * 2) : $headerNavSpace;
                    if ($('body.mobile').length == 0 && $('#header-outer[data-condense="true"]').length > 0) {
                        var $headerSpan9 = $('#header-outer[data-format="centered-menu-bottom-bar"] header#top .span_9');
                        var $secondaryHeader = $('#header-secondary-outer');
                        $headerHeight = $('#header-outer').height() - (parseInt($headerSpan9.position().top) - parseInt($('#header-outer #logo').css('margin-top'))) - parseInt(nectarDOMInfo.secondaryHeaderHeight);
                    }
                    if ($('#header-secondary-outer').length > 0 && $('body.mobile').length == 0 && $('body.material').length == 0) $headerHeight += $('#header-secondary-outer').height();
                    $offsetHeight = 0;
                    if ($('#wpadminbar').length > 0 && $('#wpadminbar').css('position') == 'fixed') $offsetHeight += $('#wpadminbar').height();
                    if ($('body[data-hhun="0"] #header-outer').length > 0 && !($('body.mobile').length > 0 && $('#header-outer[data-mobile-fixed="false"]').length > 0)) {
                        $offsetHeight += $headerHeight;
                    }
                    if ($('.body-border-top').length > 0 && $(window).width() > 1000 && $('body[data-hhun="1"]').length > 0) $offsetHeight += $('.body-border-top').height();
                    if ($('.page-submenu.stuck').length > 0) {
                        $('.page-submenu.stuck').addClass('no-trans').css('top', $offsetHeight).css('transform', 'translateY(0)').addClass('stuck');
                        var $that = this;
                        setTimeout(function() {
                            $('.page-submenu.stuck').removeClass('no-trans');
                        }, 50);
                        $('.page-submenu.stuck').parents('.wpb_row').css('z-index', 10000);
                        if ($('#boxed').length > 0) {
                            var $negMargin = ($(window).width() > 1000) ? $('.container-wrap').width() * 0.04 : 39;
                            $('.page-submenu.stuck').css({
                                'margin-left': '-' + $negMargin + 'px',
                                'width': $('.container-wrap').width()
                            });
                        }
                    } else {
                        $('.page-submenu.stuck').css('top', '0').removeClass('stuck');
                        $('.page-submenu.stuck').parents('.wpb_row').css('z-index', 'auto');
                        if ($('#boxed').length > 0) $('.page-submenu.stuck').css({
                            'margin-left': '0px',
                            'width': '100%'
                        });
                    }
                });

                function Sticky(options) {
                    this.options = $.extend({}, Waypoint.defaults, Sticky.defaults, options)
                    this.element = this.options.element
                    this.$element = $(this.element)
                    this.createWrapper()
                    this.createWaypoint()
                }
                Sticky.prototype.createWaypoint = function() {
                    var originalHandler = this.options.handler
                    $offsetHeight = 0;
                    if ($('#wpadminbar').length > 0 && $('#wpadminbar').css('position') == 'fixed') $offsetHeight += $('#wpadminbar').height();
                    if ($('body[data-hhun="0"] #header-outer').length > 0 && !($('body.mobile').length > 0 && $('#header-outer[data-mobile-fixed="false"]').length > 0)) {
                        $offsetHeight += $headerHeight;
                    }
                    if ($('.body-border-top').length > 0 && $(window).width() > 1000 && $('body[data-hhun="1"]').length > 0) $offsetHeight += $('.body-border-top').height();
                    this.waypoint = new Waypoint($.extend({}, this.options, {
                        element: this.wrapper,
                        handler: $.proxy(function(direction) {
                            var shouldBeStuck = this.options.direction.indexOf(direction) > -1
                            var wrapperHeight = shouldBeStuck ? this.$element.outerHeight(true) : ''
                            this.$wrapper.height(wrapperHeight)
                            if (shouldBeStuck) {
                                this.$element.addClass('no-trans').css('top', $offsetHeight).css('transform', 'translateY(0)').addClass('stuck');
                                var $that = this;
                                setTimeout(function() {
                                    $that.$element.removeClass('no-trans');
                                }, 50);
                                this.$element.parents('.wpb_row').css('z-index', 10000);
                                if ($('#boxed').length > 0) {
                                    var $negMargin = ($(window).width() > 1000) ? $('.container-wrap').width() * 0.04 : 39;
                                    this.$element.css({
                                        'margin-left': '-' + $negMargin + 'px',
                                        'width': $('.container-wrap').width()
                                    });
                                }
                            } else {
                                this.$element.css('top', '0').removeClass('stuck');
                                if ($('#boxed').length > 0) this.$element.css({
                                    'margin-left': '0px',
                                    'width': '100%'
                                });
                            }
                            if (originalHandler) {
                                originalHandler.call(this, direction)
                            }
                        }, this),
                        offset: $offsetHeight
                    }))
                    var $that = this;
                    setInterval(function() {
                        if ($('body[data-hhun="1"] #header-outer.detached:not(.invisible)').length > 0)
                            $that.waypoint.options.offset = $offsetHeight + $headerHeight;
                        else
                            $that.waypoint.options.offset = $offsetHeight;
                        Waypoint.refreshAll();
                    }, 100);
                }
                Sticky.prototype.createWrapper = function() {
                    if (this.options.wrapper) {
                        this.$element.wrap(this.options.wrapper)
                    }
                    this.$wrapper = this.$element.parent()
                    this.wrapper = this.$wrapper[0]
                }
                Sticky.prototype.destroy = function() {
                    if (this.$element.parent()[0] === this.wrapper) {
                        this.waypoint.destroy()
                        this.$element.removeClass(this.options.stuckClass)
                        if (this.options.wrapper) {
                            this.$element.unwrap()
                        }
                    }
                }
                Sticky.defaults = {
                    wrapper: '<div class="sticky-wrapper" />',
                    stuckClass: 'stuck',
                    direction: 'down right'
                }
                Waypoint.Sticky = Sticky
            }());
            if ($('.page-submenu').parents('.span_12').find('> .wpb_column').length > 1) {
                var pageMenu = $('.page-submenu').clone();
                var pageMenuParentRow = $('.page-submenu').parents('.wpb_row');
                $('.page-submenu').remove();
                pageMenuParentRow.before(pageMenu);
            }
            var sticky = new Waypoint.Sticky({
                element: $('.page-submenu[data-sticky="true"]')[0]
            });
        }
        if ($('#nectar_fullscreen_rows').length == 0)
            $('.page-submenu').parents('.wpb_row').css('z-index', 10000);
        $('.page-submenu .mobile-menu-link').on('click', function() {
            $(this).parents('.page-submenu').find('ul').stop(true).slideToggle(350);
            return false;
        });
        $('.page-submenu ul li a').on('click', function() {
            if ($('body.mobile').length > 0) $(this).parents('.page-submenu').find('ul').stop(true).slideToggle(350);
        });
        $('body').on('click', '#toggle-nav', function() {
            if (window.innerWidth > 1000) {
                window.scrollTo(0, 0);
            }
            $(this).find('.lines-button').toggleClass('close');
            if ($('body').hasClass('classic_mobile_menu_open')) {
                $('#mobile-menu').hide();
                $('body').removeClass('classic_mobile_menu_open');
            } else {
                if ($('#header-outer[data-transparent-header="true"][data-permanent-transparent="1"][data-mobile-fixed="false"].transparent').length > 0) {
                    $('#mobile-menu').css({
                        'top': parseInt($('#header-outer').outerHeight() + nectarDOMInfo.adminBarHeight) + 'px',
                        'position': 'absolute',
                        'width': '100%',
                        'left': '0'
                    });
                }
                $('#mobile-menu').show();
                $('body').addClass('classic_mobile_menu_open');
            }
            return false;
        });
        if ($('header#top nav > ul > li.menu-item-language').length > 0 && $('#header-secondary-outer ul > li.menu-item-language').length == 0) {
            var $langSelector = $('header#top nav > ul > li.menu-item-language').clone();
            $langSelector.insertBefore('#mobile-menu ul #mobile-search');
        }
        $('#mobile-menu .container ul li').each(function() {
            if ($(this).find('> ul').length > 0) {
                $(this).addClass('has-ul');
                $(this).find('> a').append('<span class="sf-sub-indicator"><i class="icon-angle-down"></i></span>');
            }
        });
        $('#mobile-menu .container ul li:has(">ul") > a .sf-sub-indicator').click(function() {
            $(this).parent().parent().toggleClass('open');
            $(this).parent().parent().find('> ul').stop(true, true).slideToggle();
            return false;
        });

        function vcFullHeightRow() {
            var $element = $(".vc_row-o-full-height:first");
            if ($element.length) {
                var $window, windowHeight, offsetTop, fullHeight;
                $window = $(window), windowHeight = $window.height();
                $(".vc_row-o-full-height").each(function() {
                    offsetTop = $(this).offset().top;
                    var $realRowIndex = ($(this).parent().hasClass('vc_ie-flexbox-fixer')) ? $(this).parent().index() : $(this).index();
                    if (offsetTop < windowHeight && $(this).hasClass('top-level')) {
                        fullHeight = 100 - offsetTop / (windowHeight / 100);
                        $(this).css("min-height", fullHeight + "vh");
                        $(this).find('> .col.span_12').css("min-height", fullHeight + "vh");
                    } else {
                        $(this).css("min-height", windowHeight);
                        $(this).find('> .col.span_12').css("min-height", windowHeight);
                    }
                });
            }
        }

        function fixIeFlexbox() {
            var ua = window.navigator.userAgent,
                msie = ua.indexOf("MSIE ");
            (msie > 0 || navigator.userAgent.match(/Trident.*rv\:11\./)) && $(".vc_row-o-full-height").each(function() {
                "flex" === $(this).find('> .span_12').css("display") && $(this).wrap('<div class="vc_ie-flexbox-fixer"></div>')
            })
        }
        fixIeFlexbox();
        vcFullHeightRow();

        function piVertCenter() {
            $('.portfolio-items  > .col').each(function() {
                $(this).find('.style-4 .work-info .bottom-meta:not(.shown)').stop().animate({
                    'bottom': '-' + $(this).find('.work-info .bottom-meta').outerHeight() - 2 + 'px'
                }, 420, 'easeOutCubic');
            });
        }

        function ie8Width() {
            if ($(window).width() >= 1300) {
                $('.container').css('max-width', '1100px');
            } else {
                $('.container').css('max-width', '880px');
            }
        }
        if ($(window).width() >= 1300 && $('html').hasClass('no-video')) {
            $('.container').css('max-width', '1100px');
            $(window).resize(ie8Width);
        };

        function smartResizeInit() {
            carouselHeightCalcs();
            portfolioCommentOrder();
            testimonialHeightResize();
            testimonialSliderHeight();
            fullWidthContentColumns();
            parallaxRowsBGCals();
            vcFullHeightRow();
            headerSpace();
            centeredLogoMargins();
            slideOutWidgetOverflowState();
            morphingOutlines();
            flipBoxHeights();
            showOnLeftSubMenu();
            if ($('.tabbed[data-style="minimal_alt"]').length > 0) {
                magicLineCalc($('.tabbed[data-style="minimal_alt"] > ul > li > a.active-tab'));
            }
        }
        $(window).off('smartresize.srInit');
        $(window).on('smartresize.srInit', smartResizeInit);
        $usingNectarCarouselFlk = ($('.nectar-carousel.nectar-flickity:not(.masonry)').length > 0) ? true : false;

        function resizeInit() {
            portfolioDeviceCheck();
            fullWidthSections();
            fullwidthImgOnlySizing();
            fullWidthContentColumns();
            if (nectarDOMInfo.usingMobileBrowser) {
                fullWidthRowPaddingAdjustCalc();
            }
            responsiveVideoIframes();
            videoshortcodeSize();
            if (!nectarDOMInfo.usingMobileBrowser) {
                parallaxRowsBGCals();
            }
            testimonialSliderHeightMinimalMult();
            if ($usingNectarCarouselFlk) {
                setNectarCarouselFlkEH();
            }
            if ($('.nectar-social.full-width').length > 0) {
                nectarLoveFWCenter();
            }
            if ($('body').hasClass('ascend')) {
                searchFieldCenter();
            }
            
            cascadingImageBGSizing();
            responsiveTooltips();
            if ($('[class*="vc_col-xs-"], [class*="vc_col-md-"], [class*="vc_col-lg-"]').length > 0) {
                vcMobileColumns();
            }
            if ($('body[data-footer-reveal="1"]').length > 0 || $('body.material[data-slide-out-widget-area-style="slide-out-from-right"]').length > 0) {
                footerRevealCalcs();
            }
            if ($('#page-header-bg').length > 0) {
                pageHeader();
            }
            if ($('.nectar-video-bg').length > 0) {
                resizeVideoToCover();
            }
        }
        $(window).off('resize.srInit');
        $(window).on('resize.srInit', resizeInit);
        $(window).load(function() {
            if ($(window).scrollTop() == 0) {
                headerSpace();
            }
            setTimeout(portfolioSidebarFollow, 200);
            $('video').css('visibility', 'visible');
            videoshortcodeSize();
            if ($('body[data-animated-anchors="true"]').length > 0) {
                if ($('.nectar-box-roll').length == 0 && $('#nectar_fullscreen_rows').length == 0) {
                    pageLoadHash();
                }
                if ($('#nectar_fullscreen_rows[data-mobile-disable="on"]').length > 0 && $('.nectar-box-roll').length == 0 && nectarDOMInfo.usingMobileBrowser) {
                    pageLoadHash();
                }
            }
            parallaxRowsBGCals();
            portfolioCommentOrder();
            fullWidthContentColumns();
            resizeVideoToCover();
        });


        function portfolioHoverEffects() {
            if (!$('body').hasClass('mobile') && !navigator.userAgent.match(/(iPad|IEMobile)/)) {
                $('.portfolio-items:not([data-ps="7"]) .col .work-item:not(.style-3-alt):not(.style-3):not([data-custom-content="on"])').hover(function() {
                    $(this).find('.work-info .vert-center').css({
                        'margin-top': 0
                    });
                    $(this).find('.work-info, .work-info .vert-center > *, .work-info > i').css({
                        'opacity': 1
                    });
                    $(this).find('.work-info-bg').css({
                        'opacity': 0.9
                    });
                }, function() {
                    $(this).find('.work-info .vert-center').css({
                        'margin-top': -20
                    });
                    $(this).find('.work-info, .work-info .vert-center > *:not(.mfp-figure), .work-info > i').css({
                        'opacity': 0
                    });
                    $(this).find('.work-info-bg').css({
                        'opacity': 0
                    });
                });
                $('.portfolio-items .col .work-item.style-3').hover(function() {
                    $(this).find('.work-info-bg').css({
                        'opacity': 0
                    });
                }, function() {
                    $(this).find('.work-info-bg').css({
                        'opacity': 0.45
                    });
                });
                $('.portfolio-items .col .work-item.style-4').hover(function() {
                    $(this).find('img').stop().animate({
                        'top': '-' + $(this).find('.work-info .bottom-meta').outerHeight() / 2 + 'px'
                    }, 250, 'easeOutCubic');
                    $(this).find('.work-info .bottom-meta').addClass('shown').stop().animate({
                        'bottom': '0px'
                    }, 320, 'easeOutCubic');
                }, function() {
                    $(this).find('img').stop().animate({
                        'top': '0px'
                    }, 250, 'easeOutCubic');
                    $(this).find('.work-info .bottom-meta').removeClass('shown').stop().animate({
                        'bottom': '-' + $(this).find('.work-info .bottom-meta').outerHeight() - 2 + 'px'
                    }, 320, 'easeOutCubic');
                });
            } else {
                portfolioDeviceCheck();
            }
        }
        portfolioHoverEffects();

        function style6Img() {
            $('.style-5').each(function() {
                $(this).find('.sizer').insertBefore($(this).find('.parallaxImg'));
            });
            $('.style-5').parents('.wpb_row').css('z-index', '100');
            var d = document,
                de = d.documentElement,
                bd = d.getElementsByTagName('body')[0],
                htm = d.getElementsByTagName('html')[0],
                win = window,
                imgs = d.querySelectorAll('.parallaxImg'),
                totalImgs = imgs.length,
                supportsTouch = 'ontouchstart' in win || navigator.msMaxTouchPoints;
            if (totalImgs <= 0) {
                return;
            }
            for (var l = 0; l < totalImgs; l++) {
                var thisImg = imgs[l],
                    layerElems = thisImg.querySelectorAll('.parallaxImg-layer'),
                    totalLayerElems = layerElems.length;
                if (totalLayerElems <= 0) {
                    continue;
                }
                while (thisImg.firstChild) {
                    thisImg.removeChild(thisImg.firstChild);
                }
                var lastMove = 0;
                var eventThrottle = $('html').hasClass('cssreflections') ? 1 : 80;
                if (eventThrottle == 80) $('body').addClass('cssreflections');
                var containerHTML = d.createElement('div'),
                    shineHTML = d.createElement('div'),
                    shadowHTML = d.createElement('div'),
                    layersHTML = d.createElement('div'),
                    layers = [];
                thisImg.id = 'parallaxImg__' + l;
                containerHTML.className = 'parallaxImg-container';
                shadowHTML.className = 'parallaxImg-shadow';
                layersHTML.className = 'parallaxImg-layers';
                for (var i = 0; i < totalLayerElems; i++) {
                    var layer = d.createElement('div'),
                        layerInner = d.createElement('div'),
                        imgSrc = layerElems[i].getAttribute('data-img');
                    $(layer).html($(layerElems[i]).html());
                    layer.className = 'parallaxImg-rendered-layer';
                    layer.setAttribute('data-layer', i);
                    if (i == 0 && $(thisImg).parents('.wpb_gallery').length == 0) {
                        layerInner.className = 'bg-img';
                        layerInner.style.backgroundImage = 'url(' + imgSrc + ')';
                        layer.appendChild(layerInner);
                    }
                    layersHTML.appendChild(layer);
                    layers.push(layer);
                }
                containerHTML.appendChild(layersHTML);
                thisImg.appendChild(containerHTML);
                $(thisImg).wrap('<div class="parallaxImg-wrap" />');
                if (!(navigator.userAgent.indexOf('Safari') != -1 && navigator.userAgent.indexOf('Chrome') == -1)) {
                    $(thisImg).parent().append(shadowHTML);
                }
                var w = thisImg.clientWidth || thisImg.offsetWidth || thisImg.scrollWidth;
                if (supportsTouch && $('body.using-mobile-browser').length > 0) {} else {
                    (function(_thisImg, _layers, _totalLayers, _shine) {
                        $(thisImg).parents('.style-5').on('mousemove', function(e) {
                            var parentEl = $(this);
                            var now = Date.now();
                            if (now > lastMove + eventThrottle) {
                                lastMove = now;
                                window.requestAnimationFrame(function() {
                                    processMovement(e, false, _thisImg, _layers, _totalLayers, _shine, parentEl);
                                });
                            }
                        });
                        $(thisImg).parents('.style-5').on('mouseenter', function(e) {
                            processEnter(e, _thisImg, _layers, _totalLayers, _shine);
                        });
                        $(thisImg).parents('.style-5').on('mouseleave', function(e) {
                            processExit(e, _thisImg, _layers, _totalLayers, _shine);
                        });
                    })(thisImg, layers, totalLayerElems, shineHTML);
                }
                (function(_thisImg, _layers, _totalLayers, _shine) {
                    depths(false, _thisImg, _layers, _totalLayers, _shine);
                    window.addEventListener('resize', function(e) {
                        depths(false, _thisImg, _layers, _totalLayers, _shine);
                    });
                })(thisImg, layers, totalLayerElems, shineHTML);
            }

            function processMovement(e, touchEnabled, elem, layers, totalLayers, shine, parentEl) {
                if (!$(elem.firstChild).hasClass('over')) {
                    processExit(e, elem, layers, totalLayers, shine);
                    return false
                }
                if ($(elem).parents('.col.wide').length > 0) {
                    var yMult = 0.03;
                    var xMult = 0.063;
                } else if ($(elem).parents('.col.regular').length > 0 || $(elem).parents('.wpb_gallery').length > 0) {
                    var yMult = 0.045;
                    var xMult = 0.045;
                } else if ($(elem).parents('.col.tall').length > 0) {
                    var yMult = 0.05;
                    var xMult = 0.015;
                } else if ($(elem).parents('.col.wide_tall').length > 0) {
                    var yMult = 0.04;
                    var xMult = 0.04;
                } else if (parentEl.hasClass('nectar-fancy-box')) {
                    var yMult = 0.045;
                    var xMult = 0.022;
                } else {
                    var yMult = 0.045;
                    var xMult = 0.075;
                }
                var bdst = $(window).scrollTop(),
                    bdsl = bd.scrollLeft,
                    pageX = (touchEnabled) ? e.touches[0].pageX : e.pageX,
                    pageY = (touchEnabled) ? e.touches[0].pageY : e.pageY,
                    offsets = elem.getBoundingClientRect(),
                    w = elem.clientWidth || elem.offsetWidth || elem.scrollWidth,
                    h = elem.clientHeight || elem.offsetHeight || elem.scrollHeight,
                    wMultiple = 320 / w,
                    offsetX = 0.52 - (pageX - offsets.left - bdsl) / w,
                    offsetY = 0.52 - (pageY - offsets.top - bdst) / h,
                    dy = (pageY - offsets.top - bdst) - h / 2,
                    dx = (pageX - offsets.left - bdsl) - w / 2,
                    yRotate = (offsetX - dx) * (yMult * wMultiple),
                    xRotate = (dy - offsetY) * (xMult * wMultiple);
                if ($(elem).parents('.wpb_gallery').length > 0) {
                    var imgCSS = ' perspective(' + w * 3 + 'px) rotateX(' + -xRotate * 1.9 + 'deg) rotateY(' + -yRotate * 1.3 + 'deg)';
                } else {
                    if ($(elem).parents('.wide_tall').length == 0 && $(elem).parents('.wide').length == 0 && $(elem).parents('.tall').length == 0) {
                        var $scaleAmount = (parentEl.hasClass('nectar-fancy-box')) ? '1.06' : '1.03';
                        var $offsetAmount = (parentEl.hasClass('nectar-fancy-box')) ? '-2' : '-10';
                        var imgCSS = ' perspective(' + w * 3 + 'px) rotateX(' + xRotate + 'deg) rotateY(' + yRotate + 'deg)  translateY(' + offsetY * $offsetAmount + 'px) translateX(' + offsetX * $offsetAmount + 'px) scale(' + $scaleAmount + ')';
                    } else {
                        var imgCSS = ' perspective(' + w * 3 + 'px) rotateX(' + xRotate + 'deg) rotateY(' + yRotate + 'deg)  translateY(' + offsetY * -10 + 'px) translateX(' + offsetX * -10 + 'px) scale(1.013)';
                    }
                }
                if (elem.firstChild.className.indexOf(' over') != -1) {
                    if ($(elem).parents('.portfolio-items.masonry-items').length > 0) {} else {}
                }
                $(elem).find('.parallaxImg-container').css('transform', imgCSS);
                if (!(navigator.userAgent.indexOf('Safari') != -1 && navigator.userAgent.indexOf('Chrome') == -1)) {
                    $(elem).parents('.parallaxImg-wrap').find('.parallaxImg-shadow').css('transform', imgCSS);
                }
            }

            function processShineMovement(e, touchEnabled, elem, layers, totalLayers, shine) {}

            function processEnter(e, elem, layers, totalLayers, shine) {
                elem.firstChild.className += ' over';
                elem.className += ' over';
                $(elem).addClass('transition');
                if ($(elem).parents('.wpb_gallery').length > 0) {
                    var $timeout = setTimeout(function() {
                        $(elem).removeClass('transition');
                    }, 450);
                } else {
                    var $timeout = setTimeout(function() {
                        $(elem).removeClass('transition');
                    }, 200);
                }
            }

            function processExit(e, elem, layers, totalLayers, shine) {
                var w = elem.clientWidth || elem.offsetWidth || elem.scrollWidth;
                var container = elem.firstChild;
                container.className = container.className.replace(' over', '');
                elem.className = elem.className.replace(' over', '');
                $(container).css('transform', 'perspective(' + w * 3 + 'px) rotateX(0deg) rotateY(0deg) translateZ(0)');
                $(elem).parents('.parallaxImg-wrap').find('.parallaxImg-shadow').css('transform', 'perspective(' + w * 3 + 'px) rotateX(0deg) rotateY(0deg) translateZ(0)');
                $(elem).addClass('transition');
                var $timeout = setTimeout(function() {
                    $(elem).removeClass('transition');
                }, 200);
            }

            function depths(touchEnabled, elem, layers, totalLayers, shine) {
                var w = elem.clientWidth || elem.offsetWidth || elem.scrollWidth;
                var revNum = totalLayers;
                var container = elem.firstChild;
                for (var ly = 0; ly < totalLayers; ly++) {
                    if (ly == 0) $(layers[ly]).css('transform', 'translateZ(0px)');
                    else $(layers[ly]).css('transform', 'translateZ(' + (w * 3) / 27 * (ly * 1.1) + 'px) ');
                    revNum--;
                }
                totalLayers = totalLayers + 3;
                $(container).css('transform', 'perspective(' + w * 3 + 'px)');
            }

            function removeDepths(touchEnabled, elem, layers, totalLayers, shine) {
                var w = elem.clientWidth || elem.offsetWidth || elem.scrollWidth;
                var revNum = totalLayers;
                for (var ly = 0; ly < totalLayers; ly++) {
                    if (ly == 0) $(layers[ly]).css('transform', 'translateZ(' + (w * 3) / 45 * (ly * 1.1) + 'px) scale(1)');
                    else $(layers[ly]).css('transform', 'translateZ(' + (w * 3) / 45 * (ly * 1.1) + 'px) scale(1)');
                    revNum--;
                }
                totalLayers = totalLayers + 3;
            }
        }
        style6Img();

        function portfolioDeviceCheck() {
            if ($('body').hasClass('mobile') || navigator.userAgent.match(/(iPad|IEMobile)/)) {
                if ($('.portfolio-items .col .work-item').find('a:not(".pp")').length > 0) {
                    $('.portfolio-items .col .work-item').find('a.pp').css('display', 'none');
                } else {
                    $('.portfolio-items .col .work-item').find('a:not(".pp")').css('display', 'none');
                }
            } else {
                $('.portfolio-items .col .work-item').find('a').css('display', 'inline');
            }
        }
        $('.nectar_fullscreen_zoom_recent_projects').each(function() {
            if ($(this).parents('.span_12').find('> .wpb_column').length > 1) {
                var $zoomProjects = $(this).clone();
                var $zoomProjectsRow = $(this).parents('.span_12');
                $(this).remove();
                $zoomProjectsRow.prepend($zoomProjects);
            }
        });
        $.fn.lines = function(opts) {
            var s = $.extend({
                'lineClass': 'line'
            }, opts);
            return this.each(function() {
                var self = this,
                    $self = $(self),
                    $line, $prev;
                $self.find('.' + s.lineClass).contents().unwrap();
                $self.html(function(i, h) {
                    return h.replace(/(\b[\w']+\b)/g, '<span class="' + s.lineClass + '">$1</span>');
                });
                $self.find('.line + .line').each(function(i, el) {
                    $line = $(this), $prev = $line.prev('.line');
                    if ($line.offset().top === $prev.offset().top) {
                        $prev.append(el.previousSibling, $line.contents());
                        $line.remove();
                    }
                });
            });
        };

        function splitLineText() {
            $('.nectar_fullscreen_zoom_recent_projects, .nectar-recent-posts-single_featured.multiple_featured').each(function() {
                var $slideClass = ($(this).find('.project-slides').length > 0) ? '.project-slide' : '.nectar-recent-post-slide';
                var $slideInfoClass = ($(this).find('.project-slides').length > 0) ? '.project-info h1' : '.inner-wrap h2 a';
                $(this).find($slideClass).each(function(i) {
                    $(this).find($slideInfoClass).each(function() {
                        var textArr = $(this).text();
                        textArr = textArr.trim();
                        textArr = textArr.split(' ');
                        $(this)[0].innerHTML = '';
                        for (var i = 0; i < textArr.length; i++) {
                            $(this)[0].innerHTML += '<span>' + textArr[i] + '</span> ';
                        }
                    });
                    $(this).find($slideInfoClass + ' > span').wrapInner('<span class="inner" />');
                });
            });
        }

        function portfolioFullScreenSliderCalcs() {
            var $bodyBorderSize = ($('.body-border-top').length > 0 && $(window).width() > 1000) ? $('.body-border-top').height() : 0;
            $('.nectar_fullscreen_zoom_recent_projects').each(function() {
                if ($(this).parents('.first-section').length > 0) {
                    $(this).css('height', $(window).height() - $(this).offset().top - $bodyBorderSize);
                } else {
                    $(this).css('height', $(window).height());
                }
            });
        }

        function nectarCustomSliderRotate(slider) {
            var $controlSelector = (slider.find('.project-slides').length > 0) ? '.dot-nav > span' : '.controls > li';
            var $controlSelectorInd = (slider.find('.project-slides').length > 0) ? 'span' : ' li';
            var $slideLength = slider.find($controlSelector).length;
            var $currentSlide = slider.find($controlSelector + '.active').index();
            if ($currentSlide + 1 == $slideLength) {
                slider.find($controlSelector + ':first-child').click();
            } else {
                slider.find($controlSelector + '.active').next($controlSelectorInd).click();
            }
        }

        function nectarCustomSliderResetRotate(slider) {
            clearInterval($nectarCustomSliderRotate);
            if (slider.attr('data-autorotate').length > 0) {
                slide_interval = (parseInt(slider.attr('data-autorotate')) < 100) ? 4000 : parseInt(slider.attr('data-autorotate'));
                $nectarCustomSliderRotate = setInterval(function() {
                    nectarCustomSliderRotate(slider)
                }, slide_interval);
            }
        }
        if ($('.nectar_fullscreen_zoom_recent_projects').length > 0) {
            portfolioFullScreenSliderCalcs();
            splitLineText();
            $(window).resize(splitLineText);
            $(window).resize(portfolioFullScreenSliderCalcs);
        }
        $('.nectar_fullscreen_zoom_recent_projects').each(function() {
            var $projLength = $(this).find('.project-slide').length;
            if ($(this).attr('data-autorotate').length > 0) {
                slide_interval = (parseInt($(this).attr('data-autorotate')) < 100) ? 4000 : parseInt($(this).attr('data-autorotate'));
                var $that = $(this);
                $nectarCustomSliderRotate = setInterval(function() {
                    nectarCustomSliderRotate($that)
                }, slide_interval);
            }
            $(this).find('.zoom-slider-controls .next').click(function() {
                var $that = $(this);
                if (!$that.parent().hasClass('timeout')) {
                    setTimeout(function() {
                        $that.parent().removeClass('timeout');
                    }, 1150);
                }
                if ($(this).parent().hasClass('timeout')) return false;
                $(this).parent().addClass('timeout');
                nectarCustomSliderResetRotate($that.parents('.nectar_fullscreen_zoom_recent_projects'));
                var $current = $(this).parents('.nectar_fullscreen_zoom_recent_projects').find('.project-slide.current');
                var $sliderInstance = $(this).parents('.nectar_fullscreen_zoom_recent_projects');
                $sliderInstance.find('.project-slide').removeClass('next').removeClass('prev');
                $sliderInstance.find('.project-slide').each(function(i) {
                    if (i < $current.index() + 1 && $current.index() + 1 < $projLength)
                        $(this).addClass('prev');
                    else
                        $(this).addClass('next');
                });
                if ($current.index() + 1 == $projLength) {
                    $sliderInstance.find('.project-slide:first-child').addClass('no-trans');
                }
                setTimeout(function() {
                    if ($current.index() + 1 == $projLength) {
                        $sliderInstance.find('.project-slide:first-child').removeClass('no-trans').removeClass('next').removeClass('prev').addClass('current');
                        $sliderInstance.find('.project-slide:last-child').removeClass('next').removeClass('current').addClass('prev');
                    } else {
                        $current.next('.project-slide').removeClass('next').removeClass('prev').addClass('current');
                        $current.removeClass('current').addClass('prev');
                    }
                    if ($sliderInstance.find('.dot-nav').length > 0) {
                        $sliderInstance.find('.dot-nav span.active').removeClass('active');
                        $sliderInstance.find('.dot-nav span:nth-child(' + ($sliderInstance.find('.project-slide.current').index() + 1) + ')').addClass('active');
                    }
                }, 30);
                return false;
            });
            $(this).find('.zoom-slider-controls .prev').click(function() {
                var $that = $(this);
                if (!$that.parent().hasClass('timeout')) {
                    setTimeout(function() {
                        $that.parent().removeClass('timeout');
                    }, 1150);
                }
                if ($(this).parent().hasClass('timeout')) return false;
                $(this).parent().addClass('timeout');
                nectarCustomSliderResetRotate($that.parents('.nectar_fullscreen_zoom_recent_projects'));
                var $current = $(this).parents('.nectar_fullscreen_zoom_recent_projects').find('.project-slide.current');
                var $sliderInstance = $(this).parents('.nectar_fullscreen_zoom_recent_projects');
                $sliderInstance.find('.project-slide').removeClass('next').removeClass('prev');
                $sliderInstance.find('.project-slide').each(function(i) {
                    if (i < $current.index() || $current.index() == 0)
                        $(this).addClass('prev');
                    else
                        $(this).addClass('next');
                });
                if ($current.index() == 0)
                    $sliderInstance.find('.project-slide:last-child').addClass('no-trans');
                setTimeout(function() {
                    if ($current.index() == 0) {
                        $sliderInstance.find('.project-slide:last-child').removeClass('no-trans').removeClass('next').removeClass('prev').addClass('current');
                        $sliderInstance.find('.project-slide:first-child').removeClass('next').removeClass('prev').removeClass('current').addClass('next');
                    } else {
                        $current.prev('.project-slide').removeClass('next').removeClass('prev').addClass('current');
                        $current.removeClass('current').addClass('next');
                    }
                    if ($sliderInstance.find('.dot-nav').length > 0) {
                        $sliderInstance.find('.dot-nav span.active').removeClass('active');
                        $sliderInstance.find('.dot-nav span:nth-child(' + ($sliderInstance.find('.project-slide.current').index() + 1) + ')').addClass('active');
                    }
                }, 30);
                return false;
            });
            $(this).find('> .normal-container').append('<div class="dot-nav"></div>');
            for (var $i = 0; $i < $projLength; $i++) {
                if ($i == 0) {
                    $(this).find('.dot-nav').append('<span class="dot active"><span></span></span>');
                } else {
                    $(this).find('.dot-nav').append('<span class="dot"><span></span></span>');
                }
            }
            var $dotIndex = 1;
            $('.nectar_fullscreen_zoom_recent_projects .dot-nav > span').click(function() {
                if ($(this).hasClass('active')) return;
                var $that = $(this);
                if (!$that.parent().hasClass('timeout')) {
                    setTimeout(function() {
                        $that.parent().removeClass('timeout');
                    }, 1150);
                }
                if ($(this).parent().hasClass('timeout')) return;
                $(this).parent().addClass('timeout');
                nectarCustomSliderResetRotate($that.parents('.nectar_fullscreen_zoom_recent_projects'));
                $(this).parent().find('span.active').removeClass('active');
                $(this).addClass('active');
                $dotIndex = $(this).index() + 1;
                var $current = $(this).parents('.nectar_fullscreen_zoom_recent_projects').find('.project-slide.current');
                var $sliderInstance = $(this).parents('.nectar_fullscreen_zoom_recent_projects');
                var $prevIndex = $current.index() + 1;
                $sliderInstance.find('.project-slide').removeClass('next').removeClass('prev');
                $sliderInstance.find('.project-slide').each(function(i) {
                    if (i < $dotIndex - 1)
                        $(this).addClass('prev');
                    else
                        $(this).addClass('next');
                });
                if ($prevIndex > $dotIndex) {
                    $sliderInstance.find('.project-slide').eq($dotIndex - 1).addClass('no-trans').addClass('prev').removeClass('next');
                    setTimeout(function() {
                        $sliderInstance.find('.project-slide').eq($dotIndex - 1).removeClass('no-trans').removeClass('next').removeClass('prev').addClass('current');
                        $current.removeClass('current').addClass('next');
                    }, 30);
                } else {
                    $sliderInstance.find('.project-slide').eq($dotIndex - 1).addClass('no-trans').addClass('next').removeClass('prev');
                    setTimeout(function() {
                        $sliderInstance.find('.project-slide').eq($dotIndex - 1).removeClass('no-trans').removeClass('next').removeClass('prev').addClass('current');
                        $current.removeClass('current').addClass('prev');
                    }, 30);
                }
            });
        });

        function portfolioAccentColor() {
            var portfolioSocialColorCss = '';
            $('.portfolio-items .col').each(function() {
                if ($(this).has('[data-project-color]')) {
                    $(this).find('.work-info-bg, .bottom-meta').css('background-color', $(this).attr('data-project-color'));
                    $(this).find('.parallaxImg-rendered-layer .bg-overlay').css('border-color', $(this).attr('data-project-color'));
                    var $projColor = $(this).attr('data-project-color');
                    if ($(this).find('.custom-content .nectar-social').length > 0 && $('body[data-button-style="rounded"]')) portfolioSocialColorCss += 'body[data-button-style="rounded"] .col[data-project-color="' + $projColor + '"] .custom-content .nectar-social > *:hover i { color: ' + $projColor + '!important; } ';
                }
            });
            if (portfolioSocialColorCss.length > 1) {
                var head = document.head || document.getElementsByTagName('head')[0];
                var style = document.createElement('style');
                style.type = 'text/css';
                if (style.styleSheet) {
                    style.styleSheet.cssText = portfolioSocialColorCss;
                } else {
                    style.appendChild(document.createTextNode(portfolioSocialColorCss));
                }
                head.appendChild(style);
            }
        }
        portfolioAccentColor();
        $('body').on('mouseenter', '.portfolio-filters', function() {
            if (!portfolioFiltersOnMobile) {
                $(this).find('> ul').stop(true, true).slideDown(500, 'easeOutExpo');
            }
            $(this).find('a#sort-portfolio span').html($(this).find('a#sort-portfolio').attr('data-sortable-label'));
        });
        $('body').on('mouseleave', '.portfolio-filters', function() {
            var $activeCat = $(this).find('a.active').html();
            if (typeof $activeCat == 'undefined' || $activeCat.length == 0) $activeCat = $(this).attr('data-sortable-label');
            $(this).find('a#sort-portfolio span').html($activeCat);
            if (!portfolioFiltersOnMobile) {
                $(this).find('> ul').stop(true, true).slideUp(500, 'easeOutExpo');
            }
        });
        $('body').on('click', '.portfolio-filters ul li a', function() {
            $(this).parents('.portfolio-filters').find('#sort-portfolio span').html($(this).html());
        });
        $('body').on('click', '.portfolio-filters > a#sort-portfolio', function() {
            return false;
        });
        $('body').on('click', '.portfolio-filters-inline ul li a', function() {
            $(this).parents('ul').find('li a').removeClass('active');
            $(this).addClass('active');
            $(this).parents('.portfolio-filters-inline').find('#current-category').html($(this).html());
        });
        var portfolioFiltersOnMobile = false;

        function portfolioFiltersInit() {
            if ($('body').hasClass('mobile') || navigator.userAgent.match(/(iPad|IEMobile)/)) {
                portfolioFiltersOnMobile = true;
                $('.portfolio-filters').unbind('mouseenter mouseleave');
                $('.portfolio-filters > a, .portfolio-filters ul li a').click(function(e) {
                    if (e.originalEvent !== undefined) $(this).parents('.portfolio-filters').find('> ul').stop(true, true).slideToggle(600, 'easeOutCubic');
                });
            }
            if ($('.portfolio-filters-inline[data-alignment="left"]').length > 0 || $('.portfolio-filters-inline[data-alignment="center"]').length > 0) {
                $('.portfolio-filters-inline .container > ul > li:nth-child(1) a').click();
            } else {
                $('.portfolio-filters-inline .container > ul > li:nth-child(2) a').click();
            }
            $('body.single-portfolio #header-outer nav > ul > li > a:contains("Portfolio")').parents('li').addClass('current-menu-item');
            $('body.single-post #header-outer nav > ul > li > a:contains("Blog")').parents('li').addClass('current-menu-item');
        }
        portfolioFiltersInit();

        function centerLove() {
            $('.post').each(function() {
                var $loveWidth = $(this).find('.post-meta .nectar-love').outerWidth();
                var $loveWrapWidth = $(this).find('.post-meta  .nectar-love-wrap').width();
                $(this).find('.post-meta .nectar-love').css('margin-left', $loveWrapWidth / 2 - $loveWidth / 2 + 'px');
                $(this).find('.nectar-love-wrap').css('visibility', 'visible');
            });
        }
        $('.nectar-love').on('click', function() {
            centerLove();
        });
        centerLove();

        function portfolioCommentOrder() {
            if ($('body').hasClass('mobile') && $('body').hasClass('single-portfolio') && $('#respond').length > 0) {
                $('#sidebar').insertBefore('.comments-section');
            } else if ($('body').hasClass('single-portfolio') && $('#respond').length > 0) {
                $('#sidebar').insertAfter('.post-area');
            }
        }
        portfolioCommentOrder();
        var sidebarFollow = $('.single-portfolio #sidebar').attr('data-follow-on-scroll');

        function portfolioSidebarFollow() {
            if ($('body.single-portfolio').length == 0 || $('#sidebar[data-follow-on-scroll]').length == 0) {
                return;
            }
            sidebarFollow = $('.single-portfolio #sidebar').attr('data-follow-on-scroll');
            if (sidebarFollow == 1 && !$('body').hasClass('mobile') && parseInt($('#sidebar').height()) + 50 <= parseInt($('.post-area').height())) {
                var $ssExtraTopSpace = 50;
                if ($('#header-outer[data-remove-fixed="0"]').length > 0 && $('body[data-hhun="1"]').length == 0) {
                    $ssExtraTopSpace += $('#header-outer').outerHeight();
                    if ($('#header-outer[data-shrink-num][data-header-resize="1"]').length > 0) {
                        var shrinkNum = 6;
                        var headerPadding2 = parseInt($('#header-outer').attr('data-padding')) - parseInt($('#header-outer').attr('data-padding')) / 1.8;
                        shrinkNum = $('#header-outer').attr('data-shrink-num');
                        $ssExtraTopSpace -= shrinkNum;
                        $ssExtraTopSpace -= headerPadding2;
                    }
                    if ($('body.mobile').length == 0 && $('#header-outer[data-condense="true"]').length > 0) {
                        var $headerSpan9 = $('#header-outer[data-format="centered-menu-bottom-bar"] header#top .span_9');
                        var $secondaryHeader = $('#header-secondary-outer');
                        $ssExtraTopSpace = 50;
                        $ssExtraTopSpace += $('#header-outer').height() - (parseInt($headerSpan9.position().top) - parseInt($('#header-outer #logo').css('margin-top'))) - parseInt(nectarDOMInfo.secondaryHeaderHeight);
                    }
                }
                if ($('#wpadminbar').length > 0) {
                    $ssExtraTopSpace += $('#wpadminbar').outerHeight();
                }
                if ($('#header-outer').attr('data-using-secondary') == '1' && $('body.material').length == 0) {
                    $ssExtraTopSpace += $('#header-secondary-outer').outerHeight();
                }
                $('.single-portfolio #sidebar').theiaStickySidebar({
                    additionalMarginTop: $ssExtraTopSpace,
                    updateSidebarHeight: false
                });
            }
        }

        function isotopeCatSelection() {
            $('.portfolio-items:not(".carousel")').each(function() {
                var isotopeCatArr = [];
                var $portfolioCatCount = 0;
                $(this).parent().parent().find('div[class^=portfolio-filters] ul li').each(function(i) {
                    if ($(this).find('a').length > 0) {
                        isotopeCatArr[$portfolioCatCount] = $(this).find('a').attr('data-filter').substring(1);
                        $portfolioCatCount++;
                    }
                });
                isotopeCatArr.shift();
                var itemCats = '';
                $(this).find('> div').each(function(i) {
                    itemCats += $(this).attr('data-project-cat');
                });
                itemCats = itemCats.split(' ');
                itemCats.pop();
                itemCats = $.unique(itemCats);
                if ($(this).attr('data-categories-to-show').length != 0 && $(this).attr('data-categories-to-show') != 'all') {
                    $userSelectedCats = $(this).attr('data-categories-to-show').replace(/,/g, ' ');
                    $userSelectedCats = $userSelectedCats.split(' ');
                    if (!$(this).hasClass('infinite_scroll')) $(this).removeAttr('data-categories-to-show');
                } else {
                    $userSelectedCats = itemCats;
                }
                var notFoundCats = [];
                $.grep(isotopeCatArr, function(el) {
                    if ($.inArray(el, itemCats) == -1) notFoundCats.push(el);
                    if ($.inArray(el, $userSelectedCats) == -1) notFoundCats.push(el);
                });
                if (notFoundCats.length != 0) {
                    $(this).parent().parent().find('div[class^=portfolio-filters] ul li').each(function() {
                        if ($(this).find('a').length > 0) {
                            if ($.inArray($(this).find('a').attr('data-filter').substring(1), notFoundCats) != -1) {
                                if ($(this).find('> ul.children').length > 0) {
                                    $(this).find('> a').hide();
                                } else {
                                    $(this).hide();
                                }
                            } else {
                                $(this).show();
                            }
                        }
                    })
                }
            });
        }
        isotopeCatSelection();
        var completed = 0;
        var windowLocation = window.location.href.replace(window.location.hash, '');

        function facebookShare() {
            windowLocation = window.location.href.replace(window.location.hash, '');
            window.open('https://www.facebook.com/sharer/sharer.php?u=' + windowLocation, "facebookWindow", "height=380,width=660,resizable=0,toolbar=0,menubar=0,status=0,location=0,scrollbars=0")
            return false;
        }

        function googlePlusShare() {
            windowLocation = window.location.href.replace(window.location.hash, '');
            window.open('https://plus.google.com/share?url=' + windowLocation, "googlePlusWindow", "height=380,width=660,resizable=0,toolbar=0,menubar=0,status=0,location=0,scrollbars=0")
            return false;
        }

        function twitterShare() {
            windowLocation = window.location.href.replace(window.location.hash, '');
            if ($(".section-title h1").length > 0) {
                var $pageTitle = encodeURIComponent($(".section-title h1").text());
            } else {
                var $pageTitle = encodeURIComponent($(document).find("title").text());
            }
            window.open('http://twitter.com/intent/tweet?text=' + $pageTitle + ' ' + windowLocation, "twitterWindow", "height=380,width=660,resizable=0,toolbar=0,menubar=0,status=0,location=0,scrollbars=0")
            return false;
        }

        function wooTwitterShare() {
            windowLocation = window.location.href.replace(window.location.hash, '');
            window.open('http://twitter.com/intent/tweet?text=' + $("h1.product_title").text() + ' ' + windowLocation, "twitterWindow", "height=380,width=660,resizable=0,toolbar=0,menubar=0,status=0,location=0,scrollbars=0")
            return false;
        }

        function linkedInShare() {
            windowLocation = window.location.href.replace(window.location.hash, '');
            if ($(".section-title h1").length > 0) {
                var $pageTitle = encodeURIComponent($(".section-title h1").text());
            } else {
                var $pageTitle = encodeURIComponent($(document).find("title").text());
            }
            window.open('http://www.linkedin.com/shareArticle?mini=true&url=' + windowLocation + '&title=' + $pageTitle + '', "linkedInWindow", "height=480,width=660,resizable=0,toolbar=0,menubar=0,status=0,location=0,scrollbars=0")
            return false;
        }

        function woolinkedInShare() {
            windowLocation = window.location.href.replace(window.location.hash, '');
            window.open('http://www.linkedin.com/shareArticle?mini=true&url=' + windowLocation + '&title=' + $("h1.product_title").text(), "twitterWindow", "height=380,width=660,resizable=0,toolbar=0,menubar=0,status=0,location=0,scrollbars=0")
            return false;
        }

        function pinterestShare() {
            windowLocation = window.location.href.replace(window.location.hash, '');
            var $sharingImg = ($('.single-portfolio').length > 0 && $('div[data-featured-img]').attr('data-featured-img') != 'empty') ? $('div[data-featured-img]').attr('data-featured-img') : $('#ajax-content-wrap img').first().attr('src');
            if ($(".section-title h1").length > 0) {
                var $pageTitle = encodeURIComponent($(".section-title h1").text());
            } else {
                var $pageTitle = encodeURIComponent($(document).find("title").text());
            }
            window.open('http://pinterest.com/pin/create/button/?url=' + windowLocation + '&media=' + $sharingImg + '&description=' + $pageTitle, "pinterestWindow", "height=640,width=660,resizable=0,toolbar=0,menubar=0,status=0,location=0,scrollbars=0")
            return false;
        }

        function wooPinterestShare() {
            $imgToShare = ($('img.attachment-shop_single').length > 0) ? $('img.attachment-shop_single').first().attr('src') : $('.single-product-main-image img').first().attr('src');
            windowLocation = window.location.href.replace(window.location.hash, '');
            window.open('http://pinterest.com/pin/create/button/?url=' + windowLocation + '&media=' + $imgToShare + '&description=' + $('h1.product_title').text(), "pinterestWindow", "height=640,width=660,resizable=0,toolbar=0,menubar=0,status=0,location=0,scrollbars=0")
            return false;
        }

        function socialFade() {
            if (completed == $('a.nectar-sharing').length && $('a.nectar-sharing').parent().hasClass('in-sight')) {
                $('.nectar-social .nectar-love span').show(350, 'easeOutSine', function() {
                    $(this).stop().animate({
                        'opacity': 1
                    }, 800);
                });
                $('.nectar-social > a').each(function(i) {
                    var $that = $(this);
                    $(this).find('> span').show(350, 'easeOutSine', function() {
                        $that.find('> span').stop().animate({
                            'opacity': 1
                        }, 800);
                    });
                });
                var $totalShares = 0;
                $('.nectar-social > a .count').each(function() {
                    $totalShares += parseInt($(this).html());
                });
                if ($totalShares != 1) {
                    $('.single .meta-share-count .plural').css({
                        'opacity': '1',
                        'display': 'inline'
                    });
                    $('.single .meta-share-count .singular').remove();
                } else {
                    $('.single .meta-share-count .singular').css({
                        'opacity': '1',
                        'position': 'relative',
                        'display': 'inline'
                    });
                    $('.single .meta-share-count .plural').remove();
                }
                $('.meta-share-count .share-count-total').html($totalShares).css('opacity', 1);
            }
        }
        $('body').on('click', '#single-below-header .nectar-social a', function() {
            return false;
        });
        $('body').on('click', '.facebook-share:not(.inactive)', facebookShare);
        $('body').on('click', '.google-plus-share:not(.inactive)', googlePlusShare);
        $('body').on('click', '.nectar-social:not(".woo") .twitter-share:not(.inactive)', twitterShare);
        $('body').on('click', '.nectar-social.woo .twitter-share', wooTwitterShare);
        $('body').on('click', '.nectar-social:not(".woo") .linkedin-share:not(.inactive)', linkedInShare);
        $('body').on('click', '.nectar-social.woo .linkedin-share', woolinkedInShare);
        $('body').on('click', '.nectar-social:not(".woo") .pinterest-share:not(.inactive)', pinterestShare);
        $('body').on('click', '.nectar-social.woo .pinterest-share', wooPinterestShare);
        $('body').on('click', '.nectar-social-sharing-fixed > a', function() {
            return false;
        });

        function socialSharingInit() {
            if ($('body').hasClass('mobile') && $('.single-post .fullscreen-header').length > 0) {
                $('#single-below-header .nectar-social .nectar-sharing, #single-below-header .nectar-social .nectar-sharing-alt').addClass('inactive');
            }
            completed = 0;
            if ($('a.facebook-share').length > 0 || $('a.twitter-share').length > 0 || $('a.google-plus-share').length > 0 || $('a.linkedin-share').length > 0 || $('a.pinterest-share').length > 0) {
                if ($('a.facebook-share:not(.sharing-default-minimal a.facebook-share)').length > 0 && $('body[data-button-style="rounded"]').length == 0 || $('#project-meta a.facebook-share').length > 0 || $('#single-meta a.facebook-share').length > 0 || $('#single-below-header .facebook-share').length > 0) {
                    $.getJSON("https://graph.facebook.com/?id=" + windowLocation + "&callback=?", function(data) {
                        if (data.share != undefined && data.share.share_count != undefined && data.share.share_count != 0 && (data.share.share_count != null)) {
                            $('.facebook-share a span.count, a.facebook-share span.count').html(data.share.share_count);
                        } else {
                            $('.facebook-share a span.count, a.facebook-share span.count').html(0);
                        }
                        completed++;
                        socialFade();
                    });
                } else if ($('a.facebook-share').length > 0 && $('body[data-button-style="rounded"]').length > 0 || $('.sharing-default-minimal a.facebook-share').length > 0) {
                    completed++;
                    socialFade();
                }
                if ($('a.twitter-share:not(.sharing-default-minimal a.twitter-share)').length > 0 && $('body[data-button-style="rounded"]').length == 0 || $('#project-meta a.twitter-share').length > 0 || $('#single-meta a.twitter-share').length > 0 || $('#single-below-header .twitter-share').length > 0) {
                    $('.twitter-share a span.count, a.twitter-share span.count').html(0);
                    completed++;
                    socialFade();
                } else if ($('a.twitter-share').length > 0 && $('body[data-button-style="rounded"]').length > 0 || $('.sharing-default-minimal a.twitter-share').length > 0) {
                    completed++;
                    socialFade();
                }
                if ($('a.linkedin-share:not(.sharing-default-minimal a.linkedin-share)').length > 0 && $('body[data-button-style="rounded"]').length == 0 || $('#project-meta a.linkedin-share').length > 0 || $('#single-meta a.linkedin-share').length > 0 || $('#single-below-header .linkedin-share').length > 0) {
                    $('.linkedin-share a span.count, a.linkedin-share span.count').html(0);
                    completed++;
                    socialFade();
                } else if ($('a.linkedin-share').length > 0 && $('body[data-button-style="rounded"]').length > 0 || $('.sharing-default-minimal a.linkedin-share').length > 0) {
                    completed++;
                    socialFade();
                }
                if ($('a.pinterest-share:not(.sharing-default-minimal a.pinterest-share)').length > 0 && $('body[data-button-style="rounded"]').length == 0 || $('#project-meta a.pinterest-share').length > 0 || $('#single-meta a.pinterest-share').length > 0 || $('#single-below-header .pinterest-share').length > 0) {
                    $.getJSON('https://api.pinterest.com/v1/urls/count.json?url=' + windowLocation + '&callback=?', function(data) {
                        if ((data.count != 0) && (data.count != undefined) && (data.count != null)) {
                            $('.pinterest-share a span.count, a.pinterest-share span.count').html(data.count);
                        } else {
                            $('.pinterest-share a span.count, a.pinterest-share span.count').html(0);
                        }
                        completed++;
                        socialFade();
                    });
                } else if ($('a.pinterest-share').length > 0 && $('body[data-button-style="rounded"]').length > 0 || $('.sharing-default-minimal a.pinterest-share').length > 0) {
                    completed++;
                    socialFade();
                }
                $('a.nectar-sharing > span.count, a.nectar-sharing-alt > span.count').hide().css('width', 'auto');
                $('.nectar-social').each(function() {
                    if ($(this).parents('.custom-content').length == 0 && $(this).parents('.nectar-social-sharing-fixed').length == 0) {
                        var $that = $(this);
                        var waypoint = new Waypoint({
                            element: $that,
                            handler: function(direction) {
                                $slide_timeout = ($('#page-header-bg[data-animate-in-effect="slide-down"] .nectar-social').length > 0) ? 900 : 1;
                                setTimeout(function() {
                                    $that.addClass('in-sight');
                                    socialFade();
                                    if ($('#page-header-bg .nectar-social').length == 0) {
                                        $that.find('> *').each(function(i) {
                                            var $that = $(this);
                                            var $timeout = ($('body[data-button-style="rounded"]').length > 0) ? 0 : 750;
                                            setTimeout(function() {
                                                $that.delay(i * 80).queue(function() {
                                                    var $that = $(this);
                                                    $(this).addClass('hovered');
                                                    setTimeout(function() {
                                                        $that.removeClass('hovered');
                                                    }, 300);
                                                });
                                            }, $timeout);
                                        });
                                    }
                                }, $slide_timeout);
                                $that.addClass('animated-in');
                                waypoint.destroy();
                            },
                            offset: 'bottom-in-view'
                        });
                    }
                });
            }
        }
        socialSharingInit();
        if (!navigator.userAgent.match(/(Android|iPod|iPhone|iPad|BlackBerry|IEMobile|Opera Mini)/)) {
            var $socialTimeout;
            $('body').on('mouseenter', '#single-meta .meta-share-count, #project-meta .meta-share-count', function() {
                clearTimeout($socialTimeout);
                if ($(this).parents('[id*="single-meta"]').length > 0 && $('[data-tab-pos="fullwidth"]').length == 0)
                    $(this).find('.nectar-social').show().stop(true).animate({
                        'opacity': 1,
                        'right': '0px'
                    }, 0);
                else
                    $(this).find('.nectar-social').show().stop(true).animate({
                        'opacity': 1,
                        'left': '0px'
                    }, 0);
                $(this).parents('[id*="-meta"]').addClass('social-hovered');
                $(this).parents('[id*="-meta"]').find('.n-shortcode a, .meta-comment-count a, .meta-share-count > a ').stop(true).animate({
                    'opacity': 0
                }, 250);
                $(this).find('.nectar-social a').each(function(i) {
                    $(this).stop(true).delay(i * 40).animate({
                        'opacity': 1,
                        'left': '0px'
                    }, 150);
                });
            });
            $('body').on('mouseleave', '#single-meta .meta-share-count, #project-meta .meta-share-count', function() {
                $(this).parents('[id*="-meta"]').removeClass('social-hovered');
                if ($(this).parents('[id*="single-meta"]').length > 0 && $('[data-tab-pos="fullwidth"]').length == 0)
                    $(this).find('.nectar-social').stop(true).animate({
                        'opacity': 0,
                        'right': '-20px'
                    }, 200);
                else
                    $(this).find('.nectar-social').stop(true).animate({
                        'opacity': 0,
                        'left': '-20px'
                    }, 200);
                $(this).parents('[id*="-meta"]').find('.n-shortcode a, .meta-comment-count a, .meta-share-count > a ').stop(true).animate({
                    'opacity': 1
                }, 250);
                var $that = $(this);
                $socialTimeout = setTimeout(function() {
                    $that.find('.nectar-social').hide();
                    if ($that.parents('[id*="single-meta"]').length > 0 && $('[data-tab-pos="fullwidth"]').length == 0)
                        $that.find('.nectar-social a').stop(true).animate({
                            'opacity': 0,
                            'left': '20px'
                        }, 0);
                    else
                        $that.find('.nectar-social a').stop(true).animate({
                            'opacity': 0,
                            'left': '-20px'
                        }, 0);
                }, 200);
            });
        } else {
            var $socialTimeout;
            $('body').on('click', '#single-meta .meta-share-count, #project-meta .meta-share-count', function() {
                clearTimeout($socialTimeout);
                if ($(this).parents('[id*="single-meta"]').length > 0 && $('[data-tab-pos="fullwidth"]').length == 0)
                    $(this).find('.nectar-social').show().stop(true).animate({
                        'opacity': 1,
                        'right': '0px'
                    }, 0);
                else
                    $(this).find('.nectar-social').show().stop(true).animate({
                        'opacity': 1,
                        'left': '0px'
                    }, 0);
                $(this).parents('[id*="-meta"]').addClass('social-hovered');
                $(this).parents('[id*="-meta"]').find('.n-shortcode a, .meta-comment-count a, .meta-share-count > a ').stop(true).animate({
                    'opacity': 0
                }, 250);
                $(this).find('.nectar-social a').each(function(i) {
                    $(this).stop(true).delay(i * 40).animate({
                        'opacity': 1,
                        'left': '0px'
                    }, 150);
                });
                return false;
            });
        }
        $('body').on('mouseenter', '.fullscreen-header  .meta-share-count', function() {
            $(this).find('> a, > i').stop(true).animate({
                'opacity': 0
            }, 400);
            $(this).find('.nectar-social > *').each(function(i) {
                $(this).stop(true).delay(i * 50).animate({
                    'opacity': '1',
                    'top': '0px'
                }, 250, 'easeOutCubic');
            });
            setTimeout(function() {
                $('.meta-share-count .nectar-sharing, .meta-share-count .nectar-sharing-alt').removeClass('inactive');
            }, 300);
        });
        if (!navigator.userAgent.match(/(Android|iPod|iPhone|iPad|BlackBerry|IEMobile|Opera Mini)/)) {
            $('body').on('mouseleave', '.fullscreen-header  .meta-share-count', function() {
                $(this).find('> a, > i').stop(true).animate({
                    'opacity': 1
                }, 300, 'easeInCubic');
                $(this).find('.nectar-social > *').each(function(i) {
                    $(this).stop(true).animate({
                        'opacity': '0',
                        'top': '10px'
                    }, 200, 'easeInCubic');
                });
            });
        }

        function nectarLoveFWCenter() {
            $('.nectar-social.full-width').each(function() {
                $(this).find('.n-shortcode .nectar-love').css('padding-top', $(this).find('> a').css('padding-top'));
            });
        }
        nectarLoveFWCenter();
        $('.fullscreen-header .nectar-love').each(function() {
            if ($(this).find('.nectar-love-count').text() == '1') {
                $(this).find('span.love-txt.single').css({
                    'visibility': 'visible',
                    'text-indent': '0'
                });
                $(this).find('span.love-txt.plural').css({
                    'visibility': 'hidden',
                    'text-indent': '-9999px'
                });
            } else {
                $(this).find('span.love-txt.single').css({
                    'visibility': 'hidden',
                    'text-indent': '-9999px'
                });
                $(this).find('span.love-txt.plural').css({
                    'visibility': 'visible',
                    'text-indent': '0'
                });
            }
        });
        $('body').on('click', '.nectar-love', function() {
            var $loveLink = $(this);
            var $id = $(this).attr('id');
            var $that = $(this);
            if ($loveLink.hasClass('loved')) return false;
            if ($(this).hasClass('inactive')) return false;
            var $dataToPass = {
                action: 'nectar-love',
                loves_id: $id,
                love_nonce: nectarLove.loveNonce
            }
            $.post(nectarLove.ajaxurl, $dataToPass, function(data) {
                $loveLink.find('span:not(.love-txt)').html(data);
                $loveLink.addClass('loved').attr('title', 'You already love this!');
                $loveLink.find('span:not(.love-txt)').css({
                    'opacity': 1,
                    'width': 'auto'
                });
                if ($(data).text() == '1') {
                    $loveLink.find('span.love-txt.single').css({
                        'visibility': 'visible',
                        'text-indent': '0'
                    });
                    $loveLink.find('span.love-txt.plural').css({
                        'visibility': 'hidden',
                        'text-indent': '-9999px'
                    });
                } else {
                    $loveLink.find('span.love-txt.single').css({
                        'visibility': 'hidden',
                        'text-indent': '-9999px'
                    });
                    $loveLink.find('span.love-txt.plural').css({
                        'visibility': 'visible',
                        'text-indent': '0'
                    });
                }
                if ($('body').hasClass('ascend') && $that.parents('.classic_enhanced').length == 0) {
                    $that.find('.icon-salient-heart-2').addClass('loved');
                } else if ($that.parents('.classic_enhanced').length > 0) {
                    $that.find('.icon-salient-heart-2').addClass('loved');
                }
            });
            $(this).addClass('inactive');
            return false;
        });

        function infiniteScrollInit() {
            if ($('.infinite_scroll').length > 0) {
                $('.portfolio-items.infinite_scroll').infinitescroll({
                    navSelector: "div#pagination",
                    nextSelector: "div#pagination a:first",
                    itemSelector: ".portfolio-items.infinite_scroll .element",
                    finishedMsg: "<em>Congratulations, you've reached the end of the internet.</em>",
                    msgText: " ",
                }, function(newElements) {
                    var $container = $('.portfolio-items.infinite_scroll:not(.carousel)');
                    var $newElems = $(newElements).css('opacity', 0);
                    $newElems.imagesLoaded(function() {
                        $(newElements).css('opacity', 1);
                        $container.isotope('appended', $(newElements));
                        $(newElements).find('.work-item').addClass('ajax-loaded');
                        $(newElements).addClass('ajax-loaded');
                        $(newElements).find('.work-meta, .nectar-love-wrap').css({
                            'opacity': 1
                        });
                        if ($('.portfolio-filters-inline').length > 0 || $('.portfolio-filters').length > 0) {
                            if ($('.portfolio-filters-inline').length > 0) {
                                var selector = $('.portfolio-filters-inline a.active').attr('data-filter');
                            } else {
                                var selector = $('.portfolio-filters a.active').attr('data-filter');
                            }
                            $('.portfolio-filters-inline a.active').attr('data-filter');
                            $container.isotope({
                                filter: selector
                            });
                        }
                        reLayout();
                        if ($(newElements).find('.work-item.style-5').length > 0) style6Img();
                        if ($(newElements).find('.inner-wrap').attr('data-animation') == 'none') {
                            $('.portfolio-items .col .inner-wrap').removeClass('animated');
                        } else {
                            masonryZindex();
                            $(newElements).each(function(i) {
                                var $that = $(this);
                                var waypoint = new Waypoint({
                                    element: $that,
                                    handler: function(direction) {
                                        var $portfolioAnimationDelay = ($that.is('[data-masonry-type="photography"].masonry-items')) ? 85 : 115;
                                        setTimeout(function() {
                                            $that.addClass("animated-in");
                                        }, $portfolioAnimationDelay * $that.attr('data-delay-amount'));
                                        waypoint.destroy();
                                    },
                                    offset: $portfolioOffsetPos
                                });
                            });
                        }
                        portfolioHoverEffects();
                        portfolioAccentColor();
                        if ($smoothCache == true && $(window).width() > 690 && $('body').outerHeight(true) > $(window).height() && Modernizr.csstransforms3d && !navigator.userAgent.match(/(Android|iPod|iPhone|iPad|IEMobile|Opera Mini)/)) {
                            niceScrollInit();
                            $(window).trigger('resize')
                        }
                        $('.portfolio-items').each(function() {
                            var $unique_id = Math.floor(Math.random() * 10000);
                            $(this).find('a[rel^="prettyPhoto"], a.pretty_photo').attr('rel', 'prettyPhoto[' + $unique_id + '_gal]').removeClass('pretty_photo');
                        });
                        lightBoxInit();
                        piVertCenter();
                        setTimeout(function() {
                            masonryZindex();
                            reLayout();
                            $(newElements).removeClass('ajax-loaded');
                        }, 700);
                        isotopeCatSelection();
                        parallaxRowsBGCals();
                    });
                });
                $('.post-area.infinite_scroll .posts-container').infinitescroll({
                    navSelector: "div#pagination",
                    nextSelector: "div#pagination a:first",
                    itemSelector: ".post-area .posts-container .post",
                    finishedMsg: "<em>Congratulations, you've reached the end of the internet.</em>",
                    msgText: " "
                }, function(newElements) {
                    if ($('.masonry.meta_overlaid').length == 0) {
                        centerLove();
                        $(newElements).find('.flex-gallery').each(function() {
                            var $that = $(this);
                            $that.flexslider({
                                animation: 'fade',
                                smoothHeight: false,
                                animationSpeed: 500,
                                useCSS: false,
                                touch: true
                            });
                            $('.flex-gallery .flex-direction-nav li a.flex-next').html('<i class="fa fa-angle-right"></i>');
                            $('.flex-gallery .flex-direction-nav li a.flex-prev').html('<i class="fa fa-angle-left"></i>');
                        });
                        if ($().mediaelementplayer) $(newElements).find('.wp-audio-shortcode, .wp-video-shortcode').mediaelementplayer();
                        lightBoxInit();
                        if ($('.carousel').length > 0) {
                            standardCarouselInit();
                        }
                        $(newElements).find('.nectar-milestone').each(function() {
                            if ($(this).has('[data-symbol]')) {
                                if ($(this).attr('data-symbol-pos') == 'before') {
                                    $(this).find('.number').prepend($(this).attr('data-symbol'));
                                } else {
                                    $(this).find('.number').append($(this).attr('data-symbol'));
                                }
                            }
                        });
                        if (!$('body').hasClass('mobile')) {
                            $(newElements).find('.nectar-milestone').each(function() {
                                var $that = $(this);
                                var waypoint = new Waypoint({
                                    element: $that,
                                    handler: function(direction) {
                                        if ($that.parents('.wpb_tab').length > 0 && $that.parents('.wpb_tab').css('visibility') == 'hidden' || $that.hasClass('animated-in')) {
                                            waypoint.destroy();
                                            return;
                                        }
                                        var $endNum = parseInt($that.find('.number span').text());
                                        var countOptions = {
                                            easingFn: easeOutCubic
                                        };
                                        var $countEle = $that.find('.number span:not(.symbol)')[0];
                                        var numAnim = new CountUp($countEle, 0, $endNum, 0, 2.2, countOptions);
                                        numAnim.start();
                                        $that.addClass('animated-in');
                                        waypoint.destroy();
                                    },
                                    offset: 'bottom-in-view'
                                });
                            });
                        }
                        if ($().vcChat) $(newElements).find('.vc_pie_chart').vcChat();
                        nectar_fancy_ul_init();
                        $('.testimonial_slider').animate({
                            'opacity': '1'
                        }, 800);
                        createTestimonialControls();
                        testimonialSliderHeight();
                        testimonialHeightResize();
                        $(newElements).find('.nectar-progress-bar').each(function(i) {
                            var $that = $(this);
                            var waypoint = new Waypoint({
                                element: $that,
                                handler: function(direction) {
                                    if ($that.parents('.wpb_tab').length > 0 && $that.parents('.wpb_tab').css('visibility') == 'hidden' || $that.hasClass('animated-in')) {
                                        waypoint.destroy();
                                        return;
                                    }
                                    var percent = $that.find('span').attr('data-width');
                                    var $endNum = parseInt($that.find('span strong i').text());
                                    $that.find('span').transition({
                                        'width': percent + '%'
                                    }, 1600, 'easeInOutCirc', function() {});
                                    $that.find('span strong').transition({
                                        'opacity': 1
                                    }, 1350);
                                    var countOptions = {
                                        useEasing: false
                                    };
                                    var $countEle = $that.find('span strong i')[0];
                                    var numAnim = new CountUp($countEle, 0, $endNum, 0, 1.2, countOptions);
                                    numAnim.start();
                                    if (percent == '100') {
                                        $that.find('span strong').addClass('full');
                                    }
                                    $that.addClass('animated-in');
                                    waypoint.destroy();
                                },
                                offset: 'bottom-in-view'
                            });
                        });
                        colAndImgAnimations();
                        splitLineHeadings();
                        setTimeout(function() {
                            videoshortcodeSize();
                            responsiveVideoIframesInit();
                            responsiveVideoIframes();
                            $(window).trigger('resize');
                        }, 500);
                        parallaxRowsBGCals();
                        $(window).trigger('resize');
                    } else {
                        parallaxRowsBGCals();
                        $(window).trigger('resize');
                    }
                    var $container = $('.posts-container');
                    if ($container.parent().hasClass('masonry')) {
                        $(newElements).addClass('masonry-blog-item');
                        $(newElements).prepend('<span class="bottom-line"></span>');
                        $(newElements).each(function() {
                            var $metaClone = $(this).find('.post-meta').clone();
                            $(this).find('.post-meta').remove();
                            if ($('.post-area.meta_overlaid').length > 0) {
                                $(this).find('.post-header h2').after($metaClone);
                            } else {
                                $(this).find('.content-inner').after($metaClone);
                            }
                        });
                    }
                    var $newElems = $(newElements);
                    if ($newElems.find('img').length == 0) $newElems = $('body');
                    $newElems.imagesLoaded(function() {
                        if ($container.parent().hasClass('masonry')) {
                            $container.isotope('appended', $(newElements));
                        }
                        flickityBlogInit();
                        $(newElements).addClass('ajax-loaded');
                        if ($container.parent().hasClass('classic_enhanced')) {
                            $container.find('.large_featured.has-post-thumbnail.ajax-loaded .post-featured-img, .wide_tall.has-post-thumbnail.ajax-loaded .post-featured-img').each(function() {
                                var $src = $(this).find('img').attr('src');
                                $(this).css('background-image', 'url(' + $src + ')');
                            });
                            $container.find('.large_featured.ajax-loaded .nectar-flickity, .wide_tall.ajax-loaded .nectar-flickity').each(function() {
                                $(this).find('.cell').each(function() {
                                    var $src = $(this).find('img').attr('src');
                                    $(this).css('background-image', 'url(' + $src + ')');
                                });
                            });
                        }
                        if ($(newElements).parents('.posts-container').attr('data-animation') == 'none') {
                            $(newElements).find('.inner-wrap').removeClass('animated');
                        } else {
                            blogMasonryZindex();
                            $(newElements).each(function(i) {
                                var $that = $(this);
                                var waypoint = new Waypoint({
                                    element: $that,
                                    handler: function(direction) {
                                        setTimeout(function() {
                                            $that.addClass("animated-in");
                                        }, 80 * $that.attr('data-delay-amount'));
                                        waypoint.destroy();
                                    },
                                    offset: '90%'
                                });
                            });
                        }
                        setTimeout(function() {
                            $(newElements).removeClass('ajax-loaded');
                        }, 700);
                    });
                });
            }
        }
        infiniteScrollInit();

        function destroyInfiniteScroll() {
            $('.post-area.infinite_scroll .posts-container').infinitescroll('destroy');
            $('.portfolio-items.infinite_scroll').infinitescroll('destroy');
        }
        var $scrollTop = $(window).scrollTop();

        function toTopBind() {
            if ($('#to-top').length > 0 && $(window).width() > 1020 || $('#to-top').length > 0 && $('#to-top.mobile-enabled').length > 0) {
                if ($scrollTop > 350) {
                    $(window).on('scroll', hideToTop);
                } else {
                    $(window).on('scroll', showToTop);
                }
            }
        }
        if ($('.nectar-social-sharing-fixed').length == 0) {
            toTopBind();
        } else {
            if ($(window).width() < 1000 && $('body.single').length > 0) {
                if ($scrollTop > 150) {
                    $(window).on('scroll', hideFixedSharing);
                } else {
                    $(window).on('scroll', showFixedSharing);
                }
            }
            $(window).smartresize(function() {
                if ($(window).width() > 1000) {
                    $('.nectar-social-sharing-fixed').addClass('visible');
                } else if ($scrollTop < 150) {
                    $(window).off('scroll', hideFixedSharing);
                    $(window).on('scroll', showFixedSharing);
                    $('.nectar-social-sharing-fixed').removeClass('visible');
                } else {
                    $(window).off('scroll', showFixedSharing);
                    $(window).on('scroll', hideFixedSharing);
                }
            });
        }

        function showFixedSharing() {
            $scrollTop = $(window).scrollTop();
            if ($scrollTop > 150) {
                $('.nectar-social-sharing-fixed').addClass('visible');
                $(window).off('scroll', showFixedSharing);
                $(window).on('scroll', hideFixedSharing);
            }
        }

        function hideFixedSharing() {
            $scrollTop = $(window).scrollTop();
            if ($scrollTop < 150) {
                $('.nectar-social-sharing-fixed').removeClass('visible');
                $(window).off('scroll', hideFixedSharing);
                $(window).on('scroll', showFixedSharing);
            }
        }

        function showToTop() {
            if ($scrollTop > 350 && $('#slide-out-widget-area.fullscreen.open').length == 0) {
                $('#to-top').stop().transition({
                    'bottom': '17px'
                }, 350, 'easeInOutCubic');
                $(window).off('scroll', showToTop);
                $(window).on('scroll', hideToTop);
            }
        }

        function hideToTop() {
            if ($scrollTop < 350 || $('#slide-out-widget-area.fullscreen.open').length > 0) {
                $animationTiming = ($('#slide-out-widget-area.fullscreen.open').length > 0) ? 1150 : 350;
                $('#to-top').stop().transition({
                    'bottom': '-30px'
                }, $animationTiming, 'easeInOutQuint');
                $(window).off('scroll', hideToTop);
                $(window).on('scroll', showToTop);
            }
        }
        if ($('#to-top').length > 0) {
            var $windowHeight, $pageHeight, $footerHeight, $ctaHeight;

            function calcToTopColor() {
                $scrollTop = $(window).scrollTop();
                $windowHeight = $(window).height();
                $pageHeight = $('body').height();
                $footerHeight = $('#footer-outer').height();
                $ctaHeight = ($('#call-to-action').length > 0) ? $('#call-to-action').height() : 0;
                if (($scrollTop - 35 + $windowHeight) >= ($pageHeight - $footerHeight) && $('#boxed').length == 0) {
                    $('#to-top').addClass('dark');
                } else {
                    $('#to-top').removeClass('dark');
                }
            }
            if (!nectarDOMInfo.usingMobileBrowser) {
                $(window).scroll(calcToTopColor);
                $(window).resize(calcToTopColor);
            }
        }
        if ($('body[data-button-style*="rounded"]').length > 0) {
            var $clone = $('#to-top .fa-angle-up').clone();
            $clone.addClass('top-icon');
            $('#to-top').prepend($clone)
        }
        $('body').on('click', '#to-top, a[href="#top"]', function() {
            $('body,html').stop().animate({
                scrollTop: 0
            }, 800, 'easeOutQuad', function() {
                if ($('.nectar-box-roll').length > 0) {
                    $('body').trigger('mousewheel', [1, 0, 0]);
                }
            })
            return false;
        });

        function scrollSpyInit() {
            var $headerNavSpace = ($('body[data-header-format="left-header"]').length > 0 && $(window).width() > 1000) ? 0 : $('#header-outer').outerHeight();
            if ($('.page-template-template-no-header-footer').length > 0 || $('.page-template-template-no-header').length > 0) {
                $headerNavSpace = 0;
            }
            $('header#top .sf-menu li a[href="#"]').on('click', function(e) {
                e.preventDefault();
            });
            if ($('#slide-out-widget-area .off-canvas-menu-container').length > 0) {
                $('#slide-out-widget-area .off-canvas-menu-container').find("a[href*='" + location.pathname + "']").each(function() {
                    var $href = $(this).attr('href');
                    if ($href != '#' && $href.indexOf("#") != -1 && $('div' + $href.substr($href.indexOf("#"))).length > 0) {
                        $(this).attr('href', $href.substr($href.indexOf("#")));
                        $(this).parent().removeClass('current_page_item').removeClass('current-menu-item');
                    }
                    if ($('div[data-fullscreen-anchor-id="' + $href.substr($href.indexOf("#") + 1) + '"]').length > 0) {
                        $(this).parent().removeClass('current_page_item').removeClass('current-menu-item');
                    }
                });
            }
            $("#header-outer").find("a[href*='" + location.pathname + "']").each(function() {
                var $href = $(this).attr('href');
                if ($href.indexOf("#") != -1 && $('div' + $href.substr($href.indexOf("#"))).length > 0) {
                    $(this).attr('href', $href.substr($href.indexOf("#")));
                    $(this).parent().removeClass('current_page_item').removeClass('current-menu-item');
                }
                if ($('div[data-fullscreen-anchor-id="' + $href.substr($href.indexOf("#") + 1) + '"]').length > 0) {
                    $(this).parent().removeClass('current_page_item').removeClass('current-menu-item');
                }
            });
            $target = ($('.page-submenu[data-sticky="true"]').length == 0) ? '#header-outer nav' : '.page-submenu';
            $('body').scrollspy({
                target: $target,
                offset: $headerNavSpace + nectarDOMInfo.adminBarHeight + 40
            });
        }

        function nectar_scrollToY(scrollTargetY, speed, easing) {
            var scrollY = window.scrollY || document.documentElement.scrollTop,
                scrollTargetY = scrollTargetY || 0,
                speed = speed || 2000,
                easing = easing || 'easeOutSine',
                currentTime = 0;
            var time = Math.max(.1, Math.min(Math.abs(scrollY - scrollTargetY) / speed, .8));
            var easingEquations = {
                easeInOutQuint: function(pos) {
                    if ((pos /= 0.5) < 1) {
                        return 0.5 * Math.pow(pos, 5);
                    }
                    return 0.5 * (Math.pow((pos - 2), 5) + 2);
                }
            };

            function tick() {
                currentTime += 1 / 60;
                var p = currentTime / time;
                var t = easingEquations[easing](p);
                if (p < 1) {
                    requestAnimationFrame(tick);
                    window.scrollTo(0, scrollY + ((scrollTargetY - scrollY) * t));
                } else {
                    window.scrollTo(0, scrollTargetY);
                }
            }
            tick();
        }

        function pageLoadHash() {
            var $hash = window.location.hash;
            var $hashSubstrng = ($hash && $hash.length > 0) ? $hash.substring(1, $hash.length) : 0;
            var $hasSlashLength = 0;
            if ($hashSubstrng) {
                $hasSlashLength = $hashSubstrng.split("/");
                $hasSlashLength = $hasSlashLength.length;
            }
            if ($hashSubstrng && $hasSlashLength > 1) {
                $hashSubstrng = $hashSubstrng.replace(/\//g, "");
                $hash = $hash.replace(/\//g, "");
            }
            if ($hash && $('.main-content').find($hash).length > 0 || $hash && $('.main-content').find('[data-fullscreen-anchor-id="' + $hashSubstrng + '"]').length > 0) {
                var $hashObj = ($('.main-content').find($hash).length > 0) ? $('.main-content').find($hash) : $('.main-content').find('[data-fullscreen-anchor-id="' + $hashSubstrng + '"]');
                var $headerNavSpace = ($('body[data-header-format="left-header"]').length > 0 && $(window).width() > 1000) ? 0 : $('#header-space').outerHeight();
                if ($('.page-template-template-no-header-footer').length > 0 || $('.page-template-template-no-header').length > 0) {
                    $headerNavSpace = 0;
                }
                $timeoutVar = 0;
                if ($('.nectar-box-roll').length > 0 && $('.container-wrap.bottomBoxOut').length > 0) {
                    boxRoll(null, -1);
                    $timeoutVar = 2050;
                }
                setTimeout(function() {
                    if ($('body[data-permanent-transparent="1"]').length == 0) {
                        if (!$('body').hasClass('mobile')) {
                            $resize = ($('#header-outer[data-header-resize="0"]').length > 0) ? 0 : parseInt(shrinkNum) + headerPadding2 * 2;
                            if ($('#header-outer[data-remove-fixed="1"]').length > 0) {
                                $headerNavSpace = 0;
                            }
                            var $scrollTopDistance = $hashObj.offset().top - parseInt($headerNavSpace) + $resize + 3 - nectarDOMInfo.adminBarHeight;
                            if ($('body.mobile').length == 0 && $('#header-outer[data-condense="true"]').length > 0) {
                                var $headerSpan9 = $('#header-outer[data-format="centered-menu-bottom-bar"] header#top .span_9');
                                var $secondaryHeader = $('#header-secondary-outer');
                                var $headerHeightStored = $('#header-outer').height();
                                $headerHeightCondensed = $headerHeightStored - (parseInt($headerSpan9.height()) + parseInt($('#header-outer #logo').css('margin-top')));
                                $scrollTopDistance = $hashObj.offset().top - parseInt($headerNavSpace) + $headerHeightCondensed - nectarDOMInfo.adminBarHeight;
                            }
                        } else {
                            var $scrollTopDistance = ($('#header-outer[data-mobile-fixed="1"]').length > 0) ? $hashObj.offset().top + 2 - $headerNavSpace + nectarDOMInfo.adminBarHeight : $hashObj.offset().top - nectarDOMInfo.adminBarHeight + 1;
                        }
                    } else {
                        var $scrollTopDistance = $hashObj.offset().top - nectarDOMInfo.adminBarHeight + 1;
                    }
                    if ($('body[data-hhun="1"]').length > 0 && $('#header-outer[data-remove-fixed="1"]').length == 0) {
                        if ($('#header-outer.detached').length == 0)
                            $scrollTopDistance = $scrollTopDistance + $headerNavSpace;
                    }
                    var $pageSubMenu = ($('.page-submenu[data-sticky="true"]').length > 0) ? $('.page-submenu').height() : 0;
                    if ($('body.material').length > 0 && $('#header-secondary-outer').length > 0 && $('body[data-hhun="1"]').length == 0 && $('#header-outer[data-remove-fixed="1"]').length == 0 && !$('body').hasClass('mobile')) {
                        var $headerSecondary = $('#header-secondary-outer').height();
                    } else {
                        var $headerSecondary = 0;
                    }
                    nectar_scrollToY($scrollTopDistance - $pageSubMenu + $headerSecondary, 700, 'easeInOutQuint');
                }, $timeoutVar);
            }
        }
        if ($('body[data-animated-anchors="true"]').length > 0 || $('.single-product [data-gallery-style="left_thumb_sticky"]').length > 0) {
            + function(t) {
                "use strict";

                function s(e, i) {
                    var r = t.proxy(this.process, this);
                    this.$body = t("body"), this.$scrollElement = t(t(e).is("body") ? window : e), this.options = t.extend({}, s.DEFAULTS, i), this.selector = (this.options.target || "") + " ul li > a", this.offsets = [], this.targets = [], this.activeTarget = null, this.scrollHeight = 0, this.$scrollElement.on("scroll.bs.scrollspy", r), this.refresh(), this.process()
                }

                function e(e) {
                    return this.each(function() {
                        var i = t(this),
                            r = i.data("bs.scrollspy"),
                            o = "object" == typeof e && e;
                        r || i.data("bs.scrollspy", r = new s(this, o)), "string" == typeof e && r[e]()
                    })
                }
                s.VERSION = "3.2.0", s.DEFAULTS = {
                    offset: 10
                }, s.prototype.getScrollHeight = function() {
                    return this.$scrollElement[0].scrollHeight || Math.max(this.$body[0].scrollHeight, document.documentElement.scrollHeight)
                }, s.prototype.refresh = function() {
                    var s = "offset",
                        e = 0;
                    t.isWindow(this.$scrollElement[0]) || (s = "position", e = this.$scrollElement.scrollTop()), this.offsets = [], this.targets = [], this.scrollHeight = this.getScrollHeight();
                    var i = this;
                    this.$body.find(this.selector).map(function() {
                        var i = t(this),
                            r = i.data("target") || i.attr("href"),
                            o = /^#./.test(r) && t(r);
                        return o && o.length && o.is(":visible") && [
                            [o[s]().top + e, r]
                        ] || null
                    }).sort(function(t, s) {
                        return t[0] - s[0]
                    }).each(function() {
                        i.offsets.push(this[0]), i.targets.push(this[1])
                    })
                }, s.prototype.process = function() {
                    var $pageSubMenu = ($('.page-submenu[data-sticky="true"]').length > 0 && $('body[data-hhun="1"]').length == 0 || $('.page-submenu[data-sticky="true"]').length > 0 && $('#header-outer[data-remove-fixed="1"]').length > 0) ? $('.page-submenu').height() : 0;
                    var t, s = this.$scrollElement.scrollTop() + this.options.offset + $pageSubMenu,
                        e = this.getScrollHeight(),
                        i = this.options.offset + e - this.$scrollElement.height() - $pageSubMenu,
                        r = this.offsets,
                        o = this.targets,
                        l = this.activeTarget;
                    if (this.scrollHeight != e && this.refresh(), s >= i) return l != (t = o[o.length - 1]) && this.activate(t);
                    if (l && s <= r[0]) return l != (t = o[0]) && this.activate(t);
                    for (t = r.length; t--;) l != o[t] && s >= r[t] && (!r[t + 1] || s <= r[t + 1]) && this.activate(o[t])
                }, s.prototype.activate = function(s) {
                    this.activeTarget = s, t(this.selector).parentsUntil(this.options.target, ".current-menu-item").removeClass("current-menu-item").removeClass('sfHover');
                    var e = this.selector + '[data-target="' + s + '"],' + this.selector + '[href="' + s + '"]',
                        i = t(e).parents("li").addClass("current-menu-item");
                    i.parent(".dropdown-menu").length && (i = i.closest("li.dropdown").addClass("current-menu-item")), i.trigger("activate.bs.scrollspy")
                };
                var i = t.fn.scrollspy;
                t.fn.scrollspy = e, t.fn.scrollspy.Constructor = s, t.fn.scrollspy.noConflict = function() {
                    return t.fn.scrollspy = i, this
                }
            }(jQuery);
            var shrinkNum = 6;
            if ($('#header-outer[data-shrink-num]').length > 0) shrinkNum = $('#header-outer').attr('data-shrink-num');
            headerPadding2 = headerPadding - headerPadding / 1.8;
            setTimeout(scrollSpyInit, 200);
            var $animatedScrollingTimeout;
            $('body').on('click', '#header-outer nav .sf-menu a, #footer-outer .nectar-button, .container-wrap a:not(.wpb_tabs_nav a):not(.magnific):not([data-fancybox]):not(.woocommerce-tabs a):not(.testimonial-next-prev a), .swiper-slide .button a, #slide-out-widget-area a, #mobile-menu .container ul li a, #slide-out-widget-area .inner div a', function(e) {
                var $hash = $(this).prop("hash");
                $('body').addClass('animated-scrolling');
                clearTimeout($animatedScrollingTimeout);
                $animatedScrollingTimeout = setTimeout(function() {
                    $('body').removeClass('animated-scrolling');
                }, 850);
                var $headerNavSpace = ($('body[data-header-format="left-header"]').length > 0 && $(window).width() > 1000) ? 0 : $('#header-space').outerHeight();
                if ($('.page-template-template-no-header-footer').length > 0 || $('.page-template-template-no-header').length > 0) {
                    $headerNavSpace = 0;
                }
                if ($hash && $('body').find($hash).length > 0 && $hash != '#top' && $hash != '' && $(this).attr('href').indexOf(window.location.href.split("#")[0]) !== -1 || $(this).is('[href^="#"]') && $hash != '' && $('body').find($hash).length > 0 && $hash != '#top') {
                    if (!$(this).hasClass('skip-hash')) {
                        if (history.pushState) {
                            history.pushState(null, null, $hash);
                        } else {
                            location.hash = $hash;
                        }
                    }
                    if ($(this).parents('ul').length > 0) {
                        $(this).parents('ul').find('li').removeClass('current-menu-item');
                    }
                    if ($(this).parents('#slide-out-widget-area').length > 0) {
                        if ($('body.material[data-slide-out-widget-area-style="slide-out-from-right"].material-ocm-open').length > 0) {
                            $('body > .slide_out_area_close').addClass('non-human-allowed').trigger('click');
                            var $clickedLinkStore = $(this);
                            setTimeout(function() {
                                $clickedLinkStore.trigger('click');
                            }, 1000);
                        } else {
                            $('#slide-out-widget-area .slide_out_area_close').addClass('non-human-allowed').trigger('click');
                        }
                        setTimeout(function() {
                            if ($('body.material[data-slide-out-widget-area-style="slide-out-from-right"]').length > 0) {
                                $('body > .slide_out_area_close').removeClass('non-human-allowed');
                            } else {
                                $('#slide-out-widget-area .slide_out_area_close').removeClass('non-human-allowed');
                            }
                        }, 100);
                    }
                    if ($(this).parents('#mobile-menu').length > 0) $('#toggle-nav').trigger('click');
                    var $mobileMenuHeight = ($(this).parents('#mobile-menu').length > 0) ? $(this).parents('#mobile-menu').height() : null;
                    $timeoutVar = 1;
                    if ($('.nectar-box-roll').length > 0 && $('.container-wrap.bottomBoxOut').length > 0) {
                        boxRoll(null, -1);
                        $timeoutVar = 2050;
                    }
                    var $that = $(this);
                    setTimeout(function() {
                        var $headerSpace = ($('body[data-permanent-transparent="1"]').length > 0) ? 0 : parseInt($headerNavSpace);
                        if ($('body[data-permanent-transparent="1"]').length == 0) {
                            if (!$('body').hasClass('mobile')) {
                                $resize = ($('#header-outer[data-header-resize="0"]').length > 0) ? 0 : parseInt(shrinkNum) + headerPadding2 * 2;
                                if ($('#header-outer[data-remove-fixed="1"]').length > 0) {
                                    $headerNavSpace = 0;
                                }
                                var $scrollTopDistance = $($hash).offset().top - $mobileMenuHeight - parseInt($headerNavSpace) + $resize + 3 - nectarDOMInfo.adminBarHeight;
                                if ($('body.mobile').length == 0 && $('#header-outer[data-condense="true"]').length > 0) {
                                    var $headerSpan9 = $('#header-outer[data-format="centered-menu-bottom-bar"] header#top .span_9');
                                    var $secondaryHeader = $('#header-secondary-outer');
                                    var $headerHeightStored = $('#header-outer').height();
                                    $headerHeightCondensed = $headerHeightStored - (parseInt($headerSpan9.height()) + parseInt($('#header-outer #logo').css('margin-top')));
                                    $scrollTopDistance = $($hash).offset().top - parseInt($headerNavSpace) + $headerHeightCondensed - nectarDOMInfo.adminBarHeight;
                                }
                            } else {
                                var $scrollTopDistance = ($('#header-outer[data-mobile-fixed="1"]').length > 0) ? $($hash).offset().top + 2 - $headerNavSpace + nectarDOMInfo.adminBarHeight : $($hash).offset().top - $mobileMenuHeight - nectarDOMInfo.adminBarHeight + 1;
                            }
                        } else {
                            var $scrollTopDistance = $($hash).offset().top - nectarDOMInfo.adminBarHeight + 1;
                        }
                        if ($('body[data-hhun="1"]').length > 0 && $('#header-outer[data-remove-fixed="1"]').length == 0) {
                            if ($('#header-outer.detached').length == 0 || $that.parents('.page-submenu[data-sticky="true"]').length > 0)
                                $scrollTopDistance = $scrollTopDistance + $headerNavSpace;
                            if ($that.parents('.page-submenu[data-sticky="true"]').length > 0) {
                                $('#header-outer.detached').addClass('invisible');
                                $('.page-submenu').addClass('header-not-visible').css('transform', 'translateY(0px)');
                            }
                        }
                        var $pageSubMenu = ($that.parents('.page-submenu[data-sticky="true"]').length > 0) ? $that.parents('.page-submenu').height() : 0;
                        if ($('body.material').length > 0 && $('#header-secondary-outer').length > 0 && $('body[data-hhun="1"]').length == 0 && $('#header-outer[data-remove-fixed="1"]').length == 0 && !$('body').hasClass('mobile')) {
                            var $headerSecondary = $('#header-secondary-outer').height();
                        } else {
                            var $headerSecondary = 0;
                        }
                        nectar_scrollToY($scrollTopDistance - $pageSubMenu + $headerSecondary, 700, 'easeInOutQuint');
                    }, $timeoutVar);
                    e.preventDefault();
                }
                if ($hash == '#top') {
                    if ($(this).parents('#slide-out-widget-area').length > 0) {
                        $('#slide-out-widget-area .slide_out_area_close').trigger('click');
                    }
                }
            });
        }

        function searchResultMasonry() {
            var $searchContainer = $('#search-results');
            var $dividerNum = ($searchContainer.is('[data-layout="masonry-no-sidebar"]')) ? 4 : 3;
            $searchContainer.imagesLoaded(function() {
                $searchContainer.isotope({
                    itemSelector: '.result',
                    layoutMode: 'packery',
                    packery: {
                        columnWidth: $('#search-results').width() / $dividerNum
                    }
                });
                $searchContainer.find('article').css('opacity', '1');
            });
            $(window).resize(function() {
                $searchContainer.isotope({
                    layoutMode: 'packery',
                    packery: {
                        columnWidth: $('#search-results').width() / $dividerNum
                    }
                });
            });
        }
        if ($('body.search-results').length > 0 && $('#search-results article').length > 0 && $('#search-results[data-layout="list-no-sidebar"]').length == 0) {
            searchResultMasonry();
        }
        if ($('.portfolio-items .col .style-3-alt').length > 0 || $('.portfolio-items .col .style-3').length > 0 || $('.portfolio-items .col .style-2').length > 0 || $('.portfolio-items .col .style-5').length > 0) {
            var portfolioColorCss = '';
            $('.portfolio-items .col').each(function() {
                $titleColor = $(this).attr('data-title-color');
                $subTitleColor = $(this).attr('data-subtitle-color');
                if ($titleColor.length > 0) {
                    portfolioColorCss += '.col[data-title-color="' + $titleColor + '"] .vert-center h3, .portfolio-items[data-ps="6"] .col[data-title-color="' + $titleColor + '"] .work-meta h4 { color: ' + $titleColor + '!important; } ';
                    portfolioColorCss += ' .portfolio-items[data-ps="8"] .col[data-title-color="' + $titleColor + '"] .line { background-color: ' + $titleColor + '; }';
                    portfolioColorCss += '.portfolio-items[data-ps="8"] .col[data-title-color="' + $titleColor + '"] .next-arrow line { stroke: ' + $titleColor + '; } ';
                }
                if ($subTitleColor.length > 0) portfolioColorCss += '.col[data-subtitle-color="' + $subTitleColor + '"] .vert-center p, .portfolio-items[data-ps="6"] .col[data-title-color="' + $titleColor + '"] .work-meta p { color: ' + $subTitleColor + '; } ';
            });
            var head = document.head || document.getElementsByTagName('head')[0];
            var style = document.createElement('style');
            style.type = 'text/css';
            if (style.styleSheet) {
                style.styleSheet.cssText = portfolioColorCss;
            } else {
                style.appendChild(document.createTextNode(portfolioColorCss));
            }
            head.appendChild(style);
        }
        $('body').on('mouseleave', '.container-wrap[data-nav-pos="after_project_2"] #portfolio-nav ul li, .blog_next_prev_buttons[data-style="fullwidth_next_prev"] ul li', function() {
            $(this).addClass('mouse-leaving');
        });
        var $portfolio_containers = [];
        $('.portfolio-items:not(.carousel)').each(function(i) {
            $portfolio_containers[i] = $(this);
        });

        function masonryPortfolioInit() {
            $portfolio_containers = [];
            $('.portfolio-items:not(.carousel)').each(function(i) {
                $portfolio_containers[i] = $(this);
            });
            var $window = jQuery(window);
            $.each($portfolio_containers, function(i) {
                $portfolio_containers[i].imagesLoaded(function() {
                    if ($smoothCache == true && $(window).width() > 690 && $('body').outerHeight(true) > $(window).height() && Modernizr.csstransforms3d && !navigator.userAgent.match(/(Android|iPod|iPhone|iPad|IEMobile|Opera Mini)/)) {
                        niceScrollInit();
                        $(window).trigger('resize')
                    }
                    var $isoUseTransforms = true;
                    if (!$('body').hasClass('mobile') && !navigator.userAgent.match(/(Android|iPod|iPhone|iPad|BlackBerry|IEMobile|Opera Mini)/)) {
                        $isoUseTransforms = true;
                    }
                    piVertCenter();
                    var $layoutMode = ($portfolio_containers[i].hasClass('masonry-items')) ? 'packery' : 'fitRows';
                    var $startingFilter = ($portfolio_containers[i].attr('data-starting-filter') != '' && $portfolio_containers[i].attr('data-starting-filter') != 'default') ? '.' + $portfolio_containers[i].attr('data-starting-filter') : '*';
                    reLayout();
                    $portfolio_containers[i].addClass('isotope-activated');
                    $portfolio_containers[i].isotope({
                        itemSelector: '.element',
                        filter: $startingFilter,
                        layoutMode: $layoutMode,
                        transitionDuration: '0.6s',
                        packery: {
                            gutter: 0
                        }
                    }).isotope('layout');
                    if ($startingFilter != '*') {
                        $('.portfolio-filters ul a[data-filter="' + $startingFilter + '"], .portfolio-filters-inline ul a[data-filter="' + $startingFilter + '"]').click();
                    }
                    masonryZindex();
                    setTimeout(function() {
                        masonryZindex();
                    }, 800);
                    if ($portfolio_containers[i].parents('.full-width-content').length > 0) {
                        setTimeout(function() {
                            fullWidthContentColumns();
                        }, 200);
                    }
                    $('.portfolio-loading').stop(true, true).fadeOut(200);
                    if ($portfolio_containers[i].find('.inner-wrap').attr('data-animation') == 'none') {
                        $portfolio_containers[i].find('.inner-wrap').removeClass('animated');
                    } else {}
                });
            });
            if ($portfolio_containers.length > 0) {
                $window.resize(reLayout);
                $window.smartresize(function() {
                    setTimeout(masonryZindex, 700);
                });
            }
        }
        masonryPortfolioInit();

        function portfolioLoadIn() {
            $($fullscreenSelector + '.portfolio-items').each(function() {
                $portfolioOffsetPos = ($('#nectar_fullscreen_rows').length > 0) ? '200%' : '90%';
                if ($(this).find('.inner-wrap').attr('data-animation') == 'none') return;
                $(this).find('.col').each(function(i) {
                    var $that = $(this);
                    if ($(this).visible(true) || $(this).parents('#nectar_fullscreen_rows').length > 0) {
                        var $portfolioAnimationDelay = ($that.is('[data-masonry-type="photography"].masonry-items')) ? 90 : 115;
                        $(this).delay($portfolioAnimationDelay * i).queue(function(next) {
                            $(this).addClass("animated-in");
                            next();
                        });
                    } else {
                        var waypoint = new Waypoint({
                            element: $that,
                            handler: function(direction) {
                                if ($that.parents('.wpb_tab').length > 0 && $that.parents('.wpb_tab').css('visibility') == 'hidden' || $that.hasClass('animated-in')) {
                                    waypoint.destroy();
                                    return;
                                }
                                var $portfolioAnimationDelay = ($that.is('[data-masonry-type="photography"].masonry-items')) ? 85 : 100;
                                setTimeout(function() {
                                    $that.addClass("animated-in");
                                }, $portfolioAnimationDelay * $that.attr('data-delay-amount'));
                                waypoint.destroy();
                            },
                            offset: $portfolioOffsetPos
                        });
                    }
                });
            });
        }
        if ($('.portfolio-items .inner-wrap[data-animation="perspective"]').length > 0 || $('.posts-container[data-load-animation="perspective"]').length > 0) {
            var lastScrollTop = $(window).scrollTop();
            $('.portfolio-items, .posts-container[data-load-animation="perspective"]').css('perspective-origin', '50% ' + (lastScrollTop + $(window).height()) + 'px');
            requestAnimationFrame(updatePerspectiveOrigin);

            function updatePerspectiveOrigin() {
                var scrollTop = $(window).scrollTop();
                if (lastScrollTop === scrollTop) {
                    requestAnimationFrame(updatePerspectiveOrigin);
                    return;
                } else {
                    lastScrollTop = scrollTop;
                    $('.portfolio-items,.posts-container[data-load-animation="perspective"]').css('perspective-origin', '50% ' + (lastScrollTop + $(window).height()) + 'px');
                    requestAnimationFrame(updatePerspectiveOrigin);
                }
            }
        }
        var mediaQuerySize;

        function reLayout() {
            clearTimeout(clearIsoAnimation);
            $('.portfolio-items .col').addClass('no-transition');
            clearIsoAnimation = setTimeout(function() {
                $('.portfolio-items .col').removeClass('no-transition');
            }, 700);
            var windowSize = $window.width();
            var masonryObj;
            var masonryObjHolder = [];
            var userDefinedColWidth;
            $.each($portfolio_containers, function(i, v) {
                if ($portfolio_containers[i].attr('data-user-defined-cols') == 'span4') {
                    userDefinedColWidth = 3
                } else if ($portfolio_containers[i].attr('data-user-defined-cols') == 'span3') {
                    userDefinedColWidth = 4
                }
                var isFullWidth = $portfolio_containers[i].attr('data-col-num') == 'elastic';
                if (window.innerWidth > 1600) {
                    if ($portfolio_containers[i].hasClass('fullwidth-constrained')) {
                        if ($portfolio_containers[i].is('[data-masonry-type="photography"]')) {
                            mediaQuerySize = 'three';
                        } else {
                            mediaQuerySize = 'four';
                        }
                    } else {
                        if ($portfolio_containers[i].hasClass('constrain-max-cols')) {
                            mediaQuerySize = 'four';
                        } else {
                            mediaQuerySize = 'five';
                        }
                    }
                } else if (window.innerWidth <= 1600 && window.innerWidth > 1300) {
                    if ($portfolio_containers[i].hasClass('fullwidth-constrained')) {
                        if ($portfolio_containers[i].is('[data-masonry-type="photography"]')) {
                            mediaQuerySize = 'three';
                        } else {
                            mediaQuerySize = 'four';
                        }
                    } else {
                        mediaQuerySize = 'four';
                    }
                } else if (window.innerWidth <= 1300 && window.innerWidth > 990) {
                    if ($portfolio_containers[i].hasClass('constrain-max-cols')) {
                        mediaQuerySize = 'four';
                    } else {
                        mediaQuerySize = 'three';
                    }
                } else if (window.innerWidth <= 990 && window.innerWidth > 470) {
                    mediaQuerySize = 'two';
                } else if (window.innerWidth <= 470) {
                    mediaQuerySize = 'one';
                }
                if ($('#boxed').length > 0) {
                    if (window.innerWidth > 1300) {
                        mediaQuerySize = 'four';
                    } else if (window.innerWidth < 1300 && window.innerWidth > 990) {
                        if ($portfolio_containers[i].hasClass('constrain-max-cols')) {
                            mediaQuerySize = 'four';
                        } else {
                            mediaQuerySize = 'three';
                        }
                    } else if (window.innerWidth < 990) {
                        mediaQuerySize = 'one';
                    }
                }
                switch (mediaQuerySize) {
                    case 'five':
                        (isFullWidth) ? colWidth = 5: colWidth = userDefinedColWidth;
                        if (isFullWidth && $portfolio_containers[i].is('[data-masonry-type="photography"]')) colWidth = 6;
                        masonryObj = {
                            columnWidth: Math.floor($portfolio_containers[i].width() / parseInt(colWidth))
                        };
                        break;
                    case 'four':
                        (isFullWidth) ? colWidth = 4: colWidth = userDefinedColWidth;
                        if (isFullWidth && $portfolio_containers[i].is('[data-masonry-type="photography"]')) colWidth = 5;
                        masonryObj = {
                            columnWidth: Math.floor($portfolio_containers[i].width() / parseInt(colWidth))
                        };
                        break;
                    case 'three':
                        (isFullWidth) ? colWidth = 3: colWidth = userDefinedColWidth;
                        if (isFullWidth && $portfolio_containers[i].is('[data-masonry-type="photography"]')) colWidth = 4;
                        masonryObj = {
                            columnWidth: Math.floor($portfolio_containers[i].width() / parseInt(colWidth))
                        };
                        break;
                    case 'two':
                        masonryObj = {
                            columnWidth: Math.floor($portfolio_containers[i].width() / 2)
                        };
                        break;
                    case 'one':
                        masonryObj = {
                            columnWidth: Math.floor($portfolio_containers[i].width() / 1)
                        };
                        break;
                }
                portfolioItemWidths(i, v);
                if ($portfolio_containers[i].find('.col.elastic-portfolio-item[class*="regular"]:visible').length > 0 || $portfolio_containers[i].find('.col.elastic-portfolio-item[class*="wide"]:visible').length > 0 || $portfolio_containers[i].find('.col.elastic-portfolio-item[class*="tall"]:visible').length > 0 || $portfolio_containers[i].find('.col.elastic-portfolio-item[class*="wide_tall"]:visible').length > 0) {
                    var $gutterSize = ($portfolio_containers[i].is('[data-gutter*="px"]') && $portfolio_containers[i].attr('data-gutter').length > 0 && $portfolio_containers[i].attr('data-gutter') != 'none') ? parseInt($portfolio_containers[i].attr('data-gutter')) : 0;
                    var multipler = (window.innerWidth > 470) ? 2 : 1;
                    $itemClassForSizing = 'regular';
                    if ($portfolio_containers[i].find('.col.elastic-portfolio-item[class*="regular"]:visible').length == 0 && $portfolio_containers[i].find('.col.elastic-portfolio-item.wide:visible').length > 0) {
                        $itemClassForSizing = 'wide';
                    } else if ($portfolio_containers[i].find('.col.elastic-portfolio-item[class*="regular"]:visible').length == 0 && $portfolio_containers[i].find('.col.elastic-portfolio-item.wide_tall:visible').length > 0) {
                        $itemClassForSizing = 'wide_tall';
                        multipler = 1;
                    } else if ($portfolio_containers[i].find('.col.elastic-portfolio-item[class*="regular"]:visible').length == 0 && $portfolio_containers[i].find('.col.elastic-portfolio-item.tall:visible').length > 0) {
                        $itemClassForSizing = 'tall';
                        multipler = 1;
                    }
                    $portfolio_containers[i].find('.col.elastic-portfolio-item.' + $itemClassForSizing + ' img').css('height', 'auto');
                    var tallColHeight = $portfolio_containers[i].find('.col.elastic-portfolio-item.' + $itemClassForSizing + ':visible img').height();
                    $portfolio_containers[i].find('.col.elastic-portfolio-item[class*="tall"] img, .col.elastic-portfolio-item.wide img, .col.elastic-portfolio-item.regular img').removeClass('auto-height');
                    $portfolio_containers[i].find('.col.elastic-portfolio-item[class*="tall"] img:not(.custom-thumbnail)').css('height', (tallColHeight * multipler) + ($gutterSize * 2));
                    if ($itemClassForSizing == 'regular' || $itemClassForSizing == 'wide') {
                        $portfolio_containers[i].find('.col.elastic-portfolio-item.wide img:not(.custom-thumbnail), .col.elastic-portfolio-item.regular img:not(.custom-thumbnail)').css('height', tallColHeight);
                    } else {
                        $portfolio_containers[i].find('.col.elastic-portfolio-item.wide img:not(.custom-thumbnail), .col.elastic-portfolio-item.regular img:not(.custom-thumbnail)').css('height', (tallColHeight / 2) - ($gutterSize * 2));
                    }
                    $portfolio_containers[i].find('.col.elastic-portfolio-item[class*="tall"] .parallaxImg').css('height', (tallColHeight * multipler) + parseInt($portfolio_containers[i].find('.col.elastic-portfolio-item').css('padding-bottom')) * 2);
                    if ($itemClassForSizing == 'regular' || $itemClassForSizing == 'wide') {
                        $portfolio_containers[i].find('.col.elastic-portfolio-item.regular .parallaxImg, .col.elastic-portfolio-item.wide .parallaxImg').css('height', tallColHeight);
                    } else {
                        $portfolio_containers[i].find('.col.elastic-portfolio-item.regular .parallaxImg, .col.elastic-portfolio-item.wide .parallaxImg').css('height', (tallColHeight / 2) - ($gutterSize * 2));
                    }
                } else {
                    $portfolio_containers[i].find('.col.elastic-portfolio-item[class*="tall"] img, .col.elastic-portfolio-item.wide img, .col.elastic-portfolio-item.regular img').addClass('auto-height');
                }
                if ($portfolio_containers[i].hasClass('no-masonry') && $portfolio_containers[i].find('.col:first:visible').length > 0 && $portfolio_containers[i].parents('.wpb_gallery').length == 0) {
                    if (!$portfolio_containers[i].is('[data-ps="9"]')) {
                        $portfolio_containers[i].find('.col img').css('height', 'auto');
                        var tallColHeight = $portfolio_containers[i].find('.col:first:visible img').height();
                        $portfolio_containers[i].find('.col img:not(.custom-thumbnail)').css('height', tallColHeight);
                        $portfolio_containers[i].find('.col .parallaxImg').css('height', tallColHeight);
                    }
                }
                masonryObjHolder[i] = masonryObj;
                if ($portfolio_containers[i].isotope()) $portfolio_containers[i].isotope('layout');
            });
        }

        function portfolioItemWidths(i, v) {
            var isFullWidth = $portfolio_containers[i].attr('data-col-num') == 'elastic';
            if (isFullWidth) {
                var $colSize = 4;
                var $mult = (mediaQuerySize == 'one') ? 1 : 2;
                if (mediaQuerySize == 'five') $colSize = 5;
                if (mediaQuerySize == 'four') $colSize = 4;
                if (mediaQuerySize == 'three') $colSize = 3;
                if (mediaQuerySize == 'two') $colSize = 2;
                if (mediaQuerySize == 'one') $colSize = 1;
                if ($(v).is('[data-ps="6"]') && $colSize == 5) $colSize = 4;
                if (isFullWidth && $portfolio_containers[i].is('[data-masonry-type="photography"]') && !$portfolio_containers[i].hasClass('no-masonry')) {
                    if (mediaQuerySize == 'five') $colSize = 6;
                    if (mediaQuerySize == 'four') $colSize = 5;
                    if (mediaQuerySize == 'three') $colSize = 4;
                }
                if ($(v).width() % $colSize == 0) {
                    $(v).find('.elastic-portfolio-item:not(.wide):not(.wide_tall)').css('width', Math.floor($(v).width() / $colSize) + 'px');
                    $(v).find('.elastic-portfolio-item.wide, .elastic-portfolio-item.wide_tall').css('width', Math.floor($(v).width() / $colSize * $mult) + 'px');
                } else {
                    var $loopEndNum = ($(window).width() > 1000) ? 6 : 3;
                    if ($portfolio_containers[i].hasClass('fullwidth-constrained') && $(window).width() > 1000) $loopEndNum = 4;
                    for (var i = 1; i < $loopEndNum; i++) {
                        if (($(v).width() - i) % $colSize == 0) {
                            $(v).find('.elastic-portfolio-item:not(.wide):not(.wide_tall)').css('width', ($(v).width() - i) / $colSize + 'px');
                            $(v).find('.elastic-portfolio-item.wide, .elastic-portfolio-item.wide_tall').css('width', ($(v).width() - i) / $colSize * $mult + 'px');
                        }
                    }
                }
            }
        }

        function masonryZindex() {
            if ($('body .portfolio-items:not(".carousel") > .col').length > 0 && $('body .portfolio-items:not(".carousel") > .col').offset().left) {
                $('body .portfolio-items:not(".carousel")').each(function() {
                    var $coords = {};
                    var $zindexRelation = {};
                    var $that = $(this);
                    $(this).find('> .col').each(function() {
                        var $itemOffset = $(this).offset();
                        $itemOffset = $itemOffset.left;
                        $coords[$(this).index()] = $itemOffset;
                        $(this).css('z-index', Math.abs(Math.floor($(this).offset().left / 20)));
                    });
                    var $corrdsArr = $.map($coords, function(value) {
                        return value;
                    });
                    $corrdsArr = removeDuplicates($corrdsArr);
                    $corrdsArr.sort(function(a, b) {
                        return a - b
                    });
                    for (var i = 0; i < $corrdsArr.length; i++) {
                        $zindexRelation[$corrdsArr[i]] = i;
                    }
                    $.each($coords, function(k, v) {
                        var $zindex;
                        var $coordCache = v;
                        $.each($zindexRelation, function(k, v) {
                            if ($coordCache == k) {
                                $zindex = v;
                            }
                        });
                        $that.find('> .col:eq(' + k + ')').attr('data-delay-amount', $zindex);
                    });
                });
            }
        }

        function matrixToArray(matrix) {
            return matrix.substr(7, matrix.length - 8).split(', ');
        }

        function removeDuplicates(inputArray) {
            var i;
            var len = inputArray.length;
            var outputArray = [];
            var temp = {};
            for (i = 0; i < len; i++) {
                temp[inputArray[i]] = 0;
            }
            for (i in temp) {
                outputArray.push(i);
            }
            return outputArray;
        }
        var clearIsoAnimation = null;
        var $checkForScrollBar = null;
        $('.portfolio-items:not(".carousel")').each(function(i) {
            $(this).attr('instance', i);
            $(this).parent().parent().find('div[class^=portfolio-filters]').attr('instance', i);
        });

        function isoClickFilter() {
            var $timeout;
            if (window.innerWidth > 690 && !navigator.userAgent.match(/(Android|iPod|iPhone|iPad|IEMobile|Opera Mini)/)) {
                clearTimeout($timeout);
                $timeout = setTimeout(function() {
                    masonryZindex();
                }, 600);
            }
            var selector = $(this).attr('data-filter');
            var $instance = $(this).parents('div[class^=portfolio-filters]').attr('instance');
            $.each($portfolio_containers, function(i) {
                if ($portfolio_containers[i].attr('instance') == $instance) {
                    $portfolio_containers[i].isotope({
                        filter: selector
                    }).attr('data-current-cat', selector);
                    if ($portfolio_containers[i].find('.inner-wrap[data-animation="none"]').length == 0) {
                        $portfolio_containers[i].find('.col').addClass('animated-in');
                    }
                }
            });
            $(this).parent().parent().find('li a').removeClass('active');
            $(this).addClass('active');
            if ($('.portfolio-items a[rel^="prettyPhoto"]').length > 0) {
                setTimeout(updatePrettyPhotoGallery, 170);
            } else {
                setTimeout(updateMagPrettyPhotoGallery, 170);
            }
            return false;
        }
        $('body').on('click', '.portfolio-filters ul li a, .portfolio-filters-inline ul li a', isoClickFilter);

        function updatePrettyPhotoGallery() {
            $('.portfolio-items').each(function() {
                if ($(this).find('a[rel^="prettyPhoto"]').length > 0) {
                    var $unique_id = Math.floor(Math.random() * 10000);
                    var $currentCat = $(this).attr('data-current-cat');
                    $(this).find('.col' + $currentCat).find('a[rel^="prettyPhoto"]').attr('rel', 'prettyPhoto[' + $unique_id + '_sorted]');
                }
            });
        }

        function updateMagPrettyPhotoGallery() {
            $('.portfolio-items').each(function() {
                var $currentCat = $(this).attr('data-current-cat');
                var $unique_id = Math.floor(Math.random() * 10000);
                if ($(this).is('[data-lightbox-only="true"]')) {
                    $(this).find('.col').each(function() {
                        $(this).find('a.gallery').removeClass('gallery').removeClass('magnific');
                        if ($(this).is($currentCat)) {
                            if ($(this).find('.parallaxImg-wrap').length > 0) {
                                if ($('body[data-ls="fancybox"]').length > 0) {
                                    $(this).find('.work-item > a').attr('data-fancybox', 'group_' + $unique_id);
                                } else {
                                    $(this).find('.work-item > a').addClass('gallery').addClass('magnific');
                                }
                            } else {
                                if ($('body[data-ls="fancybox"]').length > 0) {
                                    $(this).find('.work-item a').attr('data-fancybox', 'group_' + $unique_id);
                                } else {
                                    $(this).find('.work-info a').addClass('gallery').addClass('magnific');
                                }
                            }
                        }
                    });
                } else if ($(this).find('.work-item.style-1').length > 0) {
                    $(this).find('.col').each(function() {
                        $(this).find('a.gallery').removeClass('gallery').removeClass('magnific');
                        if ($(this).is($currentCat)) {
                            if ($('body[data-ls="fancybox"]').length > 0) {
                                $(this).find('.work-info .vert-center a:first-of-type').attr('data-fancybox', 'group_' + $unique_id);
                            } else {
                                $(this).find('.work-info .vert-center a:first-of-type').addClass('gallery').addClass('magnific');
                            }
                        }
                    });
                }
            });
        }
        $blog_containers = [];
        $('.posts-container').each(function(i) {
            $blog_containers[i] = $(this);
        });

        function masonryBlogInit() {
            var $window = jQuery(window);
            $.each($blog_containers, function(i) {
                if ($blog_containers[i].parent().hasClass('masonry') && !$blog_containers[i].parent().hasClass('auto_meta_overlaid_spaced')) {
                    $blog_containers[i].find('article').addClass('masonry-blog-item');
                    if ($blog_containers[i].parents('.masonry.classic').length > 0) {
                        $blog_containers[i].find('article').prepend('<span class="bottom-line"></span>');
                    }
                    $blog_containers[i].find('article').each(function() {
                        var $metaClone = $(this).find('.post-meta').clone();
                        $(this).find('.post-meta').remove();
                        if ($blog_containers[i].parents('.post-area.meta_overlaid').length > 0) {
                            $(this).find('.post-header h2').after($metaClone);
                        } else {
                            $(this).find('.content-inner').after($metaClone);
                        }
                        $blog_containers[i].addClass('meta-moved');
                    });
                    if ($blog_containers[i].parent().hasClass('masonry') && $blog_containers[i].parents('.blog-fullwidth-wrap').length > 0) {
                        if ($blog_containers[i].parents('.wpb_row').length > 0) $blog_containers[i].parents('.wpb_row').css('z-index', 100);
                        if (!$blog_containers[i].parent().hasClass('meta_overlaid') && !$blog_containers[i].parent().hasClass('auto_meta_overlaid_spaced')) {
                            if ($blog_containers[i].parent().hasClass('classic_enhanced')) {
                                $blog_containers[i].parent().parents('.full-width-content').css({
                                    'padding': '0px 0.2% 0px 2.4%'
                                });
                            } else {
                                $blog_containers[i].parent().parents('.full-width-content').css({
                                    'padding': '0px 0.2% 0px 3.2%'
                                });
                            }
                        } else {
                            $blog_containers[i].parent().parents('.full-width-content').addClass('meta-overlaid');
                            $('.container-wrap').addClass('meta_overlaid_blog');
                        }
                        fullWidthSections();
                    }
                    var $cols = 3;
                    var $element = $blog_containers[i];
                    if ($blog_containers[i].find('img').length == 0) $element = $('<img />');
                    imagesLoaded($element, function(instance) {
                        if ($('body').hasClass('mobile') || $blog_containers[i].parents('.post-area').hasClass('span_9')) {
                            $cols = 2;
                        }
                        if ($blog_containers[i].parent().hasClass('classic_enhanced')) {
                            $blog_containers[i].find('.large_featured.has-post-thumbnail .post-featured-img, .wide_tall.has-post-thumbnail .post-featured-img').each(function() {
                                var $src = $(this).find('img').attr('src');
                                $(this).css('background-image', 'url(' + $src + ')');
                            });
                            $blog_containers[i].find('.large_featured .nectar-flickity, .wide_tall .nectar-flickity').each(function() {
                                $(this).find('.cell').each(function() {
                                    var $src = $(this).find('img').attr('src');
                                    $(this).css('background-image', 'url(' + $src + ')');
                                });
                            });
                        }
                        $cols = blogColumnNumbCalcs($blog_containers[i]);
                        blogHeightCalcs($blog_containers[i], $cols);
                        if ($blog_containers[i].parents('.post-area.meta_overlaid').length > 0) {
                            $blog_containers[i].isotope({
                                itemSelector: 'article',
                                transitionDuration: '0s',
                                layoutMode: 'packery',
                                packery: {
                                    gutter: 0
                                }
                            }).isotope('layout');
                        } else if ($blog_containers[i].parents('.auto_meta_overlaid_spaced').length > 0) {
                            $multiplier = .025;
                            if ($blog_containers[i].parents('.blog-fullwidth-wrap').length > 0) {
                                $multiplier = .02;
                            }
                            $blog_containers[i].isotope({
                                layoutMode: 'packery',
                                transitionDuration: '0s',
                                packery: {
                                    gutter: 0
                                }
                            });
                        } else {
                            if ($blog_containers[i].parent().hasClass('classic_enhanced')) {
                                if ($blog_containers[i].parents('.span_9.masonry').length == 0) {
                                    $multiplier = (window.innerWidth >= 1600) ? .015 : .02;
                                } else {
                                    $multiplier = .04;
                                }
                            } else {
                                $multiplier = ($blog_containers[i].parents('.span_9.masonry').length == 0) ? .03 : .055;
                            }
                            $blog_containers[i].isotope({
                                itemSelector: 'article',
                                transitionDuration: '0s',
                                layoutMode: 'packery',
                                packery: {
                                    gutter: $blog_containers[i].parents('.post-area').width() * $multiplier
                                }
                            }).isotope('layout');
                        }
                        blogLoadIn($blog_containers[i]);
                        flickityBlogInit();
                        $(window).trigger('resize');
                    });
                    $(window).resize(function() {
                        if (typeof $blog_containers[i] !== 'undefined') {
                            $cols = blogColumnNumbCalcs($blog_containers[i]);
                            blogHeightCalcs($blog_containers[i], $cols);
                            if ($blog_containers[i].parents('.post-area.meta_overlaid').length > 0) {
                                $blog_containers[i].isotope({
                                    layoutMode: 'packery',
                                    packery: {
                                        gutter: 0
                                    }
                                });
                            } else if ($blog_containers[i].parents('.auto_meta_overlaid_spaced').length > 0) {
                                $multiplier = .025;
                                if ($blog_containers[i].parents('.blog-fullwidth-wrap').length > 0) {
                                    $multiplier = .02;
                                }
                                $blog_containers[i].isotope({
                                    layoutMode: 'packery',
                                    transitionDuration: '0s',
                                    packery: {
                                        gutter: 0
                                    }
                                });
                            } else {
                                if ($blog_containers[i].parent().hasClass('classic_enhanced')) {
                                    if ($blog_containers[i].parents('.span_9.masonry').length == 0) {
                                        $multiplier = (window.innerWidth >= 1600) ? .015 : .02;
                                    } else {
                                        $multiplier = .04;
                                    }
                                } else {
                                    $multiplier = ($blog_containers[i].parents('.span_9.masonry').length == 0) ? .03 : .055;
                                    if ($blog_containers[i].parents('.blog-fullwidth-wrap').length > 0) {
                                        $multiplier = .02;
                                    }
                                }
                                $blog_containers[i].isotope({
                                    layoutMode: 'packery',
                                    packery: {
                                        gutter: $blog_containers[i].parents('.post-area').width() * $multiplier
                                    }
                                });
                            }
                        }
                    });
                } else {
                    blogLoadIn($blog_containers[i]);
                }
            });
        }
        masonryBlogInit();

        function blogLoadIn(post_container) {
            if (post_container.attr('data-load-animation') == 'none') {
                post_container.find('.inner-wrap').removeClass('animated');
            } else {
                post_container.find('article').each(function(i) {
                    if ($(this).visible(true)) {
                        $(this).delay(110 * i).queue(function(next) {
                            $(this).addClass("animated-in");
                            next();
                        });
                    } else {
                        var $that = $(this);
                        var waypoint = new Waypoint({
                            element: $that,
                            handler: function(direction) {
                                setTimeout(function() {
                                    $that.addClass("animated-in");
                                }, 80 * $that.attr('data-delay-amount'));
                                waypoint.destroy();
                            },
                            offset: '90%'
                        });
                    }
                });
            }
        }

        function blogHeightCalcs($posts_container, cols) {
            if ($posts_container.parent().hasClass('meta_overlaid') && $posts_container.find('article[class*="regular"]').length > 0) {
                $.each($posts_container, function(i, v) {
                    var $colSize = 4;
                    var $mult = (cols == 1) ? 1 : 2;
                    if ($('html.no-csstransitions').length == 0) {
                        $(v).find('article[class*="regular"]').css('width', Math.floor($(v).width() / cols) + 'px');
                        $(v).find('article[class*="tall"]').css('width', Math.floor($(v).width() / cols * $mult) + 'px');
                    } else {
                        $('.post-area.masonry').css('width', '100%');
                    }
                });
                $posts_container.find('article[class*="regular"] img').css('height', 'auto');
                var tallColHeight = Math.ceil($posts_container.find('article[class*="regular"]:not(".format-link"):not(".format-quote") img').first().height());
                var multipler = (window.innerWidth > 690) ? 2 : 1;
                $posts_container.find('article[class*="tall"] img, .article.wide img, article.regular img').removeClass('auto-height');
                $posts_container.find('article[class*="tall"] img').css('height', (tallColHeight * multipler));
                $posts_container.find('article[class*="regular"] img').css('height', (tallColHeight));
                $posts_container.find('article.regular.format-link,article.regular.format-quote').each(function() {
                    if (window.innerWidth > 690) {
                        $(this).css({
                            'height': tallColHeight
                        });
                    } else {
                        $(this).css({
                            'height': 'auto'
                        });
                    }
                });
            } else {
                $posts_container.find('article[class*="tall"] img, article.regular img').addClass('auto-height');
            }
            if ($posts_container.parent().hasClass('classic_enhanced') && $posts_container.find('article[class*="regular"]').length > 0) {
                if ($(window).width() > 690) {
                    classicEnhancedSizing($posts_container.find('article:not(.large_featured):not(.wide_tall)'));
                } else {
                    classicEnhancedSizing($posts_container.find('article:not(.wide_tall)'));
                }
                var tallColHeight = ($posts_container.find('article[class*="regular"]:not(".format-link"):not(".format-quote").has-post-thumbnail').first().length > 0) ? Math.ceil($posts_container.find('article[class*="regular"]:not(".format-link"):not(".format-quote").has-post-thumbnail').first().css('height', 'auto').height()) : 600;
                if ($(window).width() > 690) {
                    $posts_container.find('article.large_featured, article.regular, article[class*="wide_tall"]').css('height', (tallColHeight));
                } else {
                    $posts_container.find('article.regular, article[class*="wide_tall"]').css('height', (tallColHeight));
                }
            } else if ($posts_container.parent().hasClass('classic_enhanced') && $posts_container.find('article[class*="regular"]').length == 0) {
                var tallColHeight = ($posts_container.find('article[class*="regular"]:not(".format-link"):not(".format-quote").has-post-thumbnail').first().length > 0) ? Math.ceil($posts_container.find('article[class*="regular"]:not(".format-link"):not(".format-quote").has-post-thumbnail').first().css('height', 'auto').height()) : 600;
                if ($(window).width() > 690) {
                    $posts_container.find('article.large_featured, article.regular, article[class*="wide_tall"]').css('height', (tallColHeight));
                } else {
                    $posts_container.find('article.regular, article[class*="wide_tall"]').css('height', (tallColHeight));
                }
            }
            if ($('html.no-csstransitions').length > 0)
                $('.post-area.masonry').css('width', '100%');
        }

        function classicEnhancedSizing(elements) {
            var tallestCol = 0;
            elements.find('.article-content-wrap').css('height', 'auto');
            elements.filter('.has-post-thumbnail').each(function() {
                ($(this).find('.article-content-wrap').outerHeight(true) > tallestCol) ? tallestCol = $(this).find('.article-content-wrap').outerHeight(true): tallestCol = tallestCol;
            });
            elements.filter('.has-post-thumbnail').find('.article-content-wrap').css('height', (tallestCol));
        }

        function blogStickySS() {
            $('#sidebar[data-nectar-ss="true"], #sidebar[data-nectar-ss="1"]').each(function() {
                $ssExtraTopSpace = 50;
                if ($('#header-outer[data-remove-fixed="0"]').length > 0 && $('body[data-hhun="1"]').length == 0) {
                    $ssExtraTopSpace += $('#header-outer').outerHeight();
                    if ($('#header-outer[data-shrink-num][data-header-resize="1"]').length > 0) {
                        var shrinkNum = 6;
                        var headerPadding2 = parseInt($('#header-outer').attr('data-padding')) - parseInt($('#header-outer').attr('data-padding')) / 1.8;
                        shrinkNum = $('#header-outer').attr('data-shrink-num');
                        $ssExtraTopSpace -= shrinkNum;
                        $ssExtraTopSpace -= headerPadding2;
                    }
                    if ($('body.mobile').length == 0 && $('#header-outer[data-condense="true"]').length > 0) {
                        var $headerSpan9 = $('#header-outer[data-format="centered-menu-bottom-bar"] header#top .span_9');
                        var $secondaryHeader = $('#header-secondary-outer');
                        $ssExtraTopSpace = 50;
                        $ssExtraTopSpace += $('#header-outer').height() - (parseInt($headerSpan9.position().top) - parseInt($('#header-outer #logo').css('margin-top'))) - parseInt(nectarDOMInfo.secondaryHeaderHeight);
                    }
                }
                if ($('#wpadminbar').length > 0) {
                    $ssExtraTopSpace += $('#wpadminbar').outerHeight();
                }
                if ($('#header-outer').attr('data-using-secondary') == '1') {
                    $ssExtraTopSpace += $('#header-secondary-outer').outerHeight();
                }
                if ($(this).parents('.wpb_widgetised_column').length > 0) {
                    $(this).parents('.wpb_column').theiaStickySidebar({
                        additionalMarginTop: $ssExtraTopSpace,
                        updateSidebarHeight: false
                    });
                } else {
                    $(this).theiaStickySidebar({
                        additionalMarginTop: $ssExtraTopSpace,
                        updateSidebarHeight: false
                    });
                }
            });
        }
        if ($().theiaStickySidebar) {
            blogStickySS();
        }
        var blogMediaQuerySize;

        function blogColumnNumbCalcs(post_container) {
            if ($('body').hasClass('mobile') && window.innerWidth < 990 || post_container.parents('.post-area').hasClass('span_9') && post_container.parents('.post-area.meta_overlaid').length == 0) {
                $cols = 2;
            } else if (post_container.parents('.post-area').hasClass('full-width-content') || post_container.parents('.post-area').parent().hasClass('full-width-content') && $('#boxed').length == 0 || post_container.parents('.post-area.meta_overlaid').length > 0) {
                var windowSize = $(window).width();
                if (window.innerWidth >= 1600) {
                    blogMediaQuerySize = (post_container.parents('.post-area.meta_overlaid').length > 0) ? 'four' : 'five';
                } else if (window.innerWidth < 1600 && window.innerWidth >= 1300) {
                    blogMediaQuerySize = 'four';
                } else if (window.innerWidth < 1300 && window.innerWidth >= 990) {
                    blogMediaQuerySize = (post_container.parents('.post-area.meta_overlaid').length > 0) ? 'four' : 'three';
                } else if (window.innerWidth < 990 && window.innerWidth >= 470) {
                    blogMediaQuerySize = 'two';
                } else if (window.innerWidth < 470) {
                    blogMediaQuerySize = (post_container.parents('.post-area.meta_overlaid').length > 0) ? 'two' : 'one';
                }
                if ($('#boxed').length > 0) {
                    if (window.innerWidth > 1300) {
                        blogMediaQuerySize = 'four';
                    } else if (window.innerWidth < 1300 && window.innerWidth > 990) {
                        blogMediaQuerySize = (post_container.parents('.post-area.meta_overlaid').length > 0) ? 'four' : 'three';
                    } else if (window.innerWidth < 990) {
                        blogMediaQuerySize = (post_container.parents('.post-area.meta_overlaid').length > 0) ? 'two' : 'one';
                    }
                }
                switch (blogMediaQuerySize) {
                    case 'five':
                        $cols = 5;
                        break;
                    case 'four':
                        $cols = 4;
                        break;
                    case 'three':
                        $cols = 3;
                        break;
                    case 'two':
                        $cols = 2;
                        break;
                    case 'one':
                        $cols = 1;
                        break;
                }
            } else {
                $cols = 3;
            }
            return $cols;
        }
        var shrinkNum = 6;
        if ($('#header-outer[data-shrink-num]').length > 0) shrinkNum = $('#header-outer').attr('data-shrink-num');
        headerPadding2 = headerPadding - headerPadding / 1.8;
        $('body').on('click', '.section-down-arrow', function() {
            if ($(this).parents('.nectar-box-roll').length > 0) return false;
            var $currentSection = $(this).parents('#page-header-bg');
            var $topDistance = $currentSection.height();
            var $offset = ($currentSection.parents('.first-section').length == 0 || $('body[data-transparent-header="false"]').length > 0) ? $currentSection.offset().top : 0;
            var $bodyBorderSize = ($('.body-border-top').length > 0 && $(window).width() > 1000) ? $('.body-border-top').height() : 0;
            var $headerNavSpace = ($('body[data-header-format="left-header"]').length > 0) ? 0 : $('#header-space').height();
            var $materialSecondary = 0;
            if ($('body.material').length > 0 && $('#header-secondary-outer').length > 0) {
                $materialSecondary = $('#header-secondary-outer').height();
            }
            if ($('body[data-permanent-transparent="1"]').length == 0) {
                if (!$('body').hasClass('mobile')) {
                    if ($('body[data-hhun="1"]').length > 0 && $('#header-outer[data-remove-fixed="1"]').length == 0) {
                        $('body,html').stop().animate({
                            scrollTop: parseInt($topDistance) + $offset + 2 - $bodyBorderSize * 2
                        }, 1000, 'easeInOutCubic')
                    } else {
                        $resize = ($('#header-outer[data-header-resize="0"]').length > 0) ? 0 : parseInt(shrinkNum) + headerPadding2 * 2;
                        if ($('#header-outer[data-remove-fixed="1"]').length > 0) {
                            $headerNavSpace = 0;
                            $offset = 0;
                        }
                        if ($('body.mobile').length == 0 && $('#header-outer[data-condense="true"]').length > 0) {
                            var $headerSpan9 = $('#header-outer[data-format="centered-menu-bottom-bar"] header#top .span_9');
                            var $secondaryHeader = $('#header-secondary-outer');
                            $headerNavSpace = $('#header-outer').height() - (parseInt($headerSpan9.position().top) - parseInt($('#header-outer #logo').css('margin-top'))) - parseInt(nectarDOMInfo.secondaryHeaderHeight);
                        }
                        $('body,html').stop().animate({
                            scrollTop: parseInt($topDistance - $headerNavSpace) + $resize + 3 + $offset + $materialSecondary
                        }, 1000, 'easeInOutCubic')
                    }
                } else {
                    $scrollPos = ($('#header-outer[data-mobile-fixed="1"]').length > 0) ? parseInt($topDistance) - $headerNavSpace + parseInt($currentSection.offset().top) + 2 : parseInt($topDistance) + parseInt($currentSection.offset().top) + 2;
                    $('body,html').stop().animate({
                        scrollTop: $scrollPos - $bodyBorderSize * 2
                    }, 1000, 'easeInOutCubic')
                }
            } else {
                $('body,html').stop().animate({
                    scrollTop: parseInt($topDistance) + parseInt($currentSection.offset().top) + 2 - $bodyBorderSize * 2
                }, 1000, 'easeInOutCubic')
            }
            return false;
        });
        $('body').on('mouseover', '.post-area.featured_img_left .grav-wrap .text a, .masonry.material .masonry-blog-item .grav-wrap .text a, .blog-recent[data-style="material"] .grav-wrap .text a', function() {
            $(this).parents('.grav-wrap').find('img').addClass('hovered');
        });
        $('body').on('mouseleave', '.post-area.featured_img_left .grav-wrap .text a, .masonry.material .masonry-blog-item .grav-wrap .text a, .blog-recent[data-style="material"] .grav-wrap .text a', function() {
            $(this).parents('.grav-wrap').find('img').removeClass('hovered');
        });

        function crossBrowserFixes() {
            if ($("body").hasClass("single-portfolio") || $('body').hasClass("error404") || $('body').hasClass("search-results")) {
                $("li").removeClass("current_page_parent").removeClass("current-menu-ancestor").removeClass('current_page_ancestor');
            }
            if ($('html.js').length == 0) {
                $('html').removeClass('no-js').addClass('js');
            }
            $('.recent_projects_widget div a:nth-child(3n+3), #sidebar #flickr div:nth-child(3n+3) a, #footer-outer #flickr div:nth-child(3n+3) a').css('margin-right', '0px');
            $('code').find('br').remove();
            if ($('.container.main-content > .row > div:last-child').hasClass('clear')) {
                $('.container.main-content > .row > div:last-child').css('padding-bottom', '0');
            }
            $('.container-wrap .blog-recent > div:last-child').addClass('col_last');
            if ($('.single .blog_next_prev_buttons').length > 0) $('.container-wrap').css('padding-bottom', 0);
            $('.wpcf7-form p:has(input[type=submit])').css('padding-bottom', '0px');
            $('.full-width-content .wpcf7-submit').on('click', function() {
                setTimeout(function() {
                    fullWidthContentColumns()
                }, 1000);
                setTimeout(function() {
                    fullWidthContentColumns()
                }, 2000);
            });
            $('#featured article').each(function() {
                if ($(this).find('h2').attr('data-has-caption') == '0') {
                    $(this).parents('.slide').addClass('no-caption');
                }
            });
            var ua = window.navigator.userAgent;
            var msie = ua.indexOf("Edge/");
            if (msie > 0)
                $('body').addClass('msie');
            $('.gform_body').click(function() {
                setTimeout(function() {
                    fullWidthContentColumns();
                }, 200);
            });
            $('.pum.pum-theme-salient-page-builder-optimized button.pum-close').wrapInner('<span />');
            if ($('#nectar_fullscreen_rows').length > 0 && $('.pum-container .pum-content > .wpb_row .full-page-inner > .container > .span_12').length > 0) {
                $('.pum-container .pum-content > .wpb_row .full-page-inner > .container > .span_12').unwrap();
            }
            $('article.post.format-chat .content-inner dt:odd').css('color', '#333');
            $('.full-width-section').each(function() {
                $(this).find('> .span_12 > div.col_last').last().css('margin-bottom', '0');
            });
            $('#portfolio-extra p').each(function() {
                if ($(this).find('*').length == 1 && $(this).find('img').length == 1) {
                    $(this).find('img').unwrap();
                }
            });
            $('.vc_text_separator').each(function() {
                if ($(this).parents('.full-width-section').length > 0) $(this).find('div').css('background-color', $(this).parents('.full-width-section').find('.row-bg').css('background-color'));
            });
            $('.carousel-heading').each(function() {
                if ($(this).find('h2').length > 0) $(this).find('.carousel-prev, .carousel-next').css('top', '7px');
            });
            $('.carousel-wrap').each(function() {
                if ($(this).find('.carousel-heading .container:empty').length > 0) $(this).find('.carousel-heading').remove();
            });
            $('.woocommerce div.product div.images div.thumbnails a:nth-child(4n+4)').css('margin-right', '0px');
            $('article.post .gallery-slider .gallery,  article.post .gallery-slider .jetpack-slideshow, .single-portfolio .gallery-slider .gallery, .single-portfolio .gallery-slider .jetpack-slideshow').remove();
            $('.woocommerce .span_9 .products.related .products li:nth-child(4), .woocommerce .span_9 .products.upsells .products li:nth-child(4)').remove();
            $('.woocommerce .span_9 .products.related .products li:nth-child(3), .woocommerce .span_9 .products.upsells .products li:nth-child(3)').css('margin-right', '0');
            $('.cart-menu a, .widget_shopping_cart a').addClass('no-ajaxy');
            $(".portfolio-items").find("a[href*='http://']:not([href*='" + window.location.hostname + "'])").attr("target", "_blank");
            $(".recent_projects_widget").find("a[href*='http://']:not([href*='" + window.location.hostname + "'])").attr("target", "_blank");
            $(".portfolio-items").find("a[href*='https://']:not([href*='" + window.location.hostname + "'])").attr("target", "_blank");
            $(".recent_projects_widget").find("a[href*='https://']:not([href*='" + window.location.hostname + "'])").attr("target", "_blank");
            $('.container-wrap .row > .wpb_row').each(function() {
                if ($(this).find('> .span_12 > .wpb_column > .wpb_wrapper').length > 0 && $(this).find('> .span_12 > .wpb_column > .wpb_wrapper').find('*').length == 0) $(this).find('> .span_12 ').remove();
            });
            $('.full-width-content .col.boxed').removeClass('boxed');
            $('.full-width-content .wpb_column .nectar-slider-wrap[data-full-width="true"]').attr('data-full-width', 'false');
            $('.wpb_column.neg-marg').parents('.wpb_row').css('z-index', '110');
            var $tmpTitle = null;
            $('.portfolio-items > .col a[title]').hover(function() {
                $tmpTitle = $(this).attr('title');
                $(this).attr('title', '');
            }, function() {
                $(this).attr('title', $tmpTitle);
            });
            $('.portfolio-items > .col a[title]').click(function() {
                $(this).attr('title', $tmpTitle);
            });
        };
        crossBrowserFixes();
        jQuery(document.body).on('updated_cart_totals', function() {
            if ($('.plus').length == 0)
                $('div.quantity:not(.buttons_added), td.quantity:not(.buttons_added)').addClass('buttons_added').append('<input type="button" value="+" class="plus" />').prepend('<input type="button" value="-" class="minus" />');
        });
        if ($('.plus').length == 0) {
            $('div.quantity:not(.buttons_added), td.quantity:not(.buttons_added)').addClass('buttons_added').append('<input type="button" value="+" class="plus" />').prepend('<input type="button" value="-" class="minus" />');
            $(document).on('click', '.plus, .minus', function() {
                var $qty = $(this).closest('.quantity').find('.qty'),
                    currentVal = parseFloat($qty.val()),
                    max = parseFloat($qty.attr('max')),
                    min = parseFloat($qty.attr('min')),
                    step = $qty.attr('step');
                if (!currentVal || currentVal === '' || currentVal === 'NaN') currentVal = 0;
                if (max === '' || max === 'NaN') max = '';
                if (min === '' || min === 'NaN') min = 0;
                if (step === 'any' || step === '' || step === undefined || parseFloat(step) === 'NaN') step = 1;
                if ($(this).is('.plus')) {
                    if (max && (max == currentVal || currentVal > max)) {
                        $qty.val(max);
                    } else {
                        $qty.val(currentVal + parseFloat(step));
                    }
                } else {
                    if (min && (min == currentVal || currentVal < min)) {
                        $qty.val(min);
                    } else if (currentVal > 0) {
                        $qty.val(currentVal - parseFloat(step));
                    }
                }
                $qty.trigger('change');
            });
        }

        function wooPriceSlider() {
            if (typeof woocommerce_price_slider_params === 'undefined' || !$('body').hasClass('woocommerce')) {
                return false;
            }
            $('input#min_price, input#max_price').hide();
            $('.price_slider, .price_label').show();
            var min_price = $('.price_slider_amount #min_price').data('min'),
                max_price = $('.price_slider_amount #max_price').data('max');
            current_min_price = parseInt(min_price, 10);
            current_max_price = parseInt(max_price, 10);
            if (woocommerce_price_slider_params.min_price) current_min_price = parseInt(woocommerce_price_slider_params.min_price, 10);
            if (woocommerce_price_slider_params.max_price) current_max_price = parseInt(woocommerce_price_slider_params.max_price, 10);
            $('body').bind('price_slider_create price_slider_slide', function(event, min, max) {
                if (woocommerce_price_slider_params.currency_pos === 'left') {
                    $('.price_slider_amount span.from').html(woocommerce_price_slider_params.currency_symbol + min);
                    $('.price_slider_amount span.to').html(woocommerce_price_slider_params.currency_symbol + max);
                } else if (woocommerce_price_slider_params.currency_pos === 'left_space') {
                    $('.price_slider_amount span.from').html(woocommerce_price_slider_params.currency_symbol + " " + min);
                    $('.price_slider_amount span.to').html(woocommerce_price_slider_params.currency_symbol + " " + max);
                } else if (woocommerce_price_slider_params.currency_pos === 'right') {
                    $('.price_slider_amount span.from').html(min + woocommerce_price_slider_params.currency_symbol);
                    $('.price_slider_amount span.to').html(max + woocommerce_price_slider_params.currency_symbol);
                } else if (woocommerce_price_slider_params.currency_pos === 'right_space') {
                    $('.price_slider_amount span.from').html(min + " " + woocommerce_price_slider_params.currency_symbol);
                    $('.price_slider_amount span.to').html(max + " " + woocommerce_price_slider_params.currency_symbol);
                }
                $('body').trigger('price_slider_updated', min, max);
            });
            $('.price_slider').slider({
                range: true,
                animate: true,
                min: min_price,
                max: max_price,
                values: [current_min_price, current_max_price],
                create: function(event, ui) {
                    $('.price_slider_amount #min_price').val(current_min_price);
                    $('.price_slider_amount #max_price').val(current_max_price);
                    $('body').trigger('price_slider_create', [current_min_price, current_max_price]);
                },
                slide: function(event, ui) {
                    $('input#min_price').val(ui.values[0]);
                    $('input#max_price').val(ui.values[1]);
                    $('body').trigger('price_slider_slide', [ui.values[0], ui.values[1]]);
                },
                change: function(event, ui) {
                    $('body').trigger('price_slider_change', [ui.values[0], ui.values[1]]);
                },
            });
        }

        function vcMobileColumns() {
            $('.wpb_row').each(function() {
                if (typeof $(this).find('.span_12').offset() != 'undefined') {
                    $(this).find('[class*="vc_col-"]').each(function() {
                        var $firstChildOffset = $(this).parents('.span_12').offset().left;
                        $(this).removeClass('no-left-margin');
                        if ($(this).offset().left < $firstChildOffset + 27) {
                            $(this).addClass('no-left-margin');
                        } else {
                            $(this).removeClass('no-left-margin');
                        }
                    });
                }
            });
        }
        if ($('[class*="vc_col-xs-"], [class*="vc_col-md-"], [class*="vc_col-lg-"]').length > 0) {
            vcMobileColumns();
        }
        if ($('body[data-fancy-form-rcs="1"]').length > 0) {
            $('select:not(.comment-form-rating #rating)').each(function() {
                if ($(this).parents('.wpcf7-form-control-wrap').length > 0) {
                    if ($(this).parents('.wpcf7-form-control-wrap').find('.select2-container').length > 0) {
                        $selector = $($(this).prev('.select2-container'));
                    } else {
                        $selector = $(this);
                    }
                    if ($selector.parents('.wpcf7-form-control-wrap').parent().find('label').length == 1) {
                        $selector.parents('.wpcf7-form-control-wrap').parent().wrapInner('<div class="fancy-select-wrap" />');
                    } else {
                        $selector.wrap('<div class="fancy-select-wrap" />');
                    }
                } else {
                    if ($(this).prev('.select2-container').length > 0) {
                        $selector = $(this).prev('.select2-container');
                    } else {
                        $selector = $(this);
                    }
                    if ($(this).parents('#buddypress').length == 0) {
                        if ($selector.prev('label').length == 1) {
                            $selector.prev('label').andSelf().wrapAll('<div class="fancy-select-wrap" />');
                        } else if ($selector.next('label').length == 1) {
                            $selector.next('label').andSelf().wrapAll('<div class="fancy-select-wrap" />');
                        } else {
                            $selector.wrap('<div class="fancy-select-wrap" />');
                        }
                    }
                }
            });

            function select2Init() {
                $('select:not(.state_select):not(.country_select):not(.comment-form-rating #rating):not(#tribe-bar-form select):not(.woocommerce-currency-switcher)').each(function() {
                    if ($(this).parents('#buddypress').length == 0) {
                        if ($(this).parents('.woocommerce-ordering').length == 0) {
                            $(this).select2({
                                minimumResultsForSearch: 7,
                                width: '100%'
                            });
                        } else {
                            $(this).select2({
                                minimumResultsForSearch: 7,
                                dropdownAutoWidth: true
                            });
                        }
                    }
                });
            }
            select2Init();
        }
        if (navigator.userAgent.indexOf('Safari') != -1 && navigator.userAgent.indexOf('Chrome') == -1 || navigator.userAgent.match(/(iPod|iPhone|iPad)/)) {
            window.onpageshow = function(event) {
                if (event.persisted) {
                    $('.nectar-video-wrap, .nectar-slider-wrap .swiper-slide .video-wrap').each(function(i) {
                        if ($(this).find('video').length > 0) {
                            $(this).find('video')[0].play();
                        }
                    });
                    if ($('body.material-ocm-open').length > 0) {
                        $('body > .slide_out_area_close').addClass('non-human-allowed').trigger('click');
                        setTimeout(function() {
                            $('body > .slide_out_area_close').removeClass('non-human-allowed');
                        }, 100);
                    } else if ($('#slide-out-widget-area.slide-out-from-right-hover.open').length > 0 && navigator.userAgent.match(/(iPod|iPhone|iPad)/)) {
                        mobileCloseNavCheck();
                    } else if ($('#slide-out-widget-area.fullscreen.open').length > 0 || $('#slide-out-widget-area.fullscreen-alt.open').length > 0 || $('#slide-out-widget-area.slide-out-from-right.open').length > 0) {
                        $('#slide-out-widget-area .slide_out_area_close').addClass('non-human-allowed');
                        $('.slide-out-widget-area-toggle:not(.std-menu) a.open').addClass('non-human-allowed').trigger('click');
                        setTimeout(function() {
                            $('#slide-out-widget-area .slide_out_area_close').removeClass('non-human-allowed');
                        }, 100);
                    }
                }
            }
        }
        if ($('body[data-ajax-transitions="true"]').length > 0 && $('#ajax-loading-screen[data-method="ajax"]').length > 0 && !navigator.userAgent.match(/(Android|iPod|iPhone|iPad|BlackBerry|IEMobile|Opera Mini)/) && $(window).width() > 690) {
            $('#ajax-content-wrap').ajaxify({
                'selector': '#ajax-content-wrap a:not(.no-ajaxy):not([target="_blank"]):not([href^="#"]):not(.comment-edit-link):not(#cancel-comment-reply-link):not(.comment-reply-link):not(#toggle-nav):not(.cart_list a):not(.logged-in-as a):not(.no-widget-added a):not(.add_to_cart_button):not(.product-wrap a):not(.section-down-arrow):not([data-filter]):not([data-fancybox]):not(.product_list_widget a):not(.magnific):not(.pp):not([rel^="prettyPhoto"]):not(.pretty_photo), #header-outer li:not(.no-ajaxy) > a:not(.no-ajaxy), #header-outer #logo',
                'verbosity': 0,
                requestDelay: 400,
                previewoff: true,
                memoryoff: true,
                turbo: false
            });
            $(window).on("pronto.render", initPage).on("pronto.load", destroyPage).on("pronto.request", transitionPage);
            if ($('.nectar-box-roll').length == 0 && $('#ajax-loading-screen[data-effect*="horizontal_swipe"]').length > 0) setTimeout(function() {
                waypoints();
            }, 750);
            else if ($('.nectar-box-roll').length == 0) setTimeout(function() {
                waypoints();
            }, 300);
            if ($('#ajax-loading-screen[data-effect*="horizontal_swipe"]').length > 0) {
                setTimeout(function() {
                    $('#ajax-loading-screen').addClass('loaded');
                }, 30);
            }
            initPage();
        } else if ($('body[data-ajax-transitions="true"]').length > 0 && $('#ajax-loading-screen[data-method="standard"]').length > 0) {
            $('html').addClass('page-trans-loaded');
            if ($('#ajax-loading-screen[data-effect="standard"]').length > 0) {
                if ($('.nectar-particles').length == 0) {
                    $('#ajax-loading-screen').transition({
                        'opacity': 0
                    }, 500, function() {
                        $(this).css({
                            'display': 'none'
                        });
                    });
                    $('#ajax-loading-screen .loading-icon').transition({
                        'opacity': 0
                    }, 500)
                }
                if ($('.nectar-box-roll').length == 0) setTimeout(function() {
                    waypoints();
                }, 550);
                if (navigator.userAgent.indexOf('Safari') != -1 && navigator.userAgent.indexOf('Chrome') == -1 || navigator.userAgent.match(/(iPod|iPhone|iPad)/)) {
                    window.onunload = function() {
                        $('#ajax-loading-screen').stop().transition({
                            'opacity': 0
                        }, 800, function() {
                            $(this).css({
                                'display': 'none'
                            });
                        });
                        $('#ajax-loading-screen .loading-icon').transition({
                            'opacity': 0
                        }, 600)
                    };
                    window.onpageshow = function(event) {
                        if (event.persisted) {
                            $('#ajax-loading-screen').stop().transition({
                                'opacity': 0
                            }, 800, function() {
                                $(this).css({
                                    'display': 'none'
                                });
                            });
                            $('#ajax-loading-screen .loading-icon').transition({
                                'opacity': 0
                            }, 600);
                        }
                    }
                } else if (navigator.userAgent.indexOf('Firefox') != -1) {
                    window.onunload = function() {};
                }
            } else {
                if ($('#ajax-loading-screen[data-effect*="horizontal_swipe"]').length > 0) {
                    setTimeout(function() {
                        $('#ajax-loading-screen').addClass('loaded');
                    }, 60);
                }
                if ($('#page-header-wrap #page-header-bg[data-animate-in-effect="zoom-out"] .nectar-video-wrap').length == 0 && $('.first-nectar-slider').length == 0) {
                    setTimeout(function() {
                        $('#ajax-loading-screen:not(.loaded)').addClass('loaded');
                        setTimeout(function() {
                            $('#ajax-loading-screen').addClass('hidden');
                        }, 1000);
                    }, 150);
                }
                if (navigator.userAgent.indexOf('Safari') != -1 && navigator.userAgent.indexOf('Chrome') == -1 || navigator.userAgent.match(/(iPod|iPhone|iPad)/)) {
                    window.onunload = function() {
                        $('#ajax-loading-screen').stop().transition({
                            'opacity': 0
                        }, 800, function() {
                            $(this).css({
                                'display': 'none'
                            });
                        });
                        $('#ajax-loading-screen .loading-icon').transition({
                            'opacity': 0
                        }, 600)
                    };
                    window.onpageshow = function(event) {
                        if (event.persisted) {
                            $('#ajax-loading-screen').stop().transition({
                                'opacity': 0
                            }, 800, function() {
                                $(this).css({
                                    'display': 'none'
                                });
                            });
                            $('#ajax-loading-screen .loading-icon').transition({
                                'opacity': 0
                            }, 600);
                        }
                    }
                } else if (navigator.userAgent.indexOf('Firefox') != -1) {
                    window.onunload = function() {};
                }
                if ($('.nectar-box-roll').length == 0 && $('#ajax-loading-screen[data-effect*="horizontal_swipe"]').length > 0) {
                    setTimeout(function() {
                        waypoints();
                    }, 750);
                } else if ($('.nectar-box-roll').length == 0) setTimeout(function() {
                    waypoints();
                }, 350);
            }
            $('.portfolio-loading, .nectar-slider-loading .loading-icon').remove();
            if ($('#ajax-loading-screen[data-disable-fade-on-click="1"]').length == 0) {
                if ($('body.using-mobile-browser #ajax-loading-screen[data-method="standard"][data-disable-mobile="1"]').length == 0) {
                    window.addEventListener('beforeunload', function() {
                        $('#ajax-loading-screen').addClass('set-to-fade');
                        transitionPageStandard();
                    });
                }
            }
        } else {
            if ($('.nectar-box-roll').length == 0) setTimeout(function() {
                waypoints();
            }, 100);
        }

        function transitionPage(e) {
            if ($('#ajax-loading-screen[data-effect*="horizontal_swipe"]').length > 0) {
                if ($(window).scrollTop() > 0) {
                    if ($().niceScroll && $("html").getNiceScroll()) {
                        var nice = $("html").getNiceScroll();
                        nice.stop();
                    }
                    $('body,html').stop(true, true).animate({
                        scrollTop: 0
                    }, 500, 'easeOutQuad', function() {
                        setTimeout(function() {
                            if ($('#header-outer').hasClass('side-widget-open')) $('.slide-out-widget-area-toggle a').trigger('click');
                        }, 400);
                        $('#ajax-loading-screen').removeClass('loaded');
                        $('#ajax-loading-screen').addClass('in-from-right');
                        setTimeout(function() {
                            $('#ajax-loading-screen').addClass('loaded');
                        }, 30);
                    });
                } else {
                    setTimeout(function() {
                        if ($('#header-outer').hasClass('side-widget-open')) $('.slide-out-widget-area-toggle a').trigger('click');
                    }, 400);
                    $('#ajax-loading-screen').removeClass('loaded');
                    $('#ajax-loading-screen').addClass('in-from-right');
                    setTimeout(function() {
                        $('#ajax-loading-screen').addClass('loaded');
                    }, 30);
                }
            } else {
                if ($(window).scrollTop() > 0) {
                    if ($().niceScroll && $("html").getNiceScroll()) {
                        var nice = $("html").getNiceScroll();
                        nice.stop();
                    }
                    $('body,html').stop(true, true).animate({
                        scrollTop: 0
                    }, 500, 'easeOutQuad', function() {
                        $('#ajax-loading-screen').css({
                            'opacity': '1',
                            'display': 'none'
                        });
                        $('#ajax-loading-screen').stop(true, true).fadeIn(600, function() {
                            $('#ajax-loading-screen .loading-icon').animate({
                                'opacity': 1
                            }, 400);
                            setTimeout(function() {
                                if ($('#header-outer').hasClass('side-widget-open')) $('.slide-out-widget-area-toggle a').trigger('click');
                            }, 400);
                        });
                    });
                } else {
                    $('#ajax-loading-screen').css('opacity', '1').stop().fadeIn(600, function() {
                        $('#ajax-loading-screen .loading-icon').animate({
                            'opacity': 1
                        }, 400);
                    });
                    setTimeout(function() {
                        if ($('#header-outer').hasClass('side-widget-open')) $('.slide-out-widget-area-toggle a').trigger('click');
                    }, 400);
                }
            }
        }

        function transitionPageStandard(e) {
            if ($('#ajax-loading-screen[data-effect*="horizontal_swipe"]').length > 0) {
                $('#ajax-loading-screen').removeClass('loaded');
                $('#ajax-loading-screen').addClass('in-from-right');
                setTimeout(function() {
                    $('#ajax-loading-screen').addClass('loaded');
                }, 30);
            } else {
                if ($('#ajax-loading-screen[data-effect="center_mask_reveal"]').length > 0) {
                    $('#ajax-loading-screen').css('opacity', '0').css('display', 'block').transition({
                        'opacity': '1'
                    }, 450);
                } else {
                    $('#ajax-loading-screen').show().transition({
                        'opacity': '1'
                    }, 450);
                }
            }
        }

        function destroyPage(e) {
            $(window).off('scroll.appear');
            if ($('#nectar_fullscreen_rows').length > 0 && $().fullpage)
                $.fn.fullpage.destroy('all');
        }

        function initPage(e) {
            if (!$('body').hasClass('ajax-loaded')) return false;
            lightBoxInit();
            addOrRemoveSF();
            if ($('body[data-header-format="left-header"]').length == 0)
                $(".sf-menu").superfish('destroy');
            initSF();
            SFArrows();
            headerInit();
            var $effectTimeout = ($('#ajax-loading-screen').length > 0) ? 800 : 0;
            pageHeaderTextEffectInit();
            if ($('#page-header-bg .nectar-video-wrap video').length == 0) {
                setTimeout(pageHeaderTextEffect, $effectTimeout);
            }
            coloredButtons();
            columnBGColors();
            fwCarouselLinkFix();
            if ($('.carousel').length > 0) {
                standardCarouselInit();
                carouselHeightCalcs();
            }
            if ($('.owl-carousel').length > 0) owlCarouselInit();
            if ($('.products-carousel').length > 0 || $('.nectar-woo-flickity').length > 0) productCarouselInit();
            if ($('#nectar_fullscreen_rows').length > 0 && $().fullpage) {
                setFPNames();
                initFullPageFooter();
                fullscreenRowLogic();
                initNectarFP();
            }
            flexsliderInit();
            accordionInit();
            tabbedInit();
            tabbbedDeepLinking();
            accordionDeepLinking();
            ulChecks();
            oneFourthClasses();
            carouselfGrabbingClass();
            cascadingImageBGSizing();
            fullWidthSections();
            fwsClasses();
            fullwidthImgOnlySizingInit();
            fullwidthImgOnlySizing();
            if (nectarDOMInfo.usingMobileBrowser) {
                fullWidthRowPaddingAdjustCalc();
            }
            boxRollInit();
            setTimeout(function() {
                waypoints();
                flickityInit();
            }, 100);
            if ($('body[data-animated-anchors="true"]').length > 0) setTimeout(scrollSpyInit, 200);
            socialSharingInit();
            hotSpotHoverBind();
            pricingTableHeight();
            createTestimonialControls();
            imageWithHotspotClickEvents();
            testimonialSliderHeight();
            largeIconHover();
            if ($('body.material[data-slide-out-widget-area-style="slide-out-from-right"]').length == 0) {
                fullscreenMenuInit();
            }
            boxRollMouseWheelInit();
            midnightInit();
            responsiveVideoIframesInit();
            responsiveVideoIframes();
            fullWidthContentColumns();
            videoBGInit();
            $window.unbind('scroll.parallaxSections').unbind('resize.parallaxSections');
            parallaxScrollInit();
            $blog_containers = [];
            $('.posts-container').each(function(i) {
                $blog_containers[i] = $(this);
            });
            nectarAccountPageTabs();
            masonryBlogInit();
            masonryPortfolioInit();
            portfolioAccentColor();
            portfolioHoverEffects();
            portfolioFiltersInit();
            style6Img();
            isotopeCatSelection();
            $(window).unbind('.infscr');
            infiniteScrollInit();
            toTopBind();
            centerLove();
            postNextButtonEffect();
            pageLoadHash();
            slideOutWidgetAreaScrolling();
            if ($('body.search-results').length > 0 && $('#search-results article').length > 0) {
                searchResultMasonry();
            }
            if ($().wpcf7InitForm) $('div.wpcf7 > form').wpcf7InitForm();
            wooPriceSlider();
            if (typeof twttr != 'undefined') {
                twttr.widgets.load();
            }
            if (typeof init_rhc === 'function') {
                init_rhc();
            }
            $('.video-wrap iframe').unwrap();
            $('#sidebar iframe[src]').unwrap();
            $('video:not(.slider-video)').attr('width', '100%');
            $('video:not(.slider-video)').attr('height', '100%');
            $('.wp-video-shortcode.mejs-container').each(function() {
                $(this).attr('data-aspectRatio', parseInt($(this).css('height')) / parseInt($(this).css('width')));
            });
            $('video.wp-media-shortcode-ajax, audio.wp-media-shortcode-ajax').each(function() {
                if (!$(this).parent().hasClass('mejs-mediaelement') && $().mediaelementplayer) {
                    $(this).mediaelementplayer();
                }
            });
            $('.mejs-container').css({
                'height': '100%',
                'width': '100%'
            });
            $('audio').attr('width', '100%');
            $('audio').attr('height', '100%');
            $('audio').css('visibility', 'visible');
            if ($('body').hasClass('mobile')) {
                $('video').css('visibility', 'hidden');
            } else {
                $('video').css('visibility', 'visible');
            }
            $('.wpb_row:has(".nectar-video-wrap")').each(function(i) {
                $(this).css('z-index', 100 + i);
            });
            mouseParallaxInit();
            if (navigator.userAgent.indexOf('Chrome') > 0) {
                $('.swiper-wrapper .video-wrap').each(function(i) {
                    var webmSource = jQuery(this).find('video source[type="video/webm"]').attr('src') + "?id=" + Math.ceil(Math.random() * 10000);
                    var firstVideo = jQuery(this).find('video').get(0);
                    firstVideo.src = webmSource;
                    firstVideo.load();
                });
            }
            if ($('.nectar-video-bg').length > 0) {
                setTimeout(function() {
                    resizeVideoToCover();
                    $('.video-color-overlay').each(function() {
                        $(this).css('background-color', $(this).attr('data-color'));
                    });
                    $('.nectar-video-wrap').transition({
                        'opacity': '1'
                    }, 0);
                    $('.video-color-overlay').transition({
                        'opacity': '0.7'
                    }, 0);
                }, 400);
            }
            nectarPageHeader();
            $('#header-outer div.cart-outer').hoverIntent(function() {
                $('#header-outer .widget_shopping_cart').addClass('open').stop(true, true).fadeIn(400);
                $('#header-outer .cart_list').stop(true, true).fadeIn(400);
                clearTimeout(timeout);
                $('#header-outer .cart-notification').fadeOut(300);
            });
            $('.portfolio-loading, .nectar-slider-loading .loading-icon').remove();
            setTimeout(portfolioSidebarFollow, 250);
            setTimeout(portfolioSidebarFollow, 500);
            setTimeout(portfolioSidebarFollow, 1000);
            crossBrowserFixes();
            $(window).trigger('resize');
            $("#wpadminbar").show();
            if ($('#header-outer').hasClass('side-widget-open')) $('.slide-out-widget-area-toggle a').trigger('click');
            if ($('#ajax-loading-screen[data-effect*="horizontal_swipe"]').length > 0) {
                closeSearch();
                $('#ajax-loading-screen').removeClass('in-from-right').removeClass('loaded');
                setTimeout(function() {
                    $('#ajax-loading-screen').addClass('loaded');
                }, 30);
            } else {
                setTimeout(function() {
                    $('#ajax-loading-screen').stop(true, true).fadeOut(500, function() {
                        $('#ajax-loading-screen .loading-icon').css({
                            'opacity': 0
                        });
                    });
                    closeSearch();
                }, 200);
                setTimeout(function() {
                    $('#ajax-loading-screen').stop(true, true).fadeOut(500, function() {
                        $('#ajax-loading-screen .loading-icon').css({
                            'opacity': 0
                        });
                    });
                    closeSearch();
                }, 900);
            }
        }
        (function($) {
            if (!$.fn.textareaCount) {
                $.fn.textareaCount = function(options, fn) {
                    var defaults = {
                        maxCharacterSize: -1,
                        originalStyle: 'originalTextareaInfo',
                        warningStyle: 'warningTextareaInfo',
                        warningNumber: 20,
                        displayFormat: '#input characters | #words words'
                    };
                    var options = $.extend(defaults, options);
                    var container = $(this);
                    $("<div class='charleft'>&nbsp;</div>").insertAfter(container);
                    var charLeftCss = {
                        'width': container.width()
                    };
                    var charLeftInfo = getNextCharLeftInformation(container);
                    charLeftInfo.addClass(options.originalStyle);
                    var numInput = 0;
                    var maxCharacters = options.maxCharacterSize;
                    var numLeft = 0;
                    var numWords = 0;
                    container.bind('keyup', function(event) {
                        limitTextAreaByCharacterCount();
                    }).bind('mouseover', function(event) {
                        setTimeout(function() {
                            limitTextAreaByCharacterCount();
                        }, 10);
                    }).bind('paste', function(event) {
                        setTimeout(function() {
                            limitTextAreaByCharacterCount();
                        }, 10);
                    });
                    limitTextAreaByCharacterCount();

                    function limitTextAreaByCharacterCount() {
                        charLeftInfo.html(countByCharacters());
                        if (typeof fn != 'undefined') {
                            fn.call(this, getInfo());
                        }
                        return true;
                    }

                    function countByCharacters() {
                        var content = container.val();
                        var contentLength = content.length;
                        if (options.maxCharacterSize > 0) {
                            if (contentLength >= options.maxCharacterSize) {
                                content = content.substring(0, options.maxCharacterSize);
                            }
                            var newlineCount = getNewlineCount(content);
                            var systemmaxCharacterSize = options.maxCharacterSize - newlineCount;
                            if (!isWin()) {
                                systemmaxCharacterSize = options.maxCharacterSize
                            }
                            if (contentLength > systemmaxCharacterSize) {
                                var originalScrollTopPosition = this.scrollTop;
                                container.val(content.substring(0, systemmaxCharacterSize));
                                this.scrollTop = originalScrollTopPosition;
                            }
                            charLeftInfo.removeClass(options.warningStyle);
                            if (systemmaxCharacterSize - contentLength <= options.warningNumber) {
                                charLeftInfo.addClass(options.warningStyle);
                            }
                            numInput = container.val().length + newlineCount;
                            if (!isWin()) {
                                numInput = container.val().length;
                            }
                            numWords = countWord(getCleanedWordString(container.val()));
                            numLeft = maxCharacters - numInput;
                        } else {
                            var newlineCount = getNewlineCount(content);
                            numInput = container.val().length + newlineCount;
                            if (!isWin()) {
                                numInput = container.val().length;
                            }
                            numWords = countWord(getCleanedWordString(container.val()));
                        }
                        return formatDisplayInfo();
                    }

                    function formatDisplayInfo() {
                        var format = options.displayFormat;
                        format = format.replace('#input', numInput);
                        format = format.replace('#words', numWords);
                        if (maxCharacters > 0) {
                            format = format.replace('#max', maxCharacters);
                            format = format.replace('#left', numLeft);
                        }
                        return format;
                    }

                    function getInfo() {
                        var info = {
                            input: numInput,
                            max: maxCharacters,
                            left: numLeft,
                            words: numWords
                        };
                        return info;
                    }

                    function getNextCharLeftInformation(container) {
                        return container.next('.charleft');
                    }

                    function isWin() {
                        var strOS = navigator.appVersion;
                        if (strOS.toLowerCase().indexOf('win') != -1) {
                            return true;
                        }
                        return false;
                    }

                    function getNewlineCount(content) {
                        var newlineCount = 0;
                        for (var i = 0; i < content.length; i++) {
                            if (content.charAt(i) == '\n') {
                                newlineCount++;
                            }
                        }
                        return newlineCount;
                    }

                    function getCleanedWordString(content) {
                        var fullStr = content + " ";
                        var initial_whitespace_rExp = /^[^A-Za-z0-9]+/gi;
                        var left_trimmedStr = fullStr.replace(initial_whitespace_rExp, "");
                        var non_alphanumerics_rExp = rExp = /[^A-Za-z0-9]+/gi;
                        var cleanedStr = left_trimmedStr.replace(non_alphanumerics_rExp, " ");
                        var splitString = cleanedStr.split(" ");
                        return splitString;
                    }

                    function countWord(cleanedWordString) {
                        var word_count = cleanedWordString.length - 1;
                        return word_count;
                    }
                };
            }
        })(jQuery);
    });
}(window.jQuery, window, document));

function resizeIframe() {
    var element = document.getElementById("pp_full_res").getElementsByTagName("iframe");
    var height = element[0].contentWindow.document.body.scrollHeight;
    element[0].style.height = height + 'px';
    document.getElementsByClassName("pp_content_container")[0].style.height = height + 40 + 'px';
    document.getElementsByClassName("pp_content")[0].style.height = height + 40 + 'px';
}
/*!
 * hoverIntent v1.9.0 // 2017.09.01 // jQuery v1.7.0+
 * http://briancherne.github.io/jquery-hoverIntent/
 *
 * You may use hoverIntent under the terms of the MIT license. Basically that
 * means you are free to use hoverIntent as long as this header is left intact.
 * Copyright 2007-2017 Brian Cherne
 */
! function(factory) {
    "use strict";
    "function" == typeof define && define.amd ? define(["jquery"], factory) : jQuery && !jQuery.fn.hoverIntent && factory(jQuery)
}(function($) {
    "use strict";
    var cX, cY, _cfg = {
            interval: 100,
            sensitivity: 6,
            timeout: 0
        },
        INSTANCE_COUNT = 0,
        track = function(ev) {
            cX = ev.pageX, cY = ev.pageY
        },
        compare = function(ev, $el, s, cfg) {
            if (Math.sqrt((s.pX - cX) * (s.pX - cX) + (s.pY - cY) * (s.pY - cY)) < cfg.sensitivity) return $el.off(s.event, track), delete s.timeoutId, s.isActive = !0, ev.pageX = cX, ev.pageY = cY, delete s.pX, delete s.pY, cfg.over.apply($el[0], [ev]);
            s.pX = cX, s.pY = cY, s.timeoutId = setTimeout(function() {
                compare(ev, $el, s, cfg)
            }, cfg.interval)
        },
        delay = function(ev, $el, s, out) {
            return delete $el.data("hoverIntent")[s.id], out.apply($el[0], [ev])
        };
    $.fn.hoverIntent = function(handlerIn, handlerOut, selector) {
        var instanceId = INSTANCE_COUNT++,
            cfg = $.extend({}, _cfg);
        $.isPlainObject(handlerIn) ? (cfg = $.extend(cfg, handlerIn), $.isFunction(cfg.out) || (cfg.out = cfg.over)) : cfg = $.isFunction(handlerOut) ? $.extend(cfg, {
            over: handlerIn,
            out: handlerOut,
            selector: selector
        }) : $.extend(cfg, {
            over: handlerIn,
            out: handlerIn,
            selector: handlerOut
        });
        var handleHover = function(e) {
            var ev = $.extend({}, e),
                $el = $(this),
                hoverIntentData = $el.data("hoverIntent");
            hoverIntentData || $el.data("hoverIntent", hoverIntentData = {});
            var state = hoverIntentData[instanceId];
            state || (hoverIntentData[instanceId] = state = {
                id: instanceId
            }), state.timeoutId && (state.timeoutId = clearTimeout(state.timeoutId));
            var mousemove = state.event = "mousemove.hoverIntent.hoverIntent" + instanceId;
            if ("mouseenter" === e.type) {
                if (state.isActive) return;
                state.pX = ev.pageX, state.pY = ev.pageY, $el.off(mousemove, track).on(mousemove, track), state.timeoutId = setTimeout(function() {
                    compare(ev, $el, state, cfg)
                }, cfg.interval)
            } else {
                if (!state.isActive) return;
                $el.off(mousemove, track), state.timeoutId = setTimeout(function() {
                    delay(ev, $el, state, cfg.out)
                }, cfg.timeout)
            }
        };
        return this.on({
            "mouseenter.hoverIntent": handleHover,
            "mouseleave.hoverIntent": handleHover
        }, cfg.selector)
    }
});
! function(a, b) {
    "use strict";

    function c() {
        if (!e) {
            e = !0;
            var a, c, d, f, g = -1 !== navigator.appVersion.indexOf("MSIE 10"),
                h = !!navigator.userAgent.match(/Trident.*rv:11\./),
                i = b.querySelectorAll("iframe.wp-embedded-content");
            for (c = 0; c < i.length; c++) {
                if (d = i[c], !d.getAttribute("data-secret")) f = Math.random().toString(36).substr(2, 10), d.src += "#?secret=" + f, d.setAttribute("data-secret", f);
                if (g || h) a = d.cloneNode(!0), a.removeAttribute("security"), d.parentNode.replaceChild(a, d)
            }
        }
    }
    var d = !1,
        e = !1;
    if (b.querySelector)
        if (a.addEventListener) d = !0;
    if (a.wp = a.wp || {}, !a.wp.receiveEmbedMessage)
        if (a.wp.receiveEmbedMessage = function(c) {
                var d = c.data;
                if (d.secret || d.message || d.value)
                    if (!/[^a-zA-Z0-9]/.test(d.secret)) {
                        var e, f, g, h, i, j = b.querySelectorAll('iframe[data-secret="' + d.secret + '"]'),
                            k = b.querySelectorAll('blockquote[data-secret="' + d.secret + '"]');
                        for (e = 0; e < k.length; e++) k[e].style.display = "none";
                        for (e = 0; e < j.length; e++)
                            if (f = j[e], c.source === f.contentWindow) {
                                if (f.removeAttribute("style"), "height" === d.message) {
                                    if (g = parseInt(d.value, 10), g > 1e3) g = 1e3;
                                    else if (~~g < 200) g = 200;
                                    f.height = g
                                }
                                if ("link" === d.message)
                                    if (h = b.createElement("a"), i = b.createElement("a"), h.href = f.getAttribute("src"), i.href = d.value, i.host === h.host)
                                        if (b.activeElement === f) a.top.location.href = d.value
                            } else;
                    }
            }, d) a.addEventListener("message", a.wp.receiveEmbedMessage, !1), b.addEventListener("DOMContentLoaded", c, !1), a.addEventListener("load", c, !1)
}(window, document);

function vc_js() {
    /* nectar addition */
    /*
     vc_toggleBehaviour(), vc_tabsBehaviour(), vc_accordionBehaviour(), vc_teaserGrid(), vc_carouselBehaviour(), vc_slidersBehaviour(), vc_prettyPhoto(), vc_googleplus(), vc_pinterest(), vc_progress_bar(), vc_plugin_flexslider(), 
     vc_google_fonts(), vc_gridBehaviour(), vc_rowBehaviour(), vc_prepareHoverBox(), vc_googleMapsPointer(), vc_ttaActivation(), jQuery(document).trigger("vc_js"), window.setTimeout(vc_waypoints, 500) */
    /* nectar addition end */
}
document.documentElement.className += " js_active ", document.documentElement.className += "ontouchstart" in document.documentElement ? " vc_mobile " : " vc_desktop ",
    function() {
        for (var prefix = ["-webkit-", "-moz-", "-ms-", "-o-", ""], i = 0; i < prefix.length; i++) prefix[i] + "transform" in document.documentElement.style && (document.documentElement.className += " vc_transform ")
    }(), "function" != typeof window.vc_plugin_flexslider && (window.vc_plugin_flexslider = function($parent) {
        ($parent ? $parent.find(".wpb_flexslider") : jQuery(".wpb_flexslider")).each(function() {
            var this_element = jQuery(this),
                sliderTimeout = 1e3 * parseInt(this_element.attr("data-interval")),
                sliderFx = this_element.attr("data-flex_fx"),
                slideshow = !0;
            0 === sliderTimeout && (slideshow = !1), this_element.is(":visible") && this_element.flexslider({
                animation: sliderFx,
                slideshow: slideshow,
                slideshowSpeed: sliderTimeout,
                sliderSpeed: 800,
                smoothHeight: !0
            })
        })
    }), "function" != typeof window.vc_googleplus && (window.vc_googleplus = function() {
        0 < jQuery(".wpb_googleplus").length && function() {
            var po = document.createElement("script");
            po.type = "text/javascript", po.async = !0, po.src = "//apis.google.com/js/plusone.js";
            var s = document.getElementsByTagName("script")[0];
            s.parentNode.insertBefore(po, s)
        }()
    }), "function" != typeof window.vc_pinterest && (window.vc_pinterest = function() {
        0 < jQuery(".wpb_pinterest").length && function() {
            var po = document.createElement("script");
            po.type = "text/javascript", po.async = !0, po.src = "//assets.pinterest.com/js/pinit.js";
            var s = document.getElementsByTagName("script")[0];
            s.parentNode.insertBefore(po, s)
        }()
    }), "function" != typeof window.vc_progress_bar && (window.vc_progress_bar = function() {
        void 0 !== jQuery.fn.waypoint && jQuery(".vc_progress_bar").waypoint(function() {
            jQuery(this).find(".vc_single_bar").each(function(index) {
                var bar = jQuery(this).find(".vc_bar"),
                    val = bar.data("percentage-value");
                setTimeout(function() {
                    bar.css({
                        width: val + "%"
                    })
                }, 200 * index)
            })
        }, {
            offset: "85%"
        })
    }), "function" != typeof window.vc_waypoints && (window.vc_waypoints = function() {
        void 0 !== jQuery.fn.waypoint && jQuery(".wpb_animate_when_almost_visible:not(.wpb_start_animation)").waypoint(function() {
            jQuery(this).addClass("wpb_start_animation animated")
        }, {
            offset: "85%"
        })
    }), "function" != typeof window.vc_toggleBehaviour && (window.vc_toggleBehaviour = function($el) {
        function event(e) {
            e && e.preventDefault && e.preventDefault();
            var element = jQuery(this).closest(".vc_toggle"),
                content = element.find(".vc_toggle_content");
            element.hasClass("vc_toggle_active") ? content.slideUp({
                duration: 300,
                complete: function() {
                    element.removeClass("vc_toggle_active")
                }
            }) : content.slideDown({
                duration: 300,
                complete: function() {
                    element.addClass("vc_toggle_active")
                }
            })
        }
        $el ? $el.hasClass("vc_toggle_title") ? $el.unbind("click").click(event) : $el.find(".vc_toggle_title").unbind("click").click(event) : jQuery(".vc_toggle_title").unbind("click").on("click", event)
    }), "function" != typeof window.vc_tabsBehaviour && (window.vc_tabsBehaviour = function($tab) {
        if (jQuery.ui) {
            var $call = $tab || jQuery(".wpb_tabs, .wpb_tour"),
                ver = jQuery.ui && jQuery.ui.version ? jQuery.ui.version.split(".") : "1.10",
                old_version = 1 === parseInt(ver[0]) && parseInt(ver[1]) < 9;
            $call.each(function(index) {
                var $tabs, interval = jQuery(this).attr("data-interval"),
                    tabs_array = [];
                if ($tabs = jQuery(this).find(".wpb_tour_tabs_wrapper").tabs({
                        show: function(event, ui) {
                            wpb_prepare_tab_content(event, ui)
                        },
                        beforeActivate: function(event, ui) {
                            1 !== ui.newPanel.index() && ui.newPanel.find(".vc_pie_chart:not(.vc_ready)")
                        },
                        activate: function(event, ui) {
                            wpb_prepare_tab_content(event, ui)
                        }
                    }), interval && 0 < interval) try {
                    $tabs.tabs("rotate", 1e3 * interval)
                } catch (e) {
                    window.console && window.console.warn && console.warn(e)
                }
                jQuery(this).find(".wpb_tab").each(function() {
                    tabs_array.push(this.id)
                }), jQuery(this).find(".wpb_tabs_nav li").click(function(e) {
                    return e.preventDefault(), old_version ? $tabs.tabs("select", jQuery("a", this).attr("href")) : $tabs.tabs("option", "active", jQuery(this).index()), !1
                }), jQuery(this).find(".wpb_prev_slide a, .wpb_next_slide a").click(function(e) {
                    if (e.preventDefault(), old_version) {
                        var index = $tabs.tabs("option", "selected");
                        jQuery(this).parent().hasClass("wpb_next_slide") ? index++ : index--, index < 0 ? index = $tabs.tabs("length") - 1 : index >= $tabs.tabs("length") && (index = 0), $tabs.tabs("select", index)
                    } else {
                        index = $tabs.tabs("option", "active");
                        var length = $tabs.find(".wpb_tab").length;
                        index = jQuery(this).parent().hasClass("wpb_next_slide") ? length <= index + 1 ? 0 : index + 1 : index - 1 < 0 ? length - 1 : index - 1, $tabs.tabs("option", "active", index)
                    }
                })
            })
        }
    }), "function" != typeof window.vc_accordionBehaviour && (window.vc_accordionBehaviour = function() {
        jQuery(".wpb_accordion").each(function(index) {
            var $tabs, $this = jQuery(this),
                active_tab = ($this.attr("data-interval"), !isNaN(jQuery(this).data("active-tab")) && 0 < parseInt($this.data("active-tab")) && parseInt($this.data("active-tab")) - 1),
                collapsible = !1 === active_tab || "yes" === $this.data("collapsible");
            $tabs = $this.find(".wpb_accordion_wrapper").accordion({
                header: "> div > h3",
                autoHeight: !1,
                heightStyle: "content",
                active: active_tab,
                collapsible: collapsible,
                navigation: !0,
                activate: vc_accordionActivate,
                change: function(event, ui) {
                    void 0 !== jQuery.fn.isotope && ui.newContent.find(".isotope").isotope("layout"), vc_carouselBehaviour(ui.newPanel)
                }
            }), !0 === $this.data("vcDisableKeydown") && ($tabs.data("uiAccordion")._keydown = function() {})
        })
    }), "function" != typeof window.vc_teaserGrid && (window.vc_teaserGrid = function() {
        var layout_modes = {
            fitrows: "fitRows",
            masonry: "masonry"
        };
        jQuery(".wpb_grid .teaser_grid_container:not(.wpb_carousel), .wpb_filtered_grid .teaser_grid_container:not(.wpb_carousel)").each(function() {
            var $container = jQuery(this),
                $thumbs = $container.find(".wpb_thumbnails"),
                layout_mode = $thumbs.attr("data-layout-mode");
            $thumbs.isotope({
                itemSelector: ".isotope-item",
                layoutMode: void 0 === layout_modes[layout_mode] ? "fitRows" : layout_modes[layout_mode]
            }), $container.find(".categories_filter a").data("isotope", $thumbs).click(function(e) {
                e.preventDefault();
                var $thumbs = jQuery(this).data("isotope");
                jQuery(this).parent().parent().find(".active").removeClass("active"), jQuery(this).parent().addClass("active"), $thumbs.isotope({
                    filter: jQuery(this).attr("data-filter")
                })
            }), jQuery(window).bind("load resize", function() {
                $thumbs.isotope("layout")
            })
        })
    }), "function" != typeof window.vc_carouselBehaviour && (window.vc_carouselBehaviour = function($parent) {
        ($parent ? $parent.find(".wpb_carousel") : jQuery(".wpb_carousel")).each(function() {
            var $this = jQuery(this);
            if (!0 !== $this.data("carousel_enabled") && $this.is(":visible")) {
                $this.data("carousel_enabled", !0);
                getColumnsCount(jQuery(this));
                jQuery(this).hasClass("columns_count_1") && 900;
                var carousele_li = jQuery(this).find(".wpb_thumbnails-fluid li");
                carousele_li.css({
                    "margin-right": carousele_li.css("margin-left"),
                    "margin-left": 0
                });
                var fluid_ul = jQuery(this).find("ul.wpb_thumbnails-fluid");
                fluid_ul.width(fluid_ul.width() + 300), jQuery(window).resize(function() {
                    screen_size != (screen_size = getSizeName()) && window.setTimeout("location.reload()", 20)
                })
            }
        })
    }), "function" != typeof window.vc_slidersBehaviour && (window.vc_slidersBehaviour = function() {
        jQuery(".wpb_gallery_slides").each(function(index) {
            var $imagesGrid, this_element = jQuery(this);
            if (this_element.hasClass("wpb_slider_nivo")) {
                var sliderTimeout = 1e3 * this_element.attr("data-interval");
                0 === sliderTimeout && (sliderTimeout = 9999999999), this_element.find(".nivoSlider").nivoSlider({
                    effect: "boxRainGrow,boxRain,boxRainReverse,boxRainGrowReverse",
                    slices: 15,
                    boxCols: 8,
                    boxRows: 4,
                    animSpeed: 800,
                    pauseTime: sliderTimeout,
                    startSlide: 0,
                    directionNav: !0,
                    directionNavHide: !0,
                    controlNav: !0,
                    keyboardNav: !1,
                    pauseOnHover: !0,
                    manualAdvance: !1,
                    prevText: "Prev",
                    nextText: "Next"
                })
            } else this_element.hasClass("wpb_image_grid") && (jQuery.fn.imagesLoaded ? $imagesGrid = this_element.find(".wpb_image_grid_ul").imagesLoaded(function() {
                $imagesGrid.isotope({
                    itemSelector: ".isotope-item",
                    layoutMode: "fitRows"
                })
            }) : this_element.find(".wpb_image_grid_ul").isotope({
                itemSelector: ".isotope-item",
                layoutMode: "fitRows"
            }))
        })
    }), "function" != typeof window.vc_prettyPhoto && (window.vc_prettyPhoto = function() {
        try {
            jQuery && jQuery.fn && jQuery.fn.prettyPhoto && jQuery('a.prettyphoto, .gallery-icon a[href*=".jpg"]').prettyPhoto({
                animationSpeed: "normal",
                hook: "data-rel",
                padding: 15,
                opacity: .7,
                showTitle: !0,
                allowresize: !0,
                counter_separator_label: "/",
                hideflash: !1,
                deeplinking: !1,
                modal: !1,
                callback: function() {
                    -1 < location.href.indexOf("#!prettyPhoto") && (location.hash = "")
                },
                social_tools: ""
            })
        } catch (err) {
            window.console && window.console.warn && console.warn(err)
        }
    }), "function" != typeof window.vc_google_fonts && (window.vc_google_fonts = function() {
        return !1
    }), window.vcParallaxSkroll = !1, "function" != typeof window.vc_rowBehaviour && (window.vc_rowBehaviour = function() {
        var vcSkrollrOptions, callSkrollInit, $ = window.jQuery;

        function fullWidthRow() {
            var $elements = $('[data-vc-full-width="true"]');
            $.each($elements, function(key, item) {
                var $el = $(this);
                $el.addClass("vc_hidden");
                var $el_full = $el.next(".vc_row-full-width");
                if ($el_full.length || ($el_full = $el.parent().next(".vc_row-full-width")), $el_full.length) {
                    var padding, paddingRight, el_margin_left = parseInt($el.css("margin-left"), 10),
                        el_margin_right = parseInt($el.css("margin-right"), 10),
                        offset = 0 - $el_full.offset().left - el_margin_left,
                        width = $(window).width();
                    if ("rtl" === $el.css("direction") && (offset -= $el_full.width(), offset += width, offset += el_margin_left, offset += el_margin_right), $el.css({
                            position: "relative",
                            left: offset,
                            "box-sizing": "border-box",
                            width: width
                        }), !$el.data("vcStretchContent")) "rtl" === $el.css("direction") ? ((padding = $el_full.offset().left) < 0 && (padding = 0), (paddingRight = offset) < 0 && (paddingRight = 0)) : ((padding = -1 * offset) < 0 && (padding = 0), (paddingRight = width - padding - $el_full.width() + el_margin_left + el_margin_right) < 0 && (paddingRight = 0)), $el.css({
                        "padding-left": padding + "px",
                        "padding-right": paddingRight + "px"
                    });
                    $el.attr("data-vc-full-width-init", "true"), $el.removeClass("vc_hidden"), $(document).trigger("vc-full-width-row-single", {
                        el: $el,
                        offset: offset,
                        marginLeft: el_margin_left,
                        marginRight: el_margin_right,
                        elFull: $el_full,
                        width: width
                    })
                }
            }), $(document).trigger("vc-full-width-row", $elements)
        }

        function fullHeightRow() {
            var windowHeight, offsetTop, fullHeight, $element = $(".vc_row-o-full-height:first");
            $element.length && (windowHeight = $(window).height(), (offsetTop = $element.offset().top) < windowHeight && (fullHeight = 100 - offsetTop / (windowHeight / 100), $element.css("min-height", fullHeight + "vh")));
            $(document).trigger("vc-full-height-row", $element)
        }
        $(window).off("resize.vcRowBehaviour").on("resize.vcRowBehaviour", fullWidthRow).on("resize.vcRowBehaviour", fullHeightRow), fullWidthRow(), fullHeightRow(), (0 < window.navigator.userAgent.indexOf("MSIE ") || navigator.userAgent.match(/Trident.*rv\:11\./)) && $(".vc_row-o-full-height").each(function() {
            "flex" === $(this).css("display") && $(this).wrap('<div class="vc_ie-flexbox-fixer"></div>')
        }), vc_initVideoBackgrounds(), callSkrollInit = !1, window.vcParallaxSkroll && window.vcParallaxSkroll.destroy(), $(".vc_parallax-inner").remove(), $("[data-5p-top-bottom]").removeAttr("data-5p-top-bottom data-30p-top-bottom"), $("[data-vc-parallax]").each(function() {
            var skrollrSize, skrollrStart, $parallaxElement, parallaxImage, youtubeId;
            callSkrollInit = !0, "on" === $(this).data("vcParallaxOFade") && $(this).children().attr("data-5p-top-bottom", "opacity:0;").attr("data-30p-top-bottom", "opacity:1;"), skrollrSize = 100 * $(this).data("vcParallax"), ($parallaxElement = $("<div />").addClass("vc_parallax-inner").appendTo($(this))).height(skrollrSize + "%"), (youtubeId = vcExtractYoutubeId(parallaxImage = $(this).data("vcParallaxImage"))) ? insertYoutubeVideoAsBackground($parallaxElement, youtubeId) : void 0 !== parallaxImage && $parallaxElement.css("background-image", "url(" + parallaxImage + ")"), skrollrStart = -(skrollrSize - 100), $parallaxElement.attr("data-bottom-top", "top: " + skrollrStart + "%;").attr("data-top-bottom", "top: 0%;")
        }), callSkrollInit && window.skrollr && (vcSkrollrOptions = {
            forceHeight: !1,
            smoothScrolling: !1,
            mobileCheck: function() {
                return !1
            }
        }, window.vcParallaxSkroll = skrollr.init(vcSkrollrOptions), window.vcParallaxSkroll)
    }), "function" != typeof window.vc_gridBehaviour && (window.vc_gridBehaviour = function() {
        jQuery.fn.vcGrid && jQuery("[data-vc-grid]").vcGrid()
    }), "function" != typeof window.getColumnsCount && (window.getColumnsCount = function(el) {
        for (var find = !1, i = 1; !1 === find;) {
            if (el.hasClass("columns_count_" + i)) return find = !0, i;
            i++
        }
    });
var screen_size = getSizeName();

function getSizeName() {
    var screen_w = jQuery(window).width();
    return 1170 < screen_w ? "desktop_wide" : 960 < screen_w && screen_w < 1169 ? "desktop" : 768 < screen_w && screen_w < 959 ? "tablet" : 300 < screen_w && screen_w < 767 ? "mobile" : screen_w < 300 ? "mobile_portrait" : ""
}

function loadScript(url, $obj, callback) {
    var script = document.createElement("script");
    script.type = "text/javascript", script.readyState && (script.onreadystatechange = function() {
        "loaded" !== script.readyState && "complete" !== script.readyState || (script.onreadystatechange = null, callback())
    }), script.src = url, $obj.get(0).appendChild(script)
}

function vc_ttaActivation() {
    jQuery("[data-vc-accordion]").on("show.vc.accordion", function(e) {
        var $ = window.jQuery,
            ui = {};
        ui.newPanel = $(this).data("vc.accordion").getTarget(), window.wpb_prepare_tab_content(e, ui)
    })
}

function vc_accordionActivate(event, ui) {
    if (ui.newPanel.length && ui.newHeader.length) {
        var $pie_charts = ui.newPanel.find(".vc_pie_chart:not(.vc_ready)"),
            $round_charts = ui.newPanel.find(".vc_round-chart"),
            $line_charts = ui.newPanel.find(".vc_line-chart"),
            $carousel = ui.newPanel.find('[data-ride="vc_carousel"]');
        void 0 !== jQuery.fn.isotope && ui.newPanel.find(".isotope, .wpb_image_grid_ul").isotope("layout"), ui.newPanel.find(".vc_masonry_media_grid, .vc_masonry_grid").length && ui.newPanel.find(".vc_masonry_media_grid, .vc_masonry_grid").each(function() {
            var grid = jQuery(this).data("vcGrid");
            grid && grid.gridBuilder && grid.gridBuilder.setMasonry && grid.gridBuilder.setMasonry()
        }), vc_carouselBehaviour(ui.newPanel), vc_plugin_flexslider(ui.newPanel), $pie_charts.length && jQuery.fn.vcChat && $pie_charts.vcChat(), $round_charts.length && jQuery.fn.vcRoundChart && $round_charts.vcRoundChart({
            reload: !1
        }), $line_charts.length && jQuery.fn.vcLineChart && $line_charts.vcLineChart({
            reload: !1
        }), $carousel.length && jQuery.fn.carousel && $carousel.carousel("resizeAction"), ui.newPanel.parents(".isotope").length && ui.newPanel.parents(".isotope").each(function() {
            jQuery(this).isotope("layout")
        })
    }
}

function initVideoBackgrounds() {
    return window.console && window.console.warn && window.console.warn("this function is deprecated use vc_initVideoBackgrounds"), vc_initVideoBackgrounds()
}

function vc_initVideoBackgrounds() {
    jQuery("[data-vc-video-bg]").each(function() {
        var youtubeId, $element = jQuery(this);
        $element.data("vcVideoBg") ? ((youtubeId = vcExtractYoutubeId($element.data("vcVideoBg"))) && ($element.find(".vc_video-bg").remove(), insertYoutubeVideoAsBackground($element, youtubeId)), jQuery(window).on("grid:items:added", function(event, $grid) {
            $element.has($grid).length && vcResizeVideoBackground($element)
        })) : $element.find(".vc_video-bg").remove()
    })
}

function insertYoutubeVideoAsBackground($element, youtubeId, counter) {
    if ("undefined" == typeof YT || void 0 === YT.Player) return 100 < (counter = void 0 === counter ? 0 : counter) ? void console.warn("Too many attempts to load YouTube api") : void setTimeout(function() {
        insertYoutubeVideoAsBackground($element, youtubeId, counter++)
    }, 100);
    var $container = $element.prepend('<div class="vc_video-bg vc_hidden-xs"><div class="inner"></div></div>').find(".inner");
    new YT.Player($container[0], {
        width: "100%",
        height: "100%",
        videoId: youtubeId,
        playerVars: {
            playlist: youtubeId,
            iv_load_policy: 3,
            enablejsapi: 1,
            disablekb: 1,
            autoplay: 1,
            controls: 0,
            showinfo: 0,
            rel: 0,
            loop: 1,
            wmode: "transparent"
        },
        events: {
            onReady: function(event) {
                event.target.mute().setLoop(!0)
            }
        }
    }), vcResizeVideoBackground($element), jQuery(window).bind("resize", function() {
        vcResizeVideoBackground($element)
    })
}

function vcResizeVideoBackground($element) {
    var iframeW, iframeH, marginLeft, marginTop, containerW = $element.innerWidth(),
        containerH = $element.innerHeight();
    containerW / containerH < 16 / 9 ? (iframeW = containerH * (16 / 9), iframeH = containerH, marginLeft = -Math.round((iframeW - containerW) / 2) + "px", marginTop = -Math.round((iframeH - containerH) / 2) + "px") : (iframeH = (iframeW = containerW) * (9 / 16), marginTop = -Math.round((iframeH - containerH) / 2) + "px", marginLeft = -Math.round((iframeW - containerW) / 2) + "px"), iframeW += "px", iframeH += "px", $element.find(".vc_video-bg iframe").css({
        maxWidth: "1000%",
        marginLeft: marginLeft,
        marginTop: marginTop,
        width: iframeW,
        height: iframeH
    })
}

function vcExtractYoutubeId(url) {
    if (void 0 === url) return !1;
    var id = url.match(/(?:https?:\/{2})?(?:w{3}\.)?youtu(?:be)?\.(?:com|be)(?:\/watch\?v=|\/)([^\s&]+)/);
    return null !== id && id[1]
}
if ("function" != typeof window.wpb_prepare_tab_content && (window.wpb_prepare_tab_content = function(event, ui) {
        var $ui_panel, $google_maps, panel = ui.panel || ui.newPanel,
            $pie_charts = panel.find(".vc_pie_chart:not(.vc_ready)"),
            $round_charts = panel.find(".vc_round-chart"),
            $line_charts = panel.find(".vc_line-chart"),
            $carousel = panel.find('[data-ride="vc_carousel"]');
        if (vc_carouselBehaviour(), vc_plugin_flexslider(panel), ui.newPanel.find(".vc_masonry_media_grid, .vc_masonry_grid").length && ui.newPanel.find(".vc_masonry_media_grid, .vc_masonry_grid").each(function() {
                var grid = jQuery(this).data("vcGrid");
                grid && grid.gridBuilder && grid.gridBuilder.setMasonry && grid.gridBuilder.setMasonry()
            }), panel.find(".vc_masonry_media_grid, .vc_masonry_grid").length && panel.find(".vc_masonry_media_grid, .vc_masonry_grid").each(function() {
                var grid = jQuery(this).data("vcGrid");
                grid && grid.gridBuilder && grid.gridBuilder.setMasonry && grid.gridBuilder.setMasonry()
            }), $pie_charts.length && jQuery.fn.vcChat && $pie_charts.vcChat(), $round_charts.length && jQuery.fn.vcRoundChart && $round_charts.vcRoundChart({
                reload: !1
            }), $line_charts.length && jQuery.fn.vcLineChart && $line_charts.vcLineChart({
                reload: !1
            }), $carousel.length && jQuery.fn.carousel && $carousel.carousel("resizeAction"), $ui_panel = panel.find(".isotope, .wpb_image_grid_ul"), $google_maps = panel.find(".wpb_gmaps_widget"), 0 < $ui_panel.length && $ui_panel.isotope("layout"), $google_maps.length && !$google_maps.is(".map_ready")) {
            var $frame = $google_maps.find("iframe");
            $frame.attr("src", $frame.attr("src")), $google_maps.addClass("map_ready")
        }
        panel.parents(".isotope").length && panel.parents(".isotope").each(function() {
            jQuery(this).isotope("layout")
        })
    }), "function" != typeof window.vc_googleMapsPointer)

function vc_googleMapsPointer() {
    var $ = window.jQuery,
        $wpbGmapsWidget = $(".wpb_gmaps_widget");
    $wpbGmapsWidget.click(function() {
        $("iframe", this).css("pointer-events", "auto")
    }), $wpbGmapsWidget.mouseleave(function() {
        $("iframe", this).css("pointer-events", "none")
    }), $(".wpb_gmaps_widget iframe").css("pointer-events", "none")
}

function vc_setHoverBoxPerspective(hoverBox) {
    hoverBox.each(function() {
        var $this = jQuery(this),
            perspective = 4 * $this.width() + "px";
        $this.css("perspective", perspective)
    })
}

function vc_setHoverBoxHeight(hoverBox) {
    hoverBox.each(function() {
        var $this = jQuery(this),
            hoverBoxInner = $this.find(".vc-hoverbox-inner");
        hoverBoxInner.css("min-height", 0);
        var frontHeight = $this.find(".vc-hoverbox-front-inner").outerHeight(),
            backHeight = $this.find(".vc-hoverbox-back-inner").outerHeight(),
            hoverBoxHeight = backHeight < frontHeight ? frontHeight : backHeight;
        hoverBoxHeight < 250 && (hoverBoxHeight = 250), hoverBoxInner.css("min-height", hoverBoxHeight + "px")
    })
}

function vc_prepareHoverBox() {
    var hoverBox = jQuery(".vc-hoverbox");
    vc_setHoverBoxHeight(hoverBox), vc_setHoverBoxPerspective(hoverBox)
}
jQuery(document).ready(vc_prepareHoverBox), jQuery(window).resize(vc_prepareHoverBox), jQuery(document).ready(function($) {
    window.vc_js()
});